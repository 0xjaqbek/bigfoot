var km=Object.defineProperty;var Nh=r=>{throw TypeError(r)};var Rm=(r,t,e)=>t in r?km(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var W=(r,t,e)=>Rm(r,typeof t!="symbol"?t+"":t,e),rl=(r,t,e)=>t.has(r)||Nh("Cannot "+e);var A=(r,t,e)=>(rl(r,t,"read from private field"),e?e.call(r):t.get(r)),X=(r,t,e)=>t.has(r)?Nh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),M=(r,t,e,n)=>(rl(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),at=(r,t,e)=>(rl(r,t,"access private method"),e);var na=(r,t,e,n)=>({set _(s){M(r,t,s,e)},get _(){return A(r,t,n)}});import{g as Ff,a as fu}from"./vendor-DrD-X_hS.js";var sl={},ra={},Ch;function Nm(){if(Ch)return ra;Ch=1,ra.byteLength=a,ra.toByteArray=f,ra.fromByteArray=E;for(var r=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],t[n.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(b){var N=b.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=b.indexOf("=");x===-1&&(x=N);var S=x===N?0:4-x%4;return[x,S]}function a(b){var N=o(b),x=N[0],S=N[1];return(x+S)*3/4-S}function c(b,N,x){return(N+x)*3/4-x}function f(b){var N,x=o(b),S=x[0],_=x[1],V=new e(c(b,S,_)),z=0,rt=_>0?S-4:S,K;for(K=0;K<rt;K+=4)N=t[b.charCodeAt(K)]<<18|t[b.charCodeAt(K+1)]<<12|t[b.charCodeAt(K+2)]<<6|t[b.charCodeAt(K+3)],V[z++]=N>>16&255,V[z++]=N>>8&255,V[z++]=N&255;return _===2&&(N=t[b.charCodeAt(K)]<<2|t[b.charCodeAt(K+1)]>>4,V[z++]=N&255),_===1&&(N=t[b.charCodeAt(K)]<<10|t[b.charCodeAt(K+1)]<<4|t[b.charCodeAt(K+2)]>>2,V[z++]=N>>8&255,V[z++]=N&255),V}function h(b){return r[b>>18&63]+r[b>>12&63]+r[b>>6&63]+r[b&63]}function y(b,N,x){for(var S,_=[],V=N;V<x;V+=3)S=(b[V]<<16&16711680)+(b[V+1]<<8&65280)+(b[V+2]&255),_.push(h(S));return _.join("")}function E(b){for(var N,x=b.length,S=x%3,_=[],V=16383,z=0,rt=x-S;z<rt;z+=V)_.push(y(b,z,z+V>rt?rt:z+V));return S===1?(N=b[x-1],_.push(r[N>>2]+r[N<<4&63]+"==")):S===2&&(N=(b[x-2]<<8)+b[x-1],_.push(r[N>>10]+r[N>>4&63]+r[N<<2&63]+"=")),_.join("")}return ra}var rc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ph;function Cm(){return Ph||(Ph=1,rc.read=function(r,t,e,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,f=c>>1,h=-7,y=e?s-1:0,E=e?-1:1,b=r[t+y];for(y+=E,i=b&(1<<-h)-1,b>>=-h,h+=a;h>0;i=i*256+r[t+y],y+=E,h-=8);for(o=i&(1<<-h)-1,i>>=-h,h+=n;h>0;o=o*256+r[t+y],y+=E,h-=8);if(i===0)i=1-f;else{if(i===c)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-f}return(b?-1:1)*o*Math.pow(2,i-n)},rc.write=function(r,t,e,n,s,i){var o,a,c,f=i*8-s-1,h=(1<<f)-1,y=h>>1,E=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:i-1,N=n?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+y>=1?t+=E/c:t+=E*Math.pow(2,1-y),t*c>=2&&(o++,c/=2),o+y>=h?(a=0,o=h):o+y>=1?(a=(t*c-1)*Math.pow(2,s),o=o+y):(a=t*Math.pow(2,y-1)*Math.pow(2,s),o=0));s>=8;r[e+b]=a&255,b+=N,a/=256,s-=8);for(o=o<<s|a,f+=s;f>0;r[e+b]=o&255,b+=N,o/=256,f-=8);r[e+b-N]|=x*128}),rc}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Th;function Df(){return Th||(Th=1,function(r){const t=Nm(),e=Cm(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=V,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const B=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(B,g),B.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(B){if(B>s)throw new RangeError('The value "'+B+'" is invalid for option "size"');const g=new Uint8Array(B);return Object.setPrototypeOf(g,a.prototype),g}function a(B,g,m){if(typeof B=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(B)}return c(B,g,m)}a.poolSize=8192;function c(B,g,m){if(typeof B=="string")return E(B,g);if(ArrayBuffer.isView(B))return N(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(yn(B,ArrayBuffer)||B&&yn(B.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(yn(B,SharedArrayBuffer)||B&&yn(B.buffer,SharedArrayBuffer)))return x(B,g,m);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const P=B.valueOf&&B.valueOf();if(P!=null&&P!==B)return a.from(P,g,m);const Q=S(B);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return a.from(B[Symbol.toPrimitive]("string"),g,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}a.from=function(B,g,m){return c(B,g,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function f(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function h(B,g,m){return f(B),B<=0?o(B):g!==void 0?typeof m=="string"?o(B).fill(g,m):o(B).fill(g):o(B)}a.alloc=function(B,g,m){return h(B,g,m)};function y(B){return f(B),o(B<0?0:_(B)|0)}a.allocUnsafe=function(B){return y(B)},a.allocUnsafeSlow=function(B){return y(B)};function E(B,g){if((typeof g!="string"||g==="")&&(g="utf8"),!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const m=z(B,g)|0;let P=o(m);const Q=P.write(B,g);return Q!==m&&(P=P.slice(0,Q)),P}function b(B){const g=B.length<0?0:_(B.length)|0,m=o(g);for(let P=0;P<g;P+=1)m[P]=B[P]&255;return m}function N(B){if(yn(B,Uint8Array)){const g=new Uint8Array(B);return x(g.buffer,g.byteOffset,g.byteLength)}return b(B)}function x(B,g,m){if(g<0||B.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<g+(m||0))throw new RangeError('"length" is outside of buffer bounds');let P;return g===void 0&&m===void 0?P=new Uint8Array(B):m===void 0?P=new Uint8Array(B,g):P=new Uint8Array(B,g,m),Object.setPrototypeOf(P,a.prototype),P}function S(B){if(a.isBuffer(B)){const g=_(B.length)|0,m=o(g);return m.length===0||B.copy(m,0,0,g),m}if(B.length!==void 0)return typeof B.length!="number"||jt(B.length)?o(0):b(B);if(B.type==="Buffer"&&Array.isArray(B.data))return b(B.data)}function _(B){if(B>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return B|0}function V(B){return+B!=B&&(B=0),a.alloc(+B)}a.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},a.compare=function(g,m){if(yn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),yn(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(g)||!a.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===m)return 0;let P=g.length,Q=m.length;for(let J=0,tt=Math.min(P,Q);J<tt;++J)if(g[J]!==m[J]){P=g[J],Q=m[J];break}return P<Q?-1:Q<P?1:0},a.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(g,m){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let P;if(m===void 0)for(m=0,P=0;P<g.length;++P)m+=g[P].length;const Q=a.allocUnsafe(m);let J=0;for(P=0;P<g.length;++P){let tt=g[P];if(yn(tt,Uint8Array))J+tt.length>Q.length?(a.isBuffer(tt)||(tt=a.from(tt)),tt.copy(Q,J)):Uint8Array.prototype.set.call(Q,tt,J);else if(a.isBuffer(tt))tt.copy(Q,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=tt.length}return Q};function z(B,g){if(a.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||yn(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const m=B.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&m===0)return 0;let Q=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Jt(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return Yt(B).length;default:if(Q)return P?-1:Jt(B).length;g=(""+g).toLowerCase(),Q=!0}}a.byteLength=z;function rt(B,g,m){let P=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,g>>>=0,m<=g))return"";for(B||(B="utf8");;)switch(B){case"hex":return F(this,g,m);case"utf8":case"utf-8":return u(this,g,m);case"ascii":return k(this,g,m);case"latin1":case"binary":return C(this,g,m);case"base64":return v(this,g,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,g,m);default:if(P)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),P=!0}}a.prototype._isBuffer=!0;function K(B,g,m){const P=B[g];B[g]=B[m],B[m]=P}a.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<g;m+=2)K(this,m,m+1);return this},a.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<g;m+=4)K(this,m,m+3),K(this,m+1,m+2);return this},a.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<g;m+=8)K(this,m,m+7),K(this,m+1,m+6),K(this,m+2,m+5),K(this,m+3,m+4);return this},a.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?u(this,0,g):rt.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},a.prototype.inspect=function(){let g="";const m=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(g+=" ... "),"<Buffer "+g+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(g,m,P,Q,J){if(yn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(m===void 0&&(m=0),P===void 0&&(P=g?g.length:0),Q===void 0&&(Q=0),J===void 0&&(J=this.length),m<0||P>g.length||Q<0||J>this.length)throw new RangeError("out of range index");if(Q>=J&&m>=P)return 0;if(Q>=J)return-1;if(m>=P)return 1;if(m>>>=0,P>>>=0,Q>>>=0,J>>>=0,this===g)return 0;let tt=J-Q,Bt=P-m;const vt=Math.min(tt,Bt),Et=this.slice(Q,J),$t=g.slice(m,P);for(let At=0;At<vt;++At)if(Et[At]!==$t[At]){tt=Et[At],Bt=$t[At];break}return tt<Bt?-1:Bt<tt?1:0};function Y(B,g,m,P,Q){if(B.length===0)return-1;if(typeof m=="string"?(P=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,jt(m)&&(m=Q?0:B.length-1),m<0&&(m=B.length+m),m>=B.length){if(Q)return-1;m=B.length-1}else if(m<0)if(Q)m=0;else return-1;if(typeof g=="string"&&(g=a.from(g,P)),a.isBuffer(g))return g.length===0?-1:st(B,g,m,P,Q);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(B,g,m):Uint8Array.prototype.lastIndexOf.call(B,g,m):st(B,[g],m,P,Q);throw new TypeError("val must be string, number or Buffer")}function st(B,g,m,P,Q){let J=1,tt=B.length,Bt=g.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(B.length<2||g.length<2)return-1;J=2,tt/=2,Bt/=2,m/=2}function vt($t,At){return J===1?$t[At]:$t.readUInt16BE(At*J)}let Et;if(Q){let $t=-1;for(Et=m;Et<tt;Et++)if(vt(B,Et)===vt(g,$t===-1?0:Et-$t)){if($t===-1&&($t=Et),Et-$t+1===Bt)return $t*J}else $t!==-1&&(Et-=Et-$t),$t=-1}else for(m+Bt>tt&&(m=tt-Bt),Et=m;Et>=0;Et--){let $t=!0;for(let At=0;At<Bt;At++)if(vt(B,Et+At)!==vt(g,At)){$t=!1;break}if($t)return Et}return-1}a.prototype.includes=function(g,m,P){return this.indexOf(g,m,P)!==-1},a.prototype.indexOf=function(g,m,P){return Y(this,g,m,P,!0)},a.prototype.lastIndexOf=function(g,m,P){return Y(this,g,m,P,!1)};function et(B,g,m,P){m=Number(m)||0;const Q=B.length-m;P?(P=Number(P),P>Q&&(P=Q)):P=Q;const J=g.length;P>J/2&&(P=J/2);let tt;for(tt=0;tt<P;++tt){const Bt=parseInt(g.substr(tt*2,2),16);if(jt(Bt))return tt;B[m+tt]=Bt}return tt}function U(B,g,m,P){return Wt(Jt(g,B.length-m),B,m,P)}function O(B,g,m,P){return Wt(ne(g),B,m,P)}function L(B,g,m,P){return Wt(Yt(g),B,m,P)}function G(B,g,m,P){return Wt(nc(g,B.length-m),B,m,P)}a.prototype.write=function(g,m,P,Q){if(m===void 0)Q="utf8",P=this.length,m=0;else if(P===void 0&&typeof m=="string")Q=m,P=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(P)?(P=P>>>0,Q===void 0&&(Q="utf8")):(Q=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const J=this.length-m;if((P===void 0||P>J)&&(P=J),g.length>0&&(P<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let tt=!1;for(;;)switch(Q){case"hex":return et(this,g,m,P);case"utf8":case"utf-8":return U(this,g,m,P);case"ascii":case"latin1":case"binary":return O(this,g,m,P);case"base64":return L(this,g,m,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,g,m,P);default:if(tt)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),tt=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function v(B,g,m){return g===0&&m===B.length?t.fromByteArray(B):t.fromByteArray(B.slice(g,m))}function u(B,g,m){m=Math.min(B.length,m);const P=[];let Q=g;for(;Q<m;){const J=B[Q];let tt=null,Bt=J>239?4:J>223?3:J>191?2:1;if(Q+Bt<=m){let vt,Et,$t,At;switch(Bt){case 1:J<128&&(tt=J);break;case 2:vt=B[Q+1],(vt&192)===128&&(At=(J&31)<<6|vt&63,At>127&&(tt=At));break;case 3:vt=B[Q+1],Et=B[Q+2],(vt&192)===128&&(Et&192)===128&&(At=(J&15)<<12|(vt&63)<<6|Et&63,At>2047&&(At<55296||At>57343)&&(tt=At));break;case 4:vt=B[Q+1],Et=B[Q+2],$t=B[Q+3],(vt&192)===128&&(Et&192)===128&&($t&192)===128&&(At=(J&15)<<18|(vt&63)<<12|(Et&63)<<6|$t&63,At>65535&&At<1114112&&(tt=At))}}tt===null?(tt=65533,Bt=1):tt>65535&&(tt-=65536,P.push(tt>>>10&1023|55296),tt=56320|tt&1023),P.push(tt),Q+=Bt}return w(P)}const p=4096;function w(B){const g=B.length;if(g<=p)return String.fromCharCode.apply(String,B);let m="",P=0;for(;P<g;)m+=String.fromCharCode.apply(String,B.slice(P,P+=p));return m}function k(B,g,m){let P="";m=Math.min(B.length,m);for(let Q=g;Q<m;++Q)P+=String.fromCharCode(B[Q]&127);return P}function C(B,g,m){let P="";m=Math.min(B.length,m);for(let Q=g;Q<m;++Q)P+=String.fromCharCode(B[Q]);return P}function F(B,g,m){const P=B.length;(!g||g<0)&&(g=0),(!m||m<0||m>P)&&(m=P);let Q="";for(let J=g;J<m;++J)Q+=re[B[J]];return Q}function H(B,g,m){const P=B.slice(g,m);let Q="";for(let J=0;J<P.length-1;J+=2)Q+=String.fromCharCode(P[J]+P[J+1]*256);return Q}a.prototype.slice=function(g,m){const P=this.length;g=~~g,m=m===void 0?P:~~m,g<0?(g+=P,g<0&&(g=0)):g>P&&(g=P),m<0?(m+=P,m<0&&(m=0)):m>P&&(m=P),m<g&&(m=g);const Q=this.subarray(g,m);return Object.setPrototypeOf(Q,a.prototype),Q};function R(B,g,m){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+g>m)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(g,m,P){g=g>>>0,m=m>>>0,P||R(g,m,this.length);let Q=this[g],J=1,tt=0;for(;++tt<m&&(J*=256);)Q+=this[g+tt]*J;return Q},a.prototype.readUintBE=a.prototype.readUIntBE=function(g,m,P){g=g>>>0,m=m>>>0,P||R(g,m,this.length);let Q=this[g+--m],J=1;for(;m>0&&(J*=256);)Q+=this[g+--m]*J;return Q},a.prototype.readUint8=a.prototype.readUInt8=function(g,m){return g=g>>>0,m||R(g,1,this.length),this[g]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(g,m){return g=g>>>0,m||R(g,2,this.length),this[g]|this[g+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(g,m){return g=g>>>0,m||R(g,2,this.length),this[g]<<8|this[g+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(g,m){return g=g>>>0,m||R(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(g,m){return g=g>>>0,m||R(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},a.prototype.readBigUInt64LE=Un(function(g){g=g>>>0,ce(g,"offset");const m=this[g],P=this[g+7];(m===void 0||P===void 0)&&Ot(g,this.length-8);const Q=m+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,J=this[++g]+this[++g]*2**8+this[++g]*2**16+P*2**24;return BigInt(Q)+(BigInt(J)<<BigInt(32))}),a.prototype.readBigUInt64BE=Un(function(g){g=g>>>0,ce(g,"offset");const m=this[g],P=this[g+7];(m===void 0||P===void 0)&&Ot(g,this.length-8);const Q=m*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],J=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+P;return(BigInt(Q)<<BigInt(32))+BigInt(J)}),a.prototype.readIntLE=function(g,m,P){g=g>>>0,m=m>>>0,P||R(g,m,this.length);let Q=this[g],J=1,tt=0;for(;++tt<m&&(J*=256);)Q+=this[g+tt]*J;return J*=128,Q>=J&&(Q-=Math.pow(2,8*m)),Q},a.prototype.readIntBE=function(g,m,P){g=g>>>0,m=m>>>0,P||R(g,m,this.length);let Q=m,J=1,tt=this[g+--Q];for(;Q>0&&(J*=256);)tt+=this[g+--Q]*J;return J*=128,tt>=J&&(tt-=Math.pow(2,8*m)),tt},a.prototype.readInt8=function(g,m){return g=g>>>0,m||R(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},a.prototype.readInt16LE=function(g,m){g=g>>>0,m||R(g,2,this.length);const P=this[g]|this[g+1]<<8;return P&32768?P|4294901760:P},a.prototype.readInt16BE=function(g,m){g=g>>>0,m||R(g,2,this.length);const P=this[g+1]|this[g]<<8;return P&32768?P|4294901760:P},a.prototype.readInt32LE=function(g,m){return g=g>>>0,m||R(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},a.prototype.readInt32BE=function(g,m){return g=g>>>0,m||R(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},a.prototype.readBigInt64LE=Un(function(g){g=g>>>0,ce(g,"offset");const m=this[g],P=this[g+7];(m===void 0||P===void 0)&&Ot(g,this.length-8);const Q=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(P<<24);return(BigInt(Q)<<BigInt(32))+BigInt(m+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),a.prototype.readBigInt64BE=Un(function(g){g=g>>>0,ce(g,"offset");const m=this[g],P=this[g+7];(m===void 0||P===void 0)&&Ot(g,this.length-8);const Q=(m<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(Q)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+P)}),a.prototype.readFloatLE=function(g,m){return g=g>>>0,m||R(g,4,this.length),e.read(this,g,!0,23,4)},a.prototype.readFloatBE=function(g,m){return g=g>>>0,m||R(g,4,this.length),e.read(this,g,!1,23,4)},a.prototype.readDoubleLE=function(g,m){return g=g>>>0,m||R(g,8,this.length),e.read(this,g,!0,52,8)},a.prototype.readDoubleBE=function(g,m){return g=g>>>0,m||R(g,8,this.length),e.read(this,g,!1,52,8)};function l(B,g,m,P,Q,J){if(!a.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>Q||g<J)throw new RangeError('"value" argument is out of bounds');if(m+P>B.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(g,m,P,Q){if(g=+g,m=m>>>0,P=P>>>0,!Q){const Bt=Math.pow(2,8*P)-1;l(this,g,m,P,Bt,0)}let J=1,tt=0;for(this[m]=g&255;++tt<P&&(J*=256);)this[m+tt]=g/J&255;return m+P},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(g,m,P,Q){if(g=+g,m=m>>>0,P=P>>>0,!Q){const Bt=Math.pow(2,8*P)-1;l(this,g,m,P,Bt,0)}let J=P-1,tt=1;for(this[m+J]=g&255;--J>=0&&(tt*=256);)this[m+J]=g/tt&255;return m+P},a.prototype.writeUint8=a.prototype.writeUInt8=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,1,255,0),this[m]=g&255,m+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,2,65535,0),this[m]=g&255,this[m+1]=g>>>8,m+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,2,65535,0),this[m]=g>>>8,this[m+1]=g&255,m+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,4,4294967295,0),this[m+3]=g>>>24,this[m+2]=g>>>16,this[m+1]=g>>>8,this[m]=g&255,m+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,4,4294967295,0),this[m]=g>>>24,this[m+1]=g>>>16,this[m+2]=g>>>8,this[m+3]=g&255,m+4};function d(B,g,m,P,Q){Ut(g,P,Q,B,m,7);let J=Number(g&BigInt(4294967295));B[m++]=J,J=J>>8,B[m++]=J,J=J>>8,B[m++]=J,J=J>>8,B[m++]=J;let tt=Number(g>>BigInt(32)&BigInt(4294967295));return B[m++]=tt,tt=tt>>8,B[m++]=tt,tt=tt>>8,B[m++]=tt,tt=tt>>8,B[m++]=tt,m}function I(B,g,m,P,Q){Ut(g,P,Q,B,m,7);let J=Number(g&BigInt(4294967295));B[m+7]=J,J=J>>8,B[m+6]=J,J=J>>8,B[m+5]=J,J=J>>8,B[m+4]=J;let tt=Number(g>>BigInt(32)&BigInt(4294967295));return B[m+3]=tt,tt=tt>>8,B[m+2]=tt,tt=tt>>8,B[m+1]=tt,tt=tt>>8,B[m]=tt,m+8}a.prototype.writeBigUInt64LE=Un(function(g,m=0){return d(this,g,m,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Un(function(g,m=0){return I(this,g,m,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(g,m,P,Q){if(g=+g,m=m>>>0,!Q){const vt=Math.pow(2,8*P-1);l(this,g,m,P,vt-1,-vt)}let J=0,tt=1,Bt=0;for(this[m]=g&255;++J<P&&(tt*=256);)g<0&&Bt===0&&this[m+J-1]!==0&&(Bt=1),this[m+J]=(g/tt>>0)-Bt&255;return m+P},a.prototype.writeIntBE=function(g,m,P,Q){if(g=+g,m=m>>>0,!Q){const vt=Math.pow(2,8*P-1);l(this,g,m,P,vt-1,-vt)}let J=P-1,tt=1,Bt=0;for(this[m+J]=g&255;--J>=0&&(tt*=256);)g<0&&Bt===0&&this[m+J+1]!==0&&(Bt=1),this[m+J]=(g/tt>>0)-Bt&255;return m+P},a.prototype.writeInt8=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,1,127,-128),g<0&&(g=255+g+1),this[m]=g&255,m+1},a.prototype.writeInt16LE=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,2,32767,-32768),this[m]=g&255,this[m+1]=g>>>8,m+2},a.prototype.writeInt16BE=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,2,32767,-32768),this[m]=g>>>8,this[m+1]=g&255,m+2},a.prototype.writeInt32LE=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,4,2147483647,-2147483648),this[m]=g&255,this[m+1]=g>>>8,this[m+2]=g>>>16,this[m+3]=g>>>24,m+4},a.prototype.writeInt32BE=function(g,m,P){return g=+g,m=m>>>0,P||l(this,g,m,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[m]=g>>>24,this[m+1]=g>>>16,this[m+2]=g>>>8,this[m+3]=g&255,m+4},a.prototype.writeBigInt64LE=Un(function(g,m=0){return d(this,g,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Un(function(g,m=0){return I(this,g,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function T(B,g,m,P,Q,J){if(m+P>B.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function $(B,g,m,P,Q){return g=+g,m=m>>>0,Q||T(B,g,m,4),e.write(B,g,m,P,23,4),m+4}a.prototype.writeFloatLE=function(g,m,P){return $(this,g,m,!0,P)},a.prototype.writeFloatBE=function(g,m,P){return $(this,g,m,!1,P)};function nt(B,g,m,P,Q){return g=+g,m=m>>>0,Q||T(B,g,m,8),e.write(B,g,m,P,52,8),m+8}a.prototype.writeDoubleLE=function(g,m,P){return nt(this,g,m,!0,P)},a.prototype.writeDoubleBE=function(g,m,P){return nt(this,g,m,!1,P)},a.prototype.copy=function(g,m,P,Q){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(P||(P=0),!Q&&Q!==0&&(Q=this.length),m>=g.length&&(m=g.length),m||(m=0),Q>0&&Q<P&&(Q=P),Q===P||g.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),g.length-m<Q-P&&(Q=g.length-m+P);const J=Q-P;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,P,Q):Uint8Array.prototype.set.call(g,this.subarray(P,Q),m),J},a.prototype.fill=function(g,m,P,Q){if(typeof g=="string"){if(typeof m=="string"?(Q=m,m=0,P=this.length):typeof P=="string"&&(Q=P,P=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!a.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(g.length===1){const tt=g.charCodeAt(0);(Q==="utf8"&&tt<128||Q==="latin1")&&(g=tt)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(m<0||this.length<m||this.length<P)throw new RangeError("Out of range index");if(P<=m)return this;m=m>>>0,P=P===void 0?this.length:P>>>0,g||(g=0);let J;if(typeof g=="number")for(J=m;J<P;++J)this[J]=g;else{const tt=a.isBuffer(g)?g:a.from(g,Q),Bt=tt.length;if(Bt===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(J=0;J<P-m;++J)this[J+m]=tt[J%Bt]}return this};const ft={};function mt(B,g,m){ft[B]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}mt("ERR_BUFFER_OUT_OF_BOUNDS",function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),mt("ERR_INVALID_ARG_TYPE",function(B,g){return`The "${B}" argument must be of type number. Received type ${typeof g}`},TypeError),mt("ERR_OUT_OF_RANGE",function(B,g,m){let P=`The value of "${B}" is out of range.`,Q=m;return Number.isInteger(m)&&Math.abs(m)>2**32?Q=qt(String(m)):typeof m=="bigint"&&(Q=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(Q=qt(Q)),Q+="n"),P+=` It must be ${g}. Received ${Q}`,P},RangeError);function qt(B){let g="",m=B.length;const P=B[0]==="-"?1:0;for(;m>=P+4;m-=3)g=`_${B.slice(m-3,m)}${g}`;return`${B.slice(0,m)}${g}`}function Tt(B,g,m){ce(g,"offset"),(B[g]===void 0||B[g+m]===void 0)&&Ot(g,B.length-(m+1))}function Ut(B,g,m,P,Q,J){if(B>m||B<g){const tt=typeof g=="bigint"?"n":"";let Bt;throw g===0||g===BigInt(0)?Bt=`>= 0${tt} and < 2${tt} ** ${(J+1)*8}${tt}`:Bt=`>= -(2${tt} ** ${(J+1)*8-1}${tt}) and < 2 ** ${(J+1)*8-1}${tt}`,new ft.ERR_OUT_OF_RANGE("value",Bt,B)}Tt(P,Q,J)}function ce(B,g){if(typeof B!="number")throw new ft.ERR_INVALID_ARG_TYPE(g,"number",B)}function Ot(B,g,m){throw Math.floor(B)!==B?(ce(B,m),new ft.ERR_OUT_OF_RANGE("offset","an integer",B)):g<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,B)}const Qt=/[^+/0-9A-Za-z-_]/g;function Ns(B){if(B=B.split("=")[0],B=B.trim().replace(Qt,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function Jt(B,g){g=g||1/0;let m;const P=B.length;let Q=null;const J=[];for(let tt=0;tt<P;++tt){if(m=B.charCodeAt(tt),m>55295&&m<57344){if(!Q){if(m>56319){(g-=3)>-1&&J.push(239,191,189);continue}else if(tt+1===P){(g-=3)>-1&&J.push(239,191,189);continue}Q=m;continue}if(m<56320){(g-=3)>-1&&J.push(239,191,189),Q=m;continue}m=(Q-55296<<10|m-56320)+65536}else Q&&(g-=3)>-1&&J.push(239,191,189);if(Q=null,m<128){if((g-=1)<0)break;J.push(m)}else if(m<2048){if((g-=2)<0)break;J.push(m>>6|192,m&63|128)}else if(m<65536){if((g-=3)<0)break;J.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((g-=4)<0)break;J.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return J}function ne(B){const g=[];for(let m=0;m<B.length;++m)g.push(B.charCodeAt(m)&255);return g}function nc(B,g){let m,P,Q;const J=[];for(let tt=0;tt<B.length&&!((g-=2)<0);++tt)m=B.charCodeAt(tt),P=m>>8,Q=m%256,J.push(Q),J.push(P);return J}function Yt(B){return t.toByteArray(Ns(B))}function Wt(B,g,m,P){let Q;for(Q=0;Q<P&&!(Q+m>=g.length||Q>=B.length);++Q)g[Q+m]=B[Q];return Q}function yn(B,g){return B instanceof g||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===g.name}function jt(B){return B!==B}const re=function(){const B="0123456789abcdef",g=new Array(256);for(let m=0;m<16;++m){const P=m*16;for(let Q=0;Q<16;++Q)g[P+Q]=B[m]+B[Q]}return g}();function Un(B){return typeof BigInt>"u"?se:B}function se(){throw new Error("BigInt not supported")}}(sl)),sl}var kt=Df();const Bi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hf(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Ql(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function gr(r,...t){if(!Hf(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Pm(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ql(r.outputLen),Ql(r.blockLen)}function Mc(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Tm(r,t){gr(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Fo(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function il(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Xn(r,t){return r<<32-t|r>>>t}const T0=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Mm=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Do(r){if(gr(r),T0)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=Mm[r[e]];return t}const wr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Mh(r){if(r>=wr._0&&r<=wr._9)return r-wr._0;if(r>=wr.A&&r<=wr.F)return r-(wr.A-10);if(r>=wr.a&&r<=wr.f)return r-(wr.a-10)}function Gf(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(T0)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Mh(r.charCodeAt(i)),a=Mh(r.charCodeAt(i+1));if(o===void 0||a===void 0){const c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function _m(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function zf(r){return typeof r=="string"&&(r=_m(r)),gr(r),r}function Dr(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];gr(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}let M0=class{};function _0(r){const t=n=>r().update(zf(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function O0(r=32){if(Bi&&typeof Bi.getRandomValues=="function")return Bi.getRandomValues(new Uint8Array(r));if(Bi&&typeof Bi.randomBytes=="function")return Uint8Array.from(Bi.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Om(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),c=n?4:0,f=n?0:4;r.setUint32(t+c,o,n),r.setUint32(t+f,a,n)}function Lm(r,t,e){return r&t^~r&e}function Um(r,t,e){return r&t^r&e^t&e}class L0 extends M0{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=il(this.buffer)}update(t){Mc(this),t=zf(t),gr(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=il(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Mc(this),Tm(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Fo(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let y=o;y<s;y++)e[y]=0;Om(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=il(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<f;y++)a.setUint32(4*y,h[y],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=a,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Qr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),sc=BigInt(2**32-1),_h=BigInt(32);function Fm(r,t=!1){return t?{h:Number(r&sc),l:Number(r>>_h&sc)}:{h:Number(r>>_h&sc)|0,l:Number(r&sc)|0}}function Dm(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:a}=Fm(r[i],t);[n[i],s[i]]=[o,a]}return[n,s]}const Oh=(r,t,e)=>r>>>e,Lh=(r,t,e)=>r<<32-e|t>>>e,Si=(r,t,e)=>r>>>e|t<<32-e,Ii=(r,t,e)=>r<<32-e|t>>>e,ic=(r,t,e)=>r<<64-e|t>>>e-32,oc=(r,t,e)=>r>>>e-32|t<<64-e;function br(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Hm=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Gm=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,zm=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Km=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,Vm=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),qm=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Qm=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wr=new Uint32Array(64);let Wm=class extends L0{constructor(t=32){super(64,t,8,!1),this.A=Qr[0]|0,this.B=Qr[1]|0,this.C=Qr[2]|0,this.D=Qr[3]|0,this.E=Qr[4]|0,this.F=Qr[5]|0,this.G=Qr[6]|0,this.H=Qr[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,e,n,s,i,o,a,c]}set(t,e,n,s,i,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let y=0;y<16;y++,e+=4)Wr[y]=t.getUint32(e,!1);for(let y=16;y<64;y++){const E=Wr[y-15],b=Wr[y-2],N=Xn(E,7)^Xn(E,18)^E>>>3,x=Xn(b,17)^Xn(b,19)^b>>>10;Wr[y]=x+Wr[y-7]+N+Wr[y-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:f,H:h}=this;for(let y=0;y<64;y++){const E=Xn(a,6)^Xn(a,11)^Xn(a,25),b=h+E+Lm(a,c,f)+Qm[y]+Wr[y]|0,x=(Xn(n,2)^Xn(n,13)^Xn(n,22))+Um(n,s,i)|0;h=f,f=c,c=a,a=o+b|0,o=i,i=s,s=n,n=b+x|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,s,i,o,a,c,f,h)}roundClean(){Fo(Wr)}destroy(){this.set(0,0,0,0,0,0,0,0),Fo(this.buffer)}};const U0=Dm(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),$m=U0[0],Jm=U0[1],$r=new Uint32Array(80),Jr=new Uint32Array(80);let jm=class extends L0{constructor(t=64){super(128,t,16,!1),this.Ah=qe[0]|0,this.Al=qe[1]|0,this.Bh=qe[2]|0,this.Bl=qe[3]|0,this.Ch=qe[4]|0,this.Cl=qe[5]|0,this.Dh=qe[6]|0,this.Dl=qe[7]|0,this.Eh=qe[8]|0,this.El=qe[9]|0,this.Fh=qe[10]|0,this.Fl=qe[11]|0,this.Gh=qe[12]|0,this.Gl=qe[13]|0,this.Hh=qe[14]|0,this.Hl=qe[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:f,El:h,Fh:y,Fl:E,Gh:b,Gl:N,Hh:x,Hl:S}=this;return[t,e,n,s,i,o,a,c,f,h,y,E,b,N,x,S]}set(t,e,n,s,i,o,a,c,f,h,y,E,b,N,x,S){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=h|0,this.Fh=y|0,this.Fl=E|0,this.Gh=b|0,this.Gl=N|0,this.Hh=x|0,this.Hl=S|0}process(t,e){for(let z=0;z<16;z++,e+=4)$r[z]=t.getUint32(e),Jr[z]=t.getUint32(e+=4);for(let z=16;z<80;z++){const rt=$r[z-15]|0,K=Jr[z-15]|0,Y=Si(rt,K,1)^Si(rt,K,8)^Oh(rt,K,7),st=Ii(rt,K,1)^Ii(rt,K,8)^Lh(rt,K,7),et=$r[z-2]|0,U=Jr[z-2]|0,O=Si(et,U,19)^ic(et,U,61)^Oh(et,U,6),L=Ii(et,U,19)^oc(et,U,61)^Lh(et,U,6),G=zm(st,L,Jr[z-7],Jr[z-16]),v=Km(G,Y,O,$r[z-7],$r[z-16]);$r[z]=v|0,Jr[z]=G|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:f,Dl:h,Eh:y,El:E,Fh:b,Fl:N,Gh:x,Gl:S,Hh:_,Hl:V}=this;for(let z=0;z<80;z++){const rt=Si(y,E,14)^Si(y,E,18)^ic(y,E,41),K=Ii(y,E,14)^Ii(y,E,18)^oc(y,E,41),Y=y&b^~y&x,st=E&N^~E&S,et=Vm(V,K,st,Jm[z],Jr[z]),U=qm(et,_,rt,Y,$m[z],$r[z]),O=et|0,L=Si(n,s,28)^ic(n,s,34)^ic(n,s,39),G=Ii(n,s,28)^oc(n,s,34)^oc(n,s,39),v=n&i^n&a^i&a,u=s&o^s&c^o&c;_=x|0,V=S|0,x=b|0,S=N|0,b=y|0,N=E|0,{h:y,l:E}=br(f|0,h|0,U|0,O|0),f=a|0,h=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const p=Hm(O,G,u);n=Gm(p,U,L,v),s=p|0}({h:n,l:s}=br(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=br(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=br(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:h}=br(this.Dh|0,this.Dl|0,f|0,h|0),{h:y,l:E}=br(this.Eh|0,this.El|0,y|0,E|0),{h:b,l:N}=br(this.Fh|0,this.Fl|0,b|0,N|0),{h:x,l:S}=br(this.Gh|0,this.Gl|0,x|0,S|0),{h:_,l:V}=br(this.Hh|0,this.Hl|0,_|0,V|0),this.set(n,s,i,o,a,c,f,h,y,E,b,N,x,S,_,V)}roundClean(){Fo($r,Jr)}destroy(){Fo(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const F0=_0(()=>new Wm),Zm=_0(()=>new jm);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kf=BigInt(0),Wl=BigInt(1);function di(r,t){if(typeof t!="boolean")throw new Error(r+" boolean expected, got "+t)}function ac(r){const t=r.toString(16);return t.length&1?"0"+t:t}function D0(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Kf:BigInt("0x"+r)}function hu(r){return D0(Do(r))}function Aa(r){return gr(r),D0(Do(Uint8Array.from(r).reverse()))}function Vf(r,t){return Gf(r.toString(16).padStart(t*2,"0"))}function du(r,t){return Vf(r,t).reverse()}function le(r,t,e){let n;if(typeof t=="string")try{n=Gf(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Hf(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}const ol=r=>typeof r=="bigint"&&Kf<=r;function Ym(r,t,e){return ol(r)&&ol(t)&&ol(e)&&t<=r&&r<e}function Li(r,t,e,n){if(!Ym(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function Xm(r){let t;for(t=0;r>Kf;r>>=Wl,t+=1);return t}const pu=r=>(Wl<<BigInt(r))-Wl;function ty(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=b=>new Uint8Array(b),s=b=>Uint8Array.of(b);let i=n(r),o=n(r),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},f=(...b)=>e(o,i,...b),h=(b=n(0))=>{o=f(s(0),b),i=f(),b.length!==0&&(o=f(s(1),b),i=f())},y=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const N=[];for(;b<t;){i=f();const x=i.slice();N.push(x),b+=i.length}return Dr(...N)};return(b,N)=>{c(),h(b);let x;for(;!(x=N(y()));)h();return c(),x}}function qa(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const a=r[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(t).forEach(([s,i])=>n(s,i,!1)),Object.entries(e).forEach(([s,i])=>n(s,i,!0))}function _c(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pn=BigInt(0),Ke=BigInt(1),Ds=BigInt(2),ey=BigInt(3),H0=BigInt(4),G0=BigInt(5),z0=BigInt(8);function fe(r,t){const e=r%t;return e>=pn?e:t+e}function ie(r,t,e){let n=r;for(;t-- >pn;)n*=n,n%=e;return n}function Uh(r,t){if(r===pn)throw new Error("invert: expected non-zero number");if(t<=pn)throw new Error("invert: expected positive modulus, got "+t);let e=fe(r,t),n=t,s=pn,i=Ke;for(;e!==pn;){const a=n/e,c=n%e,f=s-i*a;n=e,e=c,s=i,i=f}if(n!==Ke)throw new Error("invert: does not exist");return fe(s,t)}function K0(r,t){const e=(r.ORDER+Ke)/H0,n=r.pow(t,e);if(!r.eql(r.sqr(n),t))throw new Error("Cannot find square root");return n}function ny(r,t){const e=(r.ORDER-G0)/z0,n=r.mul(t,Ds),s=r.pow(n,e),i=r.mul(t,s),o=r.mul(r.mul(i,Ds),s),a=r.mul(i,r.sub(o,r.ONE));if(!r.eql(r.sqr(a),t))throw new Error("Cannot find square root");return a}function ry(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let t=r-Ke,e=0;for(;t%Ds===pn;)t/=Ds,e++;let n=Ds;const s=Zo(r);for(;Fh(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return K0;let i=s.pow(n,t);const o=(t+Ke)/Ds;return function(c,f){if(c.is0(f))return f;if(Fh(c,f)!==1)throw new Error("Cannot find square root");let h=e,y=c.mul(c.ONE,i),E=c.pow(f,t),b=c.pow(f,o);for(;!c.eql(E,c.ONE);){if(c.is0(E))return c.ZERO;let N=1,x=c.sqr(E);for(;!c.eql(x,c.ONE);)if(N++,x=c.sqr(x),N===h)throw new Error("Cannot find square root");const S=Ke<<BigInt(h-N-1),_=c.pow(y,S);h=N,y=c.sqr(_),E=c.mul(E,y),b=c.mul(b,_)}return b}}function sy(r){return r%H0===ey?K0:r%z0===G0?ny:ry(r)}const iy=(r,t)=>(fe(r,t)&Ke)===Ke,oy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ay(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=oy.reduce((n,s)=>(n[s]="function",n),t);return qa(r,e),r}function cy(r,t,e){if(e<pn)throw new Error("invalid exponent, negatives unsupported");if(e===pn)return r.ONE;if(e===Ke)return t;let n=r.ONE,s=t;for(;e>pn;)e&Ke&&(n=r.mul(n,s)),s=r.sqr(s),e>>=Ke;return n}function V0(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((o,a,c)=>r.is0(a)?o:(n[c]=o,r.mul(o,a)),r.ONE),i=r.inv(s);return t.reduceRight((o,a,c)=>r.is0(a)?o:(n[c]=r.mul(o,n[c]),r.mul(o,a)),i),n}function Fh(r,t){const e=(r.ORDER-Ke)/Ds,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function uy(r,t){t!==void 0&&Ql(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Zo(r,t,e=!1,n={}){if(r<=pn)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const h=t;h.BITS&&(s=h.BITS),h.sqrt&&(i=h.sqrt),typeof h.isLE=="boolean"&&(e=h.isLE)}else typeof t=="number"&&(s=t),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:a}=uy(r,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const f=Object.freeze({ORDER:r,isLE:e,BITS:o,BYTES:a,MASK:pu(o),ZERO:pn,ONE:Ke,create:h=>fe(h,r),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return pn<=h&&h<r},is0:h=>h===pn,isValidNot0:h=>!f.is0(h)&&f.isValid(h),isOdd:h=>(h&Ke)===Ke,neg:h=>fe(-h,r),eql:(h,y)=>h===y,sqr:h=>fe(h*h,r),add:(h,y)=>fe(h+y,r),sub:(h,y)=>fe(h-y,r),mul:(h,y)=>fe(h*y,r),pow:(h,y)=>cy(f,h,y),div:(h,y)=>fe(h*Uh(y,r),r),sqrN:h=>h*h,addN:(h,y)=>h+y,subN:(h,y)=>h-y,mulN:(h,y)=>h*y,inv:h=>Uh(h,r),sqrt:i||(h=>(c||(c=sy(r)),c(f,h))),toBytes:h=>e?du(h,a):Vf(h,a),fromBytes:h=>{if(h.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);return e?Aa(h):hu(h)},invertBatch:h=>V0(f,h),cmov:(h,y,E)=>E?y:h});return Object.freeze(f)}function q0(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Q0(r){const t=q0(r);return t+Math.ceil(t/2)}function ly(r,t,e=!1){const n=r.length,s=q0(t),i=Q0(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?Aa(r):hu(r),a=fe(o,t-Ke)+Ke;return e?du(a,s):Vf(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ho=BigInt(0),Hs=BigInt(1);function pa(r,t){const e=t.negate();return r?e:t}function W0(r,t,e){const n=t==="pz"?o=>o.pz:o=>o.ez,s=V0(r.Fp,e.map(n));return e.map((o,a)=>o.toAffine(s[a])).map(r.fromAffine)}function $0(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function al(r,t){$0(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=pu(r),o=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function Dh(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=e;let a=Number(r&s),c=r>>o;a>n&&(a-=i,c+=Hs);const f=t*n,h=f+Math.abs(a)-1,y=a===0,E=a<0,b=t%2!==0;return{nextN:c,offset:h,isZero:y,isNeg:E,isNegF:b,offsetF:f}}function fy(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function hy(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const cl=new WeakMap,J0=new WeakMap;function ul(r){return J0.get(r)||1}function Hh(r){if(r!==Ho)throw new Error("invalid wNAF")}function j0(r,t){return{constTimeNegate:pa,hasPrecomputes(e){return ul(e)!==1},unsafeLadder(e,n,s=r.ZERO){let i=e;for(;n>Ho;)n&Hs&&(s=s.add(i)),i=i.double(),n>>=Hs;return s},precomputeWindow(e,n){const{windows:s,windowSize:i}=al(n,t),o=[];let a=e,c=a;for(let f=0;f<s;f++){c=a,o.push(c);for(let h=1;h<i;h++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(e,n,s){let i=r.ZERO,o=r.BASE;const a=al(e,t);for(let c=0;c<a.windows;c++){const{nextN:f,offset:h,isZero:y,isNeg:E,isNegF:b,offsetF:N}=Dh(s,c,a);s=f,y?o=o.add(pa(b,n[N])):i=i.add(pa(E,n[h]))}return Hh(s),{p:i,f:o}},wNAFUnsafe(e,n,s,i=r.ZERO){const o=al(e,t);for(let a=0;a<o.windows&&s!==Ho;a++){const{nextN:c,offset:f,isZero:h,isNeg:y}=Dh(s,a,o);if(s=c,!h){const E=n[f];i=i.add(y?E.negate():E)}}return Hh(s),i},getPrecomputes(e,n,s){let i=cl.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof s=="function"&&(i=s(i)),cl.set(n,i))),i},wNAFCached(e,n,s){const i=ul(e);return this.wNAF(i,this.getPrecomputes(i,e,s),n)},wNAFCachedUnsafe(e,n,s,i){const o=ul(e);return o===1?this.unsafeLadder(e,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),n,i)},setWindowSize(e,n){$0(n,t),J0.set(e,n),cl.delete(e)}}}function dy(r,t,e,n){let s=t,i=r.ZERO,o=r.ZERO;for(;e>Ho||n>Ho;)e&Hs&&(i=i.add(s)),n&Hs&&(o=o.add(s)),s=s.double(),e>>=Hs,n>>=Hs;return{p1:i,p2:o}}function Z0(r,t,e,n){fy(e,r),hy(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=Xm(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const f=pu(c),h=new Array(Number(f)+1).fill(o),y=Math.floor((t.BITS-1)/c)*c;let E=o;for(let b=y;b>=0;b-=c){h.fill(o);for(let x=0;x<i;x++){const S=n[x],_=Number(S>>BigInt(b)&f);h[_]=h[_].add(e[x])}let N=o;for(let x=h.length-1,S=o;x>0;x--)S=S.add(h[x]),N=N.add(S);if(E=E.add(N),b!==0)for(let x=0;x<c;x++)E=E.double()}return E}function Gh(r,t){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ay(t),t}else return Zo(r)}function Y0(r,t,e={}){if(!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const a of["p","n","h"]){const c=t[a];if(!(typeof c=="bigint"&&c>Ho))throw new Error(`CURVE.${a} must be positive bigint`)}const n=Gh(t.p,e.Fp),s=Gh(t.n,e.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const a of o)if(!n.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const er=BigInt(0),tn=BigInt(1),ll=BigInt(2),py=BigInt(8),gy={zip215:!0};function my(r,t,e,n){const s=r.sqr(e),i=r.sqr(n),o=r.add(r.mul(t.a,s),i),a=r.add(r.ONE,r.mul(t.d,r.mul(s,i)));return r.eql(o,a)}function yy(r,t={}){const{Fp:e,Fn:n}=Y0("edwards",r,t),{h:s,n:i}=r;qa(t,{},{uvRatio:"function"});const o=ll<<BigInt(n.BYTES*8)-tn,a=x=>e.create(x),c=t.uvRatio||((x,S)=>{try{return{isValid:!0,value:e.sqrt(e.div(x,S))}}catch{return{isValid:!1,value:er}}});if(!my(e,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function f(x,S,_=!1){const V=_?tn:er;return Li("coordinate "+x,S,V,o),S}function h(x){if(!(x instanceof b))throw new Error("ExtendedPoint expected")}const y=_c((x,S)=>{const{ex:_,ey:V,ez:z}=x,rt=x.is0();S==null&&(S=rt?py:e.inv(z));const K=a(_*S),Y=a(V*S),st=a(z*S);if(rt)return{x:er,y:tn};if(st!==tn)throw new Error("invZ was invalid");return{x:K,y:Y}}),E=_c(x=>{const{a:S,d:_}=r;if(x.is0())throw new Error("bad point: ZERO");const{ex:V,ey:z,ez:rt,et:K}=x,Y=a(V*V),st=a(z*z),et=a(rt*rt),U=a(et*et),O=a(Y*S),L=a(et*a(O+st)),G=a(U+a(_*a(Y*st)));if(L!==G)throw new Error("bad point: equation left != right (1)");const v=a(V*z),u=a(rt*K);if(v!==u)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(S,_,V,z){this.ex=f("x",S),this.ey=f("y",_),this.ez=f("z",V,!0),this.et=f("t",z),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof b)throw new Error("extended point not allowed");const{x:_,y:V}=S||{};return f("x",_),f("y",V),new b(_,V,tn,a(_*V))}static normalizeZ(S){return W0(b,"ez",S)}static msm(S,_){return Z0(b,n,S,_)}_setWindowSize(S){this.precompute(S)}precompute(S=8,_=!0){return N.setWindowSize(this,S),_||this.multiply(ll),this}assertValidity(){E(this)}equals(S){h(S);const{ex:_,ey:V,ez:z}=this,{ex:rt,ey:K,ez:Y}=S,st=a(_*Y),et=a(rt*z),U=a(V*Y),O=a(K*z);return st===et&&U===O}is0(){return this.equals(b.ZERO)}negate(){return new b(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:S}=r,{ex:_,ey:V,ez:z}=this,rt=a(_*_),K=a(V*V),Y=a(ll*a(z*z)),st=a(S*rt),et=_+V,U=a(a(et*et)-rt-K),O=st+K,L=O-Y,G=st-K,v=a(U*L),u=a(O*G),p=a(U*G),w=a(L*O);return new b(v,u,w,p)}add(S){h(S);const{a:_,d:V}=r,{ex:z,ey:rt,ez:K,et:Y}=this,{ex:st,ey:et,ez:U,et:O}=S,L=a(z*st),G=a(rt*et),v=a(Y*V*O),u=a(K*U),p=a((z+rt)*(st+et)-L-G),w=u-v,k=u+v,C=a(G-_*L),F=a(p*w),H=a(k*C),R=a(p*C),l=a(w*k);return new b(F,H,l,R)}subtract(S){return this.add(S.negate())}multiply(S){const _=S;Li("scalar",_,tn,i);const{p:V,f:z}=N.wNAFCached(this,_,b.normalizeZ);return b.normalizeZ([V,z])[0]}multiplyUnsafe(S,_=b.ZERO){const V=S;return Li("scalar",V,er,i),V===er?b.ZERO:this.is0()||V===tn?this:N.wNAFCachedUnsafe(this,V,b.normalizeZ,_)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return N.wNAFCachedUnsafe(this,i).is0()}toAffine(S){return y(this,S)}clearCofactor(){return s===tn?this:this.multiplyUnsafe(s)}static fromBytes(S,_=!1){return gr(S),this.fromHex(S,_)}static fromHex(S,_=!1){const{d:V,a:z}=r,rt=e.BYTES;S=le("pointHex",S,rt),di("zip215",_);const K=S.slice(),Y=S[rt-1];K[rt-1]=Y&-129;const st=Aa(K),et=_?o:e.ORDER;Li("pointHex.y",st,er,et);const U=a(st*st),O=a(U-tn),L=a(V*U-z);let{isValid:G,value:v}=c(O,L);if(!G)throw new Error("Point.fromHex: invalid y coordinate");const u=(v&tn)===tn,p=(Y&128)!==0;if(!_&&v===er&&p)throw new Error("Point.fromHex: x=0 and x_0=1");return p!==u&&(v=a(-v)),b.fromAffine({x:v,y:st})}static fromPrivateScalar(S){return b.BASE.multiply(S)}toBytes(){const{x:S,y:_}=this.toAffine(),V=du(_,e.BYTES);return V[V.length-1]|=S&tn?128:0,V}toRawBytes(){return this.toBytes()}toHex(){return Do(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}b.BASE=new b(r.Gx,r.Gy,tn,a(r.Gx*r.Gy)),b.ZERO=new b(er,tn,tn,er),b.Fp=e,b.Fn=n;const N=j0(b,n.BYTES*8);return b}function wy(r,t){qa(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:e,hash:n}=t,{BASE:s,Fp:i,Fn:o}=r,a=o.ORDER,c=t.randomBytes||O0,f=t.adjustScalarBytes||(K=>K),h=t.domain||((K,Y,st)=>{if(di("phflag",st),Y.length||st)throw new Error("Contexts/pre-hash are not supported");return K});function y(K){return o.create(K)}function E(K){return y(Aa(K))}function b(K){const Y=i.BYTES;K=le("private key",K,Y);const st=le("hashed private key",n(K),2*Y),et=f(st.slice(0,Y)),U=st.slice(Y,2*Y),O=E(et);return{head:et,prefix:U,scalar:O}}function N(K){const{head:Y,prefix:st,scalar:et}=b(K),U=s.multiply(et),O=U.toBytes();return{head:Y,prefix:st,scalar:et,point:U,pointBytes:O}}function x(K){return N(K).pointBytes}function S(K=Uint8Array.of(),...Y){const st=Dr(...Y);return E(n(h(st,le("context",K),!!e)))}function _(K,Y,st={}){K=le("message",K),e&&(K=e(K));const{prefix:et,scalar:U,pointBytes:O}=N(Y),L=S(st.context,et,K),G=s.multiply(L).toBytes(),v=S(st.context,G,O,K),u=y(L+v*U);Li("signature.s",u,er,a);const p=i.BYTES,w=Dr(G,du(u,p));return le("result",w,p*2)}const V=gy;function z(K,Y,st,et=V){const{context:U,zip215:O}=et,L=i.BYTES;K=le("signature",K,2*L),Y=le("message",Y),st=le("publicKey",st,L),O!==void 0&&di("zip215",O),e&&(Y=e(Y));const G=Aa(K.slice(L,2*L));let v,u,p;try{v=r.fromHex(st,O),u=r.fromHex(K.slice(0,L),O),p=s.multiplyUnsafe(G)}catch{return!1}if(!O&&v.isSmallOrder())return!1;const w=S(U,u.toBytes(),v.toBytes(),Y);return u.add(v.multiplyUnsafe(w)).subtract(p).clearCofactor().is0()}return s.precompute(8),{getPublicKey:x,sign:_,verify:z,utils:{getExtendedPublicKey:N,randomPrivateKey:()=>c(i.BYTES),precompute(K=8,Y=r.BASE){return Y.precompute(K,!1)}},Point:r}}function by(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=Zo(t.n,r.nBitLength,!0),s={Fp:e,Fn:n,uvRatio:r.uvRatio},i={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:s,eddsaOpts:i}}function Ay(r,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:r})}function xy(r){const{CURVE:t,curveOpts:e,eddsaOpts:n}=by(r),s=yy(t,e),i=wy(s,n);return Ay(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const Ey=BigInt(1),zh=BigInt(2);BigInt(3);const vy=BigInt(5),By=BigInt(8),gu={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:By,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Sy(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=gu.p,a=r*r%i*r%i,c=ie(a,zh,i)*a%i,f=ie(c,Ey,i)*r%i,h=ie(f,vy,i)*f%i,y=ie(h,t,i)*h%i,E=ie(y,e,i)*y%i,b=ie(E,n,i)*E%i,N=ie(b,s,i)*b%i,x=ie(N,s,i)*b%i,S=ie(x,t,i)*h%i;return{pow_p_5_8:ie(S,zh,i)*r%i,b2:a}}function Iy(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Kh=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function ky(r,t){const e=gu.p,n=fe(t*t*t,e),s=fe(n*n*t,e),i=Sy(r*s).pow_p_5_8;let o=fe(r*n*i,e);const a=fe(t*o*o,e),c=o,f=fe(o*Kh,e),h=a===r,y=a===fe(-r,e),E=a===fe(-r*Kh,e);return h&&(o=c),(y||E)&&(o=f),iy(o,e)&&(o=fe(-o,e)),{isValid:h||y,value:o}}const Ry=Zo(gu.p,void 0,!0),Ny={...gu,Fp:Ry,hash:Zm,adjustScalarBytes:Iy,uvRatio:ky},Qa=xy(Ny);var xc={exports:{}};const Cy={},Py=Object.freeze(Object.defineProperty({__proto__:null,default:Cy},Symbol.toStringTag,{value:"Module"})),Ty=Ff(Py);var My=xc.exports,Vh;function X0(){return Vh||(Vh=1,function(r){(function(t,e){function n(v,u){if(!v)throw new Error(u||"Assertion failed")}function s(v,u){v.super_=u;var p=function(){};p.prototype=u.prototype,v.prototype=new p,v.prototype.constructor=v}function i(v,u,p){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(v||0,u||10,p||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ty.Buffer}catch{}i.isBN=function(u){return u instanceof i?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===i.wordSize&&Array.isArray(u.words)},i.max=function(u,p){return u.cmp(p)>0?u:p},i.min=function(u,p){return u.cmp(p)<0?u:p},i.prototype._init=function(u,p,w){if(typeof u=="number")return this._initNumber(u,p,w);if(typeof u=="object")return this._initArray(u,p,w);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var k=0;u[0]==="-"&&(k++,this.negative=1),k<u.length&&(p===16?this._parseHex(u,k,w):(this._parseBase(u,p,k),w==="le"&&this._initArray(this.toArray(),p,w)))},i.prototype._initNumber=function(u,p,w){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),p,w)},i.prototype._initArray=function(u,p,w){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var C,F,H=0;if(w==="be")for(k=u.length-1,C=0;k>=0;k-=3)F=u[k]|u[k-1]<<8|u[k-2]<<16,this.words[C]|=F<<H&67108863,this.words[C+1]=F>>>26-H&67108863,H+=24,H>=26&&(H-=26,C++);else if(w==="le")for(k=0,C=0;k<u.length;k+=3)F=u[k]|u[k+1]<<8|u[k+2]<<16,this.words[C]|=F<<H&67108863,this.words[C+1]=F>>>26-H&67108863,H+=24,H>=26&&(H-=26,C++);return this._strip()};function a(v,u){var p=v.charCodeAt(u);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+v)}function c(v,u,p){var w=a(v,p);return p-1>=u&&(w|=a(v,p-1)<<4),w}i.prototype._parseHex=function(u,p,w){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var C=0,F=0,H;if(w==="be")for(k=u.length-1;k>=p;k-=2)H=c(u,p,k)<<C,this.words[F]|=H&67108863,C>=18?(C-=18,F+=1,this.words[F]|=H>>>26):C+=8;else{var R=u.length-p;for(k=R%2===0?p+1:p;k<u.length;k+=2)H=c(u,p,k)<<C,this.words[F]|=H&67108863,C>=18?(C-=18,F+=1,this.words[F]|=H>>>26):C+=8}this._strip()};function f(v,u,p,w){for(var k=0,C=0,F=Math.min(v.length,p),H=u;H<F;H++){var R=v.charCodeAt(H)-48;k*=w,R>=49?C=R-49+10:R>=17?C=R-17+10:C=R,n(R>=0&&C<w,"Invalid character"),k+=C}return k}i.prototype._parseBase=function(u,p,w){this.words=[0],this.length=1;for(var k=0,C=1;C<=67108863;C*=p)k++;k--,C=C/p|0;for(var F=u.length-w,H=F%k,R=Math.min(F,F-H)+w,l=0,d=w;d<R;d+=k)l=f(u,d,d+k,p),this.imuln(C),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(H!==0){var I=1;for(l=f(u,d,u.length,p),d=0;d<H;d++)I*=p;this.imuln(I),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},i.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red};function h(v,u){v.words=u.words,v.length=u.length,v.negative=u.negative,v.red=u.red}if(i.prototype._move=function(u){h(u,this)},i.prototype.clone=function(){var u=new i(null);return this.copy(u),u},i.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{i.prototype.inspect=y}else i.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var E=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(u,p){u=u||10,p=p|0||1;var w;if(u===16||u==="hex"){w="";for(var k=0,C=0,F=0;F<this.length;F++){var H=this.words[F],R=((H<<k|C)&16777215).toString(16);C=H>>>24-k&16777215,k+=2,k>=26&&(k-=26,F--),C!==0||F!==this.length-1?w=E[6-R.length]+R+w:w=R+w}for(C!==0&&(w=C.toString(16)+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(u===(u|0)&&u>=2&&u<=36){var l=b[u],d=N[u];w="";var I=this.clone();for(I.negative=0;!I.isZero();){var T=I.modrn(d).toString(u);I=I.idivn(d),I.isZero()?w=T+w:w=E[l-T.length]+T+w}for(this.isZero()&&(w="0"+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(u,p){return this.toArrayLike(o,u,p)}),i.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)};var x=function(u,p){return u.allocUnsafe?u.allocUnsafe(p):new u(p)};i.prototype.toArrayLike=function(u,p,w){this._strip();var k=this.byteLength(),C=w||Math.max(1,k);n(k<=C,"byte array longer than desired length"),n(C>0,"Requested array length <= 0");var F=x(u,C),H=p==="le"?"LE":"BE";return this["_toArrayLike"+H](F,k),F},i.prototype._toArrayLikeLE=function(u,p){for(var w=0,k=0,C=0,F=0;C<this.length;C++){var H=this.words[C]<<F|k;u[w++]=H&255,w<u.length&&(u[w++]=H>>8&255),w<u.length&&(u[w++]=H>>16&255),F===6?(w<u.length&&(u[w++]=H>>24&255),k=0,F=0):(k=H>>>24,F+=2)}if(w<u.length)for(u[w++]=k;w<u.length;)u[w++]=0},i.prototype._toArrayLikeBE=function(u,p){for(var w=u.length-1,k=0,C=0,F=0;C<this.length;C++){var H=this.words[C]<<F|k;u[w--]=H&255,w>=0&&(u[w--]=H>>8&255),w>=0&&(u[w--]=H>>16&255),F===6?(w>=0&&(u[w--]=H>>24&255),k=0,F=0):(k=H>>>24,F+=2)}if(w>=0)for(u[w--]=k;w>=0;)u[w--]=0},Math.clz32?i.prototype._countBits=function(u){return 32-Math.clz32(u)}:i.prototype._countBits=function(u){var p=u,w=0;return p>=4096&&(w+=13,p>>>=13),p>=64&&(w+=7,p>>>=7),p>=8&&(w+=4,p>>>=4),p>=2&&(w+=2,p>>>=2),w+p},i.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,w=0;return(p&8191)===0&&(w+=13,p>>>=13),(p&127)===0&&(w+=7,p>>>=7),(p&15)===0&&(w+=4,p>>>=4),(p&3)===0&&(w+=2,p>>>=2),(p&1)===0&&w++,w},i.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function S(v){for(var u=new Array(v.bitLength()),p=0;p<u.length;p++){var w=p/26|0,k=p%26;u[p]=v.words[w]>>>k&1}return u}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var w=this._zeroBits(this.words[p]);if(u+=w,w!==26)break}return u},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},i.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this._strip()},i.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},i.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},i.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},i.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var w=0;w<p.length;w++)this.words[w]=this.words[w]&u.words[w];return this.length=p.length,this._strip()},i.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},i.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},i.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},i.prototype.iuxor=function(u){var p,w;this.length>u.length?(p=this,w=u):(p=u,w=this);for(var k=0;k<w.length;k++)this.words[k]=p.words[k]^w.words[k];if(this!==p)for(;k<p.length;k++)this.words[k]=p.words[k];return this.length=p.length,this._strip()},i.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},i.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},i.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},i.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,w=u%26;this._expand(p),w>0&&p--;for(var k=0;k<p;k++)this.words[k]=~this.words[k]&67108863;return w>0&&(this.words[k]=~this.words[k]&67108863>>26-w),this._strip()},i.prototype.notn=function(u){return this.clone().inotn(u)},i.prototype.setn=function(u,p){n(typeof u=="number"&&u>=0);var w=u/26|0,k=u%26;return this._expand(w+1),p?this.words[w]=this.words[w]|1<<k:this.words[w]=this.words[w]&~(1<<k),this._strip()},i.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var w,k;this.length>u.length?(w=this,k=u):(w=u,k=this);for(var C=0,F=0;F<k.length;F++)p=(w.words[F]|0)+(k.words[F]|0)+C,this.words[F]=p&67108863,C=p>>>26;for(;C!==0&&F<w.length;F++)p=(w.words[F]|0)+C,this.words[F]=p&67108863,C=p>>>26;if(this.length=w.length,C!==0)this.words[this.length]=C,this.length++;else if(w!==this)for(;F<w.length;F++)this.words[F]=w.words[F];return this},i.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},i.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var w=this.cmp(u);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var k,C;w>0?(k=this,C=u):(k=u,C=this);for(var F=0,H=0;H<C.length;H++)p=(k.words[H]|0)-(C.words[H]|0)+F,F=p>>26,this.words[H]=p&67108863;for(;F!==0&&H<k.length;H++)p=(k.words[H]|0)+F,F=p>>26,this.words[H]=p&67108863;if(F===0&&H<k.length&&k!==this)for(;H<k.length;H++)this.words[H]=k.words[H];return this.length=Math.max(this.length,H),k!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(u){return this.clone().isub(u)};function _(v,u,p){p.negative=u.negative^v.negative;var w=v.length+u.length|0;p.length=w,w=w-1|0;var k=v.words[0]|0,C=u.words[0]|0,F=k*C,H=F&67108863,R=F/67108864|0;p.words[0]=H;for(var l=1;l<w;l++){for(var d=R>>>26,I=R&67108863,T=Math.min(l,u.length-1),$=Math.max(0,l-v.length+1);$<=T;$++){var nt=l-$|0;k=v.words[nt]|0,C=u.words[$]|0,F=k*C+I,d+=F/67108864|0,I=F&67108863}p.words[l]=I|0,R=d|0}return R!==0?p.words[l]=R|0:p.length--,p._strip()}var V=function(u,p,w){var k=u.words,C=p.words,F=w.words,H=0,R,l,d,I=k[0]|0,T=I&8191,$=I>>>13,nt=k[1]|0,ft=nt&8191,mt=nt>>>13,qt=k[2]|0,Tt=qt&8191,Ut=qt>>>13,ce=k[3]|0,Ot=ce&8191,Qt=ce>>>13,Ns=k[4]|0,Jt=Ns&8191,ne=Ns>>>13,nc=k[5]|0,Yt=nc&8191,Wt=nc>>>13,yn=k[6]|0,jt=yn&8191,re=yn>>>13,Un=k[7]|0,se=Un&8191,B=Un>>>13,g=k[8]|0,m=g&8191,P=g>>>13,Q=k[9]|0,J=Q&8191,tt=Q>>>13,Bt=C[0]|0,vt=Bt&8191,Et=Bt>>>13,$t=C[1]|0,At=$t&8191,pe=$t>>>13,xh=C[2]|0,ge=xh&8191,me=xh>>>13,Eh=C[3]|0,ye=Eh&8191,we=Eh>>>13,vh=C[4]|0,be=vh&8191,Ae=vh>>>13,Bh=C[5]|0,xe=Bh&8191,Ee=Bh>>>13,Sh=C[6]|0,ve=Sh&8191,Be=Sh>>>13,Ih=C[7]|0,Se=Ih&8191,Ie=Ih>>>13,kh=C[8]|0,ke=kh&8191,Re=kh>>>13,Rh=C[9]|0,Ne=Rh&8191,Ce=Rh>>>13;w.negative=u.negative^p.negative,w.length=19,R=Math.imul(T,vt),l=Math.imul(T,Et),l=l+Math.imul($,vt)|0,d=Math.imul($,Et);var Fu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Fu>>>26)|0,Fu&=67108863,R=Math.imul(ft,vt),l=Math.imul(ft,Et),l=l+Math.imul(mt,vt)|0,d=Math.imul(mt,Et),R=R+Math.imul(T,At)|0,l=l+Math.imul(T,pe)|0,l=l+Math.imul($,At)|0,d=d+Math.imul($,pe)|0;var Du=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Du>>>26)|0,Du&=67108863,R=Math.imul(Tt,vt),l=Math.imul(Tt,Et),l=l+Math.imul(Ut,vt)|0,d=Math.imul(Ut,Et),R=R+Math.imul(ft,At)|0,l=l+Math.imul(ft,pe)|0,l=l+Math.imul(mt,At)|0,d=d+Math.imul(mt,pe)|0,R=R+Math.imul(T,ge)|0,l=l+Math.imul(T,me)|0,l=l+Math.imul($,ge)|0,d=d+Math.imul($,me)|0;var Hu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Hu>>>26)|0,Hu&=67108863,R=Math.imul(Ot,vt),l=Math.imul(Ot,Et),l=l+Math.imul(Qt,vt)|0,d=Math.imul(Qt,Et),R=R+Math.imul(Tt,At)|0,l=l+Math.imul(Tt,pe)|0,l=l+Math.imul(Ut,At)|0,d=d+Math.imul(Ut,pe)|0,R=R+Math.imul(ft,ge)|0,l=l+Math.imul(ft,me)|0,l=l+Math.imul(mt,ge)|0,d=d+Math.imul(mt,me)|0,R=R+Math.imul(T,ye)|0,l=l+Math.imul(T,we)|0,l=l+Math.imul($,ye)|0,d=d+Math.imul($,we)|0;var Gu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Gu>>>26)|0,Gu&=67108863,R=Math.imul(Jt,vt),l=Math.imul(Jt,Et),l=l+Math.imul(ne,vt)|0,d=Math.imul(ne,Et),R=R+Math.imul(Ot,At)|0,l=l+Math.imul(Ot,pe)|0,l=l+Math.imul(Qt,At)|0,d=d+Math.imul(Qt,pe)|0,R=R+Math.imul(Tt,ge)|0,l=l+Math.imul(Tt,me)|0,l=l+Math.imul(Ut,ge)|0,d=d+Math.imul(Ut,me)|0,R=R+Math.imul(ft,ye)|0,l=l+Math.imul(ft,we)|0,l=l+Math.imul(mt,ye)|0,d=d+Math.imul(mt,we)|0,R=R+Math.imul(T,be)|0,l=l+Math.imul(T,Ae)|0,l=l+Math.imul($,be)|0,d=d+Math.imul($,Ae)|0;var zu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(zu>>>26)|0,zu&=67108863,R=Math.imul(Yt,vt),l=Math.imul(Yt,Et),l=l+Math.imul(Wt,vt)|0,d=Math.imul(Wt,Et),R=R+Math.imul(Jt,At)|0,l=l+Math.imul(Jt,pe)|0,l=l+Math.imul(ne,At)|0,d=d+Math.imul(ne,pe)|0,R=R+Math.imul(Ot,ge)|0,l=l+Math.imul(Ot,me)|0,l=l+Math.imul(Qt,ge)|0,d=d+Math.imul(Qt,me)|0,R=R+Math.imul(Tt,ye)|0,l=l+Math.imul(Tt,we)|0,l=l+Math.imul(Ut,ye)|0,d=d+Math.imul(Ut,we)|0,R=R+Math.imul(ft,be)|0,l=l+Math.imul(ft,Ae)|0,l=l+Math.imul(mt,be)|0,d=d+Math.imul(mt,Ae)|0,R=R+Math.imul(T,xe)|0,l=l+Math.imul(T,Ee)|0,l=l+Math.imul($,xe)|0,d=d+Math.imul($,Ee)|0;var Ku=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Ku>>>26)|0,Ku&=67108863,R=Math.imul(jt,vt),l=Math.imul(jt,Et),l=l+Math.imul(re,vt)|0,d=Math.imul(re,Et),R=R+Math.imul(Yt,At)|0,l=l+Math.imul(Yt,pe)|0,l=l+Math.imul(Wt,At)|0,d=d+Math.imul(Wt,pe)|0,R=R+Math.imul(Jt,ge)|0,l=l+Math.imul(Jt,me)|0,l=l+Math.imul(ne,ge)|0,d=d+Math.imul(ne,me)|0,R=R+Math.imul(Ot,ye)|0,l=l+Math.imul(Ot,we)|0,l=l+Math.imul(Qt,ye)|0,d=d+Math.imul(Qt,we)|0,R=R+Math.imul(Tt,be)|0,l=l+Math.imul(Tt,Ae)|0,l=l+Math.imul(Ut,be)|0,d=d+Math.imul(Ut,Ae)|0,R=R+Math.imul(ft,xe)|0,l=l+Math.imul(ft,Ee)|0,l=l+Math.imul(mt,xe)|0,d=d+Math.imul(mt,Ee)|0,R=R+Math.imul(T,ve)|0,l=l+Math.imul(T,Be)|0,l=l+Math.imul($,ve)|0,d=d+Math.imul($,Be)|0;var Vu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Vu>>>26)|0,Vu&=67108863,R=Math.imul(se,vt),l=Math.imul(se,Et),l=l+Math.imul(B,vt)|0,d=Math.imul(B,Et),R=R+Math.imul(jt,At)|0,l=l+Math.imul(jt,pe)|0,l=l+Math.imul(re,At)|0,d=d+Math.imul(re,pe)|0,R=R+Math.imul(Yt,ge)|0,l=l+Math.imul(Yt,me)|0,l=l+Math.imul(Wt,ge)|0,d=d+Math.imul(Wt,me)|0,R=R+Math.imul(Jt,ye)|0,l=l+Math.imul(Jt,we)|0,l=l+Math.imul(ne,ye)|0,d=d+Math.imul(ne,we)|0,R=R+Math.imul(Ot,be)|0,l=l+Math.imul(Ot,Ae)|0,l=l+Math.imul(Qt,be)|0,d=d+Math.imul(Qt,Ae)|0,R=R+Math.imul(Tt,xe)|0,l=l+Math.imul(Tt,Ee)|0,l=l+Math.imul(Ut,xe)|0,d=d+Math.imul(Ut,Ee)|0,R=R+Math.imul(ft,ve)|0,l=l+Math.imul(ft,Be)|0,l=l+Math.imul(mt,ve)|0,d=d+Math.imul(mt,Be)|0,R=R+Math.imul(T,Se)|0,l=l+Math.imul(T,Ie)|0,l=l+Math.imul($,Se)|0,d=d+Math.imul($,Ie)|0;var qu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(qu>>>26)|0,qu&=67108863,R=Math.imul(m,vt),l=Math.imul(m,Et),l=l+Math.imul(P,vt)|0,d=Math.imul(P,Et),R=R+Math.imul(se,At)|0,l=l+Math.imul(se,pe)|0,l=l+Math.imul(B,At)|0,d=d+Math.imul(B,pe)|0,R=R+Math.imul(jt,ge)|0,l=l+Math.imul(jt,me)|0,l=l+Math.imul(re,ge)|0,d=d+Math.imul(re,me)|0,R=R+Math.imul(Yt,ye)|0,l=l+Math.imul(Yt,we)|0,l=l+Math.imul(Wt,ye)|0,d=d+Math.imul(Wt,we)|0,R=R+Math.imul(Jt,be)|0,l=l+Math.imul(Jt,Ae)|0,l=l+Math.imul(ne,be)|0,d=d+Math.imul(ne,Ae)|0,R=R+Math.imul(Ot,xe)|0,l=l+Math.imul(Ot,Ee)|0,l=l+Math.imul(Qt,xe)|0,d=d+Math.imul(Qt,Ee)|0,R=R+Math.imul(Tt,ve)|0,l=l+Math.imul(Tt,Be)|0,l=l+Math.imul(Ut,ve)|0,d=d+Math.imul(Ut,Be)|0,R=R+Math.imul(ft,Se)|0,l=l+Math.imul(ft,Ie)|0,l=l+Math.imul(mt,Se)|0,d=d+Math.imul(mt,Ie)|0,R=R+Math.imul(T,ke)|0,l=l+Math.imul(T,Re)|0,l=l+Math.imul($,ke)|0,d=d+Math.imul($,Re)|0;var Qu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Qu>>>26)|0,Qu&=67108863,R=Math.imul(J,vt),l=Math.imul(J,Et),l=l+Math.imul(tt,vt)|0,d=Math.imul(tt,Et),R=R+Math.imul(m,At)|0,l=l+Math.imul(m,pe)|0,l=l+Math.imul(P,At)|0,d=d+Math.imul(P,pe)|0,R=R+Math.imul(se,ge)|0,l=l+Math.imul(se,me)|0,l=l+Math.imul(B,ge)|0,d=d+Math.imul(B,me)|0,R=R+Math.imul(jt,ye)|0,l=l+Math.imul(jt,we)|0,l=l+Math.imul(re,ye)|0,d=d+Math.imul(re,we)|0,R=R+Math.imul(Yt,be)|0,l=l+Math.imul(Yt,Ae)|0,l=l+Math.imul(Wt,be)|0,d=d+Math.imul(Wt,Ae)|0,R=R+Math.imul(Jt,xe)|0,l=l+Math.imul(Jt,Ee)|0,l=l+Math.imul(ne,xe)|0,d=d+Math.imul(ne,Ee)|0,R=R+Math.imul(Ot,ve)|0,l=l+Math.imul(Ot,Be)|0,l=l+Math.imul(Qt,ve)|0,d=d+Math.imul(Qt,Be)|0,R=R+Math.imul(Tt,Se)|0,l=l+Math.imul(Tt,Ie)|0,l=l+Math.imul(Ut,Se)|0,d=d+Math.imul(Ut,Ie)|0,R=R+Math.imul(ft,ke)|0,l=l+Math.imul(ft,Re)|0,l=l+Math.imul(mt,ke)|0,d=d+Math.imul(mt,Re)|0,R=R+Math.imul(T,Ne)|0,l=l+Math.imul(T,Ce)|0,l=l+Math.imul($,Ne)|0,d=d+Math.imul($,Ce)|0;var Wu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Wu>>>26)|0,Wu&=67108863,R=Math.imul(J,At),l=Math.imul(J,pe),l=l+Math.imul(tt,At)|0,d=Math.imul(tt,pe),R=R+Math.imul(m,ge)|0,l=l+Math.imul(m,me)|0,l=l+Math.imul(P,ge)|0,d=d+Math.imul(P,me)|0,R=R+Math.imul(se,ye)|0,l=l+Math.imul(se,we)|0,l=l+Math.imul(B,ye)|0,d=d+Math.imul(B,we)|0,R=R+Math.imul(jt,be)|0,l=l+Math.imul(jt,Ae)|0,l=l+Math.imul(re,be)|0,d=d+Math.imul(re,Ae)|0,R=R+Math.imul(Yt,xe)|0,l=l+Math.imul(Yt,Ee)|0,l=l+Math.imul(Wt,xe)|0,d=d+Math.imul(Wt,Ee)|0,R=R+Math.imul(Jt,ve)|0,l=l+Math.imul(Jt,Be)|0,l=l+Math.imul(ne,ve)|0,d=d+Math.imul(ne,Be)|0,R=R+Math.imul(Ot,Se)|0,l=l+Math.imul(Ot,Ie)|0,l=l+Math.imul(Qt,Se)|0,d=d+Math.imul(Qt,Ie)|0,R=R+Math.imul(Tt,ke)|0,l=l+Math.imul(Tt,Re)|0,l=l+Math.imul(Ut,ke)|0,d=d+Math.imul(Ut,Re)|0,R=R+Math.imul(ft,Ne)|0,l=l+Math.imul(ft,Ce)|0,l=l+Math.imul(mt,Ne)|0,d=d+Math.imul(mt,Ce)|0;var $u=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+($u>>>26)|0,$u&=67108863,R=Math.imul(J,ge),l=Math.imul(J,me),l=l+Math.imul(tt,ge)|0,d=Math.imul(tt,me),R=R+Math.imul(m,ye)|0,l=l+Math.imul(m,we)|0,l=l+Math.imul(P,ye)|0,d=d+Math.imul(P,we)|0,R=R+Math.imul(se,be)|0,l=l+Math.imul(se,Ae)|0,l=l+Math.imul(B,be)|0,d=d+Math.imul(B,Ae)|0,R=R+Math.imul(jt,xe)|0,l=l+Math.imul(jt,Ee)|0,l=l+Math.imul(re,xe)|0,d=d+Math.imul(re,Ee)|0,R=R+Math.imul(Yt,ve)|0,l=l+Math.imul(Yt,Be)|0,l=l+Math.imul(Wt,ve)|0,d=d+Math.imul(Wt,Be)|0,R=R+Math.imul(Jt,Se)|0,l=l+Math.imul(Jt,Ie)|0,l=l+Math.imul(ne,Se)|0,d=d+Math.imul(ne,Ie)|0,R=R+Math.imul(Ot,ke)|0,l=l+Math.imul(Ot,Re)|0,l=l+Math.imul(Qt,ke)|0,d=d+Math.imul(Qt,Re)|0,R=R+Math.imul(Tt,Ne)|0,l=l+Math.imul(Tt,Ce)|0,l=l+Math.imul(Ut,Ne)|0,d=d+Math.imul(Ut,Ce)|0;var Ju=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Ju>>>26)|0,Ju&=67108863,R=Math.imul(J,ye),l=Math.imul(J,we),l=l+Math.imul(tt,ye)|0,d=Math.imul(tt,we),R=R+Math.imul(m,be)|0,l=l+Math.imul(m,Ae)|0,l=l+Math.imul(P,be)|0,d=d+Math.imul(P,Ae)|0,R=R+Math.imul(se,xe)|0,l=l+Math.imul(se,Ee)|0,l=l+Math.imul(B,xe)|0,d=d+Math.imul(B,Ee)|0,R=R+Math.imul(jt,ve)|0,l=l+Math.imul(jt,Be)|0,l=l+Math.imul(re,ve)|0,d=d+Math.imul(re,Be)|0,R=R+Math.imul(Yt,Se)|0,l=l+Math.imul(Yt,Ie)|0,l=l+Math.imul(Wt,Se)|0,d=d+Math.imul(Wt,Ie)|0,R=R+Math.imul(Jt,ke)|0,l=l+Math.imul(Jt,Re)|0,l=l+Math.imul(ne,ke)|0,d=d+Math.imul(ne,Re)|0,R=R+Math.imul(Ot,Ne)|0,l=l+Math.imul(Ot,Ce)|0,l=l+Math.imul(Qt,Ne)|0,d=d+Math.imul(Qt,Ce)|0;var ju=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(ju>>>26)|0,ju&=67108863,R=Math.imul(J,be),l=Math.imul(J,Ae),l=l+Math.imul(tt,be)|0,d=Math.imul(tt,Ae),R=R+Math.imul(m,xe)|0,l=l+Math.imul(m,Ee)|0,l=l+Math.imul(P,xe)|0,d=d+Math.imul(P,Ee)|0,R=R+Math.imul(se,ve)|0,l=l+Math.imul(se,Be)|0,l=l+Math.imul(B,ve)|0,d=d+Math.imul(B,Be)|0,R=R+Math.imul(jt,Se)|0,l=l+Math.imul(jt,Ie)|0,l=l+Math.imul(re,Se)|0,d=d+Math.imul(re,Ie)|0,R=R+Math.imul(Yt,ke)|0,l=l+Math.imul(Yt,Re)|0,l=l+Math.imul(Wt,ke)|0,d=d+Math.imul(Wt,Re)|0,R=R+Math.imul(Jt,Ne)|0,l=l+Math.imul(Jt,Ce)|0,l=l+Math.imul(ne,Ne)|0,d=d+Math.imul(ne,Ce)|0;var Zu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Zu>>>26)|0,Zu&=67108863,R=Math.imul(J,xe),l=Math.imul(J,Ee),l=l+Math.imul(tt,xe)|0,d=Math.imul(tt,Ee),R=R+Math.imul(m,ve)|0,l=l+Math.imul(m,Be)|0,l=l+Math.imul(P,ve)|0,d=d+Math.imul(P,Be)|0,R=R+Math.imul(se,Se)|0,l=l+Math.imul(se,Ie)|0,l=l+Math.imul(B,Se)|0,d=d+Math.imul(B,Ie)|0,R=R+Math.imul(jt,ke)|0,l=l+Math.imul(jt,Re)|0,l=l+Math.imul(re,ke)|0,d=d+Math.imul(re,Re)|0,R=R+Math.imul(Yt,Ne)|0,l=l+Math.imul(Yt,Ce)|0,l=l+Math.imul(Wt,Ne)|0,d=d+Math.imul(Wt,Ce)|0;var Yu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Yu>>>26)|0,Yu&=67108863,R=Math.imul(J,ve),l=Math.imul(J,Be),l=l+Math.imul(tt,ve)|0,d=Math.imul(tt,Be),R=R+Math.imul(m,Se)|0,l=l+Math.imul(m,Ie)|0,l=l+Math.imul(P,Se)|0,d=d+Math.imul(P,Ie)|0,R=R+Math.imul(se,ke)|0,l=l+Math.imul(se,Re)|0,l=l+Math.imul(B,ke)|0,d=d+Math.imul(B,Re)|0,R=R+Math.imul(jt,Ne)|0,l=l+Math.imul(jt,Ce)|0,l=l+Math.imul(re,Ne)|0,d=d+Math.imul(re,Ce)|0;var Xu=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(Xu>>>26)|0,Xu&=67108863,R=Math.imul(J,Se),l=Math.imul(J,Ie),l=l+Math.imul(tt,Se)|0,d=Math.imul(tt,Ie),R=R+Math.imul(m,ke)|0,l=l+Math.imul(m,Re)|0,l=l+Math.imul(P,ke)|0,d=d+Math.imul(P,Re)|0,R=R+Math.imul(se,Ne)|0,l=l+Math.imul(se,Ce)|0,l=l+Math.imul(B,Ne)|0,d=d+Math.imul(B,Ce)|0;var tl=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(tl>>>26)|0,tl&=67108863,R=Math.imul(J,ke),l=Math.imul(J,Re),l=l+Math.imul(tt,ke)|0,d=Math.imul(tt,Re),R=R+Math.imul(m,Ne)|0,l=l+Math.imul(m,Ce)|0,l=l+Math.imul(P,Ne)|0,d=d+Math.imul(P,Ce)|0;var el=(H+R|0)+((l&8191)<<13)|0;H=(d+(l>>>13)|0)+(el>>>26)|0,el&=67108863,R=Math.imul(J,Ne),l=Math.imul(J,Ce),l=l+Math.imul(tt,Ne)|0,d=Math.imul(tt,Ce);var nl=(H+R|0)+((l&8191)<<13)|0;return H=(d+(l>>>13)|0)+(nl>>>26)|0,nl&=67108863,F[0]=Fu,F[1]=Du,F[2]=Hu,F[3]=Gu,F[4]=zu,F[5]=Ku,F[6]=Vu,F[7]=qu,F[8]=Qu,F[9]=Wu,F[10]=$u,F[11]=Ju,F[12]=ju,F[13]=Zu,F[14]=Yu,F[15]=Xu,F[16]=tl,F[17]=el,F[18]=nl,H!==0&&(F[19]=H,w.length++),w};Math.imul||(V=_);function z(v,u,p){p.negative=u.negative^v.negative,p.length=v.length+u.length;for(var w=0,k=0,C=0;C<p.length-1;C++){var F=k;k=0;for(var H=w&67108863,R=Math.min(C,u.length-1),l=Math.max(0,C-v.length+1);l<=R;l++){var d=C-l,I=v.words[d]|0,T=u.words[l]|0,$=I*T,nt=$&67108863;F=F+($/67108864|0)|0,nt=nt+H|0,H=nt&67108863,F=F+(nt>>>26)|0,k+=F>>>26,F&=67108863}p.words[C]=H,w=F,F=k}return w!==0?p.words[C]=w:p.length--,p._strip()}function rt(v,u,p){return z(v,u,p)}i.prototype.mulTo=function(u,p){var w,k=this.length+u.length;return this.length===10&&u.length===10?w=V(this,u,p):k<63?w=_(this,u,p):k<1024?w=z(this,u,p):w=rt(this,u,p),w},i.prototype.mul=function(u){var p=new i(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},i.prototype.mulf=function(u){var p=new i(null);return p.words=new Array(this.length+u.length),rt(this,u,p)},i.prototype.imul=function(u){return this.clone().mulTo(u,this)},i.prototype.imuln=function(u){var p=u<0;p&&(u=-u),n(typeof u=="number"),n(u<67108864);for(var w=0,k=0;k<this.length;k++){var C=(this.words[k]|0)*u,F=(C&67108863)+(w&67108863);w>>=26,w+=C/67108864|0,w+=F>>>26,this.words[k]=F&67108863}return w!==0&&(this.words[k]=w,this.length++),this.length=u===0?1:this.length,p?this.ineg():this},i.prototype.muln=function(u){return this.clone().imuln(u)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(u){var p=S(u);if(p.length===0)return new i(1);for(var w=this,k=0;k<p.length&&p[k]===0;k++,w=w.sqr());if(++k<p.length)for(var C=w.sqr();k<p.length;k++,C=C.sqr())p[k]!==0&&(w=w.mul(C));return w},i.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var p=u%26,w=(u-p)/26,k=67108863>>>26-p<<26-p,C;if(p!==0){var F=0;for(C=0;C<this.length;C++){var H=this.words[C]&k,R=(this.words[C]|0)-H<<p;this.words[C]=R|F,F=H>>>26-p}F&&(this.words[C]=F,this.length++)}if(w!==0){for(C=this.length-1;C>=0;C--)this.words[C+w]=this.words[C];for(C=0;C<w;C++)this.words[C]=0;this.length+=w}return this._strip()},i.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},i.prototype.iushrn=function(u,p,w){n(typeof u=="number"&&u>=0);var k;p?k=(p-p%26)/26:k=0;var C=u%26,F=Math.min((u-C)/26,this.length),H=67108863^67108863>>>C<<C,R=w;if(k-=F,k=Math.max(0,k),R){for(var l=0;l<F;l++)R.words[l]=this.words[l];R.length=F}if(F!==0)if(this.length>F)for(this.length-=F,l=0;l<this.length;l++)this.words[l]=this.words[l+F];else this.words[0]=0,this.length=1;var d=0;for(l=this.length-1;l>=0&&(d!==0||l>=k);l--){var I=this.words[l]|0;this.words[l]=d<<26-C|I>>>C,d=I&H}return R&&d!==0&&(R.words[R.length++]=d),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(u,p,w){return n(this.negative===0),this.iushrn(u,p,w)},i.prototype.shln=function(u){return this.clone().ishln(u)},i.prototype.ushln=function(u){return this.clone().iushln(u)},i.prototype.shrn=function(u){return this.clone().ishrn(u)},i.prototype.ushrn=function(u){return this.clone().iushrn(u)},i.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,w=(u-p)/26,k=1<<p;if(this.length<=w)return!1;var C=this.words[w];return!!(C&k)},i.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,w=(u-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(p!==0&&w++,this.length=Math.min(w,this.length),p!==0){var k=67108863^67108863>>>p<<p;this.words[this.length-1]&=k}return this._strip()},i.prototype.maskn=function(u){return this.clone().imaskn(u)},i.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},i.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},i.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},i.prototype.addn=function(u){return this.clone().iaddn(u)},i.prototype.subn=function(u){return this.clone().isubn(u)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(u,p,w){var k=u.length+w,C;this._expand(k);var F,H=0;for(C=0;C<u.length;C++){F=(this.words[C+w]|0)+H;var R=(u.words[C]|0)*p;F-=R&67108863,H=(F>>26)-(R/67108864|0),this.words[C+w]=F&67108863}for(;C<this.length-w;C++)F=(this.words[C+w]|0)+H,H=F>>26,this.words[C+w]=F&67108863;if(H===0)return this._strip();for(n(H===-1),H=0,C=0;C<this.length;C++)F=-(this.words[C]|0)+H,H=F>>26,this.words[C]=F&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(u,p){var w=this.length-u.length,k=this.clone(),C=u,F=C.words[C.length-1]|0,H=this._countBits(F);w=26-H,w!==0&&(C=C.ushln(w),k.iushln(w),F=C.words[C.length-1]|0);var R=k.length-C.length,l;if(p!=="mod"){l=new i(null),l.length=R+1,l.words=new Array(l.length);for(var d=0;d<l.length;d++)l.words[d]=0}var I=k.clone()._ishlnsubmul(C,1,R);I.negative===0&&(k=I,l&&(l.words[R]=1));for(var T=R-1;T>=0;T--){var $=(k.words[C.length+T]|0)*67108864+(k.words[C.length+T-1]|0);for($=Math.min($/F|0,67108863),k._ishlnsubmul(C,$,T);k.negative!==0;)$--,k.negative=0,k._ishlnsubmul(C,1,T),k.isZero()||(k.negative^=1);l&&(l.words[T]=$)}return l&&l._strip(),k._strip(),p!=="div"&&w!==0&&k.iushrn(w),{div:l||null,mod:k}},i.prototype.divmod=function(u,p,w){if(n(!u.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var k,C,F;return this.negative!==0&&u.negative===0?(F=this.neg().divmod(u,p),p!=="mod"&&(k=F.div.neg()),p!=="div"&&(C=F.mod.neg(),w&&C.negative!==0&&C.iadd(u)),{div:k,mod:C}):this.negative===0&&u.negative!==0?(F=this.divmod(u.neg(),p),p!=="mod"&&(k=F.div.neg()),{div:k,mod:F.mod}):(this.negative&u.negative)!==0?(F=this.neg().divmod(u.neg(),p),p!=="div"&&(C=F.mod.neg(),w&&C.negative!==0&&C.isub(u)),{div:F.div,mod:C}):u.length>this.length||this.cmp(u)<0?{div:new i(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new i(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new i(this.modrn(u.words[0]))}:this._wordDiv(u,p)},i.prototype.div=function(u){return this.divmod(u,"div",!1).div},i.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},i.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},i.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var w=p.div.negative!==0?p.mod.isub(u):p.mod,k=u.ushrn(1),C=u.andln(1),F=w.cmp(k);return F<0||C===1&&F===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},i.prototype.modrn=function(u){var p=u<0;p&&(u=-u),n(u<=67108863);for(var w=(1<<26)%u,k=0,C=this.length-1;C>=0;C--)k=(w*k+(this.words[C]|0))%u;return p?-k:k},i.prototype.modn=function(u){return this.modrn(u)},i.prototype.idivn=function(u){var p=u<0;p&&(u=-u),n(u<=67108863);for(var w=0,k=this.length-1;k>=0;k--){var C=(this.words[k]|0)+w*67108864;this.words[k]=C/u|0,w=C%u}return this._strip(),p?this.ineg():this},i.prototype.divn=function(u){return this.clone().idivn(u)},i.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var p=this,w=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var k=new i(1),C=new i(0),F=new i(0),H=new i(1),R=0;p.isEven()&&w.isEven();)p.iushrn(1),w.iushrn(1),++R;for(var l=w.clone(),d=p.clone();!p.isZero();){for(var I=0,T=1;(p.words[0]&T)===0&&I<26;++I,T<<=1);if(I>0)for(p.iushrn(I);I-- >0;)(k.isOdd()||C.isOdd())&&(k.iadd(l),C.isub(d)),k.iushrn(1),C.iushrn(1);for(var $=0,nt=1;(w.words[0]&nt)===0&&$<26;++$,nt<<=1);if($>0)for(w.iushrn($);$-- >0;)(F.isOdd()||H.isOdd())&&(F.iadd(l),H.isub(d)),F.iushrn(1),H.iushrn(1);p.cmp(w)>=0?(p.isub(w),k.isub(F),C.isub(H)):(w.isub(p),F.isub(k),H.isub(C))}return{a:F,b:H,gcd:w.iushln(R)}},i.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var p=this,w=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var k=new i(1),C=new i(0),F=w.clone();p.cmpn(1)>0&&w.cmpn(1)>0;){for(var H=0,R=1;(p.words[0]&R)===0&&H<26;++H,R<<=1);if(H>0)for(p.iushrn(H);H-- >0;)k.isOdd()&&k.iadd(F),k.iushrn(1);for(var l=0,d=1;(w.words[0]&d)===0&&l<26;++l,d<<=1);if(l>0)for(w.iushrn(l);l-- >0;)C.isOdd()&&C.iadd(F),C.iushrn(1);p.cmp(w)>=0?(p.isub(w),k.isub(C)):(w.isub(p),C.isub(k))}var I;return p.cmpn(1)===0?I=k:I=C,I.cmpn(0)<0&&I.iadd(u),I},i.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),w=u.clone();p.negative=0,w.negative=0;for(var k=0;p.isEven()&&w.isEven();k++)p.iushrn(1),w.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;w.isEven();)w.iushrn(1);var C=p.cmp(w);if(C<0){var F=p;p=w,w=F}else if(C===0||w.cmpn(1)===0)break;p.isub(w)}while(!0);return w.iushln(k)},i.prototype.invm=function(u){return this.egcd(u).a.umod(u)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(u){return this.words[0]&u},i.prototype.bincn=function(u){n(typeof u=="number");var p=u%26,w=(u-p)/26,k=1<<p;if(this.length<=w)return this._expand(w+1),this.words[w]|=k,this;for(var C=k,F=w;C!==0&&F<this.length;F++){var H=this.words[F]|0;H+=C,C=H>>>26,H&=67108863,this.words[F]=H}return C!==0&&(this.words[F]=C,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var w;if(this.length>1)w=1;else{p&&(u=-u),n(u<=67108863,"Number is too big");var k=this.words[0]|0;w=k===u?0:k<u?-1:1}return this.negative!==0?-w|0:w},i.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},i.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,w=this.length-1;w>=0;w--){var k=this.words[w]|0,C=u.words[w]|0;if(k!==C){k<C?p=-1:k>C&&(p=1);break}}return p},i.prototype.gtn=function(u){return this.cmpn(u)===1},i.prototype.gt=function(u){return this.cmp(u)===1},i.prototype.gten=function(u){return this.cmpn(u)>=0},i.prototype.gte=function(u){return this.cmp(u)>=0},i.prototype.ltn=function(u){return this.cmpn(u)===-1},i.prototype.lt=function(u){return this.cmp(u)===-1},i.prototype.lten=function(u){return this.cmpn(u)<=0},i.prototype.lte=function(u){return this.cmp(u)<=0},i.prototype.eqn=function(u){return this.cmpn(u)===0},i.prototype.eq=function(u){return this.cmp(u)===0},i.red=function(u){return new L(u)},i.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(u){return this.red=u,this},i.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},i.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},i.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},i.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},i.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},i.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},i.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},i.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var K={k256:null,p224:null,p192:null,p25519:null};function Y(v,u){this.name=v,this.p=new i(u,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var u=new i(null);return u.words=new Array(Math.ceil(this.n/13)),u},Y.prototype.ireduce=function(u){var p=u,w;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),w=p.bitLength();while(w>this.n);var k=w<this.n?-1:p.ucmp(this.p);return k===0?(p.words[0]=0,p.length=1):k>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},Y.prototype.split=function(u,p){u.iushrn(this.n,0,p)},Y.prototype.imulK=function(u){return u.imul(this.k)};function st(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(st,Y),st.prototype.split=function(u,p){for(var w=4194303,k=Math.min(u.length,9),C=0;C<k;C++)p.words[C]=u.words[C];if(p.length=k,u.length<=9){u.words[0]=0,u.length=1;return}var F=u.words[9];for(p.words[p.length++]=F&w,C=10;C<u.length;C++){var H=u.words[C]|0;u.words[C-10]=(H&w)<<4|F>>>22,F=H}F>>>=22,u.words[C-10]=F,F===0&&u.length>10?u.length-=10:u.length-=9},st.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,w=0;w<u.length;w++){var k=u.words[w]|0;p+=k*977,u.words[w]=p&67108863,p=k*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function et(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(et,Y);function U(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(U,Y);function O(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(O,Y),O.prototype.imulK=function(u){for(var p=0,w=0;w<u.length;w++){var k=(u.words[w]|0)*19+p,C=k&67108863;k>>>=26,u.words[w]=C,p=k}return p!==0&&(u.words[u.length++]=p),u},i._prime=function(u){if(K[u])return K[u];var p;if(u==="k256")p=new st;else if(u==="p224")p=new et;else if(u==="p192")p=new U;else if(u==="p25519")p=new O;else throw new Error("Unknown prime "+u);return K[u]=p,p};function L(v){if(typeof v=="string"){var u=i._prime(v);this.m=u.p,this.prime=u}else n(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}L.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},L.prototype._verify2=function(u,p){n((u.negative|p.negative)===0,"red works only with positives"),n(u.red&&u.red===p.red,"red works only with red numbers")},L.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(h(u,u.umod(this.m)._forceRed(this)),u)},L.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},L.prototype.add=function(u,p){this._verify2(u,p);var w=u.add(p);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},L.prototype.iadd=function(u,p){this._verify2(u,p);var w=u.iadd(p);return w.cmp(this.m)>=0&&w.isub(this.m),w},L.prototype.sub=function(u,p){this._verify2(u,p);var w=u.sub(p);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},L.prototype.isub=function(u,p){this._verify2(u,p);var w=u.isub(p);return w.cmpn(0)<0&&w.iadd(this.m),w},L.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},L.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},L.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},L.prototype.isqr=function(u){return this.imul(u,u.clone())},L.prototype.sqr=function(u){return this.mul(u,u)},L.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(u,w)}for(var k=this.m.subn(1),C=0;!k.isZero()&&k.andln(1)===0;)C++,k.iushrn(1);n(!k.isZero());var F=new i(1).toRed(this),H=F.redNeg(),R=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,R).cmp(H)!==0;)l.redIAdd(H);for(var d=this.pow(l,k),I=this.pow(u,k.addn(1).iushrn(1)),T=this.pow(u,k),$=C;T.cmp(F)!==0;){for(var nt=T,ft=0;nt.cmp(F)!==0;ft++)nt=nt.redSqr();n(ft<$);var mt=this.pow(d,new i(1).iushln($-ft-1));I=I.redMul(mt),d=mt.redSqr(),T=T.redMul(d),$=ft}return I},L.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},L.prototype.pow=function(u,p){if(p.isZero())return new i(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var w=4,k=new Array(1<<w);k[0]=new i(1).toRed(this),k[1]=u;for(var C=2;C<k.length;C++)k[C]=this.mul(k[C-1],u);var F=k[0],H=0,R=0,l=p.bitLength()%26;for(l===0&&(l=26),C=p.length-1;C>=0;C--){for(var d=p.words[C],I=l-1;I>=0;I--){var T=d>>I&1;if(F!==k[0]&&(F=this.sqr(F)),T===0&&H===0){R=0;continue}H<<=1,H|=T,R++,!(R!==w&&(C!==0||I!==0))&&(F=this.mul(F,k[H]),R=0,H=0)}l=26}return F},L.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},L.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},i.mont=function(u){return new G(u)};function G(v){L.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(G,L),G.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},G.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},G.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var w=u.imul(p),k=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=w.isub(k).iushrn(this.shift),F=C;return C.cmp(this.m)>=0?F=C.isub(this.m):C.cmpn(0)<0&&(F=C.iadd(this.m)),F._forceRed(this)},G.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new i(0)._forceRed(this);var w=u.mul(p),k=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=w.isub(k).iushrn(this.shift),F=C;return C.cmp(this.m)>=0?F=C.isub(this.m):C.cmpn(0)<0&&(F=C.iadd(this.m)),F._forceRed(this)},G.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,My)}(xc)),xc.exports}var _y=X0();const qh=fu(_y);var cc={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Qh;function Oy(){return Qh||(Qh=1,function(r,t){var e=Df(),n=e.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,a,c){return n(o,a,c)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var f=n(o);return a!==void 0?typeof c=="string"?f.fill(a,c):f.fill(a):f.fill(0),f},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}}(cc,cc.exports)),cc.exports}var fl,Wh;function Ly(){if(Wh)return fl;Wh=1;var r=Oy().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var c=e.length,f=e.charAt(0),h=Math.log(c)/Math.log(256),y=Math.log(256)/Math.log(c);function E(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=r.from(x)),!r.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var S=0,_=0,V=0,z=x.length;V!==z&&x[V]===0;)V++,S++;for(var rt=(z-V)*y+1>>>0,K=new Uint8Array(rt);V!==z;){for(var Y=x[V],st=0,et=rt-1;(Y!==0||st<_)&&et!==-1;et--,st++)Y+=256*K[et]>>>0,K[et]=Y%c>>>0,Y=Y/c>>>0;if(Y!==0)throw new Error("Non-zero carry");_=st,V++}for(var U=rt-_;U!==rt&&K[U]===0;)U++;for(var O=f.repeat(S);U<rt;++U)O+=e.charAt(K[U]);return O}function b(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return r.alloc(0);for(var S=0,_=0,V=0;x[S]===f;)_++,S++;for(var z=(x.length-S)*h+1>>>0,rt=new Uint8Array(z);S<x.length;){var K=x.charCodeAt(S);if(K>255)return;var Y=n[K];if(Y===255)return;for(var st=0,et=z-1;(Y!==0||st<V)&&et!==-1;et--,st++)Y+=c*rt[et]>>>0,rt[et]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");V=st,S++}for(var U=z-V;U!==z&&rt[U]===0;)U++;var O=r.allocUnsafe(_+(z-U));O.fill(0,0,_);for(var L=_;U!==z;)O[L++]=rt[U++];return O}function N(x){var S=b(x);if(S)return S;throw new Error("Non-base"+c+" character")}return{encode:E,decodeUnsafe:b,decode:N}}return fl=t,fl}var hl,$h;function tp(){if($h)return hl;$h=1;var r=Ly(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return hl=r(t),hl}var Uy=tp();const He=fu(Uy),Jh=F0;var Ht={};function Lr(r,t,e){return t<=r&&r<=e}function mu(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Fy(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),n+=1}else s.push(65533)}n+=1}return s}function Dy(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Oc=-1;function qf(r){this.tokens=[].slice.call(r)}qf.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Oc},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Go=-1;function dl(r,t){if(r)throw TypeError("Decoder error");return t||65533}var Lc="utf-8";function Uc(r,t){if(!(this instanceof Uc))return new Uc(r,t);if(r=r!==void 0?String(r).toLowerCase():Lc,r!==Lc)throw new Error("Encoding not supported. Only utf-8 is supported");t=mu(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Uc.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=mu(e),this._streaming||(this._decoder=new Hy({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new qf(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Go);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Go)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Dy(i)}};function Fc(r,t){if(!(this instanceof Fc))return new Fc(r,t);if(r=r!==void 0?String(r).toLowerCase():Lc,r!==Lc)throw new Error("Encoding not supported. Only utf-8 is supported");t=mu(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Fc.prototype={encode:function(t,e){t=t?String(t):"",e=mu(e),this._streaming||(this._encoder=new Gy(this._options)),this._streaming=!!e.stream;for(var n=[],s=new qf(Fy(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Go);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Go;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Hy(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===Oc&&s!==0)return s=0,dl(t);if(c===Oc)return Go;if(s===0){if(Lr(c,0,127))return c;if(Lr(c,194,223))s=1,e=c-192;else if(Lr(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,e=c-224;else if(Lr(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,e=c-240;else return dl(t);return e=e<<6*s,null}if(!Lr(c,i,o))return e=s=n=0,i=128,o=191,a.prepend(c),dl(t);if(i=128,o=191,n+=1,e+=c-128<<6*(s-n),n!==s)return null;var f=e;return e=s=n=0,f}}function Gy(r){r.fatal,this.handler=function(t,e){if(e===Oc)return Go;if(Lr(e,0,127))return e;var n,s;Lr(e,128,2047)?(n=1,s=192):Lr(e,2048,65535)?(n=2,s=224):Lr(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const zy=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Uc,TextEncoder:Fc},Symbol.toStringTag,{value:"Module"})),Ky=Ff(zy);var jh;function Vy(){if(jh)return Ht;jh=1;var r=Ht&&Ht.__createBinding||(Object.create?function(U,O,L,G){G===void 0&&(G=L),Object.defineProperty(U,G,{enumerable:!0,get:function(){return O[L]}})}:function(U,O,L,G){G===void 0&&(G=L),U[G]=O[L]}),t=Ht&&Ht.__setModuleDefault||(Object.create?function(U,O){Object.defineProperty(U,"default",{enumerable:!0,value:O})}:function(U,O){U.default=O}),e=Ht&&Ht.__decorate||function(U,O,L,G){var v=arguments.length,u=v<3?O:G===null?G=Object.getOwnPropertyDescriptor(O,L):G,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(U,O,L,G);else for(var w=U.length-1;w>=0;w--)(p=U[w])&&(u=(v<3?p(u):v>3?p(O,L,u):p(O,L))||u);return v>3&&u&&Object.defineProperty(O,L,u),u},n=Ht&&Ht.__importStar||function(U){if(U&&U.__esModule)return U;var O={};if(U!=null)for(var L in U)L!=="default"&&Object.hasOwnProperty.call(U,L)&&r(O,U,L);return t(O,U),O},s=Ht&&Ht.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.deserializeUnchecked=Ht.deserialize=Ht.serialize=Ht.BinaryReader=Ht.BinaryWriter=Ht.BorshError=Ht.baseDecode=Ht.baseEncode=void 0;const i=s(X0()),o=s(tp()),a=n(Ky),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,f=new c("utf-8",{fatal:!0});function h(U){return typeof U=="string"&&(U=Buffer.from(U,"utf8")),o.default.encode(Buffer.from(U))}Ht.baseEncode=h;function y(U){return Buffer.from(o.default.decode(U))}Ht.baseDecode=y;const E=1024;class b extends Error{constructor(O){super(O),this.fieldPath=[],this.originalMessage=O}addToFieldPath(O){this.fieldPath.splice(0,0,O),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ht.BorshError=b;class N{constructor(){this.buf=Buffer.alloc(E),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(E)]))}writeU8(O){this.maybeResize(),this.buf.writeUInt8(O,this.length),this.length+=1}writeU16(O){this.maybeResize(),this.buf.writeUInt16LE(O,this.length),this.length+=2}writeU32(O){this.maybeResize(),this.buf.writeUInt32LE(O,this.length),this.length+=4}writeU64(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",8)))}writeU128(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",16)))}writeU256(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",32)))}writeU512(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",64)))}writeBuffer(O){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),O,Buffer.alloc(E)]),this.length+=O.length}writeString(O){this.maybeResize();const L=Buffer.from(O,"utf8");this.writeU32(L.length),this.writeBuffer(L)}writeFixedArray(O){this.writeBuffer(Buffer.from(O))}writeArray(O,L){this.maybeResize(),this.writeU32(O.length);for(const G of O)this.maybeResize(),L(G)}toArray(){return this.buf.subarray(0,this.length)}}Ht.BinaryWriter=N;function x(U,O,L){const G=L.value;L.value=function(...v){try{return G.apply(this,v)}catch(u){if(u instanceof RangeError){const p=u.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(p)>=0)throw new b("Reached the end of buffer when deserializing")}throw u}}}class S{constructor(O){this.buf=O,this.offset=0}readU8(){const O=this.buf.readUInt8(this.offset);return this.offset+=1,O}readU16(){const O=this.buf.readUInt16LE(this.offset);return this.offset+=2,O}readU32(){const O=this.buf.readUInt32LE(this.offset);return this.offset+=4,O}readU64(){const O=this.readBuffer(8);return new i.default(O,"le")}readU128(){const O=this.readBuffer(16);return new i.default(O,"le")}readU256(){const O=this.readBuffer(32);return new i.default(O,"le")}readU512(){const O=this.readBuffer(64);return new i.default(O,"le")}readBuffer(O){if(this.offset+O>this.buf.length)throw new b(`Expected buffer length ${O} isn't within bounds`);const L=this.buf.slice(this.offset,this.offset+O);return this.offset+=O,L}readString(){const O=this.readU32(),L=this.readBuffer(O);try{return f.decode(L)}catch(G){throw new b(`Error decoding UTF-8 string: ${G}`)}}readFixedArray(O){return new Uint8Array(this.readBuffer(O))}readArray(O){const L=this.readU32(),G=Array();for(let v=0;v<L;++v)G.push(O());return G}}e([x],S.prototype,"readU8",null),e([x],S.prototype,"readU16",null),e([x],S.prototype,"readU32",null),e([x],S.prototype,"readU64",null),e([x],S.prototype,"readU128",null),e([x],S.prototype,"readU256",null),e([x],S.prototype,"readU512",null),e([x],S.prototype,"readString",null),e([x],S.prototype,"readFixedArray",null),e([x],S.prototype,"readArray",null),Ht.BinaryReader=S;function _(U){return U.charAt(0).toUpperCase()+U.slice(1)}function V(U,O,L,G,v){try{if(typeof G=="string")v[`write${_(G)}`](L);else if(G instanceof Array)if(typeof G[0]=="number"){if(L.length!==G[0])throw new b(`Expecting byte array of length ${G[0]}, but got ${L.length} bytes`);v.writeFixedArray(L)}else if(G.length===2&&typeof G[1]=="number"){if(L.length!==G[1])throw new b(`Expecting byte array of length ${G[1]}, but got ${L.length} bytes`);for(let u=0;u<G[1];u++)V(U,null,L[u],G[0],v)}else v.writeArray(L,u=>{V(U,O,u,G[0],v)});else if(G.kind!==void 0)switch(G.kind){case"option":{L==null?v.writeU8(0):(v.writeU8(1),V(U,O,L,G.type,v));break}case"map":{v.writeU32(L.size),L.forEach((u,p)=>{V(U,O,p,G.key,v),V(U,O,u,G.value,v)});break}default:throw new b(`FieldType ${G} unrecognized`)}else z(U,L,v)}catch(u){throw u instanceof b&&u.addToFieldPath(O),u}}function z(U,O,L){if(typeof O.borshSerialize=="function"){O.borshSerialize(L);return}const G=U.get(O.constructor);if(!G)throw new b(`Class ${O.constructor.name} is missing in schema`);if(G.kind==="struct")G.fields.map(([v,u])=>{V(U,v,O[v],u,L)});else if(G.kind==="enum"){const v=O[G.field];for(let u=0;u<G.values.length;++u){const[p,w]=G.values[u];if(p===v){L.writeU8(u),V(U,p,O[p],w,L);break}}}else throw new b(`Unexpected schema kind: ${G.kind} for ${O.constructor.name}`)}function rt(U,O,L=N){const G=new L;return z(U,O,G),G.toArray()}Ht.serialize=rt;function K(U,O,L,G){try{if(typeof L=="string")return G[`read${_(L)}`]();if(L instanceof Array){if(typeof L[0]=="number")return G.readFixedArray(L[0]);if(typeof L[1]=="number"){const v=[];for(let u=0;u<L[1];u++)v.push(K(U,null,L[0],G));return v}else return G.readArray(()=>K(U,O,L[0],G))}if(L.kind==="option")return G.readU8()?K(U,O,L.type,G):void 0;if(L.kind==="map"){let v=new Map;const u=G.readU32();for(let p=0;p<u;p++){const w=K(U,O,L.key,G),k=K(U,O,L.value,G);v.set(w,k)}return v}return Y(U,L,G)}catch(v){throw v instanceof b&&v.addToFieldPath(O),v}}function Y(U,O,L){if(typeof O.borshDeserialize=="function")return O.borshDeserialize(L);const G=U.get(O);if(!G)throw new b(`Class ${O.name} is missing in schema`);if(G.kind==="struct"){const v={};for(const[u,p]of U.get(O).fields)v[u]=K(U,u,p,L);return new O(v)}if(G.kind==="enum"){const v=L.readU8();if(v>=G.values.length)throw new b(`Enum index: ${v} is out of range`);const[u,p]=G.values[v],w=K(U,u,p,L);return new O({[u]:w})}throw new b(`Unexpected schema kind: ${G.kind} for ${O.constructor.name}`)}function st(U,O,L,G=S){const v=new G(L),u=Y(U,O,v);if(v.offset<L.length)throw new b(`Unexpected ${L.length-v.offset} bytes after deserialized data`);return u}Ht.deserialize=st;function et(U,O,L,G=S){const v=new G(L);return Y(U,O,v)}return Ht.deserializeUnchecked=et,Ht}var pl=Vy(),Z={},Zh;function qy(){if(Zh)return Z;Zh=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.s16=Z.s8=Z.nu64be=Z.u48be=Z.u40be=Z.u32be=Z.u24be=Z.u16be=Z.nu64=Z.u48=Z.u40=Z.u32=Z.u24=Z.u16=Z.u8=Z.offset=Z.greedy=Z.Constant=Z.UTF8=Z.CString=Z.Blob=Z.Boolean=Z.BitField=Z.BitStructure=Z.VariantLayout=Z.Union=Z.UnionLayoutDiscriminator=Z.UnionDiscriminator=Z.Structure=Z.Sequence=Z.DoubleBE=Z.Double=Z.FloatBE=Z.Float=Z.NearInt64BE=Z.NearInt64=Z.NearUInt64BE=Z.NearUInt64=Z.IntBE=Z.Int=Z.UIntBE=Z.UInt=Z.OffsetLayout=Z.GreedyCount=Z.ExternalLayout=Z.bindConstructorLayout=Z.nameWithProperty=Z.Layout=Z.uint8ArrayToBuffer=Z.checkUint8Array=void 0,Z.constant=Z.utf8=Z.cstr=Z.blob=Z.unionLayoutDiscriminator=Z.union=Z.seq=Z.bits=Z.struct=Z.f64be=Z.f64=Z.f32be=Z.f32=Z.ns64be=Z.s48be=Z.s40be=Z.s32be=Z.s24be=Z.s16be=Z.ns64=Z.s48=Z.s40=Z.s32=Z.s24=void 0;const r=Df();function t(l){if(!(l instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Z.checkUint8Array=t;function e(l){return t(l),r.Buffer.from(l.buffer,l.byteOffset,l.length)}Z.uint8ArrayToBuffer=e;let n=class{constructor(d,I){if(!Number.isInteger(d))throw new TypeError("span must be an integer");this.span=d,this.property=I}makeDestinationObject(){return{}}getSpan(d,I){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(d){const I=Object.create(this.constructor.prototype);return Object.assign(I,this),I.property=d,I}fromArray(d){}};Z.Layout=n;function s(l,d){return d.property?l+"["+d.property+"]":l}Z.nameWithProperty=s;function i(l,d){if(typeof l!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(l,"layout_"))throw new Error("Class is already bound to a layout");if(!(d&&d instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(d,"boundConstructor_"))throw new Error("layout is already bound to a constructor");l.layout_=d,d.boundConstructor_=l,d.makeDestinationObject=()=>new l,Object.defineProperty(l.prototype,"encode",{value(I,T){return d.encode(this,I,T)},writable:!0}),Object.defineProperty(l,"decode",{value(I,T){return d.decode(I,T)},writable:!0})}Z.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Z.ExternalLayout=o;class a extends o{constructor(d=1,I){if(!Number.isInteger(d)||0>=d)throw new TypeError("elementSpan must be a (positive) integer");super(-1,I),this.elementSpan=d}isCount(){return!0}decode(d,I=0){t(d);const T=d.length-I;return Math.floor(T/this.elementSpan)}encode(d,I,T){return 0}}Z.GreedyCount=a;class c extends o{constructor(d,I=0,T){if(!(d instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(I))throw new TypeError("offset must be integer or undefined");super(d.span,T||d.property),this.layout=d,this.offset=I}isCount(){return this.layout instanceof f||this.layout instanceof h}decode(d,I=0){return this.layout.decode(d,I+this.offset)}encode(d,I,T=0){return this.layout.encode(d,I,T+this.offset)}}Z.OffsetLayout=c;class f extends n{constructor(d,I){if(super(d,I),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,I=0){return e(d).readUIntLE(I,this.span)}encode(d,I,T=0){return e(I).writeUIntLE(d,T,this.span),this.span}}Z.UInt=f;class h extends n{constructor(d,I){if(super(d,I),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,I=0){return e(d).readUIntBE(I,this.span)}encode(d,I,T=0){return e(I).writeUIntBE(d,T,this.span),this.span}}Z.UIntBE=h;class y extends n{constructor(d,I){if(super(d,I),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,I=0){return e(d).readIntLE(I,this.span)}encode(d,I,T=0){return e(I).writeIntLE(d,T,this.span),this.span}}Z.Int=y;class E extends n{constructor(d,I){if(super(d,I),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,I=0){return e(d).readIntBE(I,this.span)}encode(d,I,T=0){return e(I).writeIntBE(d,T,this.span),this.span}}Z.IntBE=E;const b=Math.pow(2,32);function N(l){const d=Math.floor(l/b),I=l-d*b;return{hi32:d,lo32:I}}function x(l,d){return l*b+d}class S extends n{constructor(d){super(8,d)}decode(d,I=0){const T=e(d),$=T.readUInt32LE(I),nt=T.readUInt32LE(I+4);return x(nt,$)}encode(d,I,T=0){const $=N(d),nt=e(I);return nt.writeUInt32LE($.lo32,T),nt.writeUInt32LE($.hi32,T+4),8}}Z.NearUInt64=S;class _ extends n{constructor(d){super(8,d)}decode(d,I=0){const T=e(d),$=T.readUInt32BE(I),nt=T.readUInt32BE(I+4);return x($,nt)}encode(d,I,T=0){const $=N(d),nt=e(I);return nt.writeUInt32BE($.hi32,T),nt.writeUInt32BE($.lo32,T+4),8}}Z.NearUInt64BE=_;class V extends n{constructor(d){super(8,d)}decode(d,I=0){const T=e(d),$=T.readUInt32LE(I),nt=T.readInt32LE(I+4);return x(nt,$)}encode(d,I,T=0){const $=N(d),nt=e(I);return nt.writeUInt32LE($.lo32,T),nt.writeInt32LE($.hi32,T+4),8}}Z.NearInt64=V;class z extends n{constructor(d){super(8,d)}decode(d,I=0){const T=e(d),$=T.readInt32BE(I),nt=T.readUInt32BE(I+4);return x($,nt)}encode(d,I,T=0){const $=N(d),nt=e(I);return nt.writeInt32BE($.hi32,T),nt.writeUInt32BE($.lo32,T+4),8}}Z.NearInt64BE=z;class rt extends n{constructor(d){super(4,d)}decode(d,I=0){return e(d).readFloatLE(I)}encode(d,I,T=0){return e(I).writeFloatLE(d,T),4}}Z.Float=rt;class K extends n{constructor(d){super(4,d)}decode(d,I=0){return e(d).readFloatBE(I)}encode(d,I,T=0){return e(I).writeFloatBE(d,T),4}}Z.FloatBE=K;class Y extends n{constructor(d){super(8,d)}decode(d,I=0){return e(d).readDoubleLE(I)}encode(d,I,T=0){return e(I).writeDoubleLE(d,T),8}}Z.Double=Y;class st extends n{constructor(d){super(8,d)}decode(d,I=0){return e(d).readDoubleBE(I)}encode(d,I,T=0){return e(I).writeDoubleBE(d,T),8}}Z.DoubleBE=st;class et extends n{constructor(d,I,T){if(!(d instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(I instanceof o&&I.isCount()||Number.isInteger(I)&&0<=I))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let $=-1;!(I instanceof o)&&0<d.span&&($=I*d.span),super($,T),this.elementLayout=d,this.count=I}getSpan(d,I=0){if(0<=this.span)return this.span;let T=0,$=this.count;if($ instanceof o&&($=$.decode(d,I)),0<this.elementLayout.span)T=$*this.elementLayout.span;else{let nt=0;for(;nt<$;)T+=this.elementLayout.getSpan(d,I+T),++nt}return T}decode(d,I=0){const T=[];let $=0,nt=this.count;for(nt instanceof o&&(nt=nt.decode(d,I));$<nt;)T.push(this.elementLayout.decode(d,I)),I+=this.elementLayout.getSpan(d,I),$+=1;return T}encode(d,I,T=0){const $=this.elementLayout,nt=d.reduce((ft,mt)=>ft+$.encode(mt,I,T+ft),0);return this.count instanceof o&&this.count.encode(d.length,I,T),nt}}Z.Sequence=et;class U extends n{constructor(d,I,T){if(!(Array.isArray(d)&&d.reduce((nt,ft)=>nt&&ft instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof I=="boolean"&&T===void 0&&(T=I,I=void 0);for(const nt of d)if(0>nt.span&&nt.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let $=-1;try{$=d.reduce((nt,ft)=>nt+ft.getSpan(),0)}catch{}super($,I),this.fields=d,this.decodePrefixes=!!T}getSpan(d,I=0){if(0<=this.span)return this.span;let T=0;try{T=this.fields.reduce(($,nt)=>{const ft=nt.getSpan(d,I);return I+=ft,$+ft},0)}catch{throw new RangeError("indeterminate span")}return T}decode(d,I=0){t(d);const T=this.makeDestinationObject();for(const $ of this.fields)if($.property!==void 0&&(T[$.property]=$.decode(d,I)),I+=$.getSpan(d,I),this.decodePrefixes&&d.length===I)break;return T}encode(d,I,T=0){const $=T;let nt=0,ft=0;for(const mt of this.fields){let qt=mt.span;if(ft=0<qt?qt:0,mt.property!==void 0){const Tt=d[mt.property];Tt!==void 0&&(ft=mt.encode(Tt,I,T),0>qt&&(qt=mt.getSpan(I,T)))}nt=T,T+=qt}return nt+ft-$}fromArray(d){const I=this.makeDestinationObject();for(const T of this.fields)T.property!==void 0&&0<d.length&&(I[T.property]=d.shift());return I}layoutFor(d){if(typeof d!="string")throw new TypeError("property must be string");for(const I of this.fields)if(I.property===d)return I}offsetOf(d){if(typeof d!="string")throw new TypeError("property must be string");let I=0;for(const T of this.fields){if(T.property===d)return I;0>T.span?I=-1:0<=I&&(I+=T.span)}}}Z.Structure=U;class O{constructor(d){this.property=d}decode(d,I){throw new Error("UnionDiscriminator is abstract")}encode(d,I,T){throw new Error("UnionDiscriminator is abstract")}}Z.UnionDiscriminator=O;class L extends O{constructor(d,I){if(!(d instanceof o&&d.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(I||d.property||"variant"),this.layout=d}decode(d,I){return this.layout.decode(d,I)}encode(d,I,T){return this.layout.encode(d,I,T)}}Z.UnionLayoutDiscriminator=L;class G extends n{constructor(d,I,T){let $;if(d instanceof f||d instanceof h)$=new L(new c(d));else if(d instanceof o&&d.isCount())$=new L(d);else if(d instanceof O)$=d;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(I===void 0&&(I=null),!(I===null||I instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(I!==null){if(0>I.span)throw new Error("defaultLayout must have constant span");I.property===void 0&&(I=I.replicate("content"))}let nt=-1;I&&(nt=I.span,0<=nt&&(d instanceof f||d instanceof h)&&(nt+=$.layout.span)),super(nt,T),this.discriminator=$,this.usesPrefixDiscriminator=d instanceof f||d instanceof h,this.defaultLayout=I,this.registry={};let ft=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(mt){return ft(mt)},this.configGetSourceVariant=function(mt){ft=mt.bind(this)}}getSpan(d,I=0){if(0<=this.span)return this.span;const T=this.getVariant(d,I);if(!T)throw new Error("unable to determine span for unrecognized variant");return T.getSpan(d,I)}defaultGetSourceVariant(d){if(Object.prototype.hasOwnProperty.call(d,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(d,this.defaultLayout.property))return;const I=this.registry[d[this.discriminator.property]];if(I&&(!I.layout||I.property&&Object.prototype.hasOwnProperty.call(d,I.property)))return I}else for(const I in this.registry){const T=this.registry[I];if(T.property&&Object.prototype.hasOwnProperty.call(d,T.property))return T}throw new Error("unable to infer src variant")}decode(d,I=0){let T;const $=this.discriminator,nt=$.decode(d,I),ft=this.registry[nt];if(ft===void 0){const mt=this.defaultLayout;let qt=0;this.usesPrefixDiscriminator&&(qt=$.layout.span),T=this.makeDestinationObject(),T[$.property]=nt,T[mt.property]=mt.decode(d,I+qt)}else T=ft.decode(d,I);return T}encode(d,I,T=0){const $=this.getSourceVariant(d);if($===void 0){const nt=this.discriminator,ft=this.defaultLayout;let mt=0;return this.usesPrefixDiscriminator&&(mt=nt.layout.span),nt.encode(d[nt.property],I,T),mt+ft.encode(d[ft.property],I,T+mt)}return $.encode(d,I,T)}addVariant(d,I,T){const $=new v(this,d,I,T);return this.registry[d]=$,$}getVariant(d,I=0){let T;return d instanceof Uint8Array?T=this.discriminator.decode(d,I):T=d,this.registry[T]}}Z.Union=G;class v extends n{constructor(d,I,T,$){if(!(d instanceof G))throw new TypeError("union must be a Union");if(!Number.isInteger(I)||0>I)throw new TypeError("variant must be a (non-negative) integer");if(typeof T=="string"&&$===void 0&&($=T,T=null),T){if(!(T instanceof n))throw new TypeError("layout must be a Layout");if(d.defaultLayout!==null&&0<=T.span&&T.span>d.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof $!="string")throw new TypeError("variant must have a String property")}let nt=d.span;0>d.span&&(nt=T?T.span:0,0<=nt&&d.usesPrefixDiscriminator&&(nt+=d.discriminator.layout.span)),super(nt,$),this.union=d,this.variant=I,this.layout=T||null}getSpan(d,I=0){if(0<=this.span)return this.span;let T=0;this.union.usesPrefixDiscriminator&&(T=this.union.discriminator.layout.span);let $=0;return this.layout&&($=this.layout.getSpan(d,I+T)),T+$}decode(d,I=0){const T=this.makeDestinationObject();if(this!==this.union.getVariant(d,I))throw new Error("variant mismatch");let $=0;return this.union.usesPrefixDiscriminator&&($=this.union.discriminator.layout.span),this.layout?T[this.property]=this.layout.decode(d,I+$):this.property?T[this.property]=!0:this.union.usesPrefixDiscriminator&&(T[this.union.discriminator.property]=this.variant),T}encode(d,I,T=0){let $=0;if(this.union.usesPrefixDiscriminator&&($=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(d,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,I,T);let nt=$;if(this.layout&&(this.layout.encode(d[this.property],I,T+$),nt+=this.layout.getSpan(I,T+$),0<=this.union.span&&nt>this.union.span))throw new Error("encoded variant overruns containing union");return nt}fromArray(d){if(this.layout)return this.layout.fromArray(d)}}Z.VariantLayout=v;function u(l){return 0>l&&(l+=4294967296),l}class p extends n{constructor(d,I,T){if(!(d instanceof f||d instanceof h))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof I=="string"&&T===void 0&&(T=I,I=!1),4<d.span)throw new RangeError("word cannot exceed 32 bits");super(d.span,T),this.word=d,this.msb=!!I,this.fields=[];let $=0;this._packedSetValue=function(nt){return $=u(nt),this},this._packedGetValue=function(){return $}}decode(d,I=0){const T=this.makeDestinationObject(),$=this.word.decode(d,I);this._packedSetValue($);for(const nt of this.fields)nt.property!==void 0&&(T[nt.property]=nt.decode(d));return T}encode(d,I,T=0){const $=this.word.decode(I,T);this._packedSetValue($);for(const nt of this.fields)if(nt.property!==void 0){const ft=d[nt.property];ft!==void 0&&nt.encode(ft)}return this.word.encode(this._packedGetValue(),I,T)}addField(d,I){const T=new w(this,d,I);return this.fields.push(T),T}addBoolean(d){const I=new k(this,d);return this.fields.push(I),I}fieldFor(d){if(typeof d!="string")throw new TypeError("property must be string");for(const I of this.fields)if(I.property===d)return I}}Z.BitStructure=p;class w{constructor(d,I,T){if(!(d instanceof p))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(I)||0>=I)throw new TypeError("bits must be positive integer");const $=8*d.span,nt=d.fields.reduce((ft,mt)=>ft+mt.bits,0);if(I+nt>$)throw new Error("bits too long for span remainder ("+($-nt)+" of "+$+" remain)");this.container=d,this.bits=I,this.valueMask=(1<<I)-1,I===32&&(this.valueMask=4294967295),this.start=nt,this.container.msb&&(this.start=$-nt-I),this.wordMask=u(this.valueMask<<this.start),this.property=T}decode(d,I){const T=this.container._packedGetValue();return u(T&this.wordMask)>>>this.start}encode(d){if(typeof d!="number"||!Number.isInteger(d)||d!==u(d&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const I=this.container._packedGetValue(),T=u(d<<this.start);this.container._packedSetValue(u(I&~this.wordMask)|T)}}Z.BitField=w;class k extends w{constructor(d,I){super(d,1,I)}decode(d,I){return!!super.decode(d,I)}encode(d){typeof d=="boolean"&&(d=+d),super.encode(d)}}Z.Boolean=k;class C extends n{constructor(d,I){if(!(d instanceof o&&d.isCount()||Number.isInteger(d)&&0<=d))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let T=-1;d instanceof o||(T=d),super(T,I),this.length=d}getSpan(d,I){let T=this.span;return 0>T&&(T=this.length.decode(d,I)),T}decode(d,I=0){let T=this.span;return 0>T&&(T=this.length.decode(d,I)),e(d).slice(I,I+T)}encode(d,I,T){let $=this.length;if(this.length instanceof o&&($=d.length),!(d instanceof Uint8Array&&$===d.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+$+") Uint8Array as src");if(T+$>I.length)throw new RangeError("encoding overruns Uint8Array");const nt=e(d);return e(I).write(nt.toString("hex"),T,$,"hex"),this.length instanceof o&&this.length.encode($,I,T),$}}Z.Blob=C;class F extends n{constructor(d){super(-1,d)}getSpan(d,I=0){t(d);let T=I;for(;T<d.length&&d[T]!==0;)T+=1;return 1+T-I}decode(d,I=0){const T=this.getSpan(d,I);return e(d).slice(I,I+T-1).toString("utf-8")}encode(d,I,T=0){typeof d!="string"&&(d=String(d));const $=r.Buffer.from(d,"utf8"),nt=$.length;if(T+nt>I.length)throw new RangeError("encoding overruns Buffer");const ft=e(I);return $.copy(ft,T),ft[T+nt]=0,nt+1}}Z.CString=F;class H extends n{constructor(d,I){if(typeof d=="string"&&I===void 0&&(I=d,d=void 0),d===void 0)d=-1;else if(!Number.isInteger(d))throw new TypeError("maxSpan must be an integer");super(-1,I),this.maxSpan=d}getSpan(d,I=0){return t(d),d.length-I}decode(d,I=0){const T=this.getSpan(d,I);if(0<=this.maxSpan&&this.maxSpan<T)throw new RangeError("text length exceeds maxSpan");return e(d).slice(I,I+T).toString("utf-8")}encode(d,I,T=0){typeof d!="string"&&(d=String(d));const $=r.Buffer.from(d,"utf8"),nt=$.length;if(0<=this.maxSpan&&this.maxSpan<nt)throw new RangeError("text length exceeds maxSpan");if(T+nt>I.length)throw new RangeError("encoding overruns Buffer");return $.copy(e(I),T),nt}}Z.UTF8=H;class R extends n{constructor(d,I){super(0,I),this.value=d}decode(d,I){return this.value}encode(d,I,T){return 0}}return Z.Constant=R,Z.greedy=(l,d)=>new a(l,d),Z.offset=(l,d,I)=>new c(l,d,I),Z.u8=l=>new f(1,l),Z.u16=l=>new f(2,l),Z.u24=l=>new f(3,l),Z.u32=l=>new f(4,l),Z.u40=l=>new f(5,l),Z.u48=l=>new f(6,l),Z.nu64=l=>new S(l),Z.u16be=l=>new h(2,l),Z.u24be=l=>new h(3,l),Z.u32be=l=>new h(4,l),Z.u40be=l=>new h(5,l),Z.u48be=l=>new h(6,l),Z.nu64be=l=>new _(l),Z.s8=l=>new y(1,l),Z.s16=l=>new y(2,l),Z.s24=l=>new y(3,l),Z.s32=l=>new y(4,l),Z.s40=l=>new y(5,l),Z.s48=l=>new y(6,l),Z.ns64=l=>new V(l),Z.s16be=l=>new E(2,l),Z.s24be=l=>new E(3,l),Z.s32be=l=>new E(4,l),Z.s40be=l=>new E(5,l),Z.s48be=l=>new E(6,l),Z.ns64be=l=>new z(l),Z.f32=l=>new rt(l),Z.f32be=l=>new K(l),Z.f64=l=>new Y(l),Z.f64be=l=>new st(l),Z.struct=(l,d,I)=>new U(l,d,I),Z.bits=(l,d,I)=>new p(l,d,I),Z.seq=(l,d,I)=>new et(l,d,I),Z.union=(l,d,I)=>new G(l,d,I),Z.unionLayoutDiscriminator=(l,d)=>new L(l,d),Z.blob=(l,d)=>new C(l,d),Z.cstr=l=>new F(l),Z.utf8=(l,d)=>new H(l,d),Z.constant=(l,d)=>new R(l,d),Z}var D=qy(),Qy=8078e3,Wy=8078001,$y=8078004,Jy=8078005,jy=8078006,Zy=8078011;function ep(r){return Array.isArray(r)?"%5B"+r.map(ep).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function Yy([r,t]){return`${r}=${ep(t)}`}function Xy(r){const t=Object.entries(r).map(Yy).join("&");return btoa(t)}function tw(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${Xy(t)}'`),`${e}\``}}var Vi=class extends Error{constructor(...[t,e]){let n,s;if(e){const{cause:o,...a}=e;o&&(s={cause:o}),Object.keys(a).length>0&&(n=a)}const i=tw(t,n);super(i,s);W(this,"cause",this.cause);W(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function ew(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function nw(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(ew(t,r));return r.write(t,e,0),e}})}function rw(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function ki(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function sw(r,t){if(ki(r)!==ki(t))throw new Vi($y);if(ki(r)&&ki(t)&&r.fixedSize!==t.fixedSize)throw new Vi(Jy,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!ki(r)&&!ki(t)&&r.maxSize!==t.maxSize)throw new Vi(jy,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function iw(r,t,e=0){if(t.length-e<=0)throw new Vi(Qy,{codecDescription:r})}function ow(r,t,e,n=0){const s=e.length-n;if(s<t)throw new Vi(Wy,{bytesLength:s,codecDescription:r,expected:t})}function aw(r,t,e,n){if(n<t||n>e)throw new Vi(Zy,{codecDescription:r,max:e,min:t,value:n})}function np(r){return(r==null?void 0:r.endian)!==1}function cw(r){return nw({fixedSize:r.size,write(t,e,n){r.range&&aw(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,np(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function uw(r){return rw({fixedSize:r.size,read(t,e=0){iw(r.name,t,e),ow(r.name,r.size,t,e);const n=new DataView(lw(t,e,r.size));return[r.get(n,np(r.config)),e+r.size]}})}function lw(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var fw=(r={})=>cw({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),hw=(r={})=>uw({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),dw=(r={})=>sw(fw(r),hw(r));class pw extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:a}=t,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function gw(r){return Wa(r)&&typeof r[Symbol.iterator]=="function"}function Wa(r){return typeof r=="object"&&r!=null}function Dc(r){return Wa(r)&&!Array.isArray(r)}function jn(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function mw(r){const{done:t,value:e}=r.next();return t?void 0:e}function yw(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${jn(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:c}}function*Yh(r,t,e,n){gw(r)||(r=[r]);for(const s of r){const i=yw(s,t,e,n);i&&(yield i)}}function*Qf(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,a={path:n,branch:s,mask:o};i&&(r=t.coercer(r,a));let c="valid";for(const f of t.validator(r,a))f.explanation=e.message,c="not_valid",yield[f,void 0];for(let[f,h,y]of t.entries(r,a)){const E=Qf(h,y,{path:f===void 0?n:[...n,f],branch:f===void 0?s:[...s,h],coerce:i,mask:o,message:e.message});for(const b of E)b[0]?(c=b[0].refinement!=null?"not_refined":"not_valid",yield[b[0],void 0]):i&&(h=b[1],f===void 0?r=h:r instanceof Map?r.set(f,h):r instanceof Set?r.add(h):Wa(r)&&(h!==void 0||f in r)&&(r[f]=h))}if(c!=="not_valid")for(const f of t.refiner(r,a))f.explanation=e.message,c="not_refined",yield[f,void 0];c==="valid"&&(yield[void 0,r])}let yr=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=t;this.type=e,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(c,f)=>{const h=s(c,f);return Yh(h,f,this,c)}:this.validator=()=>[],i?this.refiner=(c,f)=>{const h=i(c,f);return Yh(h,f,this,c)}:this.refiner=()=>[]}assert(t,e){return ww(t,this,e)}create(t,e){return ut(t,this,e)}is(t){return rp(t,this)}mask(t,e){return bw(t,this,e)}validate(t,e={}){return $a(t,this,e)}};function ww(r,t,e){const n=$a(r,t,{message:e});if(n[0])throw n[0]}function ut(r,t,e){const n=$a(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function bw(r,t,e){const n=$a(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function rp(r,t){return!$a(r,t)[0]}function $a(r,t,e={}){const n=Qf(r,t,e),s=mw(n);return s[0]?[new pw(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function bi(r,t){return new yr({type:r,schema:null,validator:t})}function Aw(){return bi("any",()=>!0)}function lt(r){return new yr({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${jn(t)}`}})}function mr(){return bi("boolean",r=>typeof r=="boolean")}function Wf(r){return bi("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${jn(t)}`)}function Xt(r){const t=jn(r),e=typeof r;return new yr({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${jn(n)}`}})}function xw(){return bi("never",()=>!1)}function ht(r){return new yr({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function j(){return bi("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${jn(r)}`)}function wt(r){return new yr({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function sp(r,t){return new yr({type:"record",schema:null,*entries(e){if(Wa(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return Dc(e)||`Expected an object, but received: ${jn(e)}`},coercer(e){return Dc(e)?{...e}:e}})}function ct(){return bi("string",r=>typeof r=="string"||`Expected a string, but received: ${jn(r)}`)}function $f(r){const t=xw();return new yr({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${jn(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function ot(r){const t=Object.keys(r);return new yr({type:"type",schema:r,*entries(e){if(Wa(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return Dc(e)||`Expected an object, but received: ${jn(e)}`},coercer(e){return Dc(e)?{...e}:e}})}function un(r){const t=r.map(e=>e.type).join(" | ");return new yr({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=Qf(e,i,n),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${jn(e)}`,...s]}})}function Yo(){return bi("unknown",()=>!0)}function Ja(r,t,e){return new yr({...r,coercer:(n,s)=>rp(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var uc,Ew=new Uint8Array(16);function ip(){if(!uc&&(uc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!uc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uc(Ew)}const vw=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function yu(r){return typeof r=="string"&&vw.test(r)}var Ue=[];for(var gl=0;gl<256;++gl)Ue.push((gl+256).toString(16).substr(1));function wu(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Ue[r[t+0]]+Ue[r[t+1]]+Ue[r[t+2]]+Ue[r[t+3]]+"-"+Ue[r[t+4]]+Ue[r[t+5]]+"-"+Ue[r[t+6]]+Ue[r[t+7]]+"-"+Ue[r[t+8]]+Ue[r[t+9]]+"-"+Ue[r[t+10]]+Ue[r[t+11]]+Ue[r[t+12]]+Ue[r[t+13]]+Ue[r[t+14]]+Ue[r[t+15]]).toLowerCase();if(!yu(e))throw TypeError("Stringified UUID is invalid");return e}var Xh,ml,yl=0,wl=0;function Bw(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||Xh,o=r.clockseq!==void 0?r.clockseq:ml;if(i==null||o==null){var a=r.random||(r.rng||ip)();i==null&&(i=Xh=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=ml=(a[6]<<8|a[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),f=r.nsecs!==void 0?r.nsecs:wl+1,h=c-yl+(f-wl)/1e4;if(h<0&&r.clockseq===void 0&&(o=o+1&16383),(h<0||c>yl)&&r.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");yl=c,wl=f,ml=o,c+=122192928e5;var y=((c&268435455)*1e4+f)%4294967296;s[n++]=y>>>24&255,s[n++]=y>>>16&255,s[n++]=y>>>8&255,s[n++]=y&255;var E=c/4294967296*1e4&268435455;s[n++]=E>>>8&255,s[n++]=E&255,s[n++]=E>>>24&15|16,s[n++]=E>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var b=0;b<6;++b)s[n+b]=i[b];return t||wu(s)}function op(r){if(!yu(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Sw(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var Iw="6ba7b810-9dad-11d1-80b4-00c04fd430c8",kw="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ap(r,t,e){function n(s,i,o,a){if(typeof s=="string"&&(s=Sw(s)),typeof i=="string"&&(i=op(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=e(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){a=a||0;for(var f=0;f<16;++f)o[a+f]=c[f];return o}return wu(c)}try{n.name=r}catch{}return n.DNS=Iw,n.URL=kw,n}function Rw(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Nw(Cw(Pw(r),r.length*8))}function Nw(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function cp(r){return(r+64>>>9<<4)+14+1}function Cw(r,t){r[t>>5]|=128<<t%32,r[cp(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=e,c=n,f=s,h=i;e=Qe(e,n,s,i,r[o],7,-680876936),i=Qe(i,e,n,s,r[o+1],12,-389564586),s=Qe(s,i,e,n,r[o+2],17,606105819),n=Qe(n,s,i,e,r[o+3],22,-1044525330),e=Qe(e,n,s,i,r[o+4],7,-176418897),i=Qe(i,e,n,s,r[o+5],12,1200080426),s=Qe(s,i,e,n,r[o+6],17,-1473231341),n=Qe(n,s,i,e,r[o+7],22,-45705983),e=Qe(e,n,s,i,r[o+8],7,1770035416),i=Qe(i,e,n,s,r[o+9],12,-1958414417),s=Qe(s,i,e,n,r[o+10],17,-42063),n=Qe(n,s,i,e,r[o+11],22,-1990404162),e=Qe(e,n,s,i,r[o+12],7,1804603682),i=Qe(i,e,n,s,r[o+13],12,-40341101),s=Qe(s,i,e,n,r[o+14],17,-1502002290),n=Qe(n,s,i,e,r[o+15],22,1236535329),e=We(e,n,s,i,r[o+1],5,-165796510),i=We(i,e,n,s,r[o+6],9,-1069501632),s=We(s,i,e,n,r[o+11],14,643717713),n=We(n,s,i,e,r[o],20,-373897302),e=We(e,n,s,i,r[o+5],5,-701558691),i=We(i,e,n,s,r[o+10],9,38016083),s=We(s,i,e,n,r[o+15],14,-660478335),n=We(n,s,i,e,r[o+4],20,-405537848),e=We(e,n,s,i,r[o+9],5,568446438),i=We(i,e,n,s,r[o+14],9,-1019803690),s=We(s,i,e,n,r[o+3],14,-187363961),n=We(n,s,i,e,r[o+8],20,1163531501),e=We(e,n,s,i,r[o+13],5,-1444681467),i=We(i,e,n,s,r[o+2],9,-51403784),s=We(s,i,e,n,r[o+7],14,1735328473),n=We(n,s,i,e,r[o+12],20,-1926607734),e=$e(e,n,s,i,r[o+5],4,-378558),i=$e(i,e,n,s,r[o+8],11,-2022574463),s=$e(s,i,e,n,r[o+11],16,1839030562),n=$e(n,s,i,e,r[o+14],23,-35309556),e=$e(e,n,s,i,r[o+1],4,-1530992060),i=$e(i,e,n,s,r[o+4],11,1272893353),s=$e(s,i,e,n,r[o+7],16,-155497632),n=$e(n,s,i,e,r[o+10],23,-1094730640),e=$e(e,n,s,i,r[o+13],4,681279174),i=$e(i,e,n,s,r[o],11,-358537222),s=$e(s,i,e,n,r[o+3],16,-722521979),n=$e(n,s,i,e,r[o+6],23,76029189),e=$e(e,n,s,i,r[o+9],4,-640364487),i=$e(i,e,n,s,r[o+12],11,-421815835),s=$e(s,i,e,n,r[o+15],16,530742520),n=$e(n,s,i,e,r[o+2],23,-995338651),e=Je(e,n,s,i,r[o],6,-198630844),i=Je(i,e,n,s,r[o+7],10,1126891415),s=Je(s,i,e,n,r[o+14],15,-1416354905),n=Je(n,s,i,e,r[o+5],21,-57434055),e=Je(e,n,s,i,r[o+12],6,1700485571),i=Je(i,e,n,s,r[o+3],10,-1894986606),s=Je(s,i,e,n,r[o+10],15,-1051523),n=Je(n,s,i,e,r[o+1],21,-2054922799),e=Je(e,n,s,i,r[o+8],6,1873313359),i=Je(i,e,n,s,r[o+15],10,-30611744),s=Je(s,i,e,n,r[o+6],15,-1560198380),n=Je(n,s,i,e,r[o+13],21,1309151649),e=Je(e,n,s,i,r[o+4],6,-145523070),i=Je(i,e,n,s,r[o+11],10,-1120210379),s=Je(s,i,e,n,r[o+2],15,718787259),n=Je(n,s,i,e,r[o+9],21,-343485551),e=As(e,a),n=As(n,c),s=As(s,f),i=As(i,h)}return[e,n,s,i]}function Pw(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(cp(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function As(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Tw(r,t){return r<<t|r>>>32-t}function bu(r,t,e,n,s,i){return As(Tw(As(As(t,r),As(n,i)),s),e)}function Qe(r,t,e,n,s,i,o){return bu(t&e|~t&n,r,t,s,i,o)}function We(r,t,e,n,s,i,o){return bu(t&n|e&~n,r,t,s,i,o)}function $e(r,t,e,n,s,i,o){return bu(t^e^n,r,t,s,i,o)}function Je(r,t,e,n,s,i,o){return bu(e^(t|~n),r,t,s,i,o)}var Mw=ap("v3",48,Rw);function _w(r,t,e){r=r||{};var n=r.random||(r.rng||ip)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return wu(n)}function Ow(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function bl(r,t){return r<<t|r>>>32-t}function Lw(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var f=new Uint32Array(16),h=0;h<16;++h)f[h]=r[c*64+h*4]<<24|r[c*64+h*4+1]<<16|r[c*64+h*4+2]<<8|r[c*64+h*4+3];a[c]=f}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var y=0;y<o;++y){for(var E=new Uint32Array(80),b=0;b<16;++b)E[b]=a[y][b];for(var N=16;N<80;++N)E[N]=bl(E[N-3]^E[N-8]^E[N-14]^E[N-16],1);for(var x=e[0],S=e[1],_=e[2],V=e[3],z=e[4],rt=0;rt<80;++rt){var K=Math.floor(rt/20),Y=bl(x,5)+Ow(K,S,_,V)+z+t[K]+E[rt]>>>0;z=V,V=_,_=bl(S,30)>>>0,S=x,x=Y}e[0]=e[0]+x>>>0,e[1]=e[1]+S>>>0,e[2]=e[2]+_>>>0,e[3]=e[3]+V>>>0,e[4]=e[4]+z>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Uw=ap("v5",80,Lw);const Fw="00000000-0000-0000-0000-000000000000";function Dw(r){if(!yu(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Hw=Object.freeze(Object.defineProperty({__proto__:null,NIL:Fw,parse:op,stringify:wu,v1:Bw,v3:Mw,v4:_w,v5:Uw,validate:yu,version:Dw},Symbol.toStringTag,{value:"Module"})),up=Ff(Hw);var Al,td;function Gw(){if(td)return Al;td=1;const r=up.v4;return Al=function(e,n,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:e};if(o===2&&(a.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");a.params=n}if(typeof s>"u"){const c=typeof i.generator=="function"?i.generator:function(){return r()};a.id=c(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},Al}var xl,ed;function zw(){if(ed)return xl;ed=1;const r=up.v4,t=Gw(),e=function(n,s){if(!(this instanceof e))return new e(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return xl=e,e.prototype.request=function(n,s,i,o){const a=this;let c=null;const f=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&f)throw new TypeError("JSON-RPC 1.0 does not support batching");if(f||!f&&n&&typeof n=="object"&&typeof s=="function")o=s,c=n;else{typeof i=="function"&&(o=i,i=void 0);const E=typeof o=="function";try{c=t(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(b){if(E)return o(b);throw b}if(!E)return c}let y;try{y=JSON.stringify(c,this.options.replacer)}catch(E){return o(E)}return this.callServer(y,function(E,b){a._parseResponse(E,b,o)}),c},e.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(f){return typeof f.error<"u"},c=function(f){return!a(f)};return i(null,o.filter(a),o.filter(c))}else return i(null,o.error,o.result);i(null,o)},xl}var Kw=zw();const Vw=fu(Kw);var El={exports:{}},nd;function qw(){return nd||(nd=1,function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function i(c,f,h,y,E){if(typeof h!="function")throw new TypeError("The listener must be a function");var b=new s(h,y||c,E),N=e?e+f:f;return c._events[N]?c._events[N].fn?c._events[N]=[c._events[N],b]:c._events[N].push(b):(c._events[N]=b,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var f=[],h,y;if(this._eventsCount===0)return f;for(y in h=this._events)t.call(h,y)&&f.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},a.prototype.listeners=function(f){var h=e?e+f:f,y=this._events[h];if(!y)return[];if(y.fn)return[y.fn];for(var E=0,b=y.length,N=new Array(b);E<b;E++)N[E]=y[E].fn;return N},a.prototype.listenerCount=function(f){var h=e?e+f:f,y=this._events[h];return y?y.fn?1:y.length:0},a.prototype.emit=function(f,h,y,E,b,N){var x=e?e+f:f;if(!this._events[x])return!1;var S=this._events[x],_=arguments.length,V,z;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,y),!0;case 4:return S.fn.call(S.context,h,y,E),!0;case 5:return S.fn.call(S.context,h,y,E,b),!0;case 6:return S.fn.call(S.context,h,y,E,b,N),!0}for(z=1,V=new Array(_-1);z<_;z++)V[z-1]=arguments[z];S.fn.apply(S.context,V)}else{var rt=S.length,K;for(z=0;z<rt;z++)switch(S[z].once&&this.removeListener(f,S[z].fn,void 0,!0),_){case 1:S[z].fn.call(S[z].context);break;case 2:S[z].fn.call(S[z].context,h);break;case 3:S[z].fn.call(S[z].context,h,y);break;case 4:S[z].fn.call(S[z].context,h,y,E);break;default:if(!V)for(K=1,V=new Array(_-1);K<_;K++)V[K-1]=arguments[K];S[z].fn.apply(S[z].context,V)}}return!0},a.prototype.on=function(f,h,y){return i(this,f,h,y,!1)},a.prototype.once=function(f,h,y){return i(this,f,h,y,!0)},a.prototype.removeListener=function(f,h,y,E){var b=e?e+f:f;if(!this._events[b])return this;if(!h)return o(this,b),this;var N=this._events[b];if(N.fn)N.fn===h&&(!E||N.once)&&(!y||N.context===y)&&o(this,b);else{for(var x=0,S=[],_=N.length;x<_;x++)(N[x].fn!==h||E&&!N[x].once||y&&N[x].context!==y)&&S.push(N[x]);S.length?this._events[b]=S.length===1?S[0]:S:o(this,b)}return this},a.prototype.removeAllListeners=function(f){var h;return f?(h=e?e+f:f,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a}(El)),El.exports}var Qw=qw();const lp=fu(Qw);var Ww=class extends lp{constructor(t,e,n){super();W(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function $w(r,t){return new Ww(r,t)}var Jw=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},jw=class extends lp{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,f){super();W(this,"address");W(this,"rpc_id");W(this,"queue");W(this,"options");W(this,"autoconnect");W(this,"ready");W(this,"reconnect");W(this,"reconnect_timer_id");W(this,"reconnect_interval");W(this,"max_reconnects");W(this,"rest_options");W(this,"current_reconnects");W(this,"generate_request_id");W(this,"socket");W(this,"webSocketFactory");W(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),f?this.dataPack=f:this.dataPack=new Jw,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,e),c={jsonrpc:"2.0",method:t,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,f=>{if(f)return o(f);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=kt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};let fp=class extends M0{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Pm(t);const n=zf(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Fo(i)}update(t){return Mc(this),this.iHash.update(t),this}digestInto(t){Mc(this),gr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hp=(r,t,e)=>new fp(r,t).update(e).digest();hp.create=(r,t)=>new fp(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rd(r){r.lowS!==void 0&&di("lowS",r.lowS),r.prehash!==void 0&&di("prehash",r.prehash)}class Zw extends Error{constructor(t=""){super(t)}}const vr={Err:Zw,_tlv:{encode:(r,t)=>{const{Err:e}=vr;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=ac(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?ac(s.length/2|128):"";return ac(r)+i+s+t},decode(r,t){const{Err:e}=vr;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new e("tlv.decode(long): indefinite length not supported");if(c>4)throw new e("tlv.decode(long): byte length is too big");const f=t.subarray(n,n+c);if(f.length!==c)throw new e("tlv.decode: length bytes not complete");if(f[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const h of f)o=o<<8|h;if(n+=c,o<128)throw new e("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=vr;if(r<ga)throw new t("integer: negative integers are not allowed");let e=ac(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=vr;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return hu(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=vr,s=le("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:f,l:h}=n.decode(2,c);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(f)}},hexFromSig(r){const{_tlv:t,_int:e}=vr,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},ga=BigInt(0),ma=BigInt(1),Yw=BigInt(2),lc=BigInt(3),Xw=BigInt(4);function t1(r,t,e){function n(s){const i=r.sqr(s),o=r.mul(i,s);return r.add(r.add(o,r.mul(s,t)),e)}return n}function dp(r,t,e){const{BYTES:n}=r;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=le("private key",i);if(t){if(!t.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=r.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(e&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function e1(r,t={}){const{Fp:e,Fn:n}=Y0("weierstrass",r,t),{h:s,n:i}=r;qa(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!e.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(et,U,O){const{x:L,y:G}=U.toAffine(),v=e.toBytes(L);if(di("isCompressed",O),O){a();const u=!e.isOdd(G);return Dr(pp(u),v)}else return Dr(Uint8Array.of(4),v,e.toBytes(G))}function f(et){gr(et);const U=e.BYTES,O=U+1,L=2*U+1,G=et.length,v=et[0],u=et.subarray(1);if(G===O&&(v===2||v===3)){const p=e.fromBytes(u);if(!e.isValid(p))throw new Error("bad point: is not on curve, wrong x");const w=E(p);let k;try{k=e.sqrt(w)}catch(H){const R=H instanceof Error?": "+H.message:"";throw new Error("bad point: is not on curve, sqrt error"+R)}a();const C=e.isOdd(k);return(v&1)===1!==C&&(k=e.neg(k)),{x:p,y:k}}else if(G===L&&v===4){const p=e.fromBytes(u.subarray(U*0,U*1)),w=e.fromBytes(u.subarray(U*1,U*2));if(!b(p,w))throw new Error("bad point: is not on curve");return{x:p,y:w}}else throw new Error(`bad point: got length ${G}, expected compressed=${O} or uncompressed=${L}`)}const h=t.toBytes||c,y=t.fromBytes||f,E=t1(e,r.a,r.b);function b(et,U){const O=e.sqr(U),L=E(et);return e.eql(O,L)}if(!b(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const N=e.mul(e.pow(r.a,lc),Xw),x=e.mul(e.sqr(r.b),BigInt(27));if(e.is0(e.add(N,x)))throw new Error("bad curve params: a or b");function S(et,U,O=!1){if(!e.isValid(U)||O&&e.is0(U))throw new Error(`bad point coordinate ${et}`);return U}function _(et){if(!(et instanceof K))throw new Error("ProjectivePoint expected")}const V=_c((et,U)=>{const{px:O,py:L,pz:G}=et;if(e.eql(G,e.ONE))return{x:O,y:L};const v=et.is0();U==null&&(U=v?e.ONE:e.inv(G));const u=e.mul(O,U),p=e.mul(L,U),w=e.mul(G,U);if(v)return{x:e.ZERO,y:e.ZERO};if(!e.eql(w,e.ONE))throw new Error("invZ was invalid");return{x:u,y:p}}),z=_c(et=>{if(et.is0()){if(t.allowInfinityPoint&&!e.is0(et.py))return;throw new Error("bad point: ZERO")}const{x:U,y:O}=et.toAffine();if(!e.isValid(U)||!e.isValid(O))throw new Error("bad point: x or y not field elements");if(!b(U,O))throw new Error("bad point: equation left != right");if(!et.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function rt(et,U,O,L,G){return O=new K(e.mul(O.px,et),O.py,O.pz),U=pa(L,U),O=pa(G,O),U.add(O)}class K{constructor(U,O,L){this.px=S("x",U),this.py=S("y",O,!0),this.pz=S("z",L),Object.freeze(this)}static fromAffine(U){const{x:O,y:L}=U||{};if(!U||!e.isValid(O)||!e.isValid(L))throw new Error("invalid affine point");if(U instanceof K)throw new Error("projective point not allowed");return e.is0(O)&&e.is0(L)?K.ZERO:new K(O,L,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(U){return W0(K,"pz",U)}static fromBytes(U){return gr(U),K.fromHex(U)}static fromHex(U){const O=K.fromAffine(y(le("pointHex",U)));return O.assertValidity(),O}static fromPrivateKey(U){const O=dp(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return K.BASE.multiply(O(U))}static msm(U,O){return Z0(K,n,U,O)}precompute(U=8,O=!0){return st.setWindowSize(this,U),O||this.multiply(lc),this}_setWindowSize(U){this.precompute(U)}assertValidity(){z(this)}hasEvenY(){const{y:U}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(U)}equals(U){_(U);const{px:O,py:L,pz:G}=this,{px:v,py:u,pz:p}=U,w=e.eql(e.mul(O,p),e.mul(v,G)),k=e.eql(e.mul(L,p),e.mul(u,G));return w&&k}negate(){return new K(this.px,e.neg(this.py),this.pz)}double(){const{a:U,b:O}=r,L=e.mul(O,lc),{px:G,py:v,pz:u}=this;let p=e.ZERO,w=e.ZERO,k=e.ZERO,C=e.mul(G,G),F=e.mul(v,v),H=e.mul(u,u),R=e.mul(G,v);return R=e.add(R,R),k=e.mul(G,u),k=e.add(k,k),p=e.mul(U,k),w=e.mul(L,H),w=e.add(p,w),p=e.sub(F,w),w=e.add(F,w),w=e.mul(p,w),p=e.mul(R,p),k=e.mul(L,k),H=e.mul(U,H),R=e.sub(C,H),R=e.mul(U,R),R=e.add(R,k),k=e.add(C,C),C=e.add(k,C),C=e.add(C,H),C=e.mul(C,R),w=e.add(w,C),H=e.mul(v,u),H=e.add(H,H),C=e.mul(H,R),p=e.sub(p,C),k=e.mul(H,F),k=e.add(k,k),k=e.add(k,k),new K(p,w,k)}add(U){_(U);const{px:O,py:L,pz:G}=this,{px:v,py:u,pz:p}=U;let w=e.ZERO,k=e.ZERO,C=e.ZERO;const F=r.a,H=e.mul(r.b,lc);let R=e.mul(O,v),l=e.mul(L,u),d=e.mul(G,p),I=e.add(O,L),T=e.add(v,u);I=e.mul(I,T),T=e.add(R,l),I=e.sub(I,T),T=e.add(O,G);let $=e.add(v,p);return T=e.mul(T,$),$=e.add(R,d),T=e.sub(T,$),$=e.add(L,G),w=e.add(u,p),$=e.mul($,w),w=e.add(l,d),$=e.sub($,w),C=e.mul(F,T),w=e.mul(H,d),C=e.add(w,C),w=e.sub(l,C),C=e.add(l,C),k=e.mul(w,C),l=e.add(R,R),l=e.add(l,R),d=e.mul(F,d),T=e.mul(H,T),l=e.add(l,d),d=e.sub(R,d),d=e.mul(F,d),T=e.add(T,d),R=e.mul(l,T),k=e.add(k,R),R=e.mul($,T),w=e.mul(I,w),w=e.sub(w,R),R=e.mul(I,l),C=e.mul($,C),C=e.add(C,R),new K(w,k,C)}subtract(U){return this.add(U.negate())}is0(){return this.equals(K.ZERO)}multiply(U){const{endo:O}=t;if(!n.isValidNot0(U))throw new Error("invalid scalar: out of range");let L,G;const v=u=>st.wNAFCached(this,u,K.normalizeZ);if(O){const{k1neg:u,k1:p,k2neg:w,k2:k}=O.splitScalar(U),{p:C,f:F}=v(p),{p:H,f:R}=v(k);G=F.add(R),L=rt(O.beta,C,H,u,w)}else{const{p:u,f:p}=v(U);L=u,G=p}return K.normalizeZ([L,G])[0]}multiplyUnsafe(U){const{endo:O}=t,L=this;if(!n.isValid(U))throw new Error("invalid scalar: out of range");if(U===ga||L.is0())return K.ZERO;if(U===ma)return L;if(st.hasPrecomputes(this))return this.multiply(U);if(O){const{k1neg:G,k1:v,k2neg:u,k2:p}=O.splitScalar(U),{p1:w,p2:k}=dy(K,L,v,p);return rt(O.beta,w,k,G,u)}else return st.wNAFCachedUnsafe(L,U)}multiplyAndAddUnsafe(U,O,L){const G=this.multiplyUnsafe(O).add(U.multiplyUnsafe(L));return G.is0()?void 0:G}toAffine(U){return V(this,U)}isTorsionFree(){const{isTorsionFree:U}=t;return s===ma?!0:U?U(K,this):st.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:U}=t;return s===ma?this:U?U(K,this):this.multiplyUnsafe(s)}toBytes(U=!0){return di("isCompressed",U),this.assertValidity(),h(K,this,U)}toRawBytes(U=!0){return this.toBytes(U)}toHex(U=!0){return Do(this.toBytes(U))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}K.BASE=new K(r.Gx,r.Gy,e.ONE),K.ZERO=new K(e.ZERO,e.ONE,e.ZERO),K.Fp=e,K.Fn=n;const Y=n.BITS,st=j0(K,t.endo?Math.ceil(Y/2):Y);return K}function pp(r){return Uint8Array.of(r?2:3)}function n1(r,t,e={}){qa(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||O0,s=t.hmac||((L,...G)=>hp(t.hash,L,Dr(...G))),{Fp:i,Fn:o}=r,{ORDER:a,BITS:c}=o;function f(L){const G=a>>ma;return L>G}function h(L){return f(L)?o.neg(L):L}function y(L,G){if(!o.isValidNot0(G))throw new Error(`invalid signature ${L}: out of range 1..CURVE.n`)}class E{constructor(G,v,u){y("r",G),y("s",v),this.r=G,this.s=v,u!=null&&(this.recovery=u),Object.freeze(this)}static fromCompact(G){const v=o.BYTES,u=le("compactSignature",G,v*2);return new E(o.fromBytes(u.subarray(0,v)),o.fromBytes(u.subarray(v,v*2)))}static fromDER(G){const{r:v,s:u}=vr.toSig(le("DER",G));return new E(v,u)}assertValidity(){}addRecoveryBit(G){return new E(this.r,this.s,G)}recoverPublicKey(G){const v=i.ORDER,{r:u,s:p,recovery:w}=this;if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");if(a*Yw<v&&w>1)throw new Error("recovery id is ambiguous for h>1 curve");const C=w===2||w===3?u+a:u;if(!i.isValid(C))throw new Error("recovery id 2 or 3 invalid");const F=i.toBytes(C),H=r.fromHex(Dr(pp((w&1)===0),F)),R=o.inv(C),l=z(le("msgHash",G)),d=o.create(-l*R),I=o.create(p*R),T=r.BASE.multiplyUnsafe(d).add(H.multiplyUnsafe(I));if(T.is0())throw new Error("point at infinify");return T.assertValidity(),T}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toBytes(G){if(G==="compact")return Dr(o.toBytes(this.r),o.toBytes(this.s));if(G==="der")return Gf(vr.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Do(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Do(this.toBytes("compact"))}}const b=dp(o,e.allowedPrivateKeyLengths,e.wrapPrivateKey),N={isValidPrivateKey(L){try{return b(L),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const L=a;return ly(n(Q0(L)),L)},precompute(L=8,G=r.BASE){return G.precompute(L,!1)}};function x(L,G=!0){return r.fromPrivateKey(L).toBytes(G)}function S(L){if(typeof L=="bigint")return!1;if(L instanceof r)return!0;const v=le("key",L).length,u=i.BYTES,p=u+1,w=2*u+1;if(!(e.allowedPrivateKeyLengths||o.BYTES===p))return v===p||v===w}function _(L,G,v=!0){if(S(L)===!0)throw new Error("first arg must be private key");if(S(G)===!1)throw new Error("second arg must be public key");return r.fromHex(G).multiply(b(L)).toBytes(v)}const V=t.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const G=hu(L),v=L.length*8-c;return v>0?G>>BigInt(v):G},z=t.bits2int_modN||function(L){return o.create(V(L))},rt=pu(c);function K(L){return Li("num < 2^"+c,L,ga,rt),o.toBytes(L)}function Y(L,G,v=st){if(["recovered","canonical"].some(I=>I in v))throw new Error("sign() legacy options not supported");const{hash:u}=t;let{lowS:p,prehash:w,extraEntropy:k}=v;p==null&&(p=!0),L=le("msgHash",L),rd(v),w&&(L=le("prehashed msgHash",u(L)));const C=z(L),F=b(G),H=[K(F),K(C)];if(k!=null&&k!==!1){const I=k===!0?n(i.BYTES):k;H.push(le("extraEntropy",I))}const R=Dr(...H),l=C;function d(I){const T=V(I);if(!o.isValidNot0(T))return;const $=o.inv(T),nt=r.BASE.multiply(T).toAffine(),ft=o.create(nt.x);if(ft===ga)return;const mt=o.create($*o.create(l+ft*F));if(mt===ga)return;let qt=(nt.x===ft?0:2)|Number(nt.y&ma),Tt=mt;return p&&f(mt)&&(Tt=h(mt),qt^=1),new E(ft,Tt,qt)}return{seed:R,k2sig:d}}const st={lowS:t.lowS,prehash:!1},et={lowS:t.lowS,prehash:!1};function U(L,G,v=st){const{seed:u,k2sig:p}=Y(L,G,v);return ty(t.hash.outputLen,o.BYTES,s)(u,p)}r.BASE.precompute(8);function O(L,G,v,u=et){const p=L;G=le("msgHash",G),v=le("publicKey",v),rd(u);const{lowS:w,prehash:k,format:C}=u;if("strict"in u)throw new Error("options.strict was renamed to lowS");if(C!==void 0&&!["compact","der","js"].includes(C))throw new Error('format must be "compact", "der" or "js"');const F=typeof p=="string"||Hf(p),H=!F&&!C&&typeof p=="object"&&p!==null&&typeof p.r=="bigint"&&typeof p.s=="bigint";if(!F&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let R,l;try{if(H)if(C===void 0||C==="js")R=new E(p.r,p.s);else throw new Error("invalid format");if(F){try{C!=="compact"&&(R=E.fromDER(p))}catch(Tt){if(!(Tt instanceof vr.Err))throw Tt}!R&&C!=="der"&&(R=E.fromCompact(p))}l=r.fromHex(v)}catch{return!1}if(!R||w&&R.hasHighS())return!1;k&&(G=t.hash(G));const{r:d,s:I}=R,T=z(G),$=o.inv(I),nt=o.create(T*$),ft=o.create(d*$),mt=r.BASE.multiplyUnsafe(nt).add(l.multiplyUnsafe(ft));return mt.is0()?!1:o.create(mt.x)===d}return Object.freeze({getPublicKey:x,getSharedSecret:_,sign:U,verify:O,utils:N,Point:r,Signature:E})}function r1(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=Zo(t.n,r.nBitLength),s={Fp:e,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:s}}function s1(r){const{CURVE:t,curveOpts:e}=r1(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,ecdsaOpts:n}}function i1(r,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:r})}function o1(r){const{CURVE:t,curveOpts:e,ecdsaOpts:n}=s1(r),s=e1(t,e),i=n1(s,n,e);return i1(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function a1(r,t){const e=n=>o1({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hc={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const c1=BigInt(1),$l=BigInt(2),sd=(r,t)=>(r+t/$l)/t;function u1(r){const t=Hc.p,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),f=r*r*r%t,h=f*f*r%t,y=ie(h,e,t)*h%t,E=ie(y,e,t)*h%t,b=ie(E,$l,t)*f%t,N=ie(b,s,t)*b%t,x=ie(N,i,t)*N%t,S=ie(x,a,t)*x%t,_=ie(S,c,t)*S%t,V=ie(_,a,t)*x%t,z=ie(V,e,t)*h%t,rt=ie(z,o,t)*N%t,K=ie(rt,n,t)*f%t,Y=ie(K,$l,t);if(!Jl.eql(Jl.sqr(Y),r))throw new Error("Cannot find square root");return Y}const Jl=Zo(Hc.p,void 0,void 0,{sqrt:u1}),l1=a1({...Hc,Fp:Jl,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Hc.n,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-c1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=sd(i*r,t),c=sd(-n*r,t);let f=fe(r-a*e-c*s,t),h=fe(-a*n-c*i,t);const y=f>o,E=h>o;if(y&&(f=t-f),E&&(h=t-h),f>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:y,k1:f,k2neg:E,k2:h}}}},F0);Qa.utils.randomPrivateKey;Qa.getPublicKey;function id(r){try{return Qa.ExtendedPoint.fromHex(r),!0}catch{return!1}}const f1=(r,t)=>Qa.sign(r,t.slice(0,32)),h1=Qa.verify,De=r=>kt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?kt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):kt.Buffer.from(r);class d1{constructor(t){Object.assign(this,t)}encode(){return kt.Buffer.from(pl.serialize(Ec,this))}static decode(t){return pl.deserialize(Ec,this,t)}static decodeUnchecked(t){return pl.deserializeUnchecked(Ec,this,t)}}const Ec=new Map;var gp;const p1=32,xs=32;function g1(r){return r._bn!==void 0}let od=1;class xt extends d1{constructor(t){if(super({}),this._bn=void 0,g1(t))this._bn=t._bn;else{if(typeof t=="string"){const e=He.decode(t);if(e.length!=xs)throw new Error("Invalid public key input");this._bn=new qh(e)}else this._bn=new qh(t);if(this._bn.byteLength()>xs)throw new Error("Invalid public key input")}}static unique(){const t=new xt(od);return od+=1,new xt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return He.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(kt.Buffer);if(t.length===xs)return t;const e=kt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=kt.Buffer.concat([t.toBuffer(),kt.Buffer.from(e),n.toBuffer()]),i=Jh(s);return new xt(i)}static createProgramAddressSync(t,e){let n=kt.Buffer.alloc(0);t.forEach(function(i){if(i.length>p1)throw new TypeError("Max seed length exceeded");n=kt.Buffer.concat([n,De(i)])}),n=kt.Buffer.concat([n,e.toBuffer(),kt.Buffer.from("ProgramDerivedAddress")]);const s=Jh(n);if(id(s))throw new Error("Invalid seeds, address must fall off the curve");return new xt(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(kt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new xt(t);return id(e.toBytes())}}gp=xt;xt.default=new gp("11111111111111111111111111111111");Ec.set(xt,{kind:"struct",fields:[["_bn","u256"]]});new xt("BPFLoader1111111111111111111111111111111111");const qi=1232,mp=127,yp=64;class wp extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(wp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class bp extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(bp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ca extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ca.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Gc{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Pt=(r="publicKey")=>D.blob(32,r),Ui=(r="string")=>{const t=D.struct([D.u32("length"),D.u32("lengthPadding"),D.blob(D.offset(D.u32(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:kt.Buffer.from(i,"utf8")};return n(c,o,a)},s.alloc=i=>D.u32().span+D.u32().span+kt.Buffer.from(i,"utf8").length,s},m1=(r="authorized")=>D.struct([Pt("staker"),Pt("withdrawer")],r),y1=(r="lockup")=>D.struct([D.ns64("unixTimestamp"),D.ns64("epoch"),Pt("custodian")],r),w1=(r="voteInit")=>D.struct([Pt("nodePubkey"),Pt("authorizedVoter"),Pt("authorizedWithdrawer"),D.u8("commission")],r),b1=(r="voteAuthorizeWithSeedArgs")=>D.struct([D.u32("voteAuthorizationType"),Pt("currentAuthorityDerivedKeyOwnerPubkey"),Ui("currentAuthorityDerivedKeySeed"),Pt("newAuthorized")],r);function Ap(r,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Ap({layout:s},t[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function _n(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,(n&128)===0)break}return t}function On(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function Pe(r,t){if(!r)throw new Error(t||"Assertion failed")}class Au{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new Au(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Pe(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,c])=>c.isSigner&&c.isWritable),n=t.filter(([,c])=>c.isSigner&&!c.isWritable),s=t.filter(([,c])=>!c.isSigner&&c.isWritable),i=t.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Pe(e.length>0,"Expected at least one writable signer key");const[c]=e[0];Pe(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([c])=>new xt(c)),...n.map(([c])=>new xt(c)),...s.map(([c])=>new xt(c)),...i.map(([c])=>new xt(c))];return[o,a]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const a=new xt(i),c=t.findIndex(f=>f.equals(a));c>=0&&(Pe(c<256,"Max lookup table index exceeded"),n.push(c),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const xp="Reached end of buffer unexpectedly";function Ur(r){if(r.length===0)throw new Error(xp);return r.shift()}function Ln(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(xp);return r.splice(...t)}class vs{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new xt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:He.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Gc(this.staticAccountKeys)}static compile(t){const e=Au.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new Gc(s).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:He.encode(a.data)}));return new vs({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];On(e,t);const n=this.instructions.map(y=>{const{accounts:E,programIdIndex:b}=y,N=Array.from(He.decode(y.data));let x=[];On(x,E.length);let S=[];return On(S,N.length),{programIdIndex:b,keyIndicesCount:kt.Buffer.from(x),keyIndices:E,dataLength:kt.Buffer.from(S),data:N}});let s=[];On(s,n.length);let i=kt.Buffer.alloc(qi);kt.Buffer.from(s).copy(i);let o=s.length;n.forEach(y=>{const b=D.struct([D.u8("programIdIndex"),D.blob(y.keyIndicesCount.length,"keyIndicesCount"),D.seq(D.u8("keyIndex"),y.keyIndices.length,"keyIndices"),D.blob(y.dataLength.length,"dataLength"),D.seq(D.u8("userdatum"),y.data.length,"data")]).encode(y,i,o);o+=b}),i=i.slice(0,o);const a=D.struct([D.blob(1,"numRequiredSignatures"),D.blob(1,"numReadonlySignedAccounts"),D.blob(1,"numReadonlyUnsignedAccounts"),D.blob(e.length,"keyCount"),D.seq(Pt("key"),t,"keys"),Pt("recentBlockhash")]),c={numRequiredSignatures:kt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:kt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:kt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:kt.Buffer.from(e),keys:this.accountKeys.map(y=>De(y.toBytes())),recentBlockhash:He.decode(this.recentBlockhash)};let f=kt.Buffer.alloc(2048);const h=a.encode(c,f);return i.copy(f,h),f.slice(0,h+i.length)}static from(t){let e=[...t];const n=Ur(e);if(n!==(n&mp))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Ur(e),i=Ur(e),o=_n(e);let a=[];for(let E=0;E<o;E++){const b=Ln(e,0,xs);a.push(new xt(kt.Buffer.from(b)))}const c=Ln(e,0,xs),f=_n(e);let h=[];for(let E=0;E<f;E++){const b=Ur(e),N=_n(e),x=Ln(e,0,N),S=_n(e),_=Ln(e,0,S),V=He.encode(kt.Buffer.from(_));h.push({programIdIndex:b,accounts:x,data:V})}const y={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:He.encode(kt.Buffer.from(c)),accountKeys:a,instructions:h};return new vs(y)}}class zc{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Gc(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Au.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const h of i){const y=e.extractTableLookup(h);if(y!==void 0){const[E,{writable:b,readonly:N}]=y;n.push(E),s.writable.push(...b),s.readonly.push(...N)}}const[o,a]=e.getMessageComponents(),f=new Gc(a,s).compileInstructions(t.instructions);return new zc({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:f,addressTableLookups:n})}serialize(){const t=Array();On(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();On(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();On(i,this.addressTableLookups.length);const o=D.struct([D.u8("prefix"),D.struct([D.u8("numRequiredSignatures"),D.u8("numReadonlySignedAccounts"),D.u8("numReadonlyUnsignedAccounts")],"header"),D.blob(t.length,"staticAccountKeysLength"),D.seq(Pt(),this.staticAccountKeys.length,"staticAccountKeys"),Pt("recentBlockhash"),D.blob(n.length,"instructionsLength"),D.blob(e.length,"serializedInstructions"),D.blob(i.length,"addressTableLookupsLength"),D.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(qi),f=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:He.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,f)}serializeInstructions(){let t=0;const e=new Uint8Array(qi);for(const n of this.compiledInstructions){const s=Array();On(s,n.accountKeyIndexes.length);const i=Array();On(i,n.data.length);const o=D.struct([D.u8("programIdIndex"),D.blob(s.length,"encodedAccountKeyIndexesLength"),D.seq(D.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),D.blob(i.length,"encodedDataLength"),D.blob(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(qi);for(const n of this.addressTableLookups){const s=Array();On(s,n.writableIndexes.length);const i=Array();On(i,n.readonlyIndexes.length);const o=D.struct([Pt("accountKey"),D.blob(s.length,"encodedWritableIndexesLength"),D.seq(D.u8(),n.writableIndexes.length,"writableIndexes"),D.blob(i.length,"encodedReadonlyIndexesLength"),D.seq(D.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=Ur(e),s=n&mp;Pe(n!==s,"Expected versioned message but received legacy message");const i=s;Pe(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Ur(e),numReadonlySignedAccounts:Ur(e),numReadonlyUnsignedAccounts:Ur(e)},a=[],c=_n(e);for(let N=0;N<c;N++)a.push(new xt(Ln(e,0,xs)));const f=He.encode(Ln(e,0,xs)),h=_n(e),y=[];for(let N=0;N<h;N++){const x=Ur(e),S=_n(e),_=Ln(e,0,S),V=_n(e),z=new Uint8Array(Ln(e,0,V));y.push({programIdIndex:x,accountKeyIndexes:_,data:z})}const E=_n(e),b=[];for(let N=0;N<E;N++){const x=new xt(Ln(e,0,xs)),S=_n(e),_=Ln(e,0,S),V=_n(e),z=Ln(e,0,V);b.push({accountKey:x,writableIndexes:_,readonlyIndexes:z})}return new zc({header:o,staticAccountKeys:a,recentBlockhash:f,compiledInstructions:y,addressTableLookups:b})}}let jr=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const A1=kt.Buffer.alloc(yp).fill(0);class Fn{constructor(t){this.keys=void 0,this.programId=void 0,this.data=kt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}let Pi=class jl{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Fn(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<e.length;x++)if(e[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const s=[],i=[];e.forEach(x=>{x.keys.forEach(_=>{i.push({..._})});const S=x.programId.toString();s.includes(S)||s.push(S)}),s.forEach(x=>{i.push({pubkey:new xt(x),isSigner:!1,isWritable:!1})});const o=[];i.forEach(x=>{const S=x.pubkey.toString(),_=o.findIndex(V=>V.pubkey.toString()===S);_>-1?(o[_].isWritable=o[_].isWritable||x.isWritable,o[_].isSigner=o[_].isSigner||x.isSigner):o.push(x)}),o.sort(function(x,S){if(x.isSigner!==S.isSigner)return x.isSigner?-1:1;if(x.isWritable!==S.isWritable)return x.isWritable?-1:1;const _={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(S.pubkey.toBase58(),"en",_)});const a=o.findIndex(x=>x.pubkey.equals(n));if(a>-1){const[x]=o.splice(a,1);x.isSigner=!0,x.isWritable=!0,o.unshift(x)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const x of this.signatures){const S=o.findIndex(_=>_.pubkey.equals(x.publicKey));if(S>-1)o[S].isSigner||(o[S].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let c=0,f=0,h=0;const y=[],E=[];o.forEach(({pubkey:x,isSigner:S,isWritable:_})=>{S?(y.push(x.toString()),c+=1,_||(f+=1)):(E.push(x.toString()),_||(h+=1))});const b=y.concat(E),N=e.map(x=>{const{data:S,programId:_}=x;return{programIdIndex:b.indexOf(_.toString()),accounts:x.keys.map(V=>b.indexOf(V.pubkey.toString())),data:He.encode(S)}});return N.forEach(x=>{Pe(x.programIdIndex>=0),x.accounts.forEach(S=>Pe(S>=0))}),new vs({header:{numRequiredSignatures:c,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:h},accountKeys:b,recentBlockhash:t,instructions:N})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=f1(n,s.secretKey);this._addSignature(s.publicKey,De(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Pe(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=kt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):h1(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];On(n,e.length);const s=n.length+e.length*64+t.length,i=kt.Buffer.alloc(s);return Pe(e.length<256),kt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},a)=>{o!==null&&(Pe(o.length===64,"signature has invalid length"),kt.Buffer.from(o).copy(i,n.length+a*64))}),t.copy(i,n.length+e.length*64),Pe(i.length<=qi,`Transaction too large: ${i.length} > ${qi}`),i}get keys(){return Pe(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Pe(this.instructions.length===1),this.instructions[0].programId}get data(){return Pe(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=_n(e);let s=[];for(let i=0;i<n;i++){const o=Ln(e,0,yp);s.push(He.encode(kt.Buffer.from(o)))}return jl.populate(vs.from(e),s)}static populate(t,e=[]){const n=new jl;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==He.encode(A1)?null:He.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new Fn({keys:i,programId:t.accountKeys[s.programIdIndex],data:He.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}};const x1=160,E1=64,v1=x1/E1,B1=1e3/v1;new xt("SysvarC1ock11111111111111111111111111111111");new xt("SysvarEpochSchedu1e111111111111111111111111");new xt("Sysvar1nstructions1111111111111111111111111");const vl=new xt("SysvarRecentB1ockHashes11111111111111111111"),ad=new xt("SysvarRent111111111111111111111111111111111");new xt("SysvarRewards111111111111111111111111111111");new xt("SysvarS1otHashes111111111111111111111111111");new xt("SysvarS1otHistory11111111111111111111111111");new xt("SysvarStakeHistory1111111111111111111111111");class cd extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class yt extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function Ti(r){return new Promise(t=>setTimeout(t,r))}function Bn(r,t){const e=r.layout.span>=0?r.layout.span:Ap(r,t),n=kt.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}const S1=D.nu64("lamportsPerSignature"),Ep=D.struct([D.u32("version"),D.u32("state"),Pt("authorizedPubkey"),Pt("nonce"),D.struct([S1],"feeCalculator")]),ud=Ep.span;class Jf{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ep.decode(De(t),0);return new Jf({authorizedPubkey:new xt(e.authorizedPubkey),nonce:new xt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function zo(r){const t=D.blob(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=dw();return s.decode=(o,a)=>{const c=e(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const f=i.encode(o);return n(f,a,c)},s}const Sn=Object.freeze({Create:{index:0,layout:D.struct([D.u32("instruction"),D.ns64("lamports"),D.ns64("space"),Pt("programId")])},Assign:{index:1,layout:D.struct([D.u32("instruction"),Pt("programId")])},Transfer:{index:2,layout:D.struct([D.u32("instruction"),zo("lamports")])},CreateWithSeed:{index:3,layout:D.struct([D.u32("instruction"),Pt("base"),Ui("seed"),D.ns64("lamports"),D.ns64("space"),Pt("programId")])},AdvanceNonceAccount:{index:4,layout:D.struct([D.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:D.struct([D.u32("instruction"),Pt("authorized")])},AuthorizeNonceAccount:{index:7,layout:D.struct([D.u32("instruction"),Pt("authorized")])},Allocate:{index:8,layout:D.struct([D.u32("instruction"),D.ns64("space")])},AllocateWithSeed:{index:9,layout:D.struct([D.u32("instruction"),Pt("base"),Ui("seed"),D.ns64("space"),Pt("programId")])},AssignWithSeed:{index:10,layout:D.struct([D.u32("instruction"),Pt("base"),Ui("seed"),Pt("programId")])},TransferWithSeed:{index:11,layout:D.struct([D.u32("instruction"),zo("lamports"),Ui("seed"),Pt("programId")])},UpgradeNonceAccount:{index:12,layout:D.struct([D.u32("instruction")])}});class Kc{constructor(){}static createAccount(t){const e=Sn.Create,n=Bn(e,{lamports:t.lamports,space:t.space,programId:De(t.programId.toBuffer())});return new Fn({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const s=Sn.TransferWithSeed;e=Bn(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:De(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Sn.Transfer;e=Bn(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Fn({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const s=Sn.AssignWithSeed;e=Bn(s,{base:De(t.basePubkey.toBuffer()),seed:t.seed,programId:De(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Sn.Assign;e=Bn(s,{programId:De(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Fn({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Sn.CreateWithSeed,n=Bn(e,{base:De(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:De(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Fn({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){const e=new Pi;"basePubkey"in t&&"seed"in t?e.add(Kc.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:ud,programId:this.programId})):e.add(Kc.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:ud,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Sn.InitializeNonceAccount,n=Bn(e,{authorized:De(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:vl,isSigner:!1,isWritable:!1},{pubkey:ad,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Fn(s)}static nonceAdvance(t){const e=Sn.AdvanceNonceAccount,n=Bn(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:vl,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Fn(s)}static nonceWithdraw(t){const e=Sn.WithdrawNonceAccount,n=Bn(e,{lamports:t.lamports});return new Fn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:vl,isSigner:!1,isWritable:!1},{pubkey:ad,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Sn.AuthorizeNonceAccount,n=Bn(e,{authorized:De(t.newAuthorizedPubkey.toBuffer())});return new Fn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const s=Sn.AllocateWithSeed;e=Bn(s,{base:De(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:De(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Sn.Allocate;e=Bn(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Fn({keys:n,programId:this.programId,data:e})}}Kc.programId=new xt("11111111111111111111111111111111");new xt("BPFLoader2111111111111111111111111111111111");function I1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bl,ld;function k1(){if(ld)return Bl;ld=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,a,c,f,h,y;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(y=r.call(n),y==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=e(n[i],!0)+",";return o>-1&&(a+=e(n[i],!0)),a+"]"}else if(y==="[object Object]"){for(c=t(n).sort(),o=c.length,a="",i=0;i<o;)f=c[i],h=e(n[f],!1),h!==void 0&&(a&&(a+=","),a+=JSON.stringify(f)+":"+h),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Bl=function(n){var s=e(n,!1);if(s!==void 0)return""+s},Bl}var R1=k1(),fd=I1(R1);const sa=32;function Sl(r){let t=0;for(;r>1;)r/=2,t++;return t}function N1(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class C1{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Sl(N1(t+sa+1))-Sl(sa)-1,n=this.getSlotsInEpoch(e),s=t-(n-sa);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*sa:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Sl(sa)):this.slotsPerEpoch}}var P1=globalThis.fetch;class T1 extends jw{constructor(t,e,n){const s=i=>{const o=$w(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function M1(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const hd=56;class dd{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=M1(_1,t),n=t.length-hd;Pe(n>=0,"lookup table is invalid"),Pe(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=D.struct([D.seq(Pt(),s,"addresses")]).decode(t.slice(hd));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new xt(e.authority[0]):void 0,addresses:i.map(o=>new xt(o))}}}const _1={index:1,layout:D.struct([D.u32("typeIndex"),zo("deactivationSlot"),D.nu64("lastExtendedSlot"),D.u8("lastExtendedStartIndex"),D.u8(),D.seq(Pt(),D.offset(D.u8(),-1),"authority")])},O1=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function L1(r){const t=r.match(O1);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${i}`}const ee=Ja(Wf(xt),ct(),r=>new xt(r)),vp=$f([ct(),Xt("base64")]),jf=Ja(Wf(kt.Buffer),vp,r=>kt.Buffer.from(r[0],"base64")),U1=30*1e3;function F1(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Kt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function pd(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Bp(r){return un([ot({jsonrpc:Xt("2.0"),id:ct(),result:r}),ot({jsonrpc:Xt("2.0"),id:ct(),error:ot({code:Yo(),message:ct(),data:wt(Aw())})})])}const D1=Bp(Yo());function It(r){return Ja(Bp(r),D1,t=>"error"in t?t:{...t,result:ut(t.result,r)})}function ue(r){return It(ot({context:ot({slot:j()}),value:r}))}function xu(r){return ot({context:ot({slot:j()}),value:r})}function Il(r,t){return r===0?new zc({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new xt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:He.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new vs(t)}const H1=ot({foundation:j(),foundationTerm:j(),initial:j(),taper:j(),terminal:j()}),G1=It(lt(ht(ot({epoch:j(),effectiveSlot:j(),amount:j(),postBalance:j(),commission:wt(ht(j()))})))),z1=lt(ot({slot:j(),prioritizationFee:j()})),K1=ot({total:j(),validator:j(),foundation:j(),epoch:j()}),V1=ot({epoch:j(),slotIndex:j(),slotsInEpoch:j(),absoluteSlot:j(),blockHeight:wt(j()),transactionCount:wt(j())}),q1=ot({slotsPerEpoch:j(),leaderScheduleSlotOffset:j(),warmup:mr(),firstNormalEpoch:j(),firstNormalSlot:j()}),Q1=sp(ct(),lt(j())),Ai=ht(un([ot({}),ct()])),W1=ot({err:Ai}),$1=Xt("receivedSignature"),J1=ot({"solana-core":ct(),"feature-set":wt(j())}),j1=ot({program:ct(),programId:ee,parsed:Yo()}),Z1=ot({programId:ee,accounts:lt(ee),data:ct()}),gd=ue(ot({err:ht(un([ot({}),ct()])),logs:ht(lt(ct())),accounts:wt(ht(lt(ht(ot({executable:mr(),owner:ct(),lamports:j(),data:lt(ct()),rentEpoch:wt(j())}))))),unitsConsumed:wt(j()),returnData:wt(ht(ot({programId:ct(),data:$f([ct(),Xt("base64")])}))),innerInstructions:wt(ht(lt(ot({index:j(),instructions:lt(un([j1,Z1]))}))))})),Y1=ue(ot({byIdentity:sp(ct(),lt(j())),range:ot({firstSlot:j(),lastSlot:j()})}));function X1(r,t,e,n,s,i){const o=e||P1;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(h,y)=>{const E=await new Promise((b,N)=>{try{n(h,y,(x,S)=>b([x,S]))}catch(x){N(x)}});return await o(...E)}),new Vw(async(h,y)=>{const E={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Xb)};try{let b=5,N,x=500;for(;c?N=await c(r,E):N=await o(r,E),!(N.status!==429||s===!0||(b-=1,b===0));)console.error(`Server responded with ${N.status} ${N.statusText}.  Retrying after ${x}ms delay...`),await Ti(x),x*=2;const S=await N.text();N.ok?y(null,S):y(new Error(`${N.status} ${N.statusText}: ${S}`))}catch(b){b instanceof Error&&y(b)}},{})}function tb(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function eb(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const nb=It(H1),rb=It(K1),sb=It(z1),ib=It(V1),ob=It(q1),ab=It(Q1),cb=It(j()),ub=ue(ot({total:j(),circulating:j(),nonCirculating:j(),nonCirculatingAccounts:lt(ee)})),Zl=ot({amount:ct(),uiAmount:ht(j()),decimals:j(),uiAmountString:wt(ct())}),lb=ue(lt(ot({address:ee,amount:ct(),uiAmount:ht(j()),decimals:j(),uiAmountString:wt(ct())}))),fb=ue(lt(ot({pubkey:ee,account:ot({executable:mr(),owner:ee,lamports:j(),data:jf,rentEpoch:j()})}))),Yl=ot({program:ct(),parsed:Yo(),space:j()}),hb=ue(lt(ot({pubkey:ee,account:ot({executable:mr(),owner:ee,lamports:j(),data:Yl,rentEpoch:j()})}))),db=ue(lt(ot({lamports:j(),address:ee}))),xa=ot({executable:mr(),owner:ee,lamports:j(),data:jf,rentEpoch:j()}),pb=ot({pubkey:ee,account:xa}),gb=Ja(un([Wf(kt.Buffer),Yl]),un([vp,Yl]),r=>Array.isArray(r)?ut(r,jf):r),Xl=ot({executable:mr(),owner:ee,lamports:j(),data:gb,rentEpoch:j()}),mb=ot({pubkey:ee,account:Xl}),yb=ot({state:un([Xt("active"),Xt("inactive"),Xt("activating"),Xt("deactivating")]),active:j(),inactive:j()}),wb=It(lt(ot({signature:ct(),slot:j(),err:Ai,memo:ht(ct()),blockTime:wt(ht(j()))}))),bb=It(lt(ot({signature:ct(),slot:j(),err:Ai,memo:ht(ct()),blockTime:wt(ht(j()))}))),Ab=ot({subscription:j(),result:xu(xa)}),xb=ot({pubkey:ee,account:xa}),Eb=ot({subscription:j(),result:xu(xb)}),vb=ot({parent:j(),slot:j(),root:j()}),Bb=ot({subscription:j(),result:vb}),Sb=un([ot({type:un([Xt("firstShredReceived"),Xt("completed"),Xt("optimisticConfirmation"),Xt("root")]),slot:j(),timestamp:j()}),ot({type:Xt("createdBank"),parent:j(),slot:j(),timestamp:j()}),ot({type:Xt("frozen"),slot:j(),timestamp:j(),stats:ot({numTransactionEntries:j(),numSuccessfulTransactions:j(),numFailedTransactions:j(),maxTransactionsPerEntry:j()})}),ot({type:Xt("dead"),slot:j(),timestamp:j(),err:ct()})]),Ib=ot({subscription:j(),result:Sb}),kb=ot({subscription:j(),result:xu(un([W1,$1]))}),Rb=ot({subscription:j(),result:j()}),Nb=ot({pubkey:ct(),gossip:ht(ct()),tpu:ht(ct()),rpc:ht(ct()),version:ht(ct())}),md=ot({votePubkey:ct(),nodePubkey:ct(),activatedStake:j(),epochVoteAccount:mr(),epochCredits:lt($f([j(),j(),j()])),commission:j(),lastVote:j(),rootSlot:ht(j())}),Cb=It(ot({current:lt(md),delinquent:lt(md)})),Pb=un([Xt("processed"),Xt("confirmed"),Xt("finalized")]),Tb=ot({slot:j(),confirmations:ht(j()),err:Ai,confirmationStatus:wt(Pb)}),Mb=ue(lt(ht(Tb))),_b=It(j()),Sp=ot({accountKey:ee,writableIndexes:lt(j()),readonlyIndexes:lt(j())}),Zf=ot({signatures:lt(ct()),message:ot({accountKeys:lt(ct()),header:ot({numRequiredSignatures:j(),numReadonlySignedAccounts:j(),numReadonlyUnsignedAccounts:j()}),instructions:lt(ot({accounts:lt(j()),data:ct(),programIdIndex:j()})),recentBlockhash:ct(),addressTableLookups:wt(lt(Sp))})}),Ip=ot({pubkey:ee,signer:mr(),writable:mr(),source:wt(un([Xt("transaction"),Xt("lookupTable")]))}),kp=ot({accountKeys:lt(Ip),signatures:lt(ct())}),Rp=ot({parsed:Yo(),program:ct(),programId:ee}),Np=ot({accounts:lt(ee),data:ct(),programId:ee}),Ob=un([Np,Rp]),Lb=un([ot({parsed:Yo(),program:ct(),programId:ct()}),ot({accounts:lt(ct()),data:ct(),programId:ct()})]),Cp=Ja(Ob,Lb,r=>"accounts"in r?ut(r,Np):ut(r,Rp)),Pp=ot({signatures:lt(ct()),message:ot({accountKeys:lt(Ip),instructions:lt(Cp),recentBlockhash:ct(),addressTableLookups:wt(ht(lt(Sp)))})}),Vc=ot({accountIndex:j(),mint:ct(),owner:wt(ct()),programId:wt(ct()),uiTokenAmount:Zl}),Tp=ot({writable:lt(ee),readonly:lt(ee)}),Eu=ot({err:Ai,fee:j(),innerInstructions:wt(ht(lt(ot({index:j(),instructions:lt(ot({accounts:lt(j()),data:ct(),programIdIndex:j()}))})))),preBalances:lt(j()),postBalances:lt(j()),logMessages:wt(ht(lt(ct()))),preTokenBalances:wt(ht(lt(Vc))),postTokenBalances:wt(ht(lt(Vc))),loadedAddresses:wt(Tp),computeUnitsConsumed:wt(j())}),Yf=ot({err:Ai,fee:j(),innerInstructions:wt(ht(lt(ot({index:j(),instructions:lt(Cp)})))),preBalances:lt(j()),postBalances:lt(j()),logMessages:wt(ht(lt(ct()))),preTokenBalances:wt(ht(lt(Vc))),postTokenBalances:wt(ht(lt(Vc))),loadedAddresses:wt(Tp),computeUnitsConsumed:wt(j())}),Xo=un([Xt(0),Xt("legacy")]),xi=ot({pubkey:ct(),lamports:j(),postBalance:ht(j()),rewardType:ht(ct()),commission:wt(ht(j()))}),Ub=It(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:Zf,meta:ht(Eu),version:wt(Xo)})),rewards:wt(lt(xi)),blockTime:ht(j()),blockHeight:ht(j())}))),Fb=It(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),rewards:wt(lt(xi)),blockTime:ht(j()),blockHeight:ht(j())}))),Db=It(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:kp,meta:ht(Eu),version:wt(Xo)})),rewards:wt(lt(xi)),blockTime:ht(j()),blockHeight:ht(j())}))),Hb=It(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:Pp,meta:ht(Yf),version:wt(Xo)})),rewards:wt(lt(xi)),blockTime:ht(j()),blockHeight:ht(j())}))),Gb=It(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:kp,meta:ht(Yf),version:wt(Xo)})),rewards:wt(lt(xi)),blockTime:ht(j()),blockHeight:ht(j())}))),zb=It(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),rewards:wt(lt(xi)),blockTime:ht(j()),blockHeight:ht(j())}))),Kb=It(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:Zf,meta:ht(Eu)})),rewards:wt(lt(xi)),blockTime:ht(j())}))),yd=It(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),signatures:lt(ct()),blockTime:ht(j())}))),kl=It(ht(ot({slot:j(),meta:ht(Eu),blockTime:wt(ht(j())),transaction:Zf,version:wt(Xo)}))),fc=It(ht(ot({slot:j(),transaction:Pp,meta:ht(Yf),blockTime:wt(ht(j())),version:wt(Xo)}))),Vb=ue(ot({blockhash:ct(),lastValidBlockHeight:j()})),qb=ue(mr()),Qb=ot({slot:j(),numTransactions:j(),numSlots:j(),samplePeriodSecs:j()}),Wb=It(lt(Qb)),$b=ue(ht(ot({feeCalculator:ot({lamportsPerSignature:j()})}))),Jb=It(ct()),jb=It(ct()),Zb=ot({err:Ai,logs:lt(ct()),signature:ct()}),Yb=ot({result:xu(Zb),subscription:j()}),Xb={"solana-client":"js/1.0.0-maintenance"};class q2{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const f={};return async h=>{const{commitment:y,config:E}=Kt(h),b=this._buildArgs([],y,void 0,E),N=fd(b);return f[N]=f[N]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",b),S=ut(x,It(j()));if("error"in S)throw new yt(S.error,"failed to get block height information");return S.result}finally{delete f[N]}})(),await f[N]}})();let n,s,i,o,a,c;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,c=e.httpAgent),this._rpcEndpoint=F1(t),this._rpcWsEndpoint=n||L1(t),this._rpcClient=X1(t,s,i,o,a,c),this._rpcRequest=tb(this._rpcClient),this._rpcBatchRequest=eb(this._rpcClient),this._rpcWebSocket=new T1(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=ut(o,ue(j()));if("error"in a)throw new yt(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=ut(e,It(ht(j())));if("error"in n)throw new yt(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=ut(t,It(j()));if("error"in e)throw new yt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=ut(t,cb);if("error"in e)throw new yt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=ut(n,ub);if("error"in s)throw new yt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=ut(s,ue(Zl));if("error"in i)throw new yt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=ut(s,ue(Zl));if("error"in i)throw new yt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=Kt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),f=ut(c,fb);if("error"in f)throw new yt(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=ut(o,hb);if("error"in a)throw new yt(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=ut(s,db);if("error"in i)throw new yt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=ut(s,lb);if("error"in i)throw new yt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=ut(o,ue(ht(xa)));if("error"in a)throw new yt(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=ut(o,ue(ht(Xl)));if("error"in a)throw new yt(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=Kt(e),i=t.map(f=>f.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=ut(a,ue(lt(ht(Xl))));if("error"in c)throw new yt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=Kt(e),i=t.map(f=>f.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=ut(a,ue(lt(ht(xa))));if("error"in c)throw new yt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=Kt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=ut(a,It(yb));if("error"in c)throw new yt(c.error,`failed to get Stake Activation ${t.toBase58()}`);return c.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=Kt(e),{encoding:i,...o}=s||{},a=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:pd(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),f=lt(pb),h=o.withContext===!0?ut(c,ue(f)):ut(c,It(f));if("error"in h)throw new yt(h.error,`failed to get accounts owned by program ${t.toBase58()}`);return h.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=ut(o,It(lt(mb)));if("error"in a)throw new yt(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=He.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Pe(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((c,f)=>{try{n=this.onSignature(e,(y,E)=>{n=void 0;const b={context:E,value:y};c({__type:jr.PROCESSED,response:b})},t);const h=new Promise(y=>{n==null?y():s=this._onSubscriptionStateChange(n,E=>{E==="subscribed"&&y()})});(async()=>{if(await h,i)return;const y=await this.getSignatureStatus(e);if(i||y==null)return;const{context:E,value:b}=y;if(b!=null)if(b!=null&&b.err)f(b.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(b.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(b.confirmationStatus==="processed"||b.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:jr.PROCESSED,response:{context:E,value:b}})}})()}catch(h){f(h)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(y=>{const E=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let b=await E();if(!i){for(;b<=n;)if(await Ti(1e3),i||(b=await E(),i))return;y({__type:jr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),f=this.getCancellationPromise(e);let h;try{const y=await Promise.race([f,c,o]);if(y.__type===jr.PROCESSED)h=y.response;else throw new wp(s)}finally{i=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(b=>{let N=i,x=null;const S=async()=>{try{const{context:_,value:V}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return x=_.slot,V==null?void 0:V.nonce}catch{return N}};(async()=>{if(N=await S(),!a)for(;;){if(i!==N){b({__type:jr.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await Ti(2e3),a||(N=await S(),a))return}})()}),{abortConfirmation:f,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),y=this.getCancellationPromise(e);let E;try{const b=await Promise.race([y,h,c]);if(b.__type===jr.PROCESSED)E=b.response;else{let N;for(;;){const x=await this.getSignatureStatus(o);if(x==null)break;if(x.context.slot<(b.slotInWhichNonceDidAdvance??n)){await Ti(400);continue}N=x;break}if(N!=null&&N.value){const x=t||"finalized",{confirmationStatus:S}=N.value;switch(x){case"processed":case"recent":if(S!=="processed"&&S!=="confirmed"&&S!=="finalized")throw new ca(o);break;case"confirmed":case"single":case"singleGossip":if(S!=="confirmed"&&S!=="finalized")throw new ca(o);break;case"finalized":case"max":case"root":if(S!=="finalized")throw new ca(o);break;default:}E={context:N.context,value:{err:N.value.err}}}else throw new ca(o)}}finally{a=!0,f()}return E}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(c=>{let f=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{f=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:jr.TIMED_OUT,timeoutMs:f}),f)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const c=await Promise.race([o,s]);if(c.__type===jr.PROCESSED)a=c.response;else throw new bp(e,c.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=ut(t,It(lt(Nb)));if("error"in e)throw new yt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=ut(n,Cb);if("error"in s)throw new yt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=Kt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=ut(i,It(j()));if("error"in o)throw new yt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=Kt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=ut(i,It(ct()));if("error"in o)throw new yt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=ut(s,It(lt(ee)));if("error"in i)throw new yt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);Pe(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=ut(s,Mb);if("error"in i)throw new yt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=Kt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=ut(i,It(j()));if("error"in o)throw new yt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=ut(n,nb);if("error"in s)throw new yt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=Kt(n),o=this._buildArgs([t.map(f=>f.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=ut(a,G1);if("error"in c)throw new yt(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=ut(t,rb);if("error"in e)throw new yt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Kt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=ut(i,ib);if("error"in o)throw new yt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=ut(t,ob);if("error"in e)throw new yt(e.error,"failed to get epoch schedule");const n=e.result;return new C1(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=ut(t,ab);if("error"in e)throw new yt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=ut(s,_b);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=ut(e,Wb);if("error"in n)throw new yt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=ut(s,$b);if("error"in i)throw new yt(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const n=De(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=ut(i,ue(ht(j())));if("error"in o)throw new yt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=ut(s,sb);if("error"in i)throw new yt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Kt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=ut(i,Vb);if("error"in o)throw new yt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=ut(o,qb);if("error"in a)throw new yt(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=ut(t,It(J1));if("error"in e)throw new yt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=ut(t,It(ct()));if("error"in e)throw new yt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=ut(o,Db);if("error"in a)throw a.error;return a.result}case"none":{const a=ut(o,Fb);if("error"in a)throw a.error;return a.result}default:{const a=ut(o,Ub);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:f,meta:h,version:y})=>({meta:h,transaction:{...f,message:Il(y,f.message)},version:y}))}:null}}}catch(a){throw new yt(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=ut(o,Gb);if("error"in a)throw a.error;return a.result}case"none":{const a=ut(o,zb);if("error"in a)throw a.error;return a.result}default:{const a=ut(o,Hb);if("error"in a)throw a.error;return a.result}}}catch(a){throw new yt(a,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:a,...c}=t;n=a,e=c}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=ut(i,Y1);if("error"in o)throw new yt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=ut(o,kl);if("error"in a)throw new yt(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:Il(c.version,c.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=Kt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=ut(o,fc);if("error"in a)throw new yt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=Kt(e),i=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const f=ut(c,fc);if("error"in f)throw new yt(f.error,"failed to get transactions");return f.result})}async getTransactions(t,e){const{commitment:n,config:s}=Kt(e),i=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const f=ut(c,kl);if("error"in f)throw new yt(f.error,"failed to get transactions");const h=f.result;return h&&{...h,transaction:{...h.transaction,message:Il(h.version,h.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=ut(s,Kb);if("error"in i)throw new yt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:f})=>{const h=new vs(c.message);return{meta:f,transaction:{...c,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:f})=>({meta:f,transaction:Pi.populate(c.message,c.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=ut(i,It(lt(j())));if("error"in o)throw new yt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=ut(s,yd);if("error"in i)throw new yt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=ut(s,yd);if("error"in i)throw new yt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=ut(s,kl);if("error"in i)throw new yt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new vs(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:Pi.populate(a,c)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=ut(s,fc);if("error"in i)throw new yt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=ut(o,fc);if("error"in a)throw new yt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const c=await this.getConfirmedBlockSignatures(e,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=ut(i,wb);if("error"in o)throw new yt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=ut(i,bb);if("error"in o)throw new yt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new dd({key:t,state:dd.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Jf.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=ut(n,Jb);if("error"in s)throw new yt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Ti(100);const n=Date.now()-this._blockhashInfo.lastFetch>=U1;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Ti(B1/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Kt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=ut(i,ue(j()));if("error"in o)throw new yt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const x=t.serialize(),S=kt.Buffer.from(x).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const _=e||{};_.encoding="base64","commitment"in _||(_.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(_.innerInstructions=e.innerInstructions);const V=[S,_],z=await this._rpcRequest("simulateTransaction",V),rt=ut(z,gd);if("error"in rt)throw new Error("failed to simulate transaction: "+rt.error.message);return rt.result}let s;if(t instanceof Pi){let N=t;s=new Pi,s.feePayer=N.feePayer,s.instructions=t.instructions,s.nonceInfo=N.nonceInfo,s.signatures=N.signatures}else s=Pi.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let N=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(N);if(s.lastValidBlockHeight=x.lastValidBlockHeight,s.recentBlockhash=x.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const S=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(S)&&!this._blockhashInfo.transactionSignatures.includes(S)){this._blockhashInfo.simulatedSignatures.push(S);break}else N=!0}}const o=s._compile(),a=o.serialize(),f=s._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){const N=(Array.isArray(n)?n:o.nonProgramIds()).map(x=>x.toBase58());h.accounts={encoding:"base64",addresses:N}}i&&(h.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(h.innerInstructions=e.innerInstructions);const y=[f,h],E=await this._rpcRequest("simulateTransaction",y),b=ut(E,gd);if("error"in b){let N;if("data"in b.error&&(N=b.error.data.logs,N&&Array.isArray(N))){const x=`
    `,S=x+N.join(x);console.error(b.error.message,S)}throw new cd({action:"simulate",signature:"",transactionMessage:b.error.message,logs:N})}return b.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const c=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=De(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],a=await this._rpcRequest("sendTransaction",o),c=ut(a,jb);if("error"in c){let f;throw"data"in c.error&&(f=c.error.data.logs),new cd({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:f})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=ut(t,Ab);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=fd([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Pe(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=Kt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=ut(t,Eb);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=Kt(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:pd(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=ut(t,Yb);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=ut(t,Bb);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=ut(t,Ib);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=ut(t,kb);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),a=this._makeSubscription({callback:(c,f)=>{e(c,f);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=ut(t,Rb);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:D.struct([D.u32("instruction"),zo("recentSlot"),D.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:D.struct([D.u32("instruction")])},ExtendLookupTable:{index:2,layout:D.struct([D.u32("instruction"),zo(),D.seq(Pt(),D.offset(D.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:D.struct([D.u32("instruction")])},CloseLookupTable:{index:4,layout:D.struct([D.u32("instruction")])}});new xt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:D.struct([D.u8("instruction"),D.u32("units"),D.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:D.struct([D.u8("instruction"),D.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:D.struct([D.u8("instruction"),D.u32("units")])},SetComputeUnitPrice:{index:3,layout:D.struct([D.u8("instruction"),zo("microLamports")])}});new xt("ComputeBudget111111111111111111111111111111");D.struct([D.u8("numSignatures"),D.u8("padding"),D.u16("signatureOffset"),D.u16("signatureInstructionIndex"),D.u16("publicKeyOffset"),D.u16("publicKeyInstructionIndex"),D.u16("messageDataOffset"),D.u16("messageDataSize"),D.u16("messageInstructionIndex")]);new xt("Ed25519SigVerify111111111111111111111111111");l1.utils.isValidPrivateKey;D.struct([D.u8("numSignatures"),D.u16("signatureOffset"),D.u8("signatureInstructionIndex"),D.u16("ethAddressOffset"),D.u8("ethAddressInstructionIndex"),D.u16("messageDataOffset"),D.u16("messageDataSize"),D.u8("messageInstructionIndex"),D.blob(20,"ethAddress"),D.blob(64,"signature"),D.u8("recoveryId")]);new xt("KeccakSecp256k11111111111111111111111111111");var Mp;new xt("StakeConfig11111111111111111111111111111111");class _p{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Mp=_p;_p.default=new Mp(0,0,xt.default);Object.freeze({Initialize:{index:0,layout:D.struct([D.u32("instruction"),m1(),y1()])},Authorize:{index:1,layout:D.struct([D.u32("instruction"),Pt("newAuthorized"),D.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:D.struct([D.u32("instruction")])},Split:{index:3,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},Withdraw:{index:4,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},Deactivate:{index:5,layout:D.struct([D.u32("instruction")])},Merge:{index:7,layout:D.struct([D.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:D.struct([D.u32("instruction"),Pt("newAuthorized"),D.u32("stakeAuthorizationType"),Ui("authoritySeed"),Pt("authorityOwner")])}});new xt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:D.struct([D.u32("instruction"),w1()])},Authorize:{index:1,layout:D.struct([D.u32("instruction"),Pt("newAuthorized"),D.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:D.struct([D.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:D.struct([D.u32("instruction"),b1()])}});new xt("Vote111111111111111111111111111111111111111");new xt("Va1idator1nfo111111111111111111111111111111");ot({name:ct(),website:wt(ct()),details:wt(ct()),iconUrl:wt(ct()),keybaseUsername:wt(ct())});new xt("Vote111111111111111111111111111111111111111");D.struct([Pt("nodePubkey"),Pt("authorizedWithdrawer"),D.u8("commission"),D.nu64(),D.seq(D.struct([D.nu64("slot"),D.u32("confirmationCount")]),D.offset(D.u32(),-8),"votes"),D.u8("rootSlotValid"),D.nu64("rootSlot"),D.nu64(),D.seq(D.struct([D.nu64("epoch"),Pt("authorizedVoter")]),D.offset(D.u32(),-8),"authorizedVoters"),D.struct([D.seq(D.struct([Pt("authorizedPubkey"),D.nu64("epochOfLastAuthorizedSwitch"),D.nu64("targetEpoch")]),32,"buf"),D.nu64("idx"),D.u8("isEmpty")],"priorVoters"),D.nu64(),D.seq(D.struct([D.nu64("epoch"),D.nu64("credits"),D.nu64("prevCredits")]),D.offset(D.u32(),-8),"epochCredits"),D.struct([D.nu64("slot"),D.nu64("timestamp")],"lastTimestamp")]);const Q2=1e9,tA="6.14.4";function eA(r,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${e}`,s.value=r,s}async function rn(r){const t=Object.keys(r);return(await Promise.all(t.map(n=>Promise.resolve(r[n])))).reduce((n,s,i)=>(n[t[i]]=s,n),{})}function bt(r,t,e){for(let n in t){let s=t[n];const i=e?e[n]:null;i&&eA(s,i,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function Fi(r,t){if(r==null)return"null";if(t==null&&(t=new Set),typeof r=="object"){if(t.has(r))return"[Circular]";t.add(r)}if(Array.isArray(r))return"[ "+r.map(e=>Fi(e,t)).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let s=0;s<r.length;s++)n+=e[r[s]>>4],n+=e[r[s]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return Fi(r.toJSON(),t);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(n=>`${Fi(n,t)}: ${Fi(r[n],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ze(r,t){return r&&r.code===t}function Xf(r){return ze(r,"CALL_EXCEPTION")}function Zt(r,t,e){let n=r;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${Fi(e)}`);for(const o in e){if(o==="shortMessage")continue;const a=e[o];i.push(o+"="+Fi(a))}}i.push(`code=${t}`),i.push(`version=${tA}`),i.length&&(r+=" ("+i.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return bt(s,{code:t}),e&&Object.assign(s,e),s.shortMessage==null&&bt(s,{shortMessage:n}),s}function it(r,t,e,n){if(!r)throw Zt(t,e,n)}function q(r,t,e,n){it(r,t,"INVALID_ARGUMENT",{argument:e,value:n})}function Op(r,t,e){e==null&&(e=""),e&&(e=": "+e),it(r>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:r,expectedCount:t}),it(r<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((r,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");r.push(t)}catch{}return r},[]);function ja(r,t,e){if(e==null&&(e=""),r!==t){let n=e,s="new";e&&(n+=".",s+=" "+e),it(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Lp(r,t,e){if(r instanceof Uint8Array)return e?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(r.substring(s,s+2),16),s+=2;return n}q(!1,"invalid BytesLike value",t||"value",r)}function Rt(r,t){return Lp(r,t,!1)}function sn(r,t){return Lp(r,t,!0)}function Vt(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&r.length!==2+2*t||t===!0&&r.length%2!==0)}function th(r){return Vt(r,!0)||r instanceof Uint8Array}const wd="0123456789abcdef";function dt(r){const t=Rt(r);let e="0x";for(let n=0;n<t.length;n++){const s=t[n];e+=wd[(s&240)>>4]+wd[s&15]}return e}function ae(r){return"0x"+r.map(t=>dt(t).substring(2)).join("")}function Qi(r){return Vt(r,!0)?(r.length-2)/2:Rt(r).length}function oe(r,t,e){const n=Rt(r);return e!=null&&e>n.length&&it(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),dt(n.slice(t??0,e??n.length))}function Up(r,t,e){const n=Rt(r);it(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),e?s.set(n,t-n.length):s.set(n,0),dt(s)}function Kr(r,t){return Up(r,t,!0)}function nA(r,t){return Up(r,t,!1)}const vu=BigInt(0),Jn=BigInt(1),Di=9007199254740991;function qc(r,t){const e=Bu(r,"value"),n=BigInt(Nt(t,"width"));if(it(e>>n===vu,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),e>>n-Jn){const s=(Jn<<n)-Jn;return-((~e&s)+Jn)}return e}function Fp(r,t){let e=gt(r,"value");const n=BigInt(Nt(t,"width")),s=Jn<<n-Jn;if(e<vu){e=-e,it(e<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const i=(Jn<<n)-Jn;return(~e&i)+Jn}else it(e<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return e}function Gs(r,t){const e=Bu(r,"value"),n=BigInt(Nt(t,"bits"));return e&(Jn<<n)-Jn}function gt(r,t){switch(typeof r){case"bigint":return r;case"number":return q(Number.isInteger(r),"underflow",t||"value",r),q(r>=-Di&&r<=Di,"overflow",t||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(e){q(!1,`invalid BigNumberish string: ${e.message}`,t||"value",r)}}q(!1,"invalid BigNumberish value",t||"value",r)}function Bu(r,t){const e=gt(r,t);return it(e>=vu,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),e}const bd="0123456789abcdef";function Su(r){if(r instanceof Uint8Array){let t="0x0";for(const e of r)t+=bd[e>>4],t+=bd[e&15];return BigInt(t)}return gt(r)}function Nt(r,t){switch(typeof r){case"bigint":return q(r>=-Di&&r<=Di,"overflow",t||"value",r),Number(r);case"number":return q(Number.isInteger(r),"underflow",t||"value",r),q(r>=-Di&&r<=Di,"overflow",t||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Nt(BigInt(r),t)}catch(e){q(!1,`invalid numeric string: ${e.message}`,t||"value",r)}}q(!1,"invalid numeric value",t||"value",r)}function rA(r){return Nt(Su(r))}function Bs(r,t){let n=Bu(r,"value").toString(16);if(t==null)n.length%2&&(n="0"+n);else{const s=Nt(t,"width");for(it(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<s*2;)n="0"+n}return"0x"+n}function Me(r){const t=Bu(r,"value");if(t===vu)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(e.substring(i,i+2),16)}return n}function $n(r){let t=dt(th(r)?r:Me(r)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const Ad="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const xd=BigInt(58);function sA(r){const t=Rt(r);let e=Su(t),n="";for(;e;)n=Ad[Number(e%xd)]+n,e/=xd;for(let s=0;s<t.length&&!t[s];s++)n=Ad[0]+n;return n}function iA(r){r=atob(r);const t=new Uint8Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return Rt(t)}function oA(r){const t=Rt(r);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}var ji;class Dp{constructor(t,e,n){W(this,"filter");W(this,"emitter");X(this,ji);M(this,ji,e),bt(this,{emitter:t,filter:n})}async removeListener(){A(this,ji)!=null&&await this.emitter.off(this.filter,A(this,ji))}}ji=new WeakMap;function aA(r,t,e,n,s){q(!1,`invalid codepoint at offset ${t}; ${r}`,"bytes",e)}function Hp(r,t,e,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let i=0;for(let o=t+1;o<e.length&&e[o]>>6===2;o++)i++;return i}return r==="OVERRUN"?e.length-t-1:0}function cA(r,t,e,n,s){return r==="OVERLONG"?(q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),Hp(r,t,e))}const uA=Object.freeze({error:aA,ignore:Hp,replace:cA});function lA(r,t){t==null&&(t=uA.error);const e=Rt(r,"bytes"),n=[];let s=0;for(;s<e.length;){const i=e[s++];if(i>>7===0){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=t("UNEXPECTED_CONTINUE",s-1,e,n):s+=t("BAD_PREFIX",s-1,e,n);continue}if(s-1+o>=e.length){s+=t("OVERRUN",s-1,e,n);continue}let c=i&(1<<8-o-1)-1;for(let f=0;f<o;f++){let h=e[s];if((h&192)!=128){s+=t("MISSING_CONTINUE",s,e,n),c=null;break}c=c<<6|h&63,s++}if(c!==null){if(c>1114111){s+=t("OUT_OF_RANGE",s-1-o,e,n,c);continue}if(c>=55296&&c<=57343){s+=t("UTF16_SURROGATE",s-1-o,e,n,c);continue}if(c<=a){s+=t("OVERLONG",s-1-o,e,n,c);continue}n.push(c)}}return n}function Gr(r,t){q(typeof r=="string","invalid string value","str",r);let e=[];for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){n++;const i=r.charCodeAt(n);q(n<r.length&&(i&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((s&1023)<<10)+(i&1023);e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return new Uint8Array(e)}function fA(r){return r.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function Qc(r,t){return fA(lA(r,t))}function Gp(r){async function t(e,n){it(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();it(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),it(s==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Zt("request timeout","TIMEOUT"),o.abort()},e.timeout);n&&n.addListener(()=>{i=Zt("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},r,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal});let f;try{f=await fetch(e.url,c)}catch(b){throw clearTimeout(a),i||b}clearTimeout(a);const h={};f.headers.forEach((b,N)=>{h[N.toLowerCase()]=b});const y=await f.arrayBuffer(),E=y==null?null:new Uint8Array(y);return{statusCode:f.status,statusMessage:f.statusText,headers:h,body:E}}return t}const hA=12,dA=250;let Ed=Gp();const pA=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),gA=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Rl=!1;async function zp(r,t){try{const e=r.match(pA);if(!e)throw new Error("invalid data");return new Es(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?iA(e[3]):yA(e[3]))}catch{return new Es(599,"BAD REQUEST (invalid data: URI)",{},null,new Ss(r))}}function Kp(r){async function t(e,n){try{const s=e.match(gA);if(!s)throw new Error("invalid link");return new Ss(`${r}${s[2]}`)}catch{return new Es(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ss(e))}}return t}const hc={data:zp,ipfs:Kp("https://gateway.ipfs.io/ipfs/")},Vp=new WeakMap;var qs,rs;class mA{constructor(t){X(this,qs);X(this,rs);M(this,qs,[]),M(this,rs,!1),Vp.set(t,()=>{if(!A(this,rs)){M(this,rs,!0);for(const e of A(this,qs))setTimeout(()=>{e()},0);M(this,qs,[])}})}addListener(t){it(!A(this,rs),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),A(this,qs).push(t)}get cancelled(){return A(this,rs)}checkSignal(){it(!this.cancelled,"cancelled","CANCELLED",{})}}qs=new WeakMap,rs=new WeakMap;function dc(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var Zi,Yi,zn,Sr,Xi,to,_e,An,Ir,Qs,Ws,$s,rr,Kn,ss,Js,ua;const su=class su{constructor(t){X(this,Js);X(this,Zi);X(this,Yi);X(this,zn);X(this,Sr);X(this,Xi);X(this,to);X(this,_e);X(this,An);X(this,Ir);X(this,Qs);X(this,Ws);X(this,$s);X(this,rr);X(this,Kn);X(this,ss);M(this,to,String(t)),M(this,Zi,!1),M(this,Yi,!0),M(this,zn,{}),M(this,Sr,""),M(this,Xi,3e5),M(this,Kn,{slotInterval:dA,maxAttempts:hA}),M(this,ss,null)}get url(){return A(this,to)}set url(t){M(this,to,String(t))}get body(){return A(this,_e)==null?null:new Uint8Array(A(this,_e))}set body(t){if(t==null)M(this,_e,void 0),M(this,An,void 0);else if(typeof t=="string")M(this,_e,Gr(t)),M(this,An,"text/plain");else if(t instanceof Uint8Array)M(this,_e,t),M(this,An,"application/octet-stream");else if(typeof t=="object")M(this,_e,Gr(JSON.stringify(t))),M(this,An,"application/json");else throw new Error("invalid body")}hasBody(){return A(this,_e)!=null}get method(){return A(this,Sr)?A(this,Sr):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),M(this,Sr,String(t).toUpperCase())}get headers(){const t=Object.assign({},A(this,zn));return A(this,Ir)&&(t.authorization=`Basic ${oA(Gr(A(this,Ir)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&A(this,An)&&(t["content-type"]=A(this,An)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){A(this,zn)[String(t).toLowerCase()]=String(e)}clearHeaders(){M(this,zn,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return A(this,Ir)||null}setCredentials(t,e){q(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),M(this,Ir,`${t}:${e}`)}get allowGzip(){return A(this,Yi)}set allowGzip(t){M(this,Yi,!!t)}get allowInsecureAuthentication(){return!!A(this,Zi)}set allowInsecureAuthentication(t){M(this,Zi,!!t)}get timeout(){return A(this,Xi)}set timeout(t){q(t>=0,"timeout must be non-zero","timeout",t),M(this,Xi,t)}get preflightFunc(){return A(this,Qs)||null}set preflightFunc(t){M(this,Qs,t)}get processFunc(){return A(this,Ws)||null}set processFunc(t){M(this,Ws,t)}get retryFunc(){return A(this,$s)||null}set retryFunc(t){M(this,$s,t)}get getUrlFunc(){return A(this,ss)||Ed}set getUrlFunc(t){M(this,ss,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${A(this,_e)?dt(A(this,_e)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(A(this,Kn).slotInterval=t.slotInterval),t.maxAttempts!=null&&(A(this,Kn).maxAttempts=t.maxAttempts)}send(){return it(A(this,rr)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),M(this,rr,new mA(this)),at(this,Js,ua).call(this,0,vd()+this.timeout,0,this,new Es(0,"",{},null,this))}cancel(){it(A(this,rr)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Vp.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();it(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const s=new su(t);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,M(s,zn,Object.assign({},A(this,zn))),A(this,_e)&&M(s,_e,new Uint8Array(A(this,_e))),M(s,An,A(this,An)),s}clone(){const t=new su(this.url);return M(t,Sr,A(this,Sr)),A(this,_e)&&M(t,_e,A(this,_e)),M(t,An,A(this,An)),M(t,zn,Object.assign({},A(this,zn))),M(t,Ir,A(this,Ir)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),M(t,Qs,A(this,Qs)),M(t,Ws,A(this,Ws)),M(t,$s,A(this,$s)),M(t,Kn,Object.assign({},A(this,Kn))),M(t,ss,A(this,ss)),t}static lockConfig(){Rl=!0}static getGateway(t){return hc[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Rl)throw new Error("gateways locked");hc[t]=e}static registerGetUrl(t){if(Rl)throw new Error("gateways locked");Ed=t}static createGetUrlFunc(t){return Gp(t)}static createDataGateway(){return zp}static createIpfsGatewayFunc(t){return Kp(t)}};Zi=new WeakMap,Yi=new WeakMap,zn=new WeakMap,Sr=new WeakMap,Xi=new WeakMap,to=new WeakMap,_e=new WeakMap,An=new WeakMap,Ir=new WeakMap,Qs=new WeakMap,Ws=new WeakMap,$s=new WeakMap,rr=new WeakMap,Kn=new WeakMap,ss=new WeakMap,Js=new WeakSet,ua=async function(t,e,n,s,i){var h,y,E;if(t>=A(this,Kn).maxAttempts)return i.makeServerError("exceeded maximum retry limit");it(vd()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await wA(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in hc){const b=await hc[a](o.url,dc(A(s,rr)));if(b instanceof Es){let N=b;if(this.processFunc){dc(A(s,rr));try{N=await this.processFunc(o,N)}catch(x){(x.throttle==null||typeof x.stall!="number")&&N.makeServerError("error in post-processing function",x).assertOk()}}return N}o=b}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,dc(A(s,rr)));let f=new Es(c.statusCode,c.statusMessage,c.headers,c.body,s);if(f.statusCode===301||f.statusCode===302){try{const b=f.headers.location||"";return at(h=o.redirect(b),Js,ua).call(h,t+1,e,0,s,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,f,t))){const b=f.headers["retry-after"];let N=A(this,Kn).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof b=="string"&&b.match(/^[1-9][0-9]*$/)&&(N=parseInt(b)),at(y=o.clone(),Js,ua).call(y,t+1,e,N,s,f)}if(this.processFunc){dc(A(s,rr));try{f=await this.processFunc(o,f)}catch(b){(b.throttle==null||typeof b.stall!="number")&&f.makeServerError("error in post-processing function",b).assertOk();let N=A(this,Kn).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return b.stall>=0&&(N=b.stall),at(E=o.clone(),Js,ua).call(E,t+1,e,N,s,f)}}return f};let Ss=su;var Ma,_a,Oa,xn,eo,js;const wh=class wh{constructor(t,e,n,s,i){X(this,Ma);X(this,_a);X(this,Oa);X(this,xn);X(this,eo);X(this,js);M(this,Ma,t),M(this,_a,e),M(this,Oa,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),M(this,xn,s==null?null:new Uint8Array(s)),M(this,eo,i||null),M(this,js,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${A(this,xn)?dt(A(this,xn)):"null"}>`}get statusCode(){return A(this,Ma)}get statusMessage(){return A(this,_a)}get headers(){return Object.assign({},A(this,Oa))}get body(){return A(this,xn)==null?null:new Uint8Array(A(this,xn))}get bodyText(){try{return A(this,xn)==null?"":Qc(A(this,xn))}catch{it(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{it(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const s=new wh(599,n,this.headers,this.body,A(this,eo)||void 0);return M(s,js,{message:t,error:e}),s}throwThrottleError(t,e){e==null?e=-1:q(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw bt(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return A(this,xn)!=null}get request(){return A(this,eo)}ok(){return A(this,js).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=A(this,js);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{A(this,xn)&&(s=Qc(A(this,xn)))}catch{}it(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Ma=new WeakMap,_a=new WeakMap,Oa=new WeakMap,xn=new WeakMap,eo=new WeakMap,js=new WeakMap;let Es=wh;function vd(){return new Date().getTime()}function yA(r){return Gr(r.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function wA(r){return new Promise(t=>setTimeout(t,r))}const bA=BigInt(-1),Dn=BigInt(0),Hi=BigInt(1),AA=BigInt(5),Ri={};let Wi="0000";for(;Wi.length<80;)Wi+=Wi;function Cs(r){let t=Wi;for(;t.length<r;)t+=t;return BigInt("1"+t.substring(0,r))}function ia(r,t,e){const n=BigInt(t.width);if(t.signed){const s=Hi<<n-Hi;it(e==null||r>=-s&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r>Dn?r=qc(Gs(r,n),n):r=-qc(Gs(-r,n),n)}else{const s=Hi<<n;it(e==null||r>=0&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r=(r%s+s)%s&s-Hi}return r}function Nl(r){typeof r=="number"&&(r=`fixed128x${r}`);let t=!0,e=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")t=!1;else{const i=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);q(i,"invalid fixed format","format",r),t=i[1]!=="u",e=parseInt(i[2]),n=parseInt(i[3])}}else if(r){const i=r,o=(a,c,f)=>i[a]==null?f:(q(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);t=o("signed","boolean",t),e=o("width","number",e),n=o("decimals","number",n)}q(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),q(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(t?"":"u")+"fixed"+String(e)+"x"+String(n);return{signed:t,width:e,decimals:n,name:s}}function xA(r,t){let e="";r<Dn&&(e="-",r*=bA);let n=r.toString();if(t===0)return e+n;for(;n.length<=t;)n=Wi+n;const s=n.length-t;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return e+n}var Vn,Gt,en,Ft,Ts,Ar,ef,nf,rf,sf;const ns=class ns{constructor(t,e,n){X(this,Ft);W(this,"format");X(this,Vn);X(this,Gt);X(this,en);W(this,"_value");ja(t,Ri,"FixedNumber"),M(this,Gt,e),M(this,Vn,n);const s=xA(e,n.decimals);bt(this,{format:n.name,_value:s}),M(this,en,Cs(n.decimals))}get signed(){return A(this,Vn).signed}get width(){return A(this,Vn).width}get decimals(){return A(this,Vn).decimals}get value(){return A(this,Gt)}addUnsafe(t){return at(this,Ft,ef).call(this,t)}add(t){return at(this,Ft,ef).call(this,t,"add")}subUnsafe(t){return at(this,Ft,nf).call(this,t)}sub(t){return at(this,Ft,nf).call(this,t,"sub")}mulUnsafe(t){return at(this,Ft,rf).call(this,t)}mul(t){return at(this,Ft,rf).call(this,t,"mul")}mulSignal(t){at(this,Ft,Ts).call(this,t);const e=A(this,Gt)*A(t,Gt);return it(e%A(this,en)===Dn,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),at(this,Ft,Ar).call(this,e/A(this,en),"mulSignal")}divUnsafe(t){return at(this,Ft,sf).call(this,t)}div(t){return at(this,Ft,sf).call(this,t,"div")}divSignal(t){it(A(t,Gt)!==Dn,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),at(this,Ft,Ts).call(this,t);const e=A(this,Gt)*A(this,en);return it(e%A(t,Gt)===Dn,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),at(this,Ft,Ar).call(this,e/A(t,Gt),"divSignal")}cmp(t){let e=this.value,n=t.value;const s=this.decimals-t.decimals;return s>0?n*=Cs(s):s<0&&(e*=Cs(-s)),e<n?-1:e>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=A(this,Gt);return A(this,Gt)<Dn&&(t-=A(this,en)-Hi),t=A(this,Gt)/A(this,en)*A(this,en),at(this,Ft,Ar).call(this,t,"floor")}ceiling(){let t=A(this,Gt);return A(this,Gt)>Dn&&(t+=A(this,en)-Hi),t=A(this,Gt)/A(this,en)*A(this,en),at(this,Ft,Ar).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=AA*Cs(e-1);let s=this.value+n;const i=Cs(e);return s=s/i*i,ia(s,A(this,Vn),"round"),new ns(Ri,s,A(this,Vn))}isZero(){return A(this,Gt)===Dn}isNegative(){return A(this,Gt)<Dn}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return ns.fromString(this.toString(),t)}static fromValue(t,e,n){const s=e==null?0:Nt(e),i=Nl(n);let o=gt(t,"value");const a=s-i.decimals;if(a>0){const c=Cs(a);it(o%c===Dn,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=c}else a<0&&(o*=Cs(-a));return ia(o,i,"fromValue"),new ns(Ri,o,i)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);q(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const s=Nl(e);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=Wi;it(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return ia(a,s,"fromString"),new ns(Ri,a,s)}static fromBytes(t,e){let n=Su(Rt(t,"value"));const s=Nl(e);return s.signed&&(n=qc(n,s.width)),ia(n,s,"fromBytes"),new ns(Ri,n,s)}};Vn=new WeakMap,Gt=new WeakMap,en=new WeakMap,Ft=new WeakSet,Ts=function(t){q(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},Ar=function(t,e){return t=ia(t,A(this,Vn),e),new ns(Ri,t,A(this,Vn))},ef=function(t,e){return at(this,Ft,Ts).call(this,t),at(this,Ft,Ar).call(this,A(this,Gt)+A(t,Gt),e)},nf=function(t,e){return at(this,Ft,Ts).call(this,t),at(this,Ft,Ar).call(this,A(this,Gt)-A(t,Gt),e)},rf=function(t,e){return at(this,Ft,Ts).call(this,t),at(this,Ft,Ar).call(this,A(this,Gt)*A(t,Gt)/A(this,en),e)},sf=function(t,e){return it(A(t,Gt)!==Dn,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),at(this,Ft,Ts).call(this,t),at(this,Ft,Ar).call(this,A(this,Gt)*A(this,en)/A(t,Gt),e)};let tf=ns;function EA(r){let t=r.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Bd(r,t,e){let n=0;for(let s=0;s<e;s++)n=n*256+r[t+s];return n}function Sd(r,t,e,n){const s=[];for(;e<t+1+n;){const i=qp(r,e);s.push(i.result),e+=i.consumed,it(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:t})}return{consumed:1+n,result:s}}function qp(r,t){it(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const e=n=>{it(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[t]>=248){const n=r[t]-247;e(t+1+n);const s=Bd(r,t+1,n);return e(t+1+n+s),Sd(r,t,t+1+n,n+s)}else if(r[t]>=192){const n=r[t]-192;return e(t+1+n),Sd(r,t,t+1,n)}else if(r[t]>=184){const n=r[t]-183;e(t+1+n);const s=Bd(r,t+1,n);e(t+1+n+s);const i=dt(r.slice(t+1+n,t+1+n+s));return{consumed:1+n+s,result:i}}else if(r[t]>=128){const n=r[t]-128;e(t+1+n);const s=dt(r.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:EA(r[t])}}function Za(r){const t=Rt(r,"data"),e=qp(t,0);return q(e.consumed===t.length,"unexpected junk after rlp payload","data",r),e.result}function Id(r){const t=[];for(;r;)t.unshift(r&255),r>>=8;return t}function Qp(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(i){n=n.concat(Qp(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=Id(n.length);return s.unshift(247+s.length),s.concat(n)}const t=Array.prototype.slice.call(Rt(r,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Id(t.length);return e.unshift(183+e.length),e.concat(t)}const kd="0123456789abcdef";function Is(r){let t="0x";for(const e of Qp(r))t+=kd[e>>4],t+=kd[e&15];return t}function vA(r,t){q(typeof r=="string","value must be a string","value",r);let e=18;return e=Nt(t,"unit"),tf.fromString(r,{decimals:e,width:512}).value}function W2(r){return vA(r,18)}const on=32,of=new Uint8Array(on),BA=["then"],pc={},Wp=new WeakMap;function _s(r){return Wp.get(r)}function Rd(r,t){Wp.set(r,t)}function oa(r,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw e.error=t,e}function af(r,t,e){return r.indexOf(null)>=0?t.map((n,s)=>n instanceof Ko?af(_s(n),n,e):n):r.reduce((n,s,i)=>{let o=t.getValue(s);return s in n||(e&&o instanceof Ko&&(o=af(_s(o),o,e)),n[s]=o),n},{})}var no;const Gi=class Gi extends Array{constructor(...e){const n=e[0];let s=e[1],i=(e[2]||[]).slice(),o=!0;n!==pc&&(s=e,i=[],o=!1);super(s.length);X(this,no);s.forEach((f,h)=>{this[h]=f});const a=i.reduce((f,h)=>(typeof h=="string"&&f.set(h,(f.get(h)||0)+1),f),new Map);if(Rd(this,Object.freeze(s.map((f,h)=>{const y=i[h];return y!=null&&a.get(y)===1?y:null}))),M(this,no,[]),A(this,no)==null&&A(this,no),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(f,h,y)=>{if(typeof h=="string"){if(h.match(/^[0-9]+$/)){const b=Nt(h,"%index");if(b<0||b>=this.length)throw new RangeError("out of result range");const N=f[b];return N instanceof Error&&oa(`index ${b}`,N),N}if(BA.indexOf(h)>=0)return Reflect.get(f,h,y);const E=f[h];if(E instanceof Function)return function(...b){return E.apply(this===y?f:this,b)};if(!(h in f))return f.getValue.apply(this===y?f:this,[h])}return Reflect.get(f,h,y)}});return Rd(c,_s(this)),c}toArray(e){const n=[];return this.forEach((s,i)=>{s instanceof Error&&oa(`index ${i}`,s),e&&s instanceof Gi&&(s=s.toArray(e)),n.push(s)}),n}toObject(e){const n=_s(this);return n.reduce((s,i,o)=>(it(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),af(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=_s(this),i=[],o=[];for(let a=e;a<n;a++)i.push(this[a]),o.push(s[a]);return new Gi(pc,i,o)}filter(e,n){const s=_s(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&oa(`index ${a}`,c),e.call(n,c,a,this)&&(i.push(c),o.push(s[a]))}return new Gi(pc,i,o)}map(e,n){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&oa(`index ${i}`,o),s.push(e.call(n,o,i,this))}return s}getValue(e){const n=_s(this).indexOf(e);if(n===-1)return;const s=this[n];return s instanceof Error&&oa(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,n){return new Gi(pc,e,n)}};no=new WeakMap;let Ko=Gi;function Nd(r){let t=Me(r);return it(t.length<=on,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:on,offset:t.length}),t.length!==on&&(t=sn(ae([of.slice(t.length%on),t]))),t}class qr{constructor(t,e,n,s){W(this,"name");W(this,"type");W(this,"localName");W(this,"dynamic");bt(this,{name:t,type:e,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){q(!1,t,this.localName,e)}}var kr,Zs,ro,vc;class cf{constructor(){X(this,ro);X(this,kr);X(this,Zs);M(this,kr,[]),M(this,Zs,0)}get data(){return ae(A(this,kr))}get length(){return A(this,Zs)}appendWriter(t){return at(this,ro,vc).call(this,sn(t.data))}writeBytes(t){let e=sn(t);const n=e.length%on;return n&&(e=sn(ae([e,of.slice(n)]))),at(this,ro,vc).call(this,e)}writeValue(t){return at(this,ro,vc).call(this,Nd(t))}writeUpdatableValue(){const t=A(this,kr).length;return A(this,kr).push(of),M(this,Zs,A(this,Zs)+on),e=>{A(this,kr)[t]=Nd(e)}}}kr=new WeakMap,Zs=new WeakMap,ro=new WeakSet,vc=function(t){return A(this,kr).push(t),M(this,Zs,A(this,Zs)+t.length),t.length};var ln,En,Ys,Xs,is,wi,lf,$p;const bh=class bh{constructor(t,e,n){X(this,wi);W(this,"allowLoose");X(this,ln);X(this,En);X(this,Ys);X(this,Xs);X(this,is);bt(this,{allowLoose:!!e}),M(this,ln,sn(t)),M(this,Ys,0),M(this,Xs,null),M(this,is,n??1024),M(this,En,0)}get data(){return dt(A(this,ln))}get dataLength(){return A(this,ln).length}get consumed(){return A(this,En)}get bytes(){return new Uint8Array(A(this,ln))}subReader(t){const e=new bh(A(this,ln).slice(A(this,En)+t),this.allowLoose,A(this,is));return M(e,Xs,this),e}readBytes(t,e){let n=at(this,wi,$p).call(this,0,t,!!e);return at(this,wi,lf).call(this,t),M(this,En,A(this,En)+n.length),n.slice(0,t)}readValue(){return Su(this.readBytes(on))}readIndex(){return rA(this.readBytes(on))}};ln=new WeakMap,En=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,is=new WeakMap,wi=new WeakSet,lf=function(t){var e;if(A(this,Xs))return at(e=A(this,Xs),wi,lf).call(e,t);M(this,Ys,A(this,Ys)+t),it(A(this,is)<1||A(this,Ys)<=A(this,is)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${A(this,is)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:sn(A(this,ln)),offset:A(this,En),length:t,info:{bytesRead:A(this,Ys),dataLength:this.dataLength}})},$p=function(t,e,n){let s=Math.ceil(e/on)*on;return A(this,En)+s>A(this,ln).length&&(this.allowLoose&&n&&A(this,En)+e<=A(this,ln).length?s=e:it(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:sn(A(this,ln)),length:A(this,ln).length,offset:A(this,En)+s})),A(this,ln).slice(A(this,En),A(this,En)+s)};let uf=bh;function Wc(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function eh(r,...t){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(r.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${r.length}`)}function SA(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wc(r.outputLen),Wc(r.blockLen)}function Vo(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Jp(r,t){eh(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Cl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jp=r=>r instanceof Uint8Array,IA=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Pl=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),tr=(r,t)=>r<<32-t|r>>>t,kA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!kA)throw new Error("Non little-endian hardware is not supported");function RA(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Iu(r){if(typeof r=="string"&&(r=RA(r)),!jp(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function NA(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!jp(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}class nh{clone(){return this._cloneInto()}}function rh(r){const t=n=>r().update(Iu(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function CA(r=32){if(Cl&&typeof Cl.getRandomValues=="function")return Cl.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class Zp extends nh{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,SA(t);const n=Iu(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Vo(this),this.iHash.update(t),this}digestInto(t){Vo(this),eh(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yp=(r,t,e)=>new Zp(r,t).update(e).digest();Yp.create=(r,t)=>new Zp(r,t);function PA(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),c=n?4:0,f=n?0:4;r.setUint32(t+c,o,n),r.setUint32(t+f,a,n)}class Xp extends nh{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Pl(this.buffer)}update(t){Vo(this);const{view:e,buffer:n,blockLen:s}=this;t=Iu(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Pl(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Vo(this),Jp(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let y=o;y<s;y++)e[y]=0;PA(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Pl(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<f;y++)a.setUint32(4*y,h[y],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}}const TA=(r,t,e)=>r&t^~r&e,MA=(r,t,e)=>r&t^r&e^t&e,_A=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yr=new Uint32Array(64);class OA extends Xp{constructor(){super(64,32,8,!1),this.A=Zr[0]|0,this.B=Zr[1]|0,this.C=Zr[2]|0,this.D=Zr[3]|0,this.E=Zr[4]|0,this.F=Zr[5]|0,this.G=Zr[6]|0,this.H=Zr[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,e,n,s,i,o,a,c]}set(t,e,n,s,i,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let y=0;y<16;y++,e+=4)Yr[y]=t.getUint32(e,!1);for(let y=16;y<64;y++){const E=Yr[y-15],b=Yr[y-2],N=tr(E,7)^tr(E,18)^E>>>3,x=tr(b,17)^tr(b,19)^b>>>10;Yr[y]=x+Yr[y-7]+N+Yr[y-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:f,H:h}=this;for(let y=0;y<64;y++){const E=tr(a,6)^tr(a,11)^tr(a,25),b=h+E+TA(a,c,f)+_A[y]+Yr[y]|0,x=(tr(n,2)^tr(n,13)^tr(n,22))+MA(n,s,i)|0;h=f,f=c,c=a,a=o+b|0,o=i,i=s,s=n,n=b+x|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,s,i,o,a,c,f,h)}roundClean(){Yr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const tg=rh(()=>new OA),gc=BigInt(2**32-1),ff=BigInt(32);function eg(r,t=!1){return t?{h:Number(r&gc),l:Number(r>>ff&gc)}:{h:Number(r>>ff&gc)|0,l:Number(r&gc)|0}}function ng(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=eg(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}const LA=(r,t)=>BigInt(r>>>0)<<ff|BigInt(t>>>0),UA=(r,t,e)=>r>>>e,FA=(r,t,e)=>r<<32-e|t>>>e,DA=(r,t,e)=>r>>>e|t<<32-e,HA=(r,t,e)=>r<<32-e|t>>>e,GA=(r,t,e)=>r<<64-e|t>>>e-32,zA=(r,t,e)=>r>>>e-32|t<<64-e,KA=(r,t)=>t,VA=(r,t)=>r,rg=(r,t,e)=>r<<e|t>>>32-e,sg=(r,t,e)=>t<<e|r>>>32-e,ig=(r,t,e)=>t<<e-32|r>>>64-e,og=(r,t,e)=>r<<e-32|t>>>64-e;function qA(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const QA=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),WA=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,$A=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),JA=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,jA=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),ZA=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,St={fromBig:eg,split:ng,toBig:LA,shrSH:UA,shrSL:FA,rotrSH:DA,rotrSL:HA,rotrBH:GA,rotrBL:zA,rotr32H:KA,rotr32L:VA,rotlSH:rg,rotlSL:sg,rotlBH:ig,rotlBL:og,add:qA,add3L:QA,add3H:WA,add4L:$A,add4H:JA,add5H:ZA,add5L:jA},[YA,XA]=St.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Xr=new Uint32Array(80),ts=new Uint32Array(80);class tx extends Xp{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:f,El:h,Fh:y,Fl:E,Gh:b,Gl:N,Hh:x,Hl:S}=this;return[t,e,n,s,i,o,a,c,f,h,y,E,b,N,x,S]}set(t,e,n,s,i,o,a,c,f,h,y,E,b,N,x,S){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=h|0,this.Fh=y|0,this.Fl=E|0,this.Gh=b|0,this.Gl=N|0,this.Hh=x|0,this.Hl=S|0}process(t,e){for(let z=0;z<16;z++,e+=4)Xr[z]=t.getUint32(e),ts[z]=t.getUint32(e+=4);for(let z=16;z<80;z++){const rt=Xr[z-15]|0,K=ts[z-15]|0,Y=St.rotrSH(rt,K,1)^St.rotrSH(rt,K,8)^St.shrSH(rt,K,7),st=St.rotrSL(rt,K,1)^St.rotrSL(rt,K,8)^St.shrSL(rt,K,7),et=Xr[z-2]|0,U=ts[z-2]|0,O=St.rotrSH(et,U,19)^St.rotrBH(et,U,61)^St.shrSH(et,U,6),L=St.rotrSL(et,U,19)^St.rotrBL(et,U,61)^St.shrSL(et,U,6),G=St.add4L(st,L,ts[z-7],ts[z-16]),v=St.add4H(G,Y,O,Xr[z-7],Xr[z-16]);Xr[z]=v|0,ts[z]=G|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:f,Dl:h,Eh:y,El:E,Fh:b,Fl:N,Gh:x,Gl:S,Hh:_,Hl:V}=this;for(let z=0;z<80;z++){const rt=St.rotrSH(y,E,14)^St.rotrSH(y,E,18)^St.rotrBH(y,E,41),K=St.rotrSL(y,E,14)^St.rotrSL(y,E,18)^St.rotrBL(y,E,41),Y=y&b^~y&x,st=E&N^~E&S,et=St.add5L(V,K,st,XA[z],ts[z]),U=St.add5H(et,_,rt,Y,YA[z],Xr[z]),O=et|0,L=St.rotrSH(n,s,28)^St.rotrBH(n,s,34)^St.rotrBH(n,s,39),G=St.rotrSL(n,s,28)^St.rotrBL(n,s,34)^St.rotrBL(n,s,39),v=n&i^n&a^i&a,u=s&o^s&c^o&c;_=x|0,V=S|0,x=b|0,S=N|0,b=y|0,N=E|0,{h:y,l:E}=St.add(f|0,h|0,U|0,O|0),f=a|0,h=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const p=St.add3L(O,G,u);n=St.add3H(p,U,L,v),s=p|0}({h:n,l:s}=St.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=St.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=St.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:h}=St.add(this.Dh|0,this.Dl|0,f|0,h|0),{h:y,l:E}=St.add(this.Eh|0,this.El|0,y|0,E|0),{h:b,l:N}=St.add(this.Fh|0,this.Fl|0,b|0,N|0),{h:x,l:S}=St.add(this.Gh|0,this.Gl|0,x|0,S|0),{h:_,l:V}=St.add(this.Hh|0,this.Hl|0,_|0,V|0),this.set(n,s,i,o,a,c,f,h,y,E,b,N,x,S,_,V)}roundClean(){Xr.fill(0),ts.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ex=rh(()=>new tx);function nx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const Cd=nx();Cd.crypto||Cd.msCrypto;function rx(r){switch(r){case"sha256":return tg.create();case"sha512":return ex.create()}q(!1,"invalid hashing algorithm name","algorithm",r)}const[ag,cg,ug]=[[],[],[]],sx=BigInt(0),aa=BigInt(1),ix=BigInt(2),ox=BigInt(7),ax=BigInt(256),cx=BigInt(113);for(let r=0,t=aa,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],ag.push(2*(5*n+e)),cg.push((r+1)*(r+2)/2%64);let s=sx;for(let i=0;i<7;i++)t=(t<<aa^(t>>ox)*cx)%ax,t&ix&&(s^=aa<<(aa<<BigInt(i))-aa);ug.push(s)}const[ux,lx]=ng(ug,!0),Pd=(r,t,e)=>e>32?ig(r,t,e):rg(r,t,e),Td=(r,t,e)=>e>32?og(r,t,e):sg(r,t,e);function fx(r,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,f=e[c],h=e[c+1],y=Pd(f,h,1)^e[a],E=Td(f,h,1)^e[a+1];for(let b=0;b<50;b+=10)r[o+b]^=y,r[o+b+1]^=E}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=cg[o],c=Pd(s,i,a),f=Td(s,i,a),h=ag[o];s=r[h],i=r[h+1],r[h]=c,r[h+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}r[0]^=ux[n],r[1]^=lx[n]}e.fill(0)}class sh extends nh{constructor(t,e,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Wc(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=IA(this.state)}keccak(){fx(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Vo(this);const{blockLen:e,state:n}=this;t=Iu(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,(e&128)!==0&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Vo(this,!1),eh(t),this.finish();const e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Wc(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Jp(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new sh(e,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const hx=(r,t,e)=>rh(()=>new sh(t,r,e)),dx=hx(1,136,256/8);let lg=!1;const fg=function(r){return dx(r)};let hg=fg;function Te(r){const t=Rt(r,"data");return dt(hg(t))}Te._=fg;Te.lock=function(){lg=!0};Te.register=function(r){if(lg)throw new TypeError("keccak256 is locked");hg=r};Object.freeze(Te);const dg=function(r){return rx("sha256").update(r).digest()};let pg=dg,gg=!1;function ta(r){const t=Rt(r,"data");return dt(pg(t))}ta._=dg;ta.lock=function(){gg=!0};ta.register=function(r){if(gg)throw new Error("sha256 is locked");pg=r};Object.freeze(ta);Object.freeze(ta);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mg=BigInt(0),ku=BigInt(1),px=BigInt(2),Ru=r=>r instanceof Uint8Array,gx=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function qo(r){if(!Ru(r))throw new Error("Uint8Array expected");let t="";for(let e=0;e<r.length;e++)t+=gx[r[e]];return t}function yg(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function ih(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Qo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let n=0;n<e.length;n++){const s=n*2,i=r.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function fi(r){return ih(qo(r))}function oh(r){if(!Ru(r))throw new Error("Uint8Array expected");return ih(qo(Uint8Array.from(r).reverse()))}function Wo(r,t){return Qo(r.toString(16).padStart(t*2,"0"))}function ah(r,t){return Wo(r,t).reverse()}function mx(r){return Qo(yg(r))}function Gn(r,t,e){let n;if(typeof t=="string")try{n=Qo(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Ru(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function Ea(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!Ru(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}function yx(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function wx(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function bx(r){let t;for(t=0;r>mg;r>>=ku,t+=1);return t}function Ax(r,t){return r>>BigInt(t)&ku}const xx=(r,t,e)=>r|(e?ku:mg)<<BigInt(t),ch=r=>(px<<BigInt(r-1))-ku,Tl=r=>new Uint8Array(r),Md=r=>Uint8Array.from(r);function wg(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=Tl(r),s=Tl(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...y)=>e(s,n,...y),c=(y=Tl())=>{s=a(Md([0]),y),n=a(),y.length!==0&&(s=a(Md([1]),y),n=a())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const E=[];for(;y<t;){n=a();const b=n.slice();E.push(b),y+=n.length}return Ea(...E)};return(y,E)=>{o(),c(y);let b;for(;!(b=E(f()));)c();return o(),b}}const Ex={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Ya(r,t,e={}){const n=(s,i,o)=>{const a=Ex[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const vx=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Ax,bitLen:bx,bitMask:ch,bitSet:xx,bytesToHex:qo,bytesToNumberBE:fi,bytesToNumberLE:oh,concatBytes:Ea,createHmacDrbg:wg,ensureBytes:Gn,equalBytes:yx,hexToBytes:Qo,hexToNumber:ih,numberToBytesBE:Wo,numberToBytesLE:ah,numberToHexUnpadded:yg,numberToVarBytesBE:mx,utf8ToBytes:wx,validateObject:Ya},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Le=BigInt(0),de=BigInt(1),Os=BigInt(2),Bx=BigInt(3),hf=BigInt(4),_d=BigInt(5),Od=BigInt(8);BigInt(9);BigInt(16);function hn(r,t){const e=r%t;return e>=Le?e:t+e}function Sx(r,t,e){if(e<=Le||t<Le)throw new Error("Expected power/modulo > 0");if(e===de)return Le;let n=de;for(;t>Le;)t&de&&(n=n*r%e),r=r*r%e,t>>=de;return n}function In(r,t,e){let n=r;for(;t-- >Le;)n*=n,n%=e;return n}function df(r,t){if(r===Le||t<=Le)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=hn(r,t),n=t,s=Le,i=de;for(;e!==Le;){const a=n/e,c=n%e,f=s-i*a;n=e,e=c,s=i,i=f}if(n!==de)throw new Error("invert: does not exist");return hn(s,t)}function Ix(r){const t=(r-de)/Os;let e,n,s;for(e=r-de,n=0;e%Os===Le;e/=Os,n++);for(s=Os;s<r&&Sx(s,t,r)!==r-de;s++);if(n===1){const o=(r+de)/hf;return function(c,f){const h=c.pow(f,o);if(!c.eql(c.sqr(h),f))throw new Error("Cannot find square root");return h}}const i=(e+de)/Os;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,h=a.pow(a.mul(a.ONE,s),e),y=a.pow(c,i),E=a.pow(c,e);for(;!a.eql(E,a.ONE);){if(a.eql(E,a.ZERO))return a.ZERO;let b=1;for(let x=a.sqr(E);b<f&&!a.eql(x,a.ONE);b++)x=a.sqr(x);const N=a.pow(h,de<<BigInt(f-b-1));h=a.sqr(N),y=a.mul(y,N),E=a.mul(E,h),f=b}return y}}function kx(r){if(r%hf===Bx){const t=(r+de)/hf;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Od===_d){const t=(r-_d)/Od;return function(n,s){const i=n.mul(s,Os),o=n.pow(i,t),a=n.mul(s,o),c=n.mul(n.mul(a,Os),o),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),s))throw new Error("Cannot find square root");return f}}return Ix(r)}const Rx=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Nx(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Rx.reduce((n,s)=>(n[s]="function",n),t);return Ya(r,e)}function Cx(r,t,e){if(e<Le)throw new Error("Expected power > 0");if(e===Le)return r.ONE;if(e===de)return t;let n=r.ONE,s=t;for(;e>Le;)e&de&&(n=r.mul(n,s)),s=r.sqr(s),e>>=de;return n}function Px(r,t){const e=new Array(t.length),n=t.reduce((i,o,a)=>r.is0(o)?i:(e[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,a)=>r.is0(o)?i:(e[a]=r.mul(i,e[a]),r.mul(i,o)),s),e}function bg(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Tx(r,t,e=!1,n={}){if(r<=Le)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=bg(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=kx(r),a=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:ch(s),ZERO:Le,ONE:de,create:c=>hn(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Le<=c&&c<r},is0:c=>c===Le,isOdd:c=>(c&de)===de,neg:c=>hn(-c,r),eql:(c,f)=>c===f,sqr:c=>hn(c*c,r),add:(c,f)=>hn(c+f,r),sub:(c,f)=>hn(c-f,r),mul:(c,f)=>hn(c*f,r),pow:(c,f)=>Cx(a,c,f),div:(c,f)=>hn(c*df(f,r),r),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>df(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>Px(a,c),cmov:(c,f,h)=>h?f:c,toBytes:c=>e?ah(c,i):Wo(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return e?oh(c):fi(c)}});return Object.freeze(a)}function Ag(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function xg(r){const t=Ag(r);return t+Math.ceil(t/2)}function Mx(r,t,e=!1){const n=r.length,s=Ag(t),i=xg(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=e?fi(r):oh(r),a=hn(o,t-de)+de;return e?ah(a,s):Wo(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _x=BigInt(0),Ml=BigInt(1);function Ox(r,t){const e=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=r.ZERO,a=s;for(;i>_x;)i&Ml&&(o=o.add(a)),a=a.double(),i>>=Ml;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let f=s,h=f;for(let y=0;y<o;y++){h=f,c.push(h);for(let E=1;E<a;E++)h=h.add(f),c.push(h);f=h.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let f=r.ZERO,h=r.BASE;const y=BigInt(2**s-1),E=2**s,b=BigInt(s);for(let N=0;N<a;N++){const x=N*c;let S=Number(o&y);o>>=b,S>c&&(S-=E,o+=Ml);const _=x,V=x+Math.abs(S)-1,z=N%2!==0,rt=S<0;S===0?h=h.add(e(z,i[_])):f=f.add(e(rt,i[V]))}return{p:f,f:h}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let f=i.get(s);return f||(f=this.precomputeWindow(s,c),c!==1&&i.set(s,a(f))),this.wNAF(c,f,o)}}}function Eg(r){return Nx(r.Fp),Ya(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...bg(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Lx(r){const t=Eg(r);Ya(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Ux,hexToBytes:Fx}=vx,zs={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){const{Err:t}=zs;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Ux(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=zs,e=typeof r=="string"?Fx(r):r;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=zs._parseInt(e.subarray(2)),{d:o,l:a}=zs._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,e=f=>{const h=f.toString(16);return h.length&1?`0${h}`:h},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,o=s.length/2,a=e(i),c=e(o);return`30${e(o+i+4)}02${c}${s}02${a}${n}`}},Fr=BigInt(0),Mn=BigInt(1);BigInt(2);const Ld=BigInt(3);BigInt(4);function Dx(r){const t=Lx(r),{Fp:e}=t,n=t.toBytes||((N,x,S)=>{const _=x.toAffine();return Ea(Uint8Array.from([4]),e.toBytes(_.x),e.toBytes(_.y))}),s=t.fromBytes||(N=>{const x=N.subarray(1),S=e.fromBytes(x.subarray(0,e.BYTES)),_=e.fromBytes(x.subarray(e.BYTES,2*e.BYTES));return{x:S,y:_}});function i(N){const{a:x,b:S}=t,_=e.sqr(N),V=e.mul(_,N);return e.add(e.add(V,e.mul(N,x)),S)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(N){return typeof N=="bigint"&&Fr<N&&N<t.n}function a(N){if(!o(N))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(N){const{allowedPrivateKeyLengths:x,nByteLength:S,wrapPrivateKey:_,n:V}=t;if(x&&typeof N!="bigint"){if(N instanceof Uint8Array&&(N=qo(N)),typeof N!="string"||!x.includes(N.length))throw new Error("Invalid key");N=N.padStart(S*2,"0")}let z;try{z=typeof N=="bigint"?N:fi(Gn("private key",N,S))}catch{throw new Error(`private key must be ${S} bytes, hex or bigint, not ${typeof N}`)}return _&&(z=hn(z,V)),a(z),z}const f=new Map;function h(N){if(!(N instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(x,S,_){if(this.px=x,this.py=S,this.pz=_,x==null||!e.isValid(x))throw new Error("x required");if(S==null||!e.isValid(S))throw new Error("y required");if(_==null||!e.isValid(_))throw new Error("z required")}static fromAffine(x){const{x:S,y:_}=x||{};if(!x||!e.isValid(S)||!e.isValid(_))throw new Error("invalid affine point");if(x instanceof y)throw new Error("projective point not allowed");const V=z=>e.eql(z,e.ZERO);return V(S)&&V(_)?y.ZERO:new y(S,_,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const S=e.invertBatch(x.map(_=>_.pz));return x.map((_,V)=>_.toAffine(S[V])).map(y.fromAffine)}static fromHex(x){const S=y.fromAffine(s(Gn("pointHex",x)));return S.assertValidity(),S}static fromPrivateKey(x){return y.BASE.multiply(c(x))}_setWindowSize(x){this._WINDOW_SIZE=x,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:S}=this.toAffine();if(!e.isValid(x)||!e.isValid(S))throw new Error("bad point: x or y not FE");const _=e.sqr(S),V=i(x);if(!e.eql(_,V))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(e.isOdd)return!e.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){h(x);const{px:S,py:_,pz:V}=this,{px:z,py:rt,pz:K}=x,Y=e.eql(e.mul(S,K),e.mul(z,V)),st=e.eql(e.mul(_,K),e.mul(rt,V));return Y&&st}negate(){return new y(this.px,e.neg(this.py),this.pz)}double(){const{a:x,b:S}=t,_=e.mul(S,Ld),{px:V,py:z,pz:rt}=this;let K=e.ZERO,Y=e.ZERO,st=e.ZERO,et=e.mul(V,V),U=e.mul(z,z),O=e.mul(rt,rt),L=e.mul(V,z);return L=e.add(L,L),st=e.mul(V,rt),st=e.add(st,st),K=e.mul(x,st),Y=e.mul(_,O),Y=e.add(K,Y),K=e.sub(U,Y),Y=e.add(U,Y),Y=e.mul(K,Y),K=e.mul(L,K),st=e.mul(_,st),O=e.mul(x,O),L=e.sub(et,O),L=e.mul(x,L),L=e.add(L,st),st=e.add(et,et),et=e.add(st,et),et=e.add(et,O),et=e.mul(et,L),Y=e.add(Y,et),O=e.mul(z,rt),O=e.add(O,O),et=e.mul(O,L),K=e.sub(K,et),st=e.mul(O,U),st=e.add(st,st),st=e.add(st,st),new y(K,Y,st)}add(x){h(x);const{px:S,py:_,pz:V}=this,{px:z,py:rt,pz:K}=x;let Y=e.ZERO,st=e.ZERO,et=e.ZERO;const U=t.a,O=e.mul(t.b,Ld);let L=e.mul(S,z),G=e.mul(_,rt),v=e.mul(V,K),u=e.add(S,_),p=e.add(z,rt);u=e.mul(u,p),p=e.add(L,G),u=e.sub(u,p),p=e.add(S,V);let w=e.add(z,K);return p=e.mul(p,w),w=e.add(L,v),p=e.sub(p,w),w=e.add(_,V),Y=e.add(rt,K),w=e.mul(w,Y),Y=e.add(G,v),w=e.sub(w,Y),et=e.mul(U,p),Y=e.mul(O,v),et=e.add(Y,et),Y=e.sub(G,et),et=e.add(G,et),st=e.mul(Y,et),G=e.add(L,L),G=e.add(G,L),v=e.mul(U,v),p=e.mul(O,p),G=e.add(G,v),v=e.sub(L,v),v=e.mul(U,v),p=e.add(p,v),L=e.mul(G,p),st=e.add(st,L),L=e.mul(w,p),Y=e.mul(u,Y),Y=e.sub(Y,L),L=e.mul(u,G),et=e.mul(w,et),et=e.add(et,L),new y(Y,st,et)}subtract(x){return this.add(x.negate())}is0(){return this.equals(y.ZERO)}wNAF(x){return b.wNAFCached(this,f,x,S=>{const _=e.invertBatch(S.map(V=>V.pz));return S.map((V,z)=>V.toAffine(_[z])).map(y.fromAffine)})}multiplyUnsafe(x){const S=y.ZERO;if(x===Fr)return S;if(a(x),x===Mn)return this;const{endo:_}=t;if(!_)return b.unsafeLadder(this,x);let{k1neg:V,k1:z,k2neg:rt,k2:K}=_.splitScalar(x),Y=S,st=S,et=this;for(;z>Fr||K>Fr;)z&Mn&&(Y=Y.add(et)),K&Mn&&(st=st.add(et)),et=et.double(),z>>=Mn,K>>=Mn;return V&&(Y=Y.negate()),rt&&(st=st.negate()),st=new y(e.mul(st.px,_.beta),st.py,st.pz),Y.add(st)}multiply(x){a(x);let S=x,_,V;const{endo:z}=t;if(z){const{k1neg:rt,k1:K,k2neg:Y,k2:st}=z.splitScalar(S);let{p:et,f:U}=this.wNAF(K),{p:O,f:L}=this.wNAF(st);et=b.constTimeNegate(rt,et),O=b.constTimeNegate(Y,O),O=new y(e.mul(O.px,z.beta),O.py,O.pz),_=et.add(O),V=U.add(L)}else{const{p:rt,f:K}=this.wNAF(S);_=rt,V=K}return y.normalizeZ([_,V])[0]}multiplyAndAddUnsafe(x,S,_){const V=y.BASE,z=(K,Y)=>Y===Fr||Y===Mn||!K.equals(V)?K.multiplyUnsafe(Y):K.multiply(Y),rt=z(this,S).add(z(x,_));return rt.is0()?void 0:rt}toAffine(x){const{px:S,py:_,pz:V}=this,z=this.is0();x==null&&(x=z?e.ONE:e.inv(V));const rt=e.mul(S,x),K=e.mul(_,x),Y=e.mul(V,x);if(z)return{x:e.ZERO,y:e.ZERO};if(!e.eql(Y,e.ONE))throw new Error("invZ was invalid");return{x:rt,y:K}}isTorsionFree(){const{h:x,isTorsionFree:S}=t;if(x===Mn)return!0;if(S)return S(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:S}=t;return x===Mn?this:S?S(y,this):this.multiplyUnsafe(t.h)}toRawBytes(x=!0){return this.assertValidity(),n(y,this,x)}toHex(x=!0){return qo(this.toRawBytes(x))}}y.BASE=new y(t.Gx,t.Gy,e.ONE),y.ZERO=new y(e.ZERO,e.ONE,e.ZERO);const E=t.nBitLength,b=Ox(y,t.endo?Math.ceil(E/2):E);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Hx(r){const t=Eg(r);return Ya(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Gx(r){const t=Hx(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(p){return Fr<p&&p<e.ORDER}function a(p){return hn(p,n)}function c(p){return df(p,n)}const{ProjectivePoint:f,normPrivateKeyToScalar:h,weierstrassEquation:y,isWithinCurveOrder:E}=Dx({...t,toBytes(p,w,k){const C=w.toAffine(),F=e.toBytes(C.x),H=Ea;return k?H(Uint8Array.from([w.hasEvenY()?2:3]),F):H(Uint8Array.from([4]),F,e.toBytes(C.y))},fromBytes(p){const w=p.length,k=p[0],C=p.subarray(1);if(w===s&&(k===2||k===3)){const F=fi(C);if(!o(F))throw new Error("Point is not on curve");const H=y(F);let R=e.sqrt(H);const l=(R&Mn)===Mn;return(k&1)===1!==l&&(R=e.neg(R)),{x:F,y:R}}else if(w===i&&k===4){const F=e.fromBytes(C.subarray(0,e.BYTES)),H=e.fromBytes(C.subarray(e.BYTES,2*e.BYTES));return{x:F,y:H}}else throw new Error(`Point of length ${w} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),b=p=>qo(Wo(p,t.nByteLength));function N(p){const w=n>>Mn;return p>w}function x(p){return N(p)?a(-p):p}const S=(p,w,k)=>fi(p.slice(w,k));class _{constructor(w,k,C){this.r=w,this.s=k,this.recovery=C,this.assertValidity()}static fromCompact(w){const k=t.nByteLength;return w=Gn("compactSignature",w,k*2),new _(S(w,0,k),S(w,k,2*k))}static fromDER(w){const{r:k,s:C}=zs.toSig(Gn("DER",w));return new _(k,C)}assertValidity(){if(!E(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!E(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new _(this.r,this.s,w)}recoverPublicKey(w){const{r:k,s:C,recovery:F}=this,H=st(Gn("msgHash",w));if(F==null||![0,1,2,3].includes(F))throw new Error("recovery id invalid");const R=F===2||F===3?k+t.n:k;if(R>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=(F&1)===0?"02":"03",d=f.fromHex(l+b(R)),I=c(R),T=a(-H*I),$=a(C*I),nt=f.BASE.multiplyAndAddUnsafe(d,T,$);if(!nt)throw new Error("point at infinify");return nt.assertValidity(),nt}hasHighS(){return N(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Qo(this.toDERHex())}toDERHex(){return zs.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Qo(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}const V={isValidPrivateKey(p){try{return h(p),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const p=xg(t.n);return Mx(t.randomBytes(p),t.n)},precompute(p=8,w=f.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}};function z(p,w=!0){return f.fromPrivateKey(p).toRawBytes(w)}function rt(p){const w=p instanceof Uint8Array,k=typeof p=="string",C=(w||k)&&p.length;return w?C===s||C===i:k?C===2*s||C===2*i:p instanceof f}function K(p,w,k=!0){if(rt(p))throw new Error("first arg must be private key");if(!rt(w))throw new Error("second arg must be public key");return f.fromHex(w).multiply(h(p)).toRawBytes(k)}const Y=t.bits2int||function(p){const w=fi(p),k=p.length*8-t.nBitLength;return k>0?w>>BigInt(k):w},st=t.bits2int_modN||function(p){return a(Y(p))},et=ch(t.nBitLength);function U(p){if(typeof p!="bigint")throw new Error("bigint expected");if(!(Fr<=p&&p<et))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Wo(p,t.nByteLength)}function O(p,w,k=L){if(["recovered","canonical"].some(mt=>mt in k))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:F}=t;let{lowS:H,prehash:R,extraEntropy:l}=k;H==null&&(H=!0),p=Gn("msgHash",p),R&&(p=Gn("prehashed msgHash",C(p)));const d=st(p),I=h(w),T=[U(I),U(d)];if(l!=null){const mt=l===!0?F(e.BYTES):l;T.push(Gn("extraEntropy",mt))}const $=Ea(...T),nt=d;function ft(mt){const qt=Y(mt);if(!E(qt))return;const Tt=c(qt),Ut=f.BASE.multiply(qt).toAffine(),ce=a(Ut.x);if(ce===Fr)return;const Ot=a(Tt*a(nt+ce*I));if(Ot===Fr)return;let Qt=(Ut.x===ce?0:2)|Number(Ut.y&Mn),Ns=Ot;return H&&N(Ot)&&(Ns=x(Ot),Qt^=1),new _(ce,Ns,Qt)}return{seed:$,k2sig:ft}}const L={lowS:t.lowS,prehash:!1},G={lowS:t.lowS,prehash:!1};function v(p,w,k=L){const{seed:C,k2sig:F}=O(p,w,k),H=t;return wg(H.hash.outputLen,H.nByteLength,H.hmac)(C,F)}f.BASE._setWindowSize(8);function u(p,w,k,C=G){var Ut;const F=p;if(w=Gn("msgHash",w),k=Gn("publicKey",k),"strict"in C)throw new Error("options.strict was renamed to lowS");const{lowS:H,prehash:R}=C;let l,d;try{if(typeof F=="string"||F instanceof Uint8Array)try{l=_.fromDER(F)}catch(ce){if(!(ce instanceof zs.Err))throw ce;l=_.fromCompact(F)}else if(typeof F=="object"&&typeof F.r=="bigint"&&typeof F.s=="bigint"){const{r:ce,s:Ot}=F;l=new _(ce,Ot)}else throw new Error("PARSE");d=f.fromHex(k)}catch(ce){if(ce.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(H&&l.hasHighS())return!1;R&&(w=t.hash(w));const{r:I,s:T}=l,$=st(w),nt=c(T),ft=a($*nt),mt=a(I*nt),qt=(Ut=f.BASE.multiplyAndAddUnsafe(d,ft,mt))==null?void 0:Ut.toAffine();return qt?a(qt.x)===I:!1}return{CURVE:t,getPublicKey:z,getSharedSecret:K,sign:v,verify:u,ProjectivePoint:f,Signature:_,utils:V}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zx(r){return{hash:r,hmac:(t,...e)=>Yp(r,t,NA(...e)),randomBytes:CA}}function Kx(r,t){const e=n=>Gx({...r,...zx(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vg=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ud=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Vx=BigInt(1),pf=BigInt(2),Fd=(r,t)=>(r+t/pf)/t;function qx(r){const t=vg,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),f=r*r*r%t,h=f*f*r%t,y=In(h,e,t)*h%t,E=In(y,e,t)*h%t,b=In(E,pf,t)*f%t,N=In(b,s,t)*b%t,x=In(N,i,t)*N%t,S=In(x,a,t)*x%t,_=In(S,c,t)*S%t,V=In(_,a,t)*x%t,z=In(V,e,t)*h%t,rt=In(z,o,t)*N%t,K=In(rt,n,t)*f%t,Y=In(K,pf,t);if(!gf.eql(gf.sqr(Y),r))throw new Error("Cannot find square root");return Y}const gf=Tx(vg,void 0,void 0,{sqrt:qx}),es=Kx({a:BigInt(0),b:BigInt(7),Fp:gf,n:Ud,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Ud,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Vx*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=Fd(i*r,t),c=Fd(-n*r,t);let f=hn(r-a*e-c*s,t),h=hn(-a*n-c*i,t);const y=f>o,E=h>o;if(y&&(f=t-f),E&&(h=t-h),f>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:y,k1:f,k2neg:E,k2:h}}}},tg);BigInt(0);es.ProjectivePoint;const va="0x0000000000000000000000000000000000000000",Dd="0x0000000000000000000000000000000000000000000000000000000000000000",Hd=BigInt(0),Gd=BigInt(1),zd=BigInt(2),Kd=BigInt(27),Vd=BigInt(28),mc=BigInt(35),Ni={};function qd(r){return Kr(Me(r),32)}var so,io,oo,ti;const Hn=class Hn{constructor(t,e,n,s){X(this,so);X(this,io);X(this,oo);X(this,ti);ja(t,Ni,"Signature"),M(this,so,e),M(this,io,n),M(this,oo,s),M(this,ti,null)}get r(){return A(this,so)}set r(t){q(Qi(t)===32,"invalid r","value",t),M(this,so,dt(t))}get s(){return A(this,io)}set s(t){q(Qi(t)===32,"invalid s","value",t);const e=dt(t);q(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),M(this,io,e)}get v(){return A(this,oo)}set v(t){const e=Nt(t,"value");q(e===27||e===28,"invalid v","v",t),M(this,oo,e)}get networkV(){return A(this,ti)}get legacyChainId(){const t=this.networkV;return t==null?null:Hn.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=Rt(this.s);return this.yParity&&(t[0]|=128),dt(t)}get compactSerialized(){return ae([this.r,this.yParityAndS])}get serialized(){return ae([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Hn(Ni,this.r,this.s,this.v);return this.networkV&&M(t,ti,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=gt(t,"v");return e==Kd||e==Vd?Hd:(q(e>=mc,"invalid EIP-155 v","v",t),(e-mc)/zd)}static getChainIdV(t,e){return gt(t)*zd+BigInt(35+e-27)}static getNormalizedV(t){const e=gt(t);return e===Hd||e===Kd?27:e===Gd||e===Vd?28:(q(e>=mc,"invalid v","v",t),e&Gd?27:28)}static from(t){function e(f,h){q(f,h,"signature",t)}if(t==null)return new Hn(Ni,Dd,Dd,27);if(typeof t=="string"){const f=Rt(t,"signature");if(f.length===64){const h=dt(f.slice(0,32)),y=f.slice(32,64),E=y[0]&128?28:27;return y[0]&=127,new Hn(Ni,h,dt(y),E)}if(f.length===65){const h=dt(f.slice(0,32)),y=f.slice(32,64);e((y[0]&128)===0,"non-canonical s");const E=Hn.getNormalizedV(f[64]);return new Hn(Ni,h,dt(y),E)}e(!1,"invalid raw signature length")}if(t instanceof Hn)return t.clone();const n=t.r;e(n!=null,"missing r");const s=qd(n),i=function(f,h){if(f!=null)return qd(f);if(h!=null){e(Vt(h,32),"invalid yParityAndS");const y=Rt(h);return y[0]&=127,dt(y)}e(!1,"missing s")}(t.s,t.yParityAndS);e((Rt(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(f,h,y){if(f!=null){const E=gt(f);return{networkV:E>=mc?E:void 0,v:Hn.getNormalizedV(E)}}if(h!=null)return e(Vt(h,32),"invalid yParityAndS"),{v:Rt(h)[0]&128?28:27};if(y!=null){switch(Nt(y,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new Hn(Ni,s,i,a);return o&&M(c,ti,o),e(t.yParity==null||Nt(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};so=new WeakMap,io=new WeakMap,oo=new WeakMap,ti=new WeakMap;let gn=Hn;var Rr;const Ls=class Ls{constructor(t){X(this,Rr);q(Qi(t)===32,"invalid private key","privateKey","[REDACTED]"),M(this,Rr,dt(t))}get privateKey(){return A(this,Rr)}get publicKey(){return Ls.computePublicKey(A(this,Rr))}get compressedPublicKey(){return Ls.computePublicKey(A(this,Rr),!0)}sign(t){q(Qi(t)===32,"invalid digest length","digest",t);const e=es.sign(sn(t),sn(A(this,Rr)),{lowS:!0});return gn.from({r:Bs(e.r,32),s:Bs(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=Ls.computePublicKey(t);return dt(es.getSharedSecret(sn(A(this,Rr)),Rt(e),!1))}static computePublicKey(t,e){let n=Rt(t,"key");if(n.length===32){const i=es.getPublicKey(n,!!e);return dt(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=es.ProjectivePoint.fromHex(n);return dt(s.toRawBytes(e))}static recoverPublicKey(t,e){q(Qi(t)===32,"invalid digest length","digest",t);const n=gn.from(e);let s=es.Signature.fromCompact(sn(ae([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(sn(t));return q(i!=null,"invalid signature for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,n){const s=es.ProjectivePoint.fromHex(Ls.computePublicKey(t).substring(2)),i=es.ProjectivePoint.fromHex(Ls.computePublicKey(e).substring(2));return"0x"+s.add(i).toHex(!!n)}};Rr=new WeakMap;let Ba=Ls;const Qx=BigInt(0),Wx=BigInt(36);function Qd(r){r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const n=Rt(Te(e));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(n[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const uh={};for(let r=0;r<10;r++)uh[String(r)]=String(r);for(let r=0;r<26;r++)uh[String.fromCharCode(65+r)]=String(10+r);const Wd=15;function $x(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(n=>uh[n]).join("");for(;t.length>=Wd;){let n=t.substring(0,Wd);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const Jx=function(){const r={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];r[e]=BigInt(t)}return r}();function jx(r){r=r.toLowerCase();let t=Qx;for(let e=0;e<r.length;e++)t=t*Wx+Jx[r[e]];return t}function Dt(r){if(q(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const t=Qd(r);return q(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===r,"bad address checksum","address",r),t}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){q(r.substring(2,4)===$x(r),"bad icap checksum","address",r);let t=jx(r.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Qd("0x"+t)}q(!1,"invalid address","address",r)}function Zx(r){const t=Dt(r.from);let n=gt(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,Dt(oe(Te(Is([t,n])),12))}function Bg(r){return r&&typeof r.getAddress=="function"}async function _l(r,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(it(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),q(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),Dt(e)}function an(r,t){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?Dt(r):(it(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),_l(r,t.resolveName(r)));if(Bg(r))return _l(r,r.getAddress());if(r&&typeof r.then=="function")return _l(r,r);q(!1,"unsupported addressable value","target",r)}const xr={};function pt(r,t){let e=!1;return t<0&&(e=!0,t*=-1),new Xe(xr,`${e?"":"u"}int${t}`,r,{signed:e,width:t})}function Lt(r,t){return new Xe(xr,`bytes${t||""}`,r,{size:t})}const $d=Symbol.for("_ethers_typed");var ei;const Er=class Er{constructor(t,e,n,s){W(this,"type");W(this,"value");X(this,ei);W(this,"_typedSymbol");s==null&&(s=null),ja(xr,t,"Typed"),bt(this,{_typedSymbol:$d,type:e,value:n}),M(this,ei,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return A(this,ei)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return A(this,ei)===!0?-1:A(this,ei)===!1?this.value.length:null}static from(t,e){return new Er(xr,t,e)}static uint8(t){return pt(t,8)}static uint16(t){return pt(t,16)}static uint24(t){return pt(t,24)}static uint32(t){return pt(t,32)}static uint40(t){return pt(t,40)}static uint48(t){return pt(t,48)}static uint56(t){return pt(t,56)}static uint64(t){return pt(t,64)}static uint72(t){return pt(t,72)}static uint80(t){return pt(t,80)}static uint88(t){return pt(t,88)}static uint96(t){return pt(t,96)}static uint104(t){return pt(t,104)}static uint112(t){return pt(t,112)}static uint120(t){return pt(t,120)}static uint128(t){return pt(t,128)}static uint136(t){return pt(t,136)}static uint144(t){return pt(t,144)}static uint152(t){return pt(t,152)}static uint160(t){return pt(t,160)}static uint168(t){return pt(t,168)}static uint176(t){return pt(t,176)}static uint184(t){return pt(t,184)}static uint192(t){return pt(t,192)}static uint200(t){return pt(t,200)}static uint208(t){return pt(t,208)}static uint216(t){return pt(t,216)}static uint224(t){return pt(t,224)}static uint232(t){return pt(t,232)}static uint240(t){return pt(t,240)}static uint248(t){return pt(t,248)}static uint256(t){return pt(t,256)}static uint(t){return pt(t,256)}static int8(t){return pt(t,-8)}static int16(t){return pt(t,-16)}static int24(t){return pt(t,-24)}static int32(t){return pt(t,-32)}static int40(t){return pt(t,-40)}static int48(t){return pt(t,-48)}static int56(t){return pt(t,-56)}static int64(t){return pt(t,-64)}static int72(t){return pt(t,-72)}static int80(t){return pt(t,-80)}static int88(t){return pt(t,-88)}static int96(t){return pt(t,-96)}static int104(t){return pt(t,-104)}static int112(t){return pt(t,-112)}static int120(t){return pt(t,-120)}static int128(t){return pt(t,-128)}static int136(t){return pt(t,-136)}static int144(t){return pt(t,-144)}static int152(t){return pt(t,-152)}static int160(t){return pt(t,-160)}static int168(t){return pt(t,-168)}static int176(t){return pt(t,-176)}static int184(t){return pt(t,-184)}static int192(t){return pt(t,-192)}static int200(t){return pt(t,-200)}static int208(t){return pt(t,-208)}static int216(t){return pt(t,-216)}static int224(t){return pt(t,-224)}static int232(t){return pt(t,-232)}static int240(t){return pt(t,-240)}static int248(t){return pt(t,-248)}static int256(t){return pt(t,-256)}static int(t){return pt(t,-256)}static bytes1(t){return Lt(t,1)}static bytes2(t){return Lt(t,2)}static bytes3(t){return Lt(t,3)}static bytes4(t){return Lt(t,4)}static bytes5(t){return Lt(t,5)}static bytes6(t){return Lt(t,6)}static bytes7(t){return Lt(t,7)}static bytes8(t){return Lt(t,8)}static bytes9(t){return Lt(t,9)}static bytes10(t){return Lt(t,10)}static bytes11(t){return Lt(t,11)}static bytes12(t){return Lt(t,12)}static bytes13(t){return Lt(t,13)}static bytes14(t){return Lt(t,14)}static bytes15(t){return Lt(t,15)}static bytes16(t){return Lt(t,16)}static bytes17(t){return Lt(t,17)}static bytes18(t){return Lt(t,18)}static bytes19(t){return Lt(t,19)}static bytes20(t){return Lt(t,20)}static bytes21(t){return Lt(t,21)}static bytes22(t){return Lt(t,22)}static bytes23(t){return Lt(t,23)}static bytes24(t){return Lt(t,24)}static bytes25(t){return Lt(t,25)}static bytes26(t){return Lt(t,26)}static bytes27(t){return Lt(t,27)}static bytes28(t){return Lt(t,28)}static bytes29(t){return Lt(t,29)}static bytes30(t){return Lt(t,30)}static bytes31(t){return Lt(t,31)}static bytes32(t){return Lt(t,32)}static address(t){return new Er(xr,"address",t)}static bool(t){return new Er(xr,"bool",!!t)}static bytes(t){return new Er(xr,"bytes",t)}static string(t){return new Er(xr,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new Er(xr,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===$d}static dereference(t,e){if(Er.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};ei=new WeakMap;let Xe=Er;class Yx extends qr{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=Xe.dereference(e,"string");try{n=Dt(n)}catch(s){return this._throwError(s.message,e)}return t.writeValue(n)}decode(t){return Dt(Bs(t.readValue(),20))}}class Xx extends qr{constructor(e){super(e.name,e.type,"_",e.dynamic);W(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function Sg(r,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(f=>{const h=f.localName;return it(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:e}),it(!c[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:e}),c[h]=!0,e[h]})}else q(!1,"invalid tuple value","tuple",e);q(t.length===n.length,"types/value length mismatch","tuple",e);let s=new cf,i=new cf,o=[];t.forEach((c,f)=>{let h=n[f];if(c.dynamic){let y=i.length;c.encode(i,h);let E=s.writeUpdatableValue();o.push(b=>{E(b+y)})}else c.encode(s,h)}),o.forEach(c=>{c(s.length)});let a=r.appendWriter(s);return a+=r.appendWriter(i),a}function Ig(r,t){let e=[],n=[],s=r.subReader(0);return t.forEach(i=>{let o=null;if(i.dynamic){let a=r.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(f){if(ze(f,"BUFFER_OVERRUN"))throw f;o=f,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(r)}catch(a){if(ze(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");e.push(o),n.push(i.localName||null)}),Ko.fromItems(e,n)}class tE extends qr{constructor(e,n,s){const i=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",i,s,o);W(this,"coder");W(this,"length");bt(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(e);return n}encode(e,n){const s=Xe.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,e.writeValue(s.length)),Op(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Sg(e,o,s)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),it(n*on<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*on,length:e.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new Xx(this.coder));return Ig(e,s)}}class eE extends qr{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=Xe.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class kg extends qr{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=sn(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class nE extends kg{constructor(t){super("bytes",t)}decode(t){return dt(super.decode(t))}}class rE extends qr{constructor(e,n){let s="bytes"+String(e);super(s,s,n,!1);W(this,"size");bt(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let s=sn(Xe.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(s)}decode(e){return dt(e.readBytes(this.size))}}const sE=new Uint8Array([]);class iE extends qr{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(sE)}decode(t){return t.readBytes(0),null}}const oE=BigInt(0),aE=BigInt(1),cE=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class uE extends qr{constructor(e,n,s){const i=(n?"int":"uint")+e*8;super(i,i,s,!1);W(this,"size");W(this,"signed");bt(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let s=gt(Xe.dereference(n,this.type)),i=Gs(cE,on*8);if(this.signed){let o=Gs(i,this.size*8-1);(s>o||s<-(o+aE))&&this._throwError("value out-of-bounds",n),s=Fp(s,8*on)}else(s<oE||s>Gs(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(s)}decode(e){let n=Gs(e.readValue(),this.size*8);return this.signed&&(n=qc(n,this.size*8)),n}}class lE extends kg{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Gr(Xe.dereference(e,"string")))}decode(t){return Qc(super.decode(t))}}class yc extends qr{constructor(e,n){let s=!1;const i=[];e.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,s);W(this,"coders");bt(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,n){const s=Xe.dereference(n,"tuple");return Sg(e,this.coders,s)}decode(e){return Ig(e,this.coders)}}function Ol(r,t){return{address:Dt(r),storageKeys:t.map((e,n)=>(q(Vt(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function Ei(r){if(Array.isArray(r))return r.map((e,n)=>Array.isArray(e)?(q(e.length===2,"invalid slot set",`value[${n}]`,e),Ol(e[0],e[1])):(q(e!=null&&typeof e=="object","invalid address-slot set","value",r),Ol(e.address,e.storageKeys)));q(r!=null&&typeof r=="object","invalid access list","value",r);const t=Object.keys(r).map(e=>{const n=r[e].reduce((s,i)=>(s[i]=!0,s),{});return Ol(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function Rg(r){return{address:Dt(r.address),nonce:gt(r.nonce!=null?r.nonce:0),chainId:gt(r.chainId!=null?r.chainId:0),signature:gn.from(r.signature)}}function fE(r){let t;return typeof r=="string"?t=Ba.computePublicKey(r,!1):t=r.publicKey,Dt(Te("0x"+t.substring(4)).substring(26))}function hE(r,t){return fE(Ba.recoverPublicKey(r,t))}const Oe=BigInt(0),dE=BigInt(2),pE=BigInt(27),gE=BigInt(28),mE=BigInt(35),yE=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ll=4096*32;function wE(r){return{blobToKzgCommitment:n=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return Rt(r.blobToKzgCommitment(dt(n)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return Rt(r.blobToKzgCommitment(n));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return Rt(r.blobToKZGCommitment(dt(n)));q(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(n,s)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return Rt(r.computeBlobProof(dt(n),dt(s)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(n,s);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return Rt(r.computeBlobKZGProof(dt(n),dt(s)));q(!1,"unsupported KZG library","kzg",r)}}}function Jd(r,t){let e=r.toString(16);for(;e.length<2;)e="0"+e;return e+=ta(t).substring(4),"0x"+e}function ea(r){return r==="0x"?null:Dt(r)}function Nu(r,t){try{return Ei(r)}catch(e){q(!1,e.message,t,r)}}function bE(r,t){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const e=[];for(let n=0;n<r.length;n++){const s=r[n];if(!Array.isArray(s))throw new Error(`authorization[${n}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!s[1])throw new Error(`authorization[${n}]: null address`);e.push({address:ea(s[1]),nonce:zt(s[2],"nonce"),chainId:zt(s[0],"chainId"),signature:gn.from({yParity:vi(s[3],"yParity"),r:Kr(s[4],32),s:Kr(s[5],32)})})}return e}catch(e){q(!1,e.message,t,r)}}function vi(r,t){return r==="0x"?0:Nt(r,t)}function zt(r,t){if(r==="0x")return Oe;const e=gt(r,t);return q(e<=yE,"value exceeds uint size",t,e),e}function _t(r,t){const e=gt(r,"value"),n=Me(e);return q(n.length<=32,"value too large",`tx.${t}`,e),n}function Cu(r){return Ei(r).map(t=>[t.address,t.storageKeys])}function AE(r){return r.map(t=>[_t(t.chainId,"chainId"),t.address,_t(t.nonce,"nonce"),_t(t.signature.yParity,"yParity"),Me(t.signature.r),Me(t.signature.s)])}function xE(r,t){q(Array.isArray(r),`invalid ${t}`,"value",r);for(let e=0;e<r.length;e++)q(Vt(r[e],32),"invalid ${ param } hash",`value[${e}]`,r[e]);return r}function EE(r){const t=Za(r);q(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",r);const e={type:0,nonce:vi(t[0],"nonce"),gasPrice:zt(t[1],"gasPrice"),gasLimit:zt(t[2],"gasLimit"),to:ea(t[3]),value:zt(t[4],"value"),data:dt(t[5]),chainId:Oe};if(t.length===6)return e;const n=zt(t[6],"v"),s=zt(t[7],"r"),i=zt(t[8],"s");if(s===Oe&&i===Oe)e.chainId=n;else{let o=(n-mE)/dE;o<Oe&&(o=Oe),e.chainId=o,q(o!==Oe||n===pE||n===gE,"non-canonical legacy v","v",t[6]),e.signature=gn.from({r:Kr(t[7],32),s:Kr(t[8],32),v:n})}return e}function vE(r,t){const e=[_t(r.nonce,"nonce"),_t(r.gasPrice||0,"gasPrice"),_t(r.gasLimit,"gasLimit"),r.to||"0x",_t(r.value,"value"),r.data];let n=Oe;if(r.chainId!=Oe)n=gt(r.chainId,"tx.chainId"),q(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(r.signature){const i=r.signature.legacyChainId;i!=null&&(n=i)}if(!t)return n!==Oe&&(e.push(Me(n)),e.push("0x"),e.push("0x")),Is(e);let s=BigInt(27+t.yParity);return n!==Oe?s=gn.getChainIdV(n,t.v):BigInt(t.v)!==s&&q(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(Me(s)),e.push(Me(t.r)),e.push(Me(t.s)),Is(e)}function Pu(r,t){let e;try{if(e=vi(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{q(!1,"invalid yParity","yParity",t[0])}const n=Kr(t[1],32),s=Kr(t[2],32),i=gn.from({r:n,s,yParity:e});r.signature=i}function BE(r){const t=Za(Rt(r).slice(1));q(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",dt(r));const e={type:2,chainId:zt(t[0],"chainId"),nonce:vi(t[1],"nonce"),maxPriorityFeePerGas:zt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:zt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:zt(t[4],"gasLimit"),to:ea(t[5]),value:zt(t[6],"value"),data:dt(t[7]),accessList:Nu(t[8],"accessList")};return t.length===9||Pu(e,t.slice(9)),e}function SE(r,t){const e=[_t(r.chainId,"chainId"),_t(r.nonce,"nonce"),_t(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_t(r.maxFeePerGas||0,"maxFeePerGas"),_t(r.gasLimit,"gasLimit"),r.to||"0x",_t(r.value,"value"),r.data,Cu(r.accessList||[])];return t&&(e.push(_t(t.yParity,"yParity")),e.push(Me(t.r)),e.push(Me(t.s))),ae(["0x02",Is(e)])}function IE(r){const t=Za(Rt(r).slice(1));q(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",dt(r));const e={type:1,chainId:zt(t[0],"chainId"),nonce:vi(t[1],"nonce"),gasPrice:zt(t[2],"gasPrice"),gasLimit:zt(t[3],"gasLimit"),to:ea(t[4]),value:zt(t[5],"value"),data:dt(t[6]),accessList:Nu(t[7],"accessList")};return t.length===8||Pu(e,t.slice(8)),e}function kE(r,t){const e=[_t(r.chainId,"chainId"),_t(r.nonce,"nonce"),_t(r.gasPrice||0,"gasPrice"),_t(r.gasLimit,"gasLimit"),r.to||"0x",_t(r.value,"value"),r.data,Cu(r.accessList||[])];return t&&(e.push(_t(t.yParity,"recoveryParam")),e.push(Me(t.r)),e.push(Me(t.s))),ae(["0x01",Is(e)])}function RE(r){let t=Za(Rt(r).slice(1)),e="3",n=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const i=t[1],o=t[2],a=t[3];q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),q(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),q(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let c=0;c<t[1].length;c++)n.push({data:i[c],commitment:o[c],proof:a[c]});t=t[0]}q(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",dt(r));const s={type:3,chainId:zt(t[0],"chainId"),nonce:vi(t[1],"nonce"),maxPriorityFeePerGas:zt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:zt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:zt(t[4],"gasLimit"),to:ea(t[5]),value:zt(t[6],"value"),data:dt(t[7]),accessList:Nu(t[8],"accessList"),maxFeePerBlobGas:zt(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(s.blobs=n),q(s.to!=null,`invalid address for transaction type: ${e}`,"data",r),q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let i=0;i<s.blobVersionedHashes.length;i++)q(Vt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",r);return t.length===11||Pu(s,t.slice(11)),s}function NE(r,t,e){const n=[_t(r.chainId,"chainId"),_t(r.nonce,"nonce"),_t(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_t(r.maxFeePerGas||0,"maxFeePerGas"),_t(r.gasLimit,"gasLimit"),r.to||va,_t(r.value,"value"),r.data,Cu(r.accessList||[]),_t(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),xE(r.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(_t(t.yParity,"yParity")),n.push(Me(t.r)),n.push(Me(t.s)),e)?ae(["0x03",Is([n,e.map(s=>s.data),e.map(s=>s.commitment),e.map(s=>s.proof)])]):ae(["0x03",Is(n)])}function CE(r){const t=Za(Rt(r).slice(1));q(Array.isArray(t)&&(t.length===10||t.length===13),"invalid field count for transaction type: 4","data",dt(r));const e={type:4,chainId:zt(t[0],"chainId"),nonce:vi(t[1],"nonce"),maxPriorityFeePerGas:zt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:zt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:zt(t[4],"gasLimit"),to:ea(t[5]),value:zt(t[6],"value"),data:dt(t[7]),accessList:Nu(t[8],"accessList"),authorizationList:bE(t[9],"authorizationList")};return t.length===10||Pu(e,t.slice(10)),e}function PE(r,t){const e=[_t(r.chainId,"chainId"),_t(r.nonce,"nonce"),_t(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_t(r.maxFeePerGas||0,"maxFeePerGas"),_t(r.gasLimit,"gasLimit"),r.to||"0x",_t(r.value,"value"),r.data,Cu(r.accessList||[]),AE(r.authorizationList||[])];return t&&(e.push(_t(t.yParity,"yParity")),e.push(Me(t.r)),e.push(Me(t.s))),ae(["0x04",Is(e)])}var qn,ao,co,uo,lo,fo,ho,po,go,mo,yo,wo,ni,os,sr,as,bo,Ao,Bc;const nr=class nr{constructor(){X(this,Ao);X(this,qn);X(this,ao);X(this,co);X(this,uo);X(this,lo);X(this,fo);X(this,ho);X(this,po);X(this,go);X(this,mo);X(this,yo);X(this,wo);X(this,ni);X(this,os);X(this,sr);X(this,as);X(this,bo);M(this,qn,null),M(this,ao,null),M(this,uo,0),M(this,lo,Oe),M(this,fo,null),M(this,ho,null),M(this,po,null),M(this,co,"0x"),M(this,go,Oe),M(this,mo,Oe),M(this,yo,null),M(this,wo,null),M(this,ni,null),M(this,os,null),M(this,sr,null),M(this,as,null),M(this,bo,null)}get type(){return A(this,qn)}set type(t){switch(t){case null:M(this,qn,null);break;case 0:case"legacy":M(this,qn,0);break;case 1:case"berlin":case"eip-2930":M(this,qn,1);break;case 2:case"london":case"eip-1559":M(this,qn,2);break;case 3:case"cancun":case"eip-4844":M(this,qn,3);break;case 4:case"pectra":case"eip-7702":M(this,qn,4);break;default:q(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=A(this,ao);return t==null&&this.type===3?va:t}set to(t){M(this,ao,t==null?null:Dt(t))}get nonce(){return A(this,uo)}set nonce(t){M(this,uo,Nt(t,"value"))}get gasLimit(){return A(this,lo)}set gasLimit(t){M(this,lo,gt(t))}get gasPrice(){const t=A(this,fo);return t==null&&(this.type===0||this.type===1)?Oe:t}set gasPrice(t){M(this,fo,t==null?null:gt(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=A(this,ho);return t??(this.type===2||this.type===3?Oe:null)}set maxPriorityFeePerGas(t){M(this,ho,t==null?null:gt(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=A(this,po);return t??(this.type===2||this.type===3?Oe:null)}set maxFeePerGas(t){M(this,po,t==null?null:gt(t,"maxFeePerGas"))}get data(){return A(this,co)}set data(t){M(this,co,dt(t))}get value(){return A(this,go)}set value(t){M(this,go,gt(t,"value"))}get chainId(){return A(this,mo)}set chainId(t){M(this,mo,gt(t))}get signature(){return A(this,yo)||null}set signature(t){M(this,yo,t==null?null:gn.from(t))}get accessList(){const t=A(this,wo)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){M(this,wo,t==null?null:Ei(t))}get authorizationList(){const t=A(this,bo)||null;return t==null&&this.type===4?[]:t}set authorizationList(t){M(this,bo,t==null?null:t.map(e=>Rg(e)))}get maxFeePerBlobGas(){const t=A(this,ni);return t==null&&this.type===3?Oe:t}set maxFeePerBlobGas(t){M(this,ni,t==null?null:gt(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=A(this,os);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){q(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)q(Vt(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}M(this,os,t)}get blobs(){return A(this,as)==null?null:A(this,as).map(t=>Object.assign({},t))}set blobs(t){if(t==null){M(this,as,null);return}const e=[],n=[];for(let s=0;s<t.length;s++){const i=t[s];if(th(i)){it(A(this,sr),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Rt(i);if(q(o.length<=Ll,"blob is too large",`blobs[${s}]`,i),o.length!==Ll){const f=new Uint8Array(Ll);f.set(o),o=f}const a=A(this,sr).blobToKzgCommitment(o),c=dt(A(this,sr).computeBlobKzgProof(o,a));e.push({data:dt(o),commitment:dt(a),proof:c}),n.push(Jd(1,a))}else{const o=dt(i.commitment);e.push({data:dt(i.data),commitment:o,proof:dt(i.proof)}),n.push(Jd(1,o))}}M(this,as,e),M(this,os,n)}get kzg(){return A(this,sr)}set kzg(t){t==null?M(this,sr,null):M(this,sr,wE(t))}get hash(){return this.signature==null?null:Te(at(this,Ao,Bc).call(this,!0,!1))}get unsignedHash(){return Te(this.unsignedSerialized)}get from(){return this.signature==null?null:hE(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Ba.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return at(this,Ao,Bc).call(this,!0,!0)}get unsignedSerialized(){return at(this,Ao,Bc).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=A(this,ni)!=null||A(this,os);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&it(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),it(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),it(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):e?i.push(2):t?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return nr.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new nr;if(typeof t=="string"){const n=Rt(t);if(n[0]>=127)return nr.from(EE(n));switch(n[0]){case 1:return nr.from(IE(n));case 2:return nr.from(BE(n));case 3:return nr.from(RE(n));case 4:return nr.from(CE(n))}it(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new nr;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=gn.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.authorizationList!=null&&(e.authorizationList=t.authorizationList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(q(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),q(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(q(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),q(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};qn=new WeakMap,ao=new WeakMap,co=new WeakMap,uo=new WeakMap,lo=new WeakMap,fo=new WeakMap,ho=new WeakMap,po=new WeakMap,go=new WeakMap,mo=new WeakMap,yo=new WeakMap,wo=new WeakMap,ni=new WeakMap,os=new WeakMap,sr=new WeakMap,as=new WeakMap,bo=new WeakMap,Ao=new WeakSet,Bc=function(t,e){it(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=t?this.signature:null;switch(this.inferType()){case 0:return vE(this,n);case 1:return kE(this,n);case 2:return SE(this,n);case 3:return NE(this,n,e?this.blobs:null);case 4:return PE(this,n)}it(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let $c=nr;function pi(r){return Te(Gr(r))}var TE="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";const jd=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Zd=4;function ME(r){let t=0;function e(){return r[t++]<<8|r[t++]}let n=e(),s=1,i=[0,1];for(let K=1;K<n;K++)i.push(s+=e());let o=e(),a=t;t+=o;let c=0,f=0;function h(){return c==0&&(f=f<<8|r[t++],c=8),f>>--c&1}const y=31,E=2**y,b=E>>>1,N=b>>1,x=E-1;let S=0;for(let K=0;K<y;K++)S=S<<1|h();let _=[],V=0,z=E;for(;;){let K=Math.floor(((S-V+1)*s-1)/z),Y=0,st=n;for(;st-Y>1;){let O=Y+st>>>1;K<i[O]?st=O:Y=O}if(Y==0)break;_.push(Y);let et=V+Math.floor(z*i[Y]/s),U=V+Math.floor(z*i[Y+1]/s)-1;for(;((et^U)&b)==0;)S=S<<1&x|h(),et=et<<1&x,U=U<<1&x|1;for(;et&~U&N;)S=S&b|S<<1&x>>>1|h(),et=et<<1^b,U=(U^b)<<1|b|1;V=et,z=1+U-et}let rt=n-4;return _.map(K=>{switch(K-rt){case 3:return rt+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return rt+256+(r[a++]<<8|r[a++]);case 1:return rt+r[a++];default:return K-1}})}function _E(r){let t=0;return()=>r[t++]}function Ng(r){return _E(ME(OE(r)))}function OE(r){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>t[s.charCodeAt(0)]=i);let e=r.length,n=new Uint8Array(6*e>>3);for(let s=0,i=0,o=0,a=0;s<e;s++)a=a<<6|t[r.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function LE(r){return r&1?~r>>1:r>>1}function UE(r,t){let e=Array(r);for(let n=0,s=0;n<r;n++)e[n]=s+=LE(t());return e}function Sa(r,t=0){let e=[];for(;;){let n=r(),s=r();if(!s)break;t+=n;for(let i=0;i<s;i++)e.push(t+i);t+=s+1}return e}function Cg(r){return Ia(()=>{let t=Sa(r);if(t.length)return t})}function Pg(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(FE(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(DE(e,r))}return t.flat()}function Ia(r){let t=[];for(;;){let e=r(t.length);if(!e)break;t.push(e)}return t}function Tg(r,t,e){let n=Array(r).fill().map(()=>[]);for(let s=0;s<t;s++)UE(r,e).forEach((i,o)=>n[o].push(i));return n}function FE(r,t){let e=1+t(),n=t(),s=Ia(t);return Tg(s.length,1+r,t).flatMap((o,a)=>{let[c,...f]=o;return Array(s[a]).fill().map((h,y)=>{let E=y*n;return[c+y*e,f.map(b=>b+E)]})})}function DE(r,t){let e=1+t();return Tg(e,1+r,t).map(s=>[s[0],s.slice(1)])}function HE(r){let t=[],e=Sa(r);return s(n([]),[]),t;function n(i){let o=r(),a=Ia(()=>{let c=Sa(r).map(f=>e[f]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&t.push(a);for(let f of o)for(let h of f.Q)s(f,[...a,h],c)}}}function GE(r){return r.toString(16).toUpperCase().padStart(2,"0")}function Mg(r){return`{${GE(r)}}`}function zE(r){let t=[];for(let e=0,n=r.length;e<n;){let s=r.codePointAt(e);e+=s<65536?1:2,t.push(s)}return t}function $o(r){let e=r.length;if(e<4096)return String.fromCodePoint(...r);let n=[];for(let s=0;s<e;)n.push(String.fromCodePoint(...r.slice(s,s+=4096)));return n.join("")}function KE(r,t){let e=r.length,n=e-t.length;for(let s=0;n==0&&s<e;s++)n=r[s]-t[s];return n}var VE="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";const ka=44032,Jc=4352,jc=4449,Zc=4519,_g=19,Og=21,Jo=28,Yc=Og*Jo,qE=_g*Yc,QE=ka+qE,WE=Jc+_g,$E=jc+Og,JE=Zc+Jo;function la(r){return r>>24&255}function Lg(r){return r&16777215}let mf,Yd,yf,Sc;function jE(){let r=Ng(VE);mf=new Map(Cg(r).flatMap((t,e)=>t.map(n=>[n,e+1<<24]))),Yd=new Set(Sa(r)),yf=new Map,Sc=new Map;for(let[t,e]of Pg(r)){if(!Yd.has(t)&&e.length==2){let[n,s]=e,i=Sc.get(n);i||(i=new Map,Sc.set(n,i)),i.set(s,t)}yf.set(t,e.reverse())}}function Ug(r){return r>=ka&&r<QE}function ZE(r,t){if(r>=Jc&&r<WE&&t>=jc&&t<$E)return ka+(r-Jc)*Yc+(t-jc)*Jo;if(Ug(r)&&t>Zc&&t<JE&&(r-ka)%Jo==0)return r+(t-Zc);{let e=Sc.get(r);return e&&(e=e.get(t),e)?e:-1}}function Fg(r){mf||jE();let t=[],e=[],n=!1;function s(i){let o=mf.get(i);o&&(n=!0,i|=o),t.push(i)}for(let i of r)for(;;){if(i<128)t.push(i);else if(Ug(i)){let o=i-ka,a=o/Yc|0,c=o%Yc/Jo|0,f=o%Jo;s(Jc+a),s(jc+c),f>0&&s(Zc+f)}else{let o=yf.get(i);o?e.push(...o):s(i)}if(!e.length)break;i=e.pop()}if(n&&t.length>1){let i=la(t[0]);for(let o=1;o<t.length;o++){let a=la(t[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let f=t[c+1];if(t[c+1]=t[c],t[c]=f,!c||(i=la(t[--c]),i<=a))break}i=la(t[o])}}return t}function YE(r){let t=[],e=[],n=-1,s=0;for(let i of r){let o=la(i),a=Lg(i);if(n==-1)o==0?n=a:t.push(a);else if(s>0&&s>=o)o==0?(t.push(n,...e),e.length=0,n=a):e.push(a),s=o;else{let c=ZE(n,a);c>=0?n=c:s==0&&o==0?(t.push(n),n=a):(e.push(a),s=o)}}return n>=0&&t.push(n,...e),t}function Dg(r){return Fg(r).map(Lg)}function XE(r){return YE(Fg(r))}const Xd=45,Hg=".",Gg=65039,zg=1,Xc=r=>Array.from(r);function Ra(r,t){return r.P.has(t)||r.Q.has(t)}class tv extends Array{get is_emoji(){return!0}}let wf,Kg,Ks,bf,Vg,$i,Ul,Mi,Ms,t0,Af;function lh(){if(wf)return;let r=Ng(TE);const t=()=>Sa(r),e=()=>new Set(t()),n=(h,y)=>y.forEach(E=>h.add(E));wf=new Map(Pg(r)),Kg=e(),Ks=t(),bf=new Set(t().map(h=>Ks[h])),Ks=new Set(Ks),Vg=e(),e();let s=Cg(r),i=r();const o=()=>{let h=new Set;return t().forEach(y=>n(h,s[y])),n(h,t()),h};$i=Ia(h=>{let y=Ia(r).map(E=>E+96);if(y.length){let E=h>=i;y[0]-=32,y=$o(y),E&&(y=`Restricted[${y}]`);let b=o(),N=o(),x=!r();return{N:y,P:b,Q:N,M:x,R:E}}}),Ul=e(),Mi=new Map;let a=t().concat(Xc(Ul)).sort((h,y)=>h-y);a.forEach((h,y)=>{let E=r(),b=a[y]=E?a[y-E]:{V:[],M:new Map};b.V.push(h),Ul.has(h)||Mi.set(h,b)});for(let{V:h,M:y}of new Set(Mi.values())){let E=[];for(let N of h){let x=$i.filter(_=>Ra(_,N)),S=E.find(({G:_})=>x.some(V=>_.has(V)));S||(S={G:new Set,V:[]},E.push(S)),S.V.push(N),n(S.G,x)}let b=E.flatMap(N=>Xc(N.G));for(let{G:N,V:x}of E){let S=new Set(b.filter(_=>!N.has(_)));for(let _ of x)y.set(_,S)}}Ms=new Set;let c=new Set;const f=h=>Ms.has(h)?c.add(h):Ms.add(h);for(let h of $i){for(let y of h.P)f(y);for(let y of h.Q)f(y)}for(let h of Ms)!Mi.has(h)&&!c.has(h)&&Mi.set(h,zg);n(Ms,Dg(Ms)),t0=HE(r).map(h=>tv.from(h)).sort(KE),Af=new Map;for(let h of t0){let y=[Af];for(let E of h){let b=y.map(N=>{let x=N.get(E);return x||(x=new Map,N.set(E,x)),x});E===Gg?y.push(...b):y=b}for(let E of y)E.V=h}}function fh(r){return(qg(r)?"":`${hh(Tu([r]))} `)+Mg(r)}function hh(r){return`"${r}"`}function ev(r){if(r.length>=4&&r[2]==Xd&&r[3]==Xd)throw new Error(`invalid label extension: "${$o(r.slice(0,4))}"`)}function nv(r){for(let e=r.lastIndexOf(95);e>0;)if(r[--e]!==95)throw new Error("underscore allowed only at start")}function rv(r){let t=r[0],e=jd.get(t);if(e)throw ya(`leading ${e}`);let n=r.length,s=-1;for(let i=1;i<n;i++){t=r[i];let o=jd.get(t);if(o){if(s==i)throw ya(`${e} + ${o}`);s=i+1,e=o}}if(s==n)throw ya(`trailing ${e}`)}function Tu(r,t=1/0,e=Mg){let n=[];sv(r[0])&&n.push(""),r.length>t&&(t>>=1,r=[...r.slice(0,t),8230,...r.slice(-t)]);let s=0,i=r.length;for(let o=0;o<i;o++){let a=r[o];qg(a)&&(n.push($o(r.slice(s,o))),n.push(e(a)),s=o+1)}return n.push($o(r.slice(s,i))),n.join("")}function sv(r){return lh(),Ks.has(r)}function qg(r){return lh(),Vg.has(r)}function iv(r){return uv(ov(r,XE,hv))}function ov(r,t,e){if(!r)return[];lh();let n=0;return r.split(Hg).map(s=>{let i=zE(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=fv(i,t,e),c=a.length,f;if(!c)throw new Error("empty label");let h=o.output=a.flat();if(nv(h),!(o.emoji=c>1||a[0].is_emoji)&&h.every(E=>E<128))ev(h),f="ASCII";else{let E=a.flatMap(b=>b.is_emoji?[]:b);if(!E.length)f="Emoji";else{if(Ks.has(h[0]))throw ya("leading combining mark");for(let x=1;x<c;x++){let S=a[x];if(!S.is_emoji&&Ks.has(S[0]))throw ya(`emoji + combining mark: "${$o(a[x-1])} + ${Tu([S[0]])}"`)}rv(h);let b=Xc(new Set(E)),[N]=cv(b);lv(N,E),av(N,b),f=N.N}}o.type=f}catch(a){o.error=a}return o})}function av(r,t){let e,n=[];for(let s of t){let i=Mi.get(s);if(i===zg)return;if(i){let o=i.M.get(s);if(e=e?e.filter(a=>o.has(a)):Xc(o),!e.length)return}else n.push(s)}if(e){for(let s of e)if(n.every(i=>Ra(s,i)))throw new Error(`whole-script confusable: ${r.N}/${s.N}`)}}function cv(r){let t=$i;for(let e of r){let n=t.filter(s=>Ra(s,e));if(!n.length)throw $i.some(s=>Ra(s,e))?Wg(t[0],e):Qg(e);if(t=n,n.length==1)break}return t}function uv(r){return r.map(({input:t,error:e,output:n})=>{if(e){let s=e.message;throw new Error(r.length==1?s:`Invalid label ${hh(Tu(t,63))}: ${s}`)}return $o(n)}).join(Hg)}function Qg(r){return new Error(`disallowed character: ${fh(r)}`)}function Wg(r,t){let e=fh(t),n=$i.find(s=>s.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${r.N} + ${e}`)}function ya(r){return new Error(`illegal placement: ${r}`)}function lv(r,t){for(let e of t)if(!Ra(r,e))throw Wg(r,e);if(r.M){let e=Dg(t);for(let n=1,s=e.length;n<s;n++)if(bf.has(e[n])){let i=n+1;for(let o;i<s&&bf.has(o=e[i]);i++)for(let a=n;a<i;a++)if(e[a]==o)throw new Error(`duplicate non-spacing marks: ${fh(o)}`);if(i-n>Zd)throw new Error(`excessive non-spacing marks: ${hh(Tu(e.slice(n-1,i)))} (${i-n}/${Zd})`);n=i}}}function fv(r,t,e){let n=[],s=[];for(r=r.slice().reverse();r.length;){let i=dv(r);if(i)s.length&&(n.push(t(s)),s=[]),n.push(e(i));else{let o=r.pop();if(Ms.has(o))s.push(o);else{let a=wf.get(o);if(a)s.push(...a);else if(!Kg.has(o))throw Qg(o)}}}return s.length&&n.push(t(s)),n}function hv(r){return r.filter(t=>t!=Gg)}function dv(r,t){let e=Af,n,s=r.length;for(;s&&(e=e.get(r[--s]),!!e);){let{V:i}=e;i&&(n=i,r.length=s)}return n}const $g=new Uint8Array(32);$g.fill(0);function e0(r){return q(r.length!==0,"invalid ENS name; empty component","comp",r),r}function Jg(r){const t=Gr(pv(r)),e=[];if(r.length===0)return e;let n=0;for(let s=0;s<t.length;s++)t[s]===46&&(e.push(e0(t.slice(n,s))),n=s+1);return q(n<t.length,"invalid ENS name; empty component","name",r),e.push(e0(t.slice(n))),e}function pv(r){try{if(r.length===0)throw new Error("empty label");return iv(r)}catch(t){q(!1,`invalid ENS name (${t.message})`,"name",r)}}function xf(r){q(typeof r=="string","invalid ENS name; not a string","name",r),q(r.length,"invalid ENS name (empty label)","name",r);let t=$g;const e=Jg(r);for(;e.length;)t=Te(ae([t,Te(e.pop())]));return dt(t)}function gv(r,t){const e=t;return q(e<=255,"DNS encoded label cannot exceed 255","length",e),dt(ae(Jg(r).map(n=>{q(n.length<=e,`label ${JSON.stringify(r)} exceeds ${e} bytes`,"name",r);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}const jg=new Uint8Array(32);jg.fill(0);const mv=BigInt(-1),Zg=BigInt(0),Yg=BigInt(1),yv=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function wv(r){const t=Rt(r),e=t.length%32;return e?ae([t,jg.slice(e)]):dt(t)}const bv=Bs(Yg,32),Av=Bs(Zg,32),n0={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Fl=["name","version","chainId","verifyingContract","salt"];function r0(r){return function(t){return q(typeof t=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,t),t}}const xv={name:r0("name"),version:r0("version"),chainId:function(r){const t=gt(r,"domain.chainId");return q(t>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(t)?Number(t):$n(t)},verifyingContract:function(r){try{return Dt(r).toLowerCase()}catch{}q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const t=Rt(r,"domain.salt");return q(t.length===32,'invalid domain value "salt"',"domain.salt",r),dt(t)}};function Dl(r){{const t=r.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",n=parseInt(t[2]);q(n%8===0&&n!==0&&n<=256&&t[2]===String(n),"invalid numeric width","type",r);const s=Gs(yv,e?n-1:n),i=e?(s+Yg)*mv:Zg;return function(o){const a=gt(o,"value");return q(a>=i&&a<=s,`value out-of-bounds for ${r}`,"value",a),Bs(e?Fp(a,256):a,32)}}}{const t=r.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return q(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",r),function(n){const s=Rt(n);return q(s.length===e,`invalid length for ${r}`,"value",n),wv(n)}}}switch(r){case"address":return function(t){return Kr(Dt(t),32)};case"bool":return function(t){return t?bv:Av};case"bytes":return function(t){return Te(t)};case"string":return function(t){return pi(t)}}return null}function s0(r,t){return`${r}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}function wc(r){const t=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:r}}var La,Nr,xo,iu,Xg;const kn=class kn{constructor(t){X(this,iu);W(this,"primaryType");X(this,La);X(this,Nr);X(this,xo);M(this,Nr,new Map),M(this,xo,new Map);const e=new Map,n=new Map,s=new Map,i={};Object.keys(t).forEach(c=>{i[c]=t[c].map(({name:f,type:h})=>{let{base:y,index:E}=wc(h);return y==="int"&&!t.int&&(y="int256"),y==="uint"&&!t.uint&&(y="uint256"),{name:f,type:y+(E||"")}}),e.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),M(this,La,JSON.stringify(i));for(const c in i){const f=new Set;for(const h of i[c]){q(!f.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(c)}`,"types",t),f.add(h.name);const y=wc(h.type).base;q(y!==c,`circular type reference to ${JSON.stringify(y)}`,"types",t),!Dl(y)&&(q(n.has(y),`unknown type ${JSON.stringify(y)}`,"types",t),n.get(y).push(c),e.get(c).add(y))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);q(o.length!==0,"missing primary type","types",t),q(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",t),bt(this,{primaryType:o[0]});function a(c,f){q(!f.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",t),f.add(c);for(const h of e.get(c))if(n.has(h)){a(h,f);for(const y of f)s.get(y).add(h)}f.delete(c)}a(this.primaryType,new Set);for(const[c,f]of s){const h=Array.from(f);h.sort(),A(this,Nr).set(c,s0(c,i[c])+h.map(y=>s0(y,i[y])).join(""))}}get types(){return JSON.parse(A(this,La))}getEncoder(t){let e=A(this,xo).get(t);return e||(e=at(this,iu,Xg).call(this,t),A(this,xo).set(t,e)),e}encodeType(t){const e=A(this,Nr).get(t);return q(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return Te(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(Dl(t))return n(t,e);const s=wc(t).array;if(s)return q(s.count===-1||s.count===e.length,`array length mismatch; expected length ${s.count}`,"value",e),e.map(o=>this._visit(s.prefix,o,n));const i=this.types[t];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,e[a],n),o),{});q(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new kn(t)}static getPrimaryType(t){return kn.from(t).primaryType}static hashStruct(t,e,n){return kn.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const s=n0[n];q(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:s})}return e.sort((n,s)=>Fl.indexOf(n.name)-Fl.indexOf(s.name)),kn.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return ae(["0x1901",kn.hashDomain(t),kn.from(e).hash(n)])}static hash(t,e,n){return Te(kn.encode(t,e,n))}static async resolveNames(t,e,n,s){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const i={};t.verifyingContract&&!Vt(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=kn.from(e);o.visit(n,(a,c)=>(a==="address"&&!Vt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:t,value:n}}static getPayload(t,e,n){kn.hashDomain(t);const s={},i=[];Fl.forEach(c=>{const f=t[c];f!=null&&(s[c]=xv[c](f),i.push({name:c,type:n0[c]}))});const o=kn.from(e);e=o.types;const a=Object.assign({},e);return q(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,f)=>{if(c.match(/^bytes(\d*)/))return dt(Rt(f));if(c.match(/^u?int/))return gt(f).toString();switch(c){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return q(typeof f=="string","invalid string","value",f),f}q(!1,"unsupported type","type",c)})}}};La=new WeakMap,Nr=new WeakMap,xo=new WeakMap,iu=new WeakSet,Xg=function(t){{const s=Dl(t);if(s)return s}const e=wc(t).array;if(e){const s=e.prefix,i=this.getEncoder(s);return o=>{q(e.count===-1||e.count===o.length,`array length mismatch; expected length ${e.count}`,"value",o);let a=o.map(i);return A(this,Nr).has(s)&&(a=a.map(Te)),Te(ae(a))}}const n=this.types[t];if(n){const s=pi(A(this,Nr).get(t));return i=>{const o=n.map(({name:a,type:c})=>{const f=this.getEncoder(c)(i[a]);return A(this,Nr).has(c)?Te(f):f});return o.unshift(s),ae(o)}}q(!1,`unknown type: ${t}`,"type",t)};let tu=kn;function cn(r){const t=new Set;return r.forEach(e=>t.add(e)),Object.freeze(t)}const Ev="external public payable override",vv=cn(Ev.split(" ")),tm="constant external internal payable private public pure view override",Bv=cn(tm.split(" ")),em="constructor error event fallback function receive struct",nm=cn(em.split(" ")),rm="calldata memory storage payable indexed",Sv=cn(rm.split(" ")),Iv="tuple returns",kv=[em,rm,Iv,tm].join(" "),Rv=cn(kv.split(" ")),Nv={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Cv=new RegExp("^(\\s*)"),Pv=new RegExp("^([0-9]+)"),Tv=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),sm=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),im=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Fe,Qn,Ua,Ef;const ou=class ou{constructor(t){X(this,Ua);X(this,Fe);X(this,Qn);M(this,Fe,0),M(this,Qn,t.slice())}get offset(){return A(this,Fe)}get length(){return A(this,Qn).length-A(this,Fe)}clone(){return new ou(A(this,Qn))}reset(){M(this,Fe,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=at(this,Ua,Ef).call(this,A(this,Fe)+1,t.match+1);return M(this,Fe,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;A(this,Fe)<t.match-1;){const n=this.peek().linkNext;e.push(at(this,Ua,Ef).call(this,A(this,Fe)+1,n)),M(this,Fe,n)}return M(this,Fe,t.match+1),e}peek(){if(A(this,Fe)>=A(this,Qn).length)throw new Error("out-of-bounds");return A(this,Qn)[A(this,Fe)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return na(this,Fe)._++,t}toString(){const t=[];for(let e=A(this,Fe);e<A(this,Qn).length;e++){const n=A(this,Qn)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};Fe=new WeakMap,Qn=new WeakMap,Ua=new WeakSet,Ef=function(t=0,e=0){return new ou(A(this,Qn).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let Zn=ou;function Rs(r){const t=[],e=o=>{const a=i<r.length?JSON.stringify(r[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<r.length;){let o=r.substring(i),a=o.match(Cv);a&&(i+=a[1].length,o=r.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let f=Nv[o[0]]||"";if(f){if(c.type=f,c.text=o[0],i++,f==="OPEN_PAREN")n.push(t.length-1),s.push(t.length-1);else if(f=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if(f==="COMMA")c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if(f==="OPEN_BRACKET")c.type="BRACKET";else if(f==="CLOSE_BRACKET"){let h=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const y=t.pop().text;h=y+h,t[t.length-1].value=Nt(y)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=h}continue}if(a=o.match(Tv),a){if(c.text=a[1],i+=c.text.length,Rv.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(im)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Pv),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Zn(t.map(o=>Object.freeze(o)))}function i0(r,t){let e=[];for(const n in t.keys())r.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Mu(r,t){if(t.peekKeyword(nm)){const e=t.pop().text;if(e!==r)throw new Error(`expected ${r}, got ${e}`)}return t.popType("ID")}function Vr(r,t){const e=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(r.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function om(r){let t=Vr(r,Bv);return i0(t,cn("constant payable nonpayable".split(" "))),i0(t,cn("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function zr(r,t){return r.popParams().map(e=>Ve.from(e,t))}function am(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return gt(r.pop().text);throw new Error("invalid gas")}return null}function gi(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const Mv=new RegExp(/^(.*)\[([0-9]*)\]$/);function o0(r){const t=r.match(im);if(q(t,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(t[2]){const e=parseInt(t[2]);q(e!==0&&e<=32,"invalid bytes length","type",r)}else if(t[3]){const e=parseInt(t[3]);q(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",r)}return r}const te={},mn=Symbol.for("_ethers_internal"),a0="_ParamTypeInternal",c0="_ErrorInternal",u0="_EventInternal",l0="_ConstructorInternal",f0="_FallbackInternal",h0="_FunctionInternal",d0="_StructInternal";var Eo,Ic;const Rn=class Rn{constructor(t,e,n,s,i,o,a,c){X(this,Eo);W(this,"name");W(this,"type");W(this,"baseType");W(this,"indexed");W(this,"components");W(this,"arrayLength");W(this,"arrayChildren");if(ja(t,te,"ParamType"),Object.defineProperty(this,mn,{value:a0}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");bt(this,{name:e,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(s)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(s=>n.arrayChildren.walk(s,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((s,i)=>n.components[i].walk(s,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],s=[t];return at(this,Eo,Ic).call(this,n,t,e,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(t,e){if(Rn.isParamType(t))return t;if(typeof t=="string")try{return Rn.from(Rs(t),e)}catch{q(!1,"invalid param type","obj",t)}else if(t instanceof Zn){let a="",c="",f=null;Vr(t,cn(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",f=t.popParams().map(x=>Rn.from(x)),a=`tuple(${f.map(x=>x.format()).join(",")})`):(a=o0(t.popType("TYPE")),c=a);let h=null,y=null;for(;t.length&&t.peekType("BRACKET");){const x=t.pop();h=new Rn(te,"",a,c,null,f,y,h),y=x.value,a+=x.text,c="array",f=null}let E=null;if(Vr(t,Sv).has("indexed")){if(!e)throw new Error("");E=!0}const N=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new Rn(te,N,a,c,E,f,y,h)}const n=t.name;q(!n||typeof n=="string"&&n.match(sm),"invalid name","obj.name",n);let s=t.indexed;s!=null&&(q(e,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let i=t.type,o=i.match(Mv);if(o){const a=parseInt(o[2]||"-1"),c=Rn.from({type:o[1],components:t.components});return new Rn(te,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=t.components!=null?t.components.map(f=>Rn.from(f)):null;return new Rn(te,n||"",i,"tuple",s,a,null,null)}return i=o0(t.type),new Rn(te,n||"",i,i,s,null,null,null)}static isParamType(t){return t&&t[mn]===a0}};Eo=new WeakSet,Ic=function(t,e,n,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=e.slice();a.forEach((c,f)=>{var h;at(h=o,Eo,Ic).call(h,t,c,n,y=>{a[f]=y})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(e))a=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,f)=>{var h;at(h=o[f],Eo,Ic).call(h,t,c,n,y=>{a[f]=y})}),s(a);return}const i=n(this.type,e);i.then?t.push(async function(){s(await i)}()):s(i)};let Ve=Rn;class mi{constructor(t,e,n){W(this,"type");W(this,"inputs");ja(t,te,"Fragment"),n=Object.freeze(n.slice()),bt(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{mi.from(JSON.parse(t))}catch{}return mi.from(Rs(t))}if(t instanceof Zn)switch(t.peekKeyword(nm)){case"constructor":return Hr.from(t);case"error":return dn.from(t);case"event":return fr.from(t);case"fallback":case"receive":return Br.from(t);case"function":return hr.from(t);case"struct":return hi.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return Hr.from(t);case"error":return dn.from(t);case"event":return fr.from(t);case"fallback":case"receive":return Br.from(t);case"function":return hr.from(t);case"struct":return hi.from(t)}it(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}q(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return Hr.isFragment(t)}static isError(t){return dn.isFragment(t)}static isEvent(t){return fr.isFragment(t)}static isFunction(t){return hr.isFragment(t)}static isStruct(t){return hi.isFragment(t)}}class _u extends mi{constructor(e,n,s,i){super(e,n,i);W(this,"name");q(typeof s=="string"&&s.match(sm),"invalid identifier","name",s),i=Object.freeze(i.slice()),bt(this,{name:s})}}function Na(r,t){return"("+t.map(e=>e.format(r)).join(r==="full"?", ":",")+")"}class dn extends _u{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,mn,{value:c0})}get selector(){return pi(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+Na(t,this.inputs)),e.join(" ")}static from(t){if(dn.isFragment(t))return t;if(typeof t=="string")return dn.from(Rs(t));if(t instanceof Zn){const e=Mu("error",t),n=zr(t);return gi(t),new dn(te,e,n)}return new dn(te,t.name,t.inputs?t.inputs.map(Ve.from):[])}static isFragment(t){return t&&t[mn]===c0}}class fr extends _u{constructor(e,n,s,i){super(e,"event",n,s);W(this,"anonymous");Object.defineProperty(this,mn,{value:u0}),bt(this,{anonymous:i})}get topicHash(){return pi(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+Na(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>Ve.from(i)),new fr(te,e,n,!1).topicHash}static from(e){if(fr.isFragment(e))return e;if(typeof e=="string")try{return fr.from(Rs(e))}catch{q(!1,"invalid event fragment","obj",e)}else if(e instanceof Zn){const n=Mu("event",e),s=zr(e,!0),i=!!Vr(e,cn(["anonymous"])).has("anonymous");return gi(e),new fr(te,n,s,i)}return new fr(te,e.name,e.inputs?e.inputs.map(n=>Ve.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[mn]===u0}}class Hr extends mi{constructor(e,n,s,i,o){super(e,n,s);W(this,"payable");W(this,"gas");Object.defineProperty(this,mn,{value:l0}),bt(this,{payable:i,gas:o})}format(e){if(it(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[`constructor${Na(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(Hr.isFragment(e))return e;if(typeof e=="string")try{return Hr.from(Rs(e))}catch{q(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Zn){Vr(e,cn(["constructor"]));const n=zr(e),s=!!Vr(e,vv).has("payable"),i=am(e);return gi(e),new Hr(te,"constructor",n,s,i)}return new Hr(te,"constructor",e.inputs?e.inputs.map(Ve.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[mn]===l0}}class Br extends mi{constructor(e,n,s){super(e,"fallback",n);W(this,"payable");Object.defineProperty(this,mn,{value:f0}),bt(this,{payable:s})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(e){if(Br.isFragment(e))return e;if(typeof e=="string")try{return Br.from(Rs(e))}catch{q(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Zn){const n=e.toString(),s=e.peekKeyword(cn(["fallback","receive"]));if(q(s,"type must be fallback or receive","obj",n),e.popKeyword(cn(["fallback","receive"]))==="receive"){const c=zr(e);return q(c.length===0,"receive cannot have arguments","obj.inputs",c),Vr(e,cn(["payable"])),gi(e),new Br(te,[],!0)}let o=zr(e);o.length?q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Ve.from("bytes")];const a=om(e);if(q(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Vr(e,cn(["returns"])).has("returns")){const c=zr(e);q(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(f=>f.format("minimal")).join(", "))}return gi(e),new Br(te,o,a==="payable")}if(e.type==="receive")return new Br(te,[],!0);if(e.type==="fallback"){const n=[Ve.from("bytes")],s=e.stateMutability==="payable";return new Br(te,n,s)}q(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[mn]===f0}}class hr extends _u{constructor(e,n,s,i,o,a){super(e,"function",n,i);W(this,"constant");W(this,"outputs");W(this,"stateMutability");W(this,"payable");W(this,"gas");Object.defineProperty(this,mn,{value:h0}),o=Object.freeze(o.slice()),bt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return pi(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+Na(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Na(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>Ve.from(i)),new hr(te,e,"view",n,[],null).selector}static from(e){if(hr.isFragment(e))return e;if(typeof e=="string")try{return hr.from(Rs(e))}catch{q(!1,"invalid function fragment","obj",e)}else if(e instanceof Zn){const s=Mu("function",e),i=zr(e),o=om(e);let a=[];Vr(e,cn(["returns"])).has("returns")&&(a=zr(e));const c=am(e);return gi(e),new hr(te,s,o,i,a,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new hr(te,e.name,n,e.inputs?e.inputs.map(Ve.from):[],e.outputs?e.outputs.map(Ve.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[mn]===h0}}class hi extends _u{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,mn,{value:d0})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return hi.from(Rs(t))}catch{q(!1,"invalid struct fragment","obj",t)}else if(t instanceof Zn){const e=Mu("struct",t),n=zr(t);return gi(t),new hi(te,e,n)}return new hi(te,t.name,t.inputs?t.inputs.map(Ve.from):[])}static isFragment(t){return t&&t[mn]===d0}}const Yn=new Map;Yn.set(0,"GENERIC_PANIC");Yn.set(1,"ASSERT_FALSE");Yn.set(17,"OVERFLOW");Yn.set(18,"DIVIDE_BY_ZERO");Yn.set(33,"ENUM_RANGE_ERROR");Yn.set(34,"BAD_STORAGE_DATA");Yn.set(49,"STACK_UNDERFLOW");Yn.set(50,"ARRAY_RANGE_ERROR");Yn.set(65,"OUT_OF_MEMORY");Yn.set(81,"UNINITIALIZED_FUNCTION_CALL");const _v=new RegExp(/^bytes([0-9]*)$/),Ov=new RegExp(/^(u?int)([0-9]*)$/);let Hl=null,p0=1024;function Lv(r,t,e,n){let s="missing revert data",i=null;const o=null;let a=null;if(e){s="execution reverted";const f=Rt(e);if(e=dt(e),f.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(f.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(dt(f.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],f.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(dt(f.slice(0,4))==="0x4e487b71")try{const h=Number(n.decode(["uint256"],f.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[h]},i=`Panic due to ${Yn.get(h)||"UNKNOWN"}(${h})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:t.to?Dt(t.to):null,data:t.data||"0x"};return t.from&&(c.from=Dt(t.from)),Zt(s,"CALL_EXCEPTION",{action:r,data:e,reason:i,transaction:c,invocation:o,revert:a})}var cs,_i;const au=class au{constructor(){X(this,cs)}getDefaultValue(t){const e=t.map(s=>at(this,cs,_i).call(this,Ve.from(s)));return new yc(e,"_").defaultValue()}encode(t,e){Op(e.length,t.length,"types/values length mismatch");const n=t.map(o=>at(this,cs,_i).call(this,Ve.from(o))),s=new yc(n,"_"),i=new cf;return s.encode(i,e),i.data}decode(t,e,n){const s=t.map(o=>at(this,cs,_i).call(this,Ve.from(o)));return new yc(s,"_").decode(new uf(e,n,p0))}static _setDefaultMaxInflation(t){q(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),p0=t}static defaultAbiCoder(){return Hl==null&&(Hl=new au),Hl}static getBuiltinCallException(t,e,n){return Lv(t,e,n,au.defaultAbiCoder())}};cs=new WeakSet,_i=function(t){if(t.isArray())return new tE(at(this,cs,_i).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new yc(t.components.map(n=>at(this,cs,_i).call(this,n)),t.name);switch(t.baseType){case"address":return new Yx(t.name);case"bool":return new eE(t.name);case"string":return new lE(t.name);case"bytes":return new nE(t.name);case"":return new iE(t.name)}let e=t.type.match(Ov);if(e){let n=parseInt(e[2]||"256");return q(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new uE(n/8,e[1]==="int",t.name)}if(e=t.type.match(_v),e){let n=parseInt(e[1]);return q(n!==0&&n<=32,"invalid bytes length","param",t),new rE(n,t.name)}q(!1,"invalid type","type",t.type)};let Ca=au;class Uv{constructor(t,e,n){W(this,"fragment");W(this,"name");W(this,"signature");W(this,"topic");W(this,"args");const s=t.name,i=t.format();bt(this,{fragment:t,name:s,signature:i,topic:e,args:n})}}class Fv{constructor(t,e,n,s){W(this,"fragment");W(this,"name");W(this,"args");W(this,"signature");W(this,"selector");W(this,"value");const i=t.name,o=t.format();bt(this,{fragment:t,name:i,args:n,signature:o,selector:e,value:s})}}class Dv{constructor(t,e,n){W(this,"fragment");W(this,"name");W(this,"args");W(this,"signature");W(this,"selector");const s=t.name,i=t.format();bt(this,{fragment:t,name:s,args:n,signature:i,selector:e})}}class g0{constructor(t){W(this,"hash");W(this,"_isIndexed");bt(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const m0={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},y0={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let t="unknown panic code";return r>=0&&r<=255&&m0[r.toString()]&&(t=m0[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${t})`}}};var ir,or,ar,je,pr,kc,Rc;const Us=class Us{constructor(t){X(this,pr);W(this,"fragments");W(this,"deploy");W(this,"fallback");W(this,"receive");X(this,ir);X(this,or);X(this,ar);X(this,je);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,M(this,ar,new Map),M(this,ir,new Map),M(this,or,new Map);const n=[];for(const o of e)try{n.push(mi.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}bt(this,{fragments:Object.freeze(n)});let s=null,i=!1;M(this,je,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}bt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=A(this,ar);break;case"event":c=A(this,or);break;case"error":c=A(this,ir);break;default:return}const f=o.format();c.has(f)||c.set(f,o)}),this.deploy||bt(this,{deploy:Hr.from("constructor()")}),bt(this,{fallback:s,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(s=>s.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return Ca.defaultAbiCoder()}getFunctionName(t){const e=at(this,pr,kc).call(this,t,null,!1);return q(e,"no matching function","key",t),e.name}hasFunction(t){return!!at(this,pr,kc).call(this,t,null,!1)}getFunction(t,e){return at(this,pr,kc).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(A(this,ar).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(A(this,ar).get(s),n)}}getEventName(t){const e=at(this,pr,Rc).call(this,t,null,!1);return q(e,"no matching event","key",t),e.name}hasEvent(t){return!!at(this,pr,Rc).call(this,t,null,!1)}getEvent(t,e){return at(this,pr,Rc).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(A(this,or).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(A(this,or).get(s),n)}}getError(t,e){if(Vt(t)){const s=t.toLowerCase();if(y0[s])return dn.from(y0[s].signature);for(const i of A(this,ir).values())if(s===i.selector)return i;return null}if(t.indexOf("(")===-1){const s=[];for(const[i,o]of A(this,ir))i.split("(")[0]===t&&s.push(o);if(s.length===0)return t==="Error"?dn.from("error Error(string)"):t==="Panic"?dn.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");q(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return s[0]}if(t=dn.from(t).format(),t==="Error(string)")return dn.from("error Error(string)");if(t==="Panic(uint256)")return dn.from("error Panic(uint256)");const n=A(this,ir).get(t);return n||null}forEachError(t){const e=Array.from(A(this,ir).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(A(this,ir).get(s),n)}}_decodeParams(t,e){return A(this,je).decode(t,e)}_encodeParams(t,e){return A(this,je).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);q(n,"unknown error","fragment",t),t=n}return q(oe(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,oe(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);q(n,"unknown error","fragment",t),t=n}return ae([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);q(n,"unknown function","fragment",t),t=n}return q(oe(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,oe(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);q(n,"unknown function","fragment",t),t=n}return ae([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);q(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const s=sn(e);if(s.length%32===0)try{return A(this,je).decode(t.outputs,s)}catch{n="could not decode result data"}it(!1,n,"BAD_DATA",{value:dt(s),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=Rt(t,"data"),s=Ca.getBuiltinCallException("call",e,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=dt(n.slice(0,4)),c=this.getError(a);if(c)try{const f=A(this,je).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:f},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);q(n,"unknown function","fragment",t),t=n}return dt(A(this,je).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);q(i,"unknown event","eventFragment",t),t=i}it(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const s=(i,o)=>i.type==="string"?pi(o):i.type==="bytes"?Te(dt(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Bs(o):i.type.match(/^bytes/)?o=nA(o,32):i.type==="address"&&A(this,je).encode(["address"],[o]),Kr(dt(o),32));for(e.forEach((i,o)=>{const a=t.inputs[o];if(!a.indexed){q(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?q(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const o=this.getEvent(t);q(o,"unknown event","eventFragment",t),t=o}const n=[],s=[],i=[];return t.anonymous||n.push(t.topicHash),q(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((o,a)=>{const c=e[a];if(o.indexed)if(o.type==="string")n.push(pi(c));else if(o.type==="bytes")n.push(Te(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(A(this,je).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:A(this,je).encode(s,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const b=this.getEvent(t);q(b,"unknown event","eventFragment",t),t=b}if(n!=null&&!t.anonymous){const b=t.topicHash;q(Vt(n[0],32)&&n[0].toLowerCase()===b,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];t.inputs.forEach((b,N)=>{b.indexed?b.type==="string"||b.type==="bytes"||b.baseType==="tuple"||b.baseType==="array"?(s.push(Ve.from({type:"bytes32",name:b.name})),o.push(!0)):(s.push(b),o.push(!1)):(i.push(b),o.push(!1))});const a=n!=null?A(this,je).decode(s,ae(n)):null,c=A(this,je).decode(i,e,!0),f=[],h=[];let y=0,E=0;return t.inputs.forEach((b,N)=>{let x=null;if(b.indexed)if(a==null)x=new g0(null);else if(o[N])x=new g0(a[E++]);else try{x=a[E++]}catch(S){x=S}else try{x=c[y++]}catch(S){x=S}f.push(x),h.push(b.name||null)}),Ko.fromItems(f,h)}parseTransaction(t){const e=Rt(t.data,"tx.data"),n=gt(t.value!=null?t.value:0,"tx.value"),s=this.getFunction(dt(e.slice(0,4)));if(!s)return null;const i=A(this,je).decode(s.inputs,e.slice(4));return new Fv(s,s.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Uv(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=dt(t),n=this.getError(oe(e,0,4));if(!n)return null;const s=A(this,je).decode(n.inputs,oe(e,4));return new Dv(n,n.selector,s)}static from(t){return t instanceof Us?t:typeof t=="string"?new Us(JSON.parse(t)):typeof t.formatJson=="function"?new Us(t.formatJson()):typeof t.format=="function"?new Us(t.format("json")):new Us(t)}};ir=new WeakMap,or=new WeakMap,ar=new WeakMap,je=new WeakMap,pr=new WeakSet,kc=function(t,e,n){if(Vt(t)){const i=t.toLowerCase();for(const o of A(this,ar).values())if(i===o.selector)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of A(this,ar))o.split("(")[0]===t&&i.push(a);if(e){const o=e.length>0?e[e.length-1]:null;let a=e.length,c=!0;Xe.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let f=i.length-1;f>=0;f--){const h=i[f].inputs.length;h!==a&&(!c||h!==a-1)&&i.splice(f,1)}for(let f=i.length-1;f>=0;f--){const h=i[f].inputs;for(let y=0;y<e.length;y++)if(Xe.isTyped(e[y])){if(y>=h.length){if(e[y].type==="overrides")continue;i.splice(f,1);break}if(e[y].type!==h[y].baseType){i.splice(f,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const o=e[e.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");q(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return i[0]}const s=A(this,ar).get(hr.from(t).format());return s||null},Rc=function(t,e,n){if(Vt(t)){const i=t.toLowerCase();for(const o of A(this,or).values())if(i===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of A(this,or))o.split("(")[0]===t&&i.push(a);if(e){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<e.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<e.length;c++)if(Xe.isTyped(e[c])&&e[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");q(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return i[0]}const s=A(this,or).get(fr.from(t).format());return s||null};let vf=Us;const cm=BigInt(0);function Ji(r){return r??null}function he(r){return r==null?null:r.toString()}class w0{constructor(t,e,n){W(this,"gasPrice");W(this,"maxFeePerGas");W(this,"maxPriorityFeePerGas");bt(this,{gasPrice:Ji(t),maxFeePerGas:Ji(e),maxPriorityFeePerGas:Ji(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:he(t),maxFeePerGas:he(e),maxPriorityFeePerGas:he(n)}}}function eu(r){const t={};r.to&&(t.to=r.to),r.from&&(t.from=r.from),r.data&&(t.data=dt(r.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of e)!(s in r)||r[s]==null||(t[s]=gt(r[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in r)||r[s]==null||(t[s]=Nt(r[s],`request.${s}`));return r.accessList&&(t.accessList=Ei(r.accessList)),r.authorizationList&&(t.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(t.blockTag=r.blockTag),"enableCcipRead"in r&&(t.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(t.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(t.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(t.kzg=r.kzg),"blobs"in r&&r.blobs&&(t.blobs=r.blobs.map(s=>th(s)?dt(s):Object.assign({},s))),t}var Cr;class Hv{constructor(t,e){W(this,"provider");W(this,"number");W(this,"hash");W(this,"timestamp");W(this,"parentHash");W(this,"parentBeaconBlockRoot");W(this,"nonce");W(this,"difficulty");W(this,"gasLimit");W(this,"gasUsed");W(this,"stateRoot");W(this,"receiptsRoot");W(this,"blobGasUsed");W(this,"excessBlobGas");W(this,"miner");W(this,"prevRandao");W(this,"extraData");W(this,"baseFeePerGas");X(this,Cr);M(this,Cr,t.transactions.map(n=>typeof n!="string"?new Pa(n,e):n)),bt(this,{provider:e,hash:Ji(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:Ji(t.prevRandao),extraData:t.extraData,baseFeePerGas:Ji(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return A(this,Cr).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=A(this,Cr).slice();return t.length===0?[]:(it(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:f,number:h,parentHash:y,parentBeaconBlockRoot:E,stateRoot:b,receiptsRoot:N,timestamp:x,transactions:S}=this;return{_type:"Block",baseFeePerGas:he(t),difficulty:he(e),extraData:n,gasLimit:he(s),gasUsed:he(i),blobGasUsed:he(this.blobGasUsed),excessBlobGas:he(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:f,number:h,parentHash:y,timestamp:x,parentBeaconBlockRoot:E,stateRoot:b,receiptsRoot:N,transactions:S}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return A(this,Cr).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=A(this,Cr)[t];else{const n=t.toLowerCase();for(const s of A(this,Cr))if(typeof s=="string"){if(s!==n)continue;e=s;break}else{if(s.hash!==n)continue;e=s;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;q(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Gv(this)}}Cr=new WeakMap;class Xa{constructor(t,e){W(this,"provider");W(this,"transactionHash");W(this,"blockHash");W(this,"blockNumber");W(this,"removed");W(this,"address");W(this,"data");W(this,"topics");W(this,"index");W(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());bt(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:f}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:f}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return it(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return it(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return it(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return zv(this)}}var Fa;class um{constructor(t,e){W(this,"provider");W(this,"to");W(this,"from");W(this,"contractAddress");W(this,"hash");W(this,"index");W(this,"blockHash");W(this,"blockNumber");W(this,"logsBloom");W(this,"gasUsed");W(this,"blobGasUsed");W(this,"cumulativeGasUsed");W(this,"gasPrice");W(this,"blobGasPrice");W(this,"type");W(this,"status");W(this,"root");X(this,Fa);M(this,Fa,Object.freeze(t.logs.map(s=>new Xa(s,e))));let n=cm;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),bt(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return A(this,Fa)}toJSON(){const{to:t,from:e,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:f,status:h,root:y}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:he(this.cumulativeGasUsed),from:e,gasPrice:he(this.gasPrice),blobGasUsed:he(this.blobGasUsed),blobGasPrice:he(this.blobGasPrice),gasUsed:he(this.gasUsed),hash:s,index:i,logs:f,logsBloom:c,root:y,status:h,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return fm(this)}reorderedEvent(t){return it(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),lm(this,t)}}Fa=new WeakMap;var us;const Ah=class Ah{constructor(t,e){W(this,"provider");W(this,"blockNumber");W(this,"blockHash");W(this,"index");W(this,"hash");W(this,"type");W(this,"to");W(this,"from");W(this,"nonce");W(this,"gasLimit");W(this,"gasPrice");W(this,"maxPriorityFeePerGas");W(this,"maxFeePerGas");W(this,"maxFeePerBlobGas");W(this,"data");W(this,"value");W(this,"chainId");W(this,"signature");W(this,"accessList");W(this,"blobVersionedHashes");W(this,"authorizationList");X(this,us);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,M(this,us,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:f,signature:h,accessList:y,blobVersionedHashes:E}=this;return{_type:"TransactionResponse",accessList:y,blockNumber:t,blockHash:e,blobVersionedHashes:E,chainId:he(this.chainId),data:f,from:a,gasLimit:he(this.gasLimit),gasPrice:he(this.gasPrice),hash:s,maxFeePerGas:he(this.maxFeePerGas),maxPriorityFeePerGas:he(this.maxPriorityFeePerGas),maxFeePerBlobGas:he(this.maxFeePerBlobGas),nonce:c,signature:h,to:o,index:n,type:i,value:he(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await rn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,s=e??0;let i=A(this,us),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:E,nonce:b}=await rn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(b<this.nonce){i=E;return}if(a)return null;const N=await this.getTransaction();if(!(N&&N.blockNumber!=null))for(o===-1&&(o=i-3,o<A(this,us)&&(o=A(this,us)));o<=E;){if(a)return null;const x=await this.provider.getBlock(o,!0);if(x==null)return;for(const S of x)if(S===this.hash)return;for(let S=0;S<x.length;S++){const _=await x.getTransaction(S);if(_.from===this.from&&_.nonce===this.nonce){if(a)return null;const V=await this.provider.getTransactionReceipt(_.hash);if(V==null||E-V.blockNumber+1<n)return;let z="replaced";_.data===this.data&&_.to===this.to&&_.value===this.value?z="repriced":_.data==="0x"&&_.from===_.to&&_.value===cm&&(z="cancelled"),it(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:z==="replaced"||z==="cancelled",reason:z,replacement:_.replaceableTransaction(i),hash:_.hash,receipt:V})}}o++}},f=E=>{if(E==null||E.status!==0)return E;it(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:E.to,from:E.from,data:""},receipt:E})},h=await this.provider.getTransactionReceipt(this.hash);if(n===0)return f(h);if(h){if(n===1||await h.confirmations()>=n)return f(h)}else if(await c(),n===0)return null;return await new Promise((E,b)=>{const N=[],x=()=>{N.forEach(_=>_())};if(N.push(()=>{a=!0}),s>0){const _=setTimeout(()=>{x(),b(Zt("wait for transaction timeout","TIMEOUT"))},s);N.push(()=>{clearTimeout(_)})}const S=async _=>{if(await _.confirmations()>=n){x();try{E(f(_))}catch(V){b(V)}}};if(N.push(()=>{this.provider.off(this.hash,S)}),this.provider.on(this.hash,S),i>=0){const _=async()=>{try{await c()}catch(V){if(ze(V,"TRANSACTION_REPLACED")){x(),b(V);return}}a||this.provider.once("block",_)};N.push(()=>{this.provider.off("block",_)}),this.provider.once("block",_)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return it(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),fm(this)}reorderedEvent(t){return it(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),it(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),lm(this,t)}replaceableTransaction(t){q(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new Ah(this,this.provider);return M(e,us,t),e}};us=new WeakMap;let Pa=Ah;function Gv(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function lm(r,t){return{orphan:"reorder-transaction",tx:r,other:t}}function fm(r){return{orphan:"drop-transaction",tx:r}}function zv(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class dh extends Xa{constructor(e,n,s){super(e,e.provider);W(this,"interface");W(this,"fragment");W(this,"args");const i=n.decodeEventLog(s,e.data,e.topics);bt(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class hm extends Xa{constructor(e,n){super(e,e.provider);W(this,"error");bt(this,{error:n})}}var vo;class Kv extends um{constructor(e,n,s){super(s,n);X(this,vo);M(this,vo,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?A(this,vo).getEvent(e.topics[0]):null;if(n)try{return new dh(e,A(this,vo),n)}catch(s){return new hm(e,s)}return e})}}vo=new WeakMap;var Da;class ph extends Pa{constructor(e,n,s){super(s,n);X(this,Da);M(this,Da,e)}async wait(e,n){const s=await super.wait(e,n);return s==null?null:new Kv(A(this,Da),this.provider,s)}}Da=new WeakMap;class dm extends Dp{constructor(e,n,s,i){super(e,n,s);W(this,"log");bt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Vv extends dm{constructor(t,e,n,s,i){super(t,e,n,new dh(i,t.interface,s));const o=t.interface.decodeEventLog(s,this.log.data,this.log.topics);bt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const b0=BigInt(0);function pm(r){return r&&typeof r.call=="function"}function gm(r){return r&&typeof r.estimateGas=="function"}function Ou(r){return r&&typeof r.resolveName=="function"}function mm(r){return r&&typeof r.sendTransaction=="function"}function ym(r){if(r!=null){if(Ou(r))return r;if(r.provider)return r.provider}}var Ha;class qv{constructor(t,e,n){X(this,Ha);W(this,"fragment");if(bt(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const s=yi(t.runner,"resolveName"),i=Ou(s)?s:null;M(this,Ha,async function(){const o=await Promise.all(e.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(h,y)=>h==="address"?Array.isArray(y)?Promise.all(y.map(E=>an(E,i))):an(y,i):y)));return t.interface.encodeFilterTopics(e,o)}())}getTopicFilter(){return A(this,Ha)}}Ha=new WeakMap;function yi(r,t){return r==null?null:typeof r[t]=="function"?r:r.provider&&typeof r.provider[t]=="function"?r.provider:null}function Vs(r){return r==null?null:r.provider||null}async function wm(r,t){const e=Xe.dereference(r,"overrides");q(typeof e=="object","invalid overrides parameter","overrides",r);const n=eu(e);return q(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),q(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Qv(r,t,e){const n=yi(r,"resolveName"),s=Ou(n)?n:null;return await Promise.all(t.map((i,o)=>i.walkAsync(e[o],(a,c)=>(c=Xe.dereference(c,a),a==="address"?an(c,s):c))))}function Wv(r){const t=async function(o){const a=await wm(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await an(a.from,ym(r.runner)));const c=r.interface,f=gt(a.value||b0,"overrides.value")===b0,h=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!h&&!f&&q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),q(c.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data);const y=c.receive||c.fallback&&c.fallback.payable;return q(y||f,"cannot send value to non-payable fallback","overrides.value",a.value),q(c.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data),a},e=async function(o){const a=yi(r.runner,"call");it(pm(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(o);try{return await a.call(c)}catch(f){throw Xf(f)&&f.data?r.interface.makeError(f.data,c):f}},n=async function(o){const a=r.runner;it(mm(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await t(o)),f=Vs(r.runner);return new ph(r.interface,f,c)},s=async function(o){const a=yi(r.runner,"estimateGas");return it(gm(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},i=async o=>await n(o);return bt(i,{_contract:r,estimateGas:s,populateTransaction:t,send:n,staticCall:e}),i}function $v(r,t){const e=function(...f){const h=r.interface.getFunction(t,f);return it(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:f}}),h},n=async function(...f){const h=e(...f);let y={};if(h.inputs.length+1===f.length&&(y=await wm(f.pop()),y.from&&(y.from=await an(y.from,ym(r.runner)))),h.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const E=await Qv(r.runner,h.inputs,f);return Object.assign({},y,await rn({to:r.getAddress(),data:r.interface.encodeFunctionData(h,E)}))},s=async function(...f){const h=await a(...f);return h.length===1?h[0]:h},i=async function(...f){const h=r.runner;it(mm(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const y=await h.sendTransaction(await n(...f)),E=Vs(r.runner);return new ph(r.interface,E,y)},o=async function(...f){const h=yi(r.runner,"estimateGas");return it(gm(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await n(...f))},a=async function(...f){const h=yi(r.runner,"call");it(pm(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const y=await n(...f);let E="0x";try{E=await h.call(y)}catch(N){throw Xf(N)&&N.data?r.interface.makeError(N.data,y):N}const b=e(...f);return r.interface.decodeFunctionResult(b,E)},c=async(...f)=>e(...f).constant?await s(...f):await i(...f);return bt(c,{name:r.interface.getFunctionName(t),_contract:r,_key:t,getFragment:e,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=r.interface.getFunction(t);return it(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),f}}),c}function Jv(r,t){const e=function(...s){const i=r.interface.getEvent(t,s);return it(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),i},n=function(...s){return new qv(r,e(...s),s)};return bt(n,{name:r.interface.getEventName(t),_contract:r,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=r.interface.getEvent(t);return it(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),n}const nu=Symbol.for("_ethersInternal_contract"),bm=new WeakMap;function jv(r,t){bm.set(r[nu],t)}function bn(r){return bm.get(r[nu])}function Zv(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function gh(r,t){let e,n=null;if(Array.isArray(t)){const i=function(o){if(Vt(o,32))return o;const a=r.interface.getEvent(o);return q(a,"unknown fragment","name",o),a.topicHash};e=t.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else t==="*"?e=[null]:typeof t=="string"?Vt(t,32)?e=[t]:(n=r.interface.getEvent(t),q(n,"unknown fragment","event",t),e=[n.topicHash]):Zv(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):q(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:e}}async function fa(r,t){const{subs:e}=bn(r);return e.get((await gh(r,t)).tag)||null}async function A0(r,t,e){const n=Vs(r.runner);it(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:o}=await gh(r,e),{addr:a,subs:c}=bn(r);let f=c.get(i);if(!f){const y={address:a||r,topics:o},E=S=>{let _=s;if(_==null)try{_=r.interface.getEvent(S.topics[0])}catch{}if(_){const V=_,z=s?r.interface.decodeEventLog(s,S.data,S.topics):[];Sf(r,e,z,rt=>new Vv(r,rt,e,V,S))}else Sf(r,e,[],V=>new dm(r,V,e,S))};let b=[];f={tag:i,listeners:[],start:()=>{b.length||b.push(n.on(y,E))},stop:async()=>{if(b.length==0)return;let S=b;b=[],await Promise.all(S),n.off(y,E)}},c.set(i,f)}return f}let Bf=Promise.resolve();async function Yv(r,t,e,n){await Bf;const s=await fa(r,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(e);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),bn(r).subs.delete(s.tag)),i>0}async function Sf(r,t,e,n){try{await Bf}catch{}const s=Yv(r,t,e,n);return Bf=s,await s}const bc=["then"];var P0;P0=nu;const ba=class ba{constructor(t,e,n,s){W(this,"target");W(this,"interface");W(this,"runner");W(this,"filters");W(this,P0);W(this,"fallback");q(typeof t=="string"||Bg(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=vf.from(e);bt(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,nu,{value:{}});let o,a=null,c=null;if(s){const y=Vs(n);c=new ph(this.interface,y,s)}let f=new Map;if(typeof t=="string")if(Vt(t))a=t,o=Promise.resolve(t);else{const y=yi(n,"resolveName");if(!Ou(y))throw Zt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=y.resolveName(t).then(E=>{if(E==null)throw Zt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return bn(this).addr=E,E})}else o=t.getAddress().then(y=>{if(y==null)throw new Error("TODO");return bn(this).addr=y,y});jv(this,{addrPromise:o,addr:a,deployTx:c,subs:f});const h=new Proxy({},{get:(y,E,b)=>{if(typeof E=="symbol"||bc.indexOf(E)>=0)return Reflect.get(y,E,b);try{return this.getEvent(E)}catch(N){if(!ze(N,"INVALID_ARGUMENT")||N.argument!=="key")throw N}},has:(y,E)=>bc.indexOf(E)>=0?Reflect.has(y,E):Reflect.has(y,E)||this.interface.hasEvent(String(E))});return bt(this,{filters:h}),bt(this,{fallback:i.receive||i.fallback?Wv(this):null}),new Proxy(this,{get:(y,E,b)=>{if(typeof E=="symbol"||E in y||bc.indexOf(E)>=0)return Reflect.get(y,E,b);try{return y.getFunction(E)}catch(N){if(!ze(N,"INVALID_ARGUMENT")||N.argument!=="key")throw N}},has:(y,E)=>typeof E=="symbol"||E in y||bc.indexOf(E)>=0?Reflect.has(y,E):y.interface.hasFunction(E)})}connect(t){return new ba(this.target,this.interface,t)}attach(t){return new ba(t,this.interface,this.runner)}async getAddress(){return await bn(this).addrPromise}async getDeployedCode(){const t=Vs(this.runner);it(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=Vs(this.runner);return it(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return bn(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),$v(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),Jv(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=bn(this),o=s||await i,{fragment:a,topics:c}=await gh(this,t),f={address:o,topics:c,fromBlock:e,toBlock:n},h=Vs(this.runner);return it(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(f)).map(y=>{let E=a;if(E==null)try{E=this.interface.getEvent(y.topics[0])}catch{}if(E)try{return new dh(y,this.interface,E)}catch(b){return new hm(y,b)}return new Xa(y,h)})}async on(t,e){const n=await A0(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await A0(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await Sf(this,t,e,null)}async listenerCount(t){if(t){const s=await fa(this,t);return s?s.listeners.length:0}const{subs:e}=bn(this);let n=0;for(const{listeners:s}of e.values())n+=s.length;return n}async listeners(t){if(t){const s=await fa(this,t);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:e}=bn(this);let n=[];for(const{listeners:s}of e.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(t,e){const n=await fa(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(e==null||n.listeners.length===0)&&(n.stop(),bn(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await fa(this,t);if(!e)return this;e.stop(),bn(this).subs.delete(e.tag)}else{const{subs:e}=bn(this);for(const{tag:n,stop:s}of e.values())s(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends ba{constructor(s,i=null){super(s,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};let If=ba;function Xv(){return If}class wa extends Xv(){}function Gl(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):q(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class t2{constructor(t){W(this,"name");bt(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Am=new RegExp("^(ipfs)://(.*)$","i"),x0=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Am,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ls,ri,fs,Oi,cu,xm;const zi=class zi{constructor(t,e,n){X(this,fs);W(this,"provider");W(this,"address");W(this,"name");X(this,ls);X(this,ri);bt(this,{provider:t,address:e,name:n}),M(this,ls,null),M(this,ri,new wa(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return A(this,ls)==null&&M(this,ls,(async()=>{try{return await A(this,ri).supportsInterface("0x9061b923")}catch(t){if(ze(t,"CALL_EXCEPTION"))return!1;throw M(this,ls,null),t}})()),await A(this,ls)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await at(this,fs,Oi).call(this,"addr(bytes32)");return i==null||i===va?null:i}catch(i){if(ze(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const o=await at(this,fs,Oi).call(this,"addr(bytes32,uint)",[i]);if(Vt(o,20))return Dt(o)}let e=null;for(const i of this.provider.plugins)if(i instanceof t2&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const n=await at(this,fs,Oi).call(this,"addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const s=await e.decodeAddress(t,n);if(s!=null)return s;it(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await at(this,fs,Oi).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await at(this,fs,Oi).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const s=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${s}://${sA("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;it(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<x0.length;n++){const s=e.match(x0[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const o=Gl(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(s[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:t};const f=c[1],h=new wa(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const x=await h.ownerOf(f);if(a!==x)return t.push({type:"!owner",value:x}),{url:null,linkage:t};t.push({type:"owner",value:x})}else if(i==="erc1155"){const x=await h.balanceOf(a,f);if(!x)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:x.toString()})}let y=await h[o](f);if(y==null||y==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:y}),i==="erc1155"&&(y=y.replace("{id}",Bs(f,32).substring(2)),t.push({type:"metadata-url-expanded",value:y})),y.match(/^ipfs:/i)&&(y=Gl(y)),t.push({type:"metadata-url",value:y});let E={};const b=await new Ss(y).send();b.assertOk();try{E=b.bodyJson}catch{try{t.push({type:"!metadata",value:b.bodyText})}catch{const _=b.body;return _&&t.push({type:"!metadata",value:dt(_)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!E)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(E)});let N=E.image;if(typeof N!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!N.match(/^(https:\/\/|data:)/i)){if(N.match(Am)==null)return t.push({type:"!imageUrl-ipfs",value:N}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:N}),N=Gl(N)}return t.push({type:"url",value:N}),{linkage:t,url:N}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return it(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async fromName(t,e){var s;let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const i=await at(s=zi,cu,xm).call(s,t,n);if(i!=null){const o=new zi(t,i,e);return n!==e&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};ls=new WeakMap,ri=new WeakMap,fs=new WeakSet,Oi=async function(t,e){e=(e||[]).slice();const n=A(this,ri).interface;e.unshift(xf(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(t),it(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[gv(this.name,255),n.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await A(this,ri)[t](...e);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!ze(i,"CALL_EXCEPTION"))throw i}return null},cu=new WeakSet,xm=async function(t,e){const n=await zi.getEnsAddress(t);try{const i=await new wa(n,["function resolver(bytes32) view returns (address)"],t).resolver(xf(e),{enableCcipRead:!0});return i===va?null:i}catch(s){throw s}return null},X(zi,cu);let ru=zi;const E0=BigInt(0);function Mt(r,t){return function(e){return e==null?t:r(e)}}function Ta(r,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(n=>r(n))}}function tc(r,t){return e=>{const n={};for(const s in r){let i=s;if(t&&s in t&&!(i in e)){for(const o of t[s])if(o in e){i=o;break}}try{const o=r[s](e[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";it(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:e})}}return n}}function e2(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}q(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function jo(r){return q(Vt(r,!0),"invalid data","value",r),r}function Ge(r){return q(Vt(r,32),"invalid hash","value",r),r}const n2=tc({address:Dt,blockHash:Ge,blockNumber:Nt,data:jo,index:Nt,removed:Mt(e2,!1),topics:Ta(Ge),transactionHash:Ge,transactionIndex:Nt},{index:["logIndex"]});function r2(r){return n2(r)}const s2=tc({hash:Mt(Ge),parentHash:Ge,parentBeaconBlockRoot:Mt(Ge,null),number:Nt,timestamp:Nt,nonce:Mt(jo),difficulty:gt,gasLimit:gt,gasUsed:gt,stateRoot:Mt(Ge,null),receiptsRoot:Mt(Ge,null),blobGasUsed:Mt(gt,null),excessBlobGas:Mt(gt,null),miner:Mt(Dt),prevRandao:Mt(Ge,null),extraData:jo,baseFeePerGas:Mt(gt)},{prevRandao:["mixHash"]});function i2(r){const t=s2(r);return t.transactions=r.transactions.map(e=>typeof e=="string"?e:Em(e)),t}const o2=tc({transactionIndex:Nt,blockNumber:Nt,transactionHash:Ge,address:Dt,topics:Ta(Ge),data:jo,index:Nt,blockHash:Ge},{index:["logIndex"]});function a2(r){return o2(r)}const c2=tc({to:Mt(Dt,null),from:Mt(Dt,null),contractAddress:Mt(Dt,null),index:Nt,root:Mt(dt),gasUsed:gt,blobGasUsed:Mt(gt,null),logsBloom:Mt(jo),blockHash:Ge,hash:Ge,logs:Ta(a2),blockNumber:Nt,cumulativeGasUsed:gt,effectiveGasPrice:Mt(gt),blobGasPrice:Mt(gt,null),status:Mt(Nt),type:Mt(Nt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function u2(r){return c2(r)}function Em(r){r.to&&gt(r.to)===E0&&(r.to="0x0000000000000000000000000000000000000000");const t=tc({hash:Ge,index:Mt(Nt,void 0),type:e=>e==="0x"||e==null?0:Nt(e),accessList:Mt(Ei,null),blobVersionedHashes:Mt(Ta(Ge,!0),null),authorizationList:Mt(Ta(e=>{let n;if(e.signature)n=e.signature;else{let s=e.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),n=Object.assign({},e,{yParity:s})}return{address:Dt(e.address),chainId:gt(e.chainId),nonce:gt(e.nonce),signature:gn.from(n)}},!1),null),blockHash:Mt(Ge,null),blockNumber:Mt(Nt,null),transactionIndex:Mt(Nt,null),from:Dt,gasPrice:Mt(gt),maxPriorityFeePerGas:Mt(gt),maxFeePerGas:Mt(gt),maxFeePerBlobGas:Mt(gt,null),gasLimit:gt,to:Mt(Dt,null),value:gt,nonce:Nt,data:jo,creates:Mt(Dt,null),chainId:Mt(gt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(t.to==null&&t.creates==null&&(t.creates=Zx(t)),(r.type===1||r.type===2)&&r.accessList==null&&(t.accessList=[]),r.signature?t.signature=gn.from(r.signature):t.signature=gn.from(r),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&gt(t.blockHash)===E0&&(t.blockHash=null),t}const l2="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class ec{constructor(t){W(this,"name");bt(this,{name:t})}clone(){return new ec(this.name)}}class Lu extends ec{constructor(e,n){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);W(this,"effectiveBlock");W(this,"txBase");W(this,"txCreate");W(this,"txDataZero");W(this,"txDataNonzero");W(this,"txAccessListStorageKey");W(this,"txAccessListAddress");const s={effectiveBlock:e};function i(o,a){let c=(n||{})[o];c==null&&(c=a),q(typeof c=="number",`invalud value for ${o}`,"costs",n),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),bt(this,s)}clone(){return new Lu(this.effectiveBlock,this)}}class Uu extends ec{constructor(e,n){super("org.ethers.plugins.network.Ens");W(this,"address");W(this,"targetNetwork");bt(this,{address:e||l2,targetNetwork:n??1})}clone(){return new Uu(this.address,this.targetNetwork)}}var Ga,za;class f2 extends ec{constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");X(this,Ga);X(this,za);M(this,Ga,e),M(this,za,n)}get url(){return A(this,Ga)}get processFunc(){return A(this,za)}clone(){return this}}Ga=new WeakMap,za=new WeakMap;const zl=new Map;var Bo,So,hs;const Ki=class Ki{constructor(t,e){X(this,Bo);X(this,So);X(this,hs);M(this,Bo,t),M(this,So,gt(e)),M(this,hs,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return A(this,Bo)}set name(t){M(this,Bo,t)}get chainId(){return A(this,So)}set chainId(t){M(this,So,gt(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===gt(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===gt(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===gt(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(A(this,hs).values())}attachPlugin(t){if(A(this,hs).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return A(this,hs).set(t.name,t.clone()),this}getPlugin(t){return A(this,hs).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new Ki(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Lu;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let s=2;s<t.data.length;s+=2)t.data.substring(s,s+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const s=Ei(t.accessList);for(const i in s)n+=e.txAccessListAddress+e.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(t){if(h2(),t==null)return Ki.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=zl.get(t);if(e)return e();if(typeof t=="bigint")return new Ki("unknown",t);q(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){q(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new Ki(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new Uu(t.ensAddress,t.ensNetwork)),e}q(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=zl.get(t);n&&q(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),zl.set(t,e)}};Bo=new WeakMap,So=new WeakMap,hs=new WeakMap;let dr=Ki;function v0(r,t){const e=String(r);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=e.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function B0(r){return new f2(r,async(t,e,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),t()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:v0(a.maxFee,9),maxPriorityFeePerGas:v0(a.maxPriorityFee,9)}}catch(i){it(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let S0=!1;function h2(){if(S0)return;S0=!0;function r(t,e,n){const s=function(){const i=new dr(t,e);return n.ensNetwork!=null&&i.attachPlugin(new Uu(null,n.ensNetwork)),i.attachPlugin(new Lu),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};dr.register(t,s),dr.register(e,s),n.altNames&&n.altNames.forEach(i=>{dr.register(i,s)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[B0("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[B0("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function kf(r){return JSON.parse(JSON.stringify(r))}var Pr,Nn,ds,cr,Io,Nc;class d2{constructor(t){X(this,Io);X(this,Pr);X(this,Nn);X(this,ds);X(this,cr);M(this,Pr,t),M(this,Nn,null),M(this,ds,4e3),M(this,cr,-2)}get pollingInterval(){return A(this,ds)}set pollingInterval(t){M(this,ds,t)}start(){A(this,Nn)||(M(this,Nn,A(this,Pr)._setTimeout(at(this,Io,Nc).bind(this),A(this,ds))),at(this,Io,Nc).call(this))}stop(){A(this,Nn)&&(A(this,Pr)._clearTimeout(A(this,Nn)),M(this,Nn,null))}pause(t){this.stop(),t&&M(this,cr,-2)}resume(){this.start()}}Pr=new WeakMap,Nn=new WeakMap,ds=new WeakMap,cr=new WeakMap,Io=new WeakSet,Nc=async function(){try{const t=await A(this,Pr).getBlockNumber();if(A(this,cr)===-2){M(this,cr,t);return}if(t!==A(this,cr)){for(let e=A(this,cr)+1;e<=t;e++){if(A(this,Nn)==null)return;await A(this,Pr).emit("block",e)}M(this,cr,t)}}catch{}A(this,Nn)!=null&&M(this,Nn,A(this,Pr)._setTimeout(at(this,Io,Nc).bind(this),A(this,ds)))};var si,ii,ps;class mh{constructor(t){X(this,si);X(this,ii);X(this,ps);M(this,si,t),M(this,ps,!1),M(this,ii,e=>{this._poll(e,A(this,si))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){A(this,ps)||(M(this,ps,!0),A(this,ii).call(this,-2),A(this,si).on("block",A(this,ii)))}stop(){A(this,ps)&&(M(this,ps,!1),A(this,si).off("block",A(this,ii)))}pause(t){this.stop()}resume(){this.start()}}si=new WeakMap,ii=new WeakMap,ps=new WeakMap;var ko,Tr;class p2 extends mh{constructor(e,n){super(e);X(this,ko);X(this,Tr);M(this,ko,n),M(this,Tr,-2)}pause(e){e&&M(this,Tr,-2),super.pause(e)}async _poll(e,n){const s=await n.getBlock(A(this,ko));s!=null&&(A(this,Tr)===-2?M(this,Tr,s.number):s.number>A(this,Tr)&&(n.emit(A(this,ko),s.number),M(this,Tr,s.number)))}}ko=new WeakMap,Tr=new WeakMap;var uu;class g2 extends mh{constructor(e,n){super(e);X(this,uu);M(this,uu,kf(n))}async _poll(e,n){throw new Error("@TODO")}}uu=new WeakMap;var Ro;class m2 extends mh{constructor(e,n){super(e);X(this,Ro);M(this,Ro,n)}async _poll(e,n){const s=await n.getTransactionReceipt(A(this,Ro));s&&n.emit(A(this,Ro),s)}}Ro=new WeakMap;var Mr,No,Co,gs,Cn,lu,vm;class yh{constructor(t,e){X(this,lu);X(this,Mr);X(this,No);X(this,Co);X(this,gs);X(this,Cn);M(this,Mr,t),M(this,No,kf(e)),M(this,Co,at(this,lu,vm).bind(this)),M(this,gs,!1),M(this,Cn,-2)}start(){A(this,gs)||(M(this,gs,!0),A(this,Cn)===-2&&A(this,Mr).getBlockNumber().then(t=>{M(this,Cn,t)}),A(this,Mr).on("block",A(this,Co)))}stop(){A(this,gs)&&(M(this,gs,!1),A(this,Mr).off("block",A(this,Co)))}pause(t){this.stop(),t&&M(this,Cn,-2)}resume(){this.start()}}Mr=new WeakMap,No=new WeakMap,Co=new WeakMap,gs=new WeakMap,Cn=new WeakMap,lu=new WeakSet,vm=async function(t){if(A(this,Cn)===-2)return;const e=kf(A(this,No));e.fromBlock=A(this,Cn)+1,e.toBlock=t;const n=await A(this,Mr).getLogs(e);if(n.length===0){A(this,Cn)<t-60&&M(this,Cn,t-60);return}for(const s of n)A(this,Mr).emit(A(this,No),s),M(this,Cn,s.blockNumber)};const y2=BigInt(2),w2=10;function Ac(r){return r&&typeof r.then=="function"}function Cc(r,t){return r+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class Bm{constructor(t){W(this,"name");bt(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function b2(r){return JSON.parse(JSON.stringify(r))}function Rf(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function Kl(r,t){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(Vt(r,32)){const e=r.toLowerCase();return{type:"transaction",tag:Cc("tx",{hash:e}),hash:e}}if(r.orphan){const e=r;return{type:"orphan",tag:Cc("orphan",e),filter:b2(e)}}if(r.address||r.topics){const e=r,n={topics:(e.topics||[]).map(s=>s==null?null:Array.isArray(s)?Rf(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(e.address){const s=[],i=[],o=a=>{Vt(a)?s.push(a):i.push((async()=>{s.push(await an(a,t))})())};Array.isArray(e.address)?e.address.forEach(o):o(e.address),i.length&&await Promise.all(i),n.address=Rf(s.map(a=>a.toLowerCase()))}return{filter:n,tag:Cc("event",n),type:"event"}}q(!1,"unknown ProviderEvent","event",r)}function Vl(){return new Date().getTime()}const A2={cacheTimeout:250,pollingInterval:4e3};var Ze,ms,Ye,Po,vn,oi,ys,_r,Ka,Pn,To,Mo,Ct,wn,Nf,Cf,ha,Pf,da,Pc;class x2{constructor(t,e){X(this,Ct);X(this,Ze);X(this,ms);X(this,Ye);X(this,Po);X(this,vn);X(this,oi);X(this,ys);X(this,_r);X(this,Ka);X(this,Pn);X(this,To);X(this,Mo);if(M(this,Mo,Object.assign({},A2,e||{})),t==="any")M(this,oi,!0),M(this,vn,null);else if(t){const n=dr.from(t);M(this,oi,!1),M(this,vn,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else M(this,oi,!1),M(this,vn,null);M(this,_r,-1),M(this,ys,new Map),M(this,Ze,new Map),M(this,ms,new Map),M(this,Ye,null),M(this,Po,!1),M(this,Ka,1),M(this,Pn,new Map),M(this,To,!1)}get pollingInterval(){return A(this,Mo).pollingInterval}get provider(){return this}get plugins(){return Array.from(A(this,ms).values())}attachPlugin(t){if(A(this,ms).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return A(this,ms).set(t.name,t.connect(this)),this}getPlugin(t){return A(this,ms).get(t)||null}get disableCcipRead(){return A(this,To)}set disableCcipRead(t){M(this,To,!!t)}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const s=t.to.toLowerCase(),i=e.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],f=c.replace("{sender}",s).replace("{data}",i),h=new Ss(f);c.indexOf("{data}")===-1&&(h.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:a,urls:n});let y="unknown error",E;try{E=await h.send()}catch(b){o.push(b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:{error:b}});continue}try{const b=E.bodyJson;if(b.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:b}),b.data;b.message&&(y=b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:b})}catch{}it(E.statusCode<400||E.statusCode>=500,`response not found during CCIP fetch: ${y}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:y}}),o.push(y)}it(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:o}})}_wrapBlock(t,e){return new Hv(i2(t),this)}_wrapLog(t,e){return new Xa(r2(t),this)}_wrapTransactionReceipt(t,e){return new um(u2(t),this)}_wrapTransactionResponse(t,e){return new Pa(Em(t),this)}_detectNetwork(){it(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){it(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=Nt(await at(this,Ct,wn).call(this,{method:"getBlockNumber"}),"%response");return A(this,_r)>=0&&M(this,_r,t),t}_getAddress(t){return an(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(Vt(t))return Vt(t,32)?t:$n(t);if(typeof t=="bigint"&&(t=Nt(t,"blockTag")),typeof t=="number")return t>=0?$n(t):A(this,_r)>=0?$n(A(this,_r)+t):this.getBlockNumber().then(e=>$n(e+t));q(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?Rf(c.map(f=>f.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,s=(c,f,h)=>{let y;switch(c.length){case 0:break;case 1:y=c[0];break;default:c.sort(),y=c}if(n&&(f!=null||h!=null))throw new Error("invalid filter");const E={};return y&&(E.address=y),e.length&&(E.topics=e),f&&(E.fromBlock=f),h&&(E.toBlock=h),n&&(E.blockHash=n),E};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(t){const e=eu(t),n=[];if(["to","from"].forEach(s=>{if(e[s]==null)return;const i=an(e[s],this);Ac(i)?n.push(async function(){e[s]=await i}()):e[s]=i}),e.blockTag!=null){const s=this._getBlockTag(e.blockTag);Ac(s)?n.push(async function(){e.blockTag=await s}()):e.blockTag=s}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(A(this,vn)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw A(this,vn)===s&&M(this,vn,null),i}})();return M(this,vn,s),(await s).clone()}const t=A(this,vn),[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(A(this,oi)?(this.emit("network",n,e),A(this,vn)===t&&M(this,vn,Promise.resolve(n))):it(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await rn({_block:at(this,Ct,Pf).call(this,"latest",!1),gasPrice:(async()=>{try{const h=await at(this,Ct,wn).call(this,{method:"getGasPrice"});return gt(h,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const h=await at(this,Ct,wn).call(this,{method:"getPriorityFee"});return gt(h,"%response")}catch{}return null})()});let a=null,c=null;const f=this._wrapBlock(s,t);return f&&f.baseFeePerGas&&(c=o??BigInt("1000000000"),a=f.baseFeePerGas*y2+c),new w0(i,a,c)},n=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new Ss(n.url),i=await n.processFunc(e,this,s);return new w0(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return Ac(e)&&(e=await e),gt(await at(this,Ct,wn).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:n}=await rn({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await at(this,Ct,Cf).call(this,at(this,Ct,Nf).call(this,e,n,t.enableCcipRead?0:-1))}async getBalance(t,e){return gt(await at(this,Ct,ha).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return Nt(await at(this,Ct,ha).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return dt(await at(this,Ct,ha).call(this,{method:"getCode"},t,e))}async getStorage(t,e,n){const s=gt(e,"position");return dt(await at(this,Ct,ha).call(this,{method:"getStorage",position:s},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:s}=await rn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=$c.from(t);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(e)}async getBlock(t,e){const{network:n,params:s}=await rn({network:this.getNetwork(),params:at(this,Ct,Pf).call(this,t,!!e)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(t){const{network:e,params:n}=await rn({network:this.getNetwork(),params:at(this,Ct,wn).call(this,{method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await rn({network:this.getNetwork(),params:at(this,Ct,wn).call(this,{method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await at(this,Ct,wn).call(this,{method:"getTransaction",hash:t});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await rn({network:this.getNetwork(),result:at(this,Ct,wn).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:dt(e)}async getLogs(t){let e=this._getFilter(t);Ac(e)&&(e=await e);const{network:n,params:s}=await rn({network:this.getNetwork(),params:at(this,Ct,wn).call(this,{method:"getLogs",filter:e})});return s.map(i=>this._wrapLog(i,n))}_getProvider(t){it(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await ru.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=Dt(t);const e=xf(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await ru.getEnsAddress(this),i=await new wa(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===va)return null;const a=await new wa(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(a)!==t?null:a}catch(n){if(ze(n,"BAD_DATA")&&n.value==="0x"||ze(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const s=e??1;return s===0?this.getTransactionReceipt(t):new Promise(async(i,o)=>{let a=null;const c=async f=>{try{const h=await this.getTransactionReceipt(t);if(h!=null&&f-h.blockNumber+1>=s){i(h),a&&(clearTimeout(a),a=null);return}}catch(h){console.log("EEE",h)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Zt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){it(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=A(this,Pn).get(t);e&&(e.timer&&clearTimeout(e.timer),A(this,Pn).delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=na(this,Ka)._++,s=()=>{A(this,Pn).delete(n),t()};if(this.paused)A(this,Pn).set(n,{timer:null,func:s,time:e});else{const i=setTimeout(s,e);A(this,Pn).set(n,{timer:i,func:s,time:Vl()})}return n}_forEachSubscriber(t){for(const e of A(this,Ze).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Bm(t.type);case"block":{const e=new d2(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new p2(this,t.type);case"event":return new yh(this,t.filter);case"transaction":return new m2(this,t.hash);case"orphan":return new g2(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of A(this,Ze).values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),A(this,Ye)!=null&&e.pause(A(this,Ye));break}}async on(t,e){const n=await at(this,Ct,Pc).call(this,t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,A(this,Ye)!=null&&n.subscriber.pause(A(this,Ye))),this}async once(t,e){const n=await at(this,Ct,Pc).call(this,t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,A(this,Ye)!=null&&n.subscriber.pause(A(this,Ye))),this}async emit(t,...e){const n=await at(this,Ct,da).call(this,t,e);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new Dp(this,o?null:i,t);try{i.call(this,...e,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),A(this,Ze).delete(n.tag)),s>0}async listenerCount(t){if(t){const n=await at(this,Ct,da).call(this,t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of A(this,Ze).values())e+=n.length;return e}async listeners(t){if(t){const n=await at(this,Ct,da).call(this,t);return n?n.listeners.map(({listener:s})=>s):[]}let e=[];for(const{listeners:n}of A(this,Ze).values())e=e.concat(n.map(({listener:s})=>s));return e}async off(t,e){const n=await at(this,Ct,da).call(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),A(this,Ze).delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:s}=await at(this,Ct,Pc).call(this,t);n&&s.stop(),A(this,Ze).delete(e)}else for(const[e,{started:n,subscriber:s}]of A(this,Ze))n&&s.stop(),A(this,Ze).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return A(this,Po)}destroy(){this.removeAllListeners();for(const t of A(this,Pn).keys())this._clearTimeout(t);M(this,Po,!0)}get paused(){return A(this,Ye)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(M(this,_r,-1),A(this,Ye)!=null){if(A(this,Ye)==!!t)return;it(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),M(this,Ye,!!t);for(const e of A(this,Pn).values())e.timer&&clearTimeout(e.timer),e.time=Vl()-e.time}resume(){if(A(this,Ye)!=null){this._forEachSubscriber(t=>t.resume()),M(this,Ye,null);for(const t of A(this,Pn).values()){let e=t.time;e<0&&(e=0),t.time=Vl(),setTimeout(t.func,e)}}}}Ze=new WeakMap,ms=new WeakMap,Ye=new WeakMap,Po=new WeakMap,vn=new WeakMap,oi=new WeakMap,ys=new WeakMap,_r=new WeakMap,Ka=new WeakMap,Pn=new WeakMap,To=new WeakMap,Mo=new WeakMap,Ct=new WeakSet,wn=async function(t){const e=A(this,Mo).cacheTimeout;if(e<0)return await this._perform(t);const n=Cc(t.method,t);let s=A(this,ys).get(n);return s||(s=this._perform(t),A(this,ys).set(n,s),setTimeout(()=>{A(this,ys).get(n)===s&&A(this,ys).delete(n)},e)),await s},Nf=async function(t,e,n){it(n<w2,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const s=eu(t);try{return dt(await this._perform({method:"call",transaction:s,blockTag:e}))}catch(i){if(!this.disableCcipRead&&Xf(i)&&i.data&&n>=0&&e==="latest"&&s.to!=null&&oe(i.data,0,4)==="0x556f1830"){const o=i.data,a=await an(s.to,this);let c;try{c=I2(oe(i.data,4))}catch(y){it(!1,y.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}it(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const f=await this.ccipReadFetch(s,c.calldata,c.urls);it(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const h={to:a,data:ae([c.selector,S2([f,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const y=await at(this,Ct,Nf).call(this,h,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:y}),y}catch(y){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:y}),y}}throw i}},Cf=async function(t){const{value:e}=await rn({network:this.getNetwork(),value:t});return e},ha=async function(t,e,n){let s=this._getAddress(e),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await at(this,Ct,Cf).call(this,at(this,Ct,wn).call(this,Object.assign(t,{address:s,blockTag:i})))},Pf=async function(t,e){if(Vt(t,32))return await at(this,Ct,wn).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await at(this,Ct,wn).call(this,{method:"getBlock",blockTag:n,includeTransactions:e})},da=async function(t,e){let n=await Kl(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await Kl({orphan:"drop-log",log:e[0]},this)),A(this,Ze).get(n.tag)||null},Pc=async function(t){const e=await Kl(t,this),n=e.tag;let s=A(this,Ze).get(n);return s||(s={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},A(this,Ze).set(n,s)),s};function E2(r,t){try{const e=Tf(r,t);if(e)return Qc(e)}catch{}return null}function Tf(r,t){if(r==="0x")return null;try{const e=Nt(oe(r,t,t+32)),n=Nt(oe(r,e,e+32));return oe(r,e+32,e+32+n)}catch{}return null}function I0(r){const t=Me(r);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function v2(r){if(r.length%32===0)return r;const t=new Uint8Array(Math.ceil(r.length/32)*32);return t.set(r),t}const B2=new Uint8Array([]);function S2(r){const t=[];let e=0;for(let n=0;n<r.length;n++)t.push(B2),e+=32;for(let n=0;n<r.length;n++){const s=Rt(r[n]);t[n]=I0(e),t.push(I0(s.length)),t.push(v2(s)),e+=32+Math.ceil(s.length/32)*32}return ae(t)}const k0="0x0000000000000000000000000000000000000000000000000000000000000000";function I2(r){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};it(Qi(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=oe(r,0,32);it(oe(e,0,12)===oe(k0,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=oe(e,12);try{const n=[],s=Nt(oe(r,32,64)),i=Nt(oe(r,s,s+32)),o=oe(r,s+32);for(let a=0;a<i;a++){const c=E2(o,a*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{it(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Tf(r,64);if(n==null)throw new Error("abort");t.calldata=n}catch{it(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}it(oe(r,100,128)===oe(k0,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=oe(r,96,100);try{const n=Tf(r,128);if(n==null)throw new Error("abort");t.extraData=n}catch{it(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function Ps(r,t){if(r.provider)return r.provider;it(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function R0(r,t){let e=eu(t);if(e.to!=null&&(e.to=an(e.to,r)),e.from!=null){const n=e.from;e.from=Promise.all([r.getAddress(),an(n,r)]).then(([s,i])=>(q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else e.from=r.getAddress();return await rn(e)}class k2{constructor(t){W(this,"provider");bt(this,{provider:t||null})}async getNonce(t){return Ps(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await R0(this,t)}async populateTransaction(t){const e=Ps(this,"populateTransaction"),n=await R0(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=gt(n.chainId);q(o===s.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?q(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&i&&q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await e.getFeeData();it(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await e.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(it(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):it(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await rn(n)}async populateAuthorization(t){const e=Object.assign({},t);return e.chainId==null&&(e.chainId=(await Ps(this,"getNetwork").getNetwork()).chainId),e.nonce==null&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return Ps(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Ps(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Ps(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Ps(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const s=$c.from(n);return await e.broadcastTransaction(await this.signTransaction(s))}authorize(t){it(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function R2(r){return JSON.parse(JSON.stringify(r))}var nn,ur,ai,ws,ci,_o,ks,Mf,_f;class Sm{constructor(t){X(this,ks);X(this,nn);X(this,ur);X(this,ai);X(this,ws);X(this,ci);X(this,_o);M(this,nn,t),M(this,ur,null),M(this,ai,at(this,ks,Mf).bind(this)),M(this,ws,!1),M(this,ci,null),M(this,_o,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){A(this,ws)||(M(this,ws,!0),at(this,ks,Mf).call(this,-2))}stop(){A(this,ws)&&(M(this,ws,!1),M(this,_o,!0),at(this,ks,_f).call(this),A(this,nn).off("block",A(this,ai)))}pause(t){t&&at(this,ks,_f).call(this),A(this,nn).off("block",A(this,ai))}resume(){this.start()}}nn=new WeakMap,ur=new WeakMap,ai=new WeakMap,ws=new WeakMap,ci=new WeakMap,_o=new WeakMap,ks=new WeakSet,Mf=async function(t){try{A(this,ur)==null&&M(this,ur,this._subscribe(A(this,nn)));let e=null;try{e=await A(this,ur)}catch(i){if(!ze(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){M(this,ur,null),A(this,nn)._recoverSubscriber(this,this._recover(A(this,nn)));return}const n=await A(this,nn).getNetwork();if(A(this,ci)||M(this,ci,n),A(this,ci).chainId!==n.chainId)throw new Error("chaid changed");if(A(this,_o))return;const s=await A(this,nn).send("eth_getFilterChanges",[e]);await this._emitResults(A(this,nn),s)}catch(e){console.log("@TODO",e)}A(this,nn).once("block",A(this,ai))},_f=function(){const t=A(this,ur);t&&(M(this,ur,null),t.then(e=>{A(this,nn).destroyed||A(this,nn).send("eth_uninstallFilter",[e])}))};var ui;class N2 extends Sm{constructor(e,n){super(e);X(this,ui);M(this,ui,R2(n))}_recover(e){return new yh(e,A(this,ui))}async _subscribe(e){return await e.send("eth_newFilter",[A(this,ui)])}async _emitResults(e,n){for(const s of n)e.emit(A(this,ui),e._wrapLog(s,e._network))}}ui=new WeakMap;class C2 extends Sm{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const P2="bigint,boolean,function,number,string,symbol".split(/,/g);function Tc(r){if(r==null||P2.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(Tc);if(typeof r=="object")return Object.keys(r).reduce((t,e)=>(t[e]=r[e],t),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function T2(r){return new Promise(t=>{setTimeout(t,r)})}function Ci(r){return r&&r.toLowerCase()}function N0(r){return r&&typeof r.pollingInterval=="number"}const Im={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class ql extends k2{constructor(e,n){super(e);W(this,"address");n=Dt(n),bt(this,{address:n})}connect(e){it(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=Tc(e),s=[];if(n.from){const o=n.from;s.push((async()=>{const a=await an(o,this.provider);q(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;s.push((async()=>{n.to=await an(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const f=async()=>{try{const h=await this.provider.getTransaction(s);if(h!=null){i(h.replaceableTransaction(n));return}}catch(h){if(ze(h,"CANCELLED")||ze(h,"BAD_DATA")||ze(h,"NETWORK_ERROR")||ze(h,"UNSUPPORTED_OPERATION")){h.info==null&&(h.info={}),h.info.sendTransactionHash=s,o(h);return}if(ze(h,"INVALID_ARGUMENT")&&(c++,h.info==null&&(h.info={}),h.info.sendTransactionHash=s,c>10)){o(h);return}this.provider.emit("error",Zt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:h}))}this.provider._setTimeout(()=>{f()},a.pop()||4e3)};f()})}async signTransaction(e){const n=Tc(e);if(n.from){const i=await an(n.from,this.provider);q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const n=typeof e=="string"?Gr(e):e;return await this.provider.send("personal_sign",[dt(n),this.address.toLowerCase()])}async signTypedData(e,n,s){const i=Tc(s),o=await tu.resolveNames(e,n,i,async a=>{const c=await an(a);return q(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(tu.getPayload(o.domain,n,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?Gr(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),dt(n)])}}var li,Oo,Or,lr,Wn,Tn,fn,Va,Of;class M2 extends x2{constructor(e,n){super(e,n);X(this,Va);X(this,li);X(this,Oo);X(this,Or);X(this,lr);X(this,Wn);X(this,Tn);X(this,fn);M(this,Oo,1),M(this,li,Object.assign({},Im,n||{})),M(this,Or,[]),M(this,lr,null),M(this,Tn,null),M(this,fn,null);{let i=null;const o=new Promise(a=>{i=a});M(this,Wn,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(q(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&e!=null&&M(this,Tn,dr.from(e))):s&&(q(e==null||s.matches(e),"staticNetwork MUST match network object","options",n),M(this,Tn,s))}_getOption(e){return A(this,li)[e]}get _network(){return it(A(this,Tn),"network is not available yet","NETWORK_ERROR"),A(this,Tn)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&gt(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(A(this,Tn))return A(this,Tn)}else return e;return A(this,fn)?await A(this,fn):this.ready?(M(this,fn,(async()=>{try{const n=dr.from(gt(await this.send("eth_chainId",[])));return M(this,fn,null),n}catch(n){throw M(this,fn,null),n}})()),await A(this,fn)):(M(this,fn,(async()=>{const n={id:na(this,Oo)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],M(this,fn,null)}catch(i){throw M(this,fn,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return dr.from(gt(s.result));throw this.getRpcError(n,s)})()),await A(this,fn))}_start(){A(this,Wn)==null||A(this,Wn).resolve==null||(A(this,Wn).resolve(),M(this,Wn,null),(async()=>{for(;A(this,Tn)==null&&!this.destroyed;)try{M(this,Tn,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Zt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await T2(1e3)}at(this,Va,Of).call(this)})())}async _waitUntilReady(){if(A(this,Wn)!=null)return await A(this,Wn).promise}_getSubscriber(e){return e.type==="pending"?new C2(this):e.type==="event"?this._getOption("polling")?new yh(this,e.filter):new N2(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Bm("orphan"):super._getSubscriber(e)}get ready(){return A(this,Wn)==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=$n(gt(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(n[s]=dt(e[s]))}),e.accessList&&(n.accessList=Ei(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(n.authorizationList=e.authorizationList.map(s=>{const i=Rg(s);return{address:i.address,nonce:$n(i.nonce),chainId:$n(i.chainId),yParity:$n(i.signature.yParity),r:$n(i.signature.r),s:$n(i.signature.s)}})),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ci(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ci(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ci(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ci(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Ci):e.filter.address=Ci(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:s}=e,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Zt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return Zt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=Lf(i),f=Ca.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],c?c.data:null);return f.info={error:i,payload:e},f}const o=JSON.stringify(O2(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Zt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Zt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Zt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Zt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Zt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Zt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):Zt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(Zt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=na(this,Oo)._++,i=new Promise((o,a)=>{A(this,Or).push({resolve:o,reject:a,payload:{method:e,params:n,id:s,jsonrpc:"2.0"}})});return at(this,Va,Of).call(this),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new ql(this,i[e])}const{accounts:s}=await rn({network:this.getNetwork(),accounts:n});e=Dt(e);for(const i of s)if(Dt(i)===e)return new ql(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new ql(this,n))}destroy(){A(this,lr)&&(clearTimeout(A(this,lr)),M(this,lr,null));for(const{payload:e,reject:n}of A(this,Or))n(Zt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));M(this,Or,[]),super.destroy()}}li=new WeakMap,Oo=new WeakMap,Or=new WeakMap,lr=new WeakMap,Wn=new WeakMap,Tn=new WeakMap,fn=new WeakMap,Va=new WeakSet,Of=function(){if(A(this,lr))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");M(this,lr,setTimeout(()=>{M(this,lr,null);const n=A(this,Or);for(M(this,Or,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==A(this,li).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(o=>o.payload)).length>A(this,li).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:f}of s){if(this.destroyed){c(Zt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const h=o.filter(y=>y.id===f.id)[0];if(h==null){const y=Zt("missing response for request","BAD_DATA",{value:o,info:{payload:f}});this.emit("error",y),c(y);continue}if("error"in h){c(this.getRpcError(f,h));continue}a(h.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},e))};var bs;class _2 extends M2{constructor(e,n){super(e,n);X(this,bs);let s=this._getOption("pollingInterval");s==null&&(s=Im.pollingInterval),M(this,bs,s)}_getSubscriber(e){const n=super._getSubscriber(e);return N0(n)&&(n.pollingInterval=A(this,bs)),n}get pollingInterval(){return A(this,bs)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");M(this,bs,e),this._forEachSubscriber(n=>{N0(n)&&(n.pollingInterval=A(this,bs))})}}bs=new WeakMap;function Lf(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&Vt(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const t in r){const e=Lf(r[t]);if(e)return e}return null}if(typeof r=="string")try{return Lf(JSON.parse(r))}catch{}return null}function Uf(r,t){if(r!=null){if(typeof r.message=="string"&&t.push(r.message),typeof r=="object")for(const e in r)Uf(r[e],t);if(typeof r=="string")try{return Uf(JSON.parse(r),t)}catch{}}}function O2(r){const t=[];return Uf(r,t),t}var Lo,Uo;const Fs=class Fs extends _2{constructor(e,n,s){const i=Object.assign({},s??{},{batchMaxCount:1});q(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(n,i);X(this,Lo);X(this,Uo);M(this,Uo,null),s&&s.providerInfo&&M(this,Uo,s.providerInfo),M(this,Lo,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const f=await e.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:f}),f}catch(f){const h=new Error(f.message);throw h.code=f.code,h.data=f.data,h.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:h}),h}})}get providerInfo(){return A(this,Uo)}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){q(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await A(this,Lo).call(this,e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await A(this,Lo).call(this,"eth_requestAccounts",[])}catch(n){const s=n.payload;throw this.getRpcError(s,{id:s.id,error:n})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Fs(e.provider);const n=e.window?e.window:typeof window<"u"?window:null;if(n==null)return null;const s=e.anyProvider;if(s&&n.ethereum)return new Fs(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const f=E=>{c.push(E.detail),s&&h()},h=()=>{if(clearTimeout(y),c.length)if(e&&e.filter){const E=e.filter(c.map(b=>Object.assign({},b.info)));if(E==null)o(null);else if(E instanceof Fs)o(E);else{let b=null;if(E.uuid&&(b=c.filter(x=>E.uuid===x.info.uuid)[0]),b){const{provider:N,info:x}=b;o(new Fs(N,void 0,{providerInfo:x}))}else a(Zt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:E}))}}else{const{provider:E,info:b}=c[0];o(new Fs(E,void 0,{providerInfo:b}))}else o(null);n.removeEventListener("eip6963:announceProvider",f)},y=setTimeout(()=>{h()},i);n.addEventListener("eip6963:announceProvider",f),n.dispatchEvent(new Event("eip6963:requestProvider"))})}};Lo=new WeakMap,Uo=new WeakMap;let C0=Fs;export{C0 as B,q2 as C,Q2 as L,xt as P,Kc as S,Pi as T,W2 as p,Ty as r};
