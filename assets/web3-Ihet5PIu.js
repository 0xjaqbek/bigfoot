var Lm=Object.defineProperty;var Bh=r=>{throw TypeError(r)};var Pm=(r,t,e)=>t in r?Lm(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var W=(r,t,e)=>Pm(r,typeof t!="symbol"?t+"":t,e),il=(r,t,e)=>t.has(r)||Bh("Cannot "+e);var b=(r,t,e)=>(il(r,t,"read from private field"),e?e.call(r):t.get(r)),X=(r,t,e)=>t.has(r)?Bh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),k=(r,t,e,n)=>(il(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),at=(r,t,e)=>(il(r,t,"access private method"),e);var sa=(r,t,e,n)=>({set _(s){k(r,t,s,e)},get _(){return b(r,t,n)}});import{g as Gf,a as du}from"./vendor-BAeOovGq.js";var ol={},ia={},Ch;function Mm(){if(Ch)return ia;Ch=1,ia.byteLength=a,ia.toByteArray=f,ia.fromByteArray=_;for(var r=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],t[n.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(A){var O=A.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=A.indexOf("=");E===-1&&(E=O);var v=E===O?0:4-E%4;return[E,v]}function a(A){var O=o(A),E=O[0],v=O[1];return(E+v)*3/4-v}function c(A,O,E){return(O+E)*3/4-E}function f(A){var O,E=o(A),v=E[0],L=E[1],K=new e(c(A,v,L)),z=0,rt=L>0?v-4:v,V;for(V=0;V<rt;V+=4)O=t[A.charCodeAt(V)]<<18|t[A.charCodeAt(V+1)]<<12|t[A.charCodeAt(V+2)]<<6|t[A.charCodeAt(V+3)],K[z++]=O>>16&255,K[z++]=O>>8&255,K[z++]=O&255;return L===2&&(O=t[A.charCodeAt(V)]<<2|t[A.charCodeAt(V+1)]>>4,K[z++]=O&255),L===1&&(O=t[A.charCodeAt(V)]<<10|t[A.charCodeAt(V+1)]<<4|t[A.charCodeAt(V+2)]>>2,K[z++]=O>>8&255,K[z++]=O&255),K}function h(A){return r[A>>18&63]+r[A>>12&63]+r[A>>6&63]+r[A&63]}function y(A,O,E){for(var v,L=[],K=O;K<E;K+=3)v=(A[K]<<16&16711680)+(A[K+1]<<8&65280)+(A[K+2]&255),L.push(h(v));return L.join("")}function _(A){for(var O,E=A.length,v=E%3,L=[],K=16383,z=0,rt=E-v;z<rt;z+=K)L.push(y(A,z,z+K>rt?rt:z+K));return v===1?(O=A[E-1],L.push(r[O>>2]+r[O<<4&63]+"==")):v===2&&(O=(A[E-2]<<8)+A[E-1],L.push(r[O>>10]+r[O>>4&63]+r[O<<2&63]+"=")),L.join("")}return ia}var ic={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var kh;function Um(){return kh||(kh=1,ic.read=function(r,t,e,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,f=c>>1,h=-7,y=e?s-1:0,_=e?-1:1,A=r[t+y];for(y+=_,i=A&(1<<-h)-1,A>>=-h,h+=a;h>0;i=i*256+r[t+y],y+=_,h-=8);for(o=i&(1<<-h)-1,i>>=-h,h+=n;h>0;o=o*256+r[t+y],y+=_,h-=8);if(i===0)i=1-f;else{if(i===c)return o?NaN:(A?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-f}return(A?-1:1)*o*Math.pow(2,i-n)},ic.write=function(r,t,e,n,s,i){var o,a,c,f=i*8-s-1,h=(1<<f)-1,y=h>>1,_=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:i-1,O=n?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+y>=1?t+=_/c:t+=_*Math.pow(2,1-y),t*c>=2&&(o++,c/=2),o+y>=h?(a=0,o=h):o+y>=1?(a=(t*c-1)*Math.pow(2,s),o=o+y):(a=t*Math.pow(2,y-1)*Math.pow(2,s),o=0));s>=8;r[e+A]=a&255,A+=O,a/=256,s-=8);for(o=o<<s|a,f+=s;f>0;r[e+A]=o&255,A+=O,o/=256,f-=8);r[e+A-O]|=E*128}),ic}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Lh;function Hf(){return Lh||(Lh=1,function(r){const t=Mm(),e=Um(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=K,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const S=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(S,g),S.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(S){if(S>s)throw new RangeError('The value "'+S+'" is invalid for option "size"');const g=new Uint8Array(S);return Object.setPrototypeOf(g,a.prototype),g}function a(S,g,m){if(typeof S=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(S)}return c(S,g,m)}a.poolSize=8192;function c(S,g,m){if(typeof S=="string")return _(S,g);if(ArrayBuffer.isView(S))return O(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(yn(S,ArrayBuffer)||S&&yn(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(yn(S,SharedArrayBuffer)||S&&yn(S.buffer,SharedArrayBuffer)))return E(S,g,m);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=S.valueOf&&S.valueOf();if(B!=null&&B!==S)return a.from(B,g,m);const q=v(S);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return a.from(S[Symbol.toPrimitive]("string"),g,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}a.from=function(S,g,m){return c(S,g,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function f(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function h(S,g,m){return f(S),S<=0?o(S):g!==void 0?typeof m=="string"?o(S).fill(g,m):o(S).fill(g):o(S)}a.alloc=function(S,g,m){return h(S,g,m)};function y(S){return f(S),o(S<0?0:L(S)|0)}a.allocUnsafe=function(S){return y(S)},a.allocUnsafeSlow=function(S){return y(S)};function _(S,g){if((typeof g!="string"||g==="")&&(g="utf8"),!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const m=z(S,g)|0;let B=o(m);const q=B.write(S,g);return q!==m&&(B=B.slice(0,q)),B}function A(S){const g=S.length<0?0:L(S.length)|0,m=o(g);for(let B=0;B<g;B+=1)m[B]=S[B]&255;return m}function O(S){if(yn(S,Uint8Array)){const g=new Uint8Array(S);return E(g.buffer,g.byteOffset,g.byteLength)}return A(S)}function E(S,g,m){if(g<0||S.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<g+(m||0))throw new RangeError('"length" is outside of buffer bounds');let B;return g===void 0&&m===void 0?B=new Uint8Array(S):m===void 0?B=new Uint8Array(S,g):B=new Uint8Array(S,g,m),Object.setPrototypeOf(B,a.prototype),B}function v(S){if(a.isBuffer(S)){const g=L(S.length)|0,m=o(g);return m.length===0||S.copy(m,0,0,g),m}if(S.length!==void 0)return typeof S.length!="number"||jt(S.length)?o(0):A(S);if(S.type==="Buffer"&&Array.isArray(S.data))return A(S.data)}function L(S){if(S>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return S|0}function K(S){return+S!=S&&(S=0),a.alloc(+S)}a.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},a.compare=function(g,m){if(yn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),yn(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(g)||!a.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===m)return 0;let B=g.length,q=m.length;for(let J=0,tt=Math.min(B,q);J<tt;++J)if(g[J]!==m[J]){B=g[J],q=m[J];break}return B<q?-1:q<B?1:0},a.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(g,m){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let B;if(m===void 0)for(m=0,B=0;B<g.length;++B)m+=g[B].length;const q=a.allocUnsafe(m);let J=0;for(B=0;B<g.length;++B){let tt=g[B];if(yn(tt,Uint8Array))J+tt.length>q.length?(a.isBuffer(tt)||(tt=a.from(tt)),tt.copy(q,J)):Uint8Array.prototype.set.call(q,tt,J);else if(a.isBuffer(tt))tt.copy(q,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=tt.length}return q};function z(S,g){if(a.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||yn(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const m=S.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&m===0)return 0;let q=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Jt(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return Yt(S).length;default:if(q)return B?-1:Jt(S).length;g=(""+g).toLowerCase(),q=!0}}a.byteLength=z;function rt(S,g,m){let B=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,g>>>=0,m<=g))return"";for(S||(S="utf8");;)switch(S){case"hex":return D(this,g,m);case"utf8":case"utf-8":return u(this,g,m);case"ascii":return I(this,g,m);case"latin1":case"binary":return T(this,g,m);case"base64":return R(this,g,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,g,m);default:if(B)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),B=!0}}a.prototype._isBuffer=!0;function V(S,g,m){const B=S[g];S[g]=S[m],S[m]=B}a.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<g;m+=2)V(this,m,m+1);return this},a.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<g;m+=4)V(this,m,m+3),V(this,m+1,m+2);return this},a.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<g;m+=8)V(this,m,m+7),V(this,m+1,m+6),V(this,m+2,m+5),V(this,m+3,m+4);return this},a.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?u(this,0,g):rt.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},a.prototype.inspect=function(){let g="";const m=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(g+=" ... "),"<Buffer "+g+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(g,m,B,q,J){if(yn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(m===void 0&&(m=0),B===void 0&&(B=g?g.length:0),q===void 0&&(q=0),J===void 0&&(J=this.length),m<0||B>g.length||q<0||J>this.length)throw new RangeError("out of range index");if(q>=J&&m>=B)return 0;if(q>=J)return-1;if(m>=B)return 1;if(m>>>=0,B>>>=0,q>>>=0,J>>>=0,this===g)return 0;let tt=J-q,St=B-m;const Rt=Math.min(tt,St),_t=this.slice(q,J),Qt=g.slice(m,B);for(let bt=0;bt<Rt;++bt)if(_t[bt]!==Qt[bt]){tt=_t[bt],St=Qt[bt];break}return tt<St?-1:St<tt?1:0};function Y(S,g,m,B,q){if(S.length===0)return-1;if(typeof m=="string"?(B=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,jt(m)&&(m=q?0:S.length-1),m<0&&(m=S.length+m),m>=S.length){if(q)return-1;m=S.length-1}else if(m<0)if(q)m=0;else return-1;if(typeof g=="string"&&(g=a.from(g,B)),a.isBuffer(g))return g.length===0?-1:st(S,g,m,B,q);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(S,g,m):Uint8Array.prototype.lastIndexOf.call(S,g,m):st(S,[g],m,B,q);throw new TypeError("val must be string, number or Buffer")}function st(S,g,m,B,q){let J=1,tt=S.length,St=g.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(S.length<2||g.length<2)return-1;J=2,tt/=2,St/=2,m/=2}function Rt(Qt,bt){return J===1?Qt[bt]:Qt.readUInt16BE(bt*J)}let _t;if(q){let Qt=-1;for(_t=m;_t<tt;_t++)if(Rt(S,_t)===Rt(g,Qt===-1?0:_t-Qt)){if(Qt===-1&&(Qt=_t),_t-Qt+1===St)return Qt*J}else Qt!==-1&&(_t-=_t-Qt),Qt=-1}else for(m+St>tt&&(m=tt-St),_t=m;_t>=0;_t--){let Qt=!0;for(let bt=0;bt<St;bt++)if(Rt(S,_t+bt)!==Rt(g,bt)){Qt=!1;break}if(Qt)return _t}return-1}a.prototype.includes=function(g,m,B){return this.indexOf(g,m,B)!==-1},a.prototype.indexOf=function(g,m,B){return Y(this,g,m,B,!0)},a.prototype.lastIndexOf=function(g,m,B){return Y(this,g,m,B,!1)};function et(S,g,m,B){m=Number(m)||0;const q=S.length-m;B?(B=Number(B),B>q&&(B=q)):B=q;const J=g.length;B>J/2&&(B=J/2);let tt;for(tt=0;tt<B;++tt){const St=parseInt(g.substr(tt*2,2),16);if(jt(St))return tt;S[m+tt]=St}return tt}function U(S,g,m,B){return Wt(Jt(g,S.length-m),S,m,B)}function P(S,g,m,B){return Wt(ne(g),S,m,B)}function M(S,g,m,B){return Wt(Yt(g),S,m,B)}function H(S,g,m,B){return Wt(sc(g,S.length-m),S,m,B)}a.prototype.write=function(g,m,B,q){if(m===void 0)q="utf8",B=this.length,m=0;else if(B===void 0&&typeof m=="string")q=m,B=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(B)?(B=B>>>0,q===void 0&&(q="utf8")):(q=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const J=this.length-m;if((B===void 0||B>J)&&(B=J),g.length>0&&(B<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let tt=!1;for(;;)switch(q){case"hex":return et(this,g,m,B);case"utf8":case"utf-8":return U(this,g,m,B);case"ascii":case"latin1":case"binary":return P(this,g,m,B);case"base64":return M(this,g,m,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,g,m,B);default:if(tt)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),tt=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(S,g,m){return g===0&&m===S.length?t.fromByteArray(S):t.fromByteArray(S.slice(g,m))}function u(S,g,m){m=Math.min(S.length,m);const B=[];let q=g;for(;q<m;){const J=S[q];let tt=null,St=J>239?4:J>223?3:J>191?2:1;if(q+St<=m){let Rt,_t,Qt,bt;switch(St){case 1:J<128&&(tt=J);break;case 2:Rt=S[q+1],(Rt&192)===128&&(bt=(J&31)<<6|Rt&63,bt>127&&(tt=bt));break;case 3:Rt=S[q+1],_t=S[q+2],(Rt&192)===128&&(_t&192)===128&&(bt=(J&15)<<12|(Rt&63)<<6|_t&63,bt>2047&&(bt<55296||bt>57343)&&(tt=bt));break;case 4:Rt=S[q+1],_t=S[q+2],Qt=S[q+3],(Rt&192)===128&&(_t&192)===128&&(Qt&192)===128&&(bt=(J&15)<<18|(Rt&63)<<12|(_t&63)<<6|Qt&63,bt>65535&&bt<1114112&&(tt=bt))}}tt===null?(tt=65533,St=1):tt>65535&&(tt-=65536,B.push(tt>>>10&1023|55296),tt=56320|tt&1023),B.push(tt),q+=St}return w(B)}const p=4096;function w(S){const g=S.length;if(g<=p)return String.fromCharCode.apply(String,S);let m="",B=0;for(;B<g;)m+=String.fromCharCode.apply(String,S.slice(B,B+=p));return m}function I(S,g,m){let B="";m=Math.min(S.length,m);for(let q=g;q<m;++q)B+=String.fromCharCode(S[q]&127);return B}function T(S,g,m){let B="";m=Math.min(S.length,m);for(let q=g;q<m;++q)B+=String.fromCharCode(S[q]);return B}function D(S,g,m){const B=S.length;(!g||g<0)&&(g=0),(!m||m<0||m>B)&&(m=B);let q="";for(let J=g;J<m;++J)q+=re[S[J]];return q}function G(S,g,m){const B=S.slice(g,m);let q="";for(let J=0;J<B.length-1;J+=2)q+=String.fromCharCode(B[J]+B[J+1]*256);return q}a.prototype.slice=function(g,m){const B=this.length;g=~~g,m=m===void 0?B:~~m,g<0?(g+=B,g<0&&(g=0)):g>B&&(g=B),m<0?(m+=B,m<0&&(m=0)):m>B&&(m=B),m<g&&(m=g);const q=this.subarray(g,m);return Object.setPrototypeOf(q,a.prototype),q};function N(S,g,m){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+g>m)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(g,m,B){g=g>>>0,m=m>>>0,B||N(g,m,this.length);let q=this[g],J=1,tt=0;for(;++tt<m&&(J*=256);)q+=this[g+tt]*J;return q},a.prototype.readUintBE=a.prototype.readUIntBE=function(g,m,B){g=g>>>0,m=m>>>0,B||N(g,m,this.length);let q=this[g+--m],J=1;for(;m>0&&(J*=256);)q+=this[g+--m]*J;return q},a.prototype.readUint8=a.prototype.readUInt8=function(g,m){return g=g>>>0,m||N(g,1,this.length),this[g]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(g,m){return g=g>>>0,m||N(g,2,this.length),this[g]|this[g+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(g,m){return g=g>>>0,m||N(g,2,this.length),this[g]<<8|this[g+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(g,m){return g=g>>>0,m||N(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(g,m){return g=g>>>0,m||N(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},a.prototype.readBigUInt64LE=Un(function(g){g=g>>>0,ce(g,"offset");const m=this[g],B=this[g+7];(m===void 0||B===void 0)&&Pt(g,this.length-8);const q=m+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,J=this[++g]+this[++g]*2**8+this[++g]*2**16+B*2**24;return BigInt(q)+(BigInt(J)<<BigInt(32))}),a.prototype.readBigUInt64BE=Un(function(g){g=g>>>0,ce(g,"offset");const m=this[g],B=this[g+7];(m===void 0||B===void 0)&&Pt(g,this.length-8);const q=m*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],J=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+B;return(BigInt(q)<<BigInt(32))+BigInt(J)}),a.prototype.readIntLE=function(g,m,B){g=g>>>0,m=m>>>0,B||N(g,m,this.length);let q=this[g],J=1,tt=0;for(;++tt<m&&(J*=256);)q+=this[g+tt]*J;return J*=128,q>=J&&(q-=Math.pow(2,8*m)),q},a.prototype.readIntBE=function(g,m,B){g=g>>>0,m=m>>>0,B||N(g,m,this.length);let q=m,J=1,tt=this[g+--q];for(;q>0&&(J*=256);)tt+=this[g+--q]*J;return J*=128,tt>=J&&(tt-=Math.pow(2,8*m)),tt},a.prototype.readInt8=function(g,m){return g=g>>>0,m||N(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},a.prototype.readInt16LE=function(g,m){g=g>>>0,m||N(g,2,this.length);const B=this[g]|this[g+1]<<8;return B&32768?B|4294901760:B},a.prototype.readInt16BE=function(g,m){g=g>>>0,m||N(g,2,this.length);const B=this[g+1]|this[g]<<8;return B&32768?B|4294901760:B},a.prototype.readInt32LE=function(g,m){return g=g>>>0,m||N(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},a.prototype.readInt32BE=function(g,m){return g=g>>>0,m||N(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},a.prototype.readBigInt64LE=Un(function(g){g=g>>>0,ce(g,"offset");const m=this[g],B=this[g+7];(m===void 0||B===void 0)&&Pt(g,this.length-8);const q=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(B<<24);return(BigInt(q)<<BigInt(32))+BigInt(m+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),a.prototype.readBigInt64BE=Un(function(g){g=g>>>0,ce(g,"offset");const m=this[g],B=this[g+7];(m===void 0||B===void 0)&&Pt(g,this.length-8);const q=(m<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(q)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+B)}),a.prototype.readFloatLE=function(g,m){return g=g>>>0,m||N(g,4,this.length),e.read(this,g,!0,23,4)},a.prototype.readFloatBE=function(g,m){return g=g>>>0,m||N(g,4,this.length),e.read(this,g,!1,23,4)},a.prototype.readDoubleLE=function(g,m){return g=g>>>0,m||N(g,8,this.length),e.read(this,g,!0,52,8)},a.prototype.readDoubleBE=function(g,m){return g=g>>>0,m||N(g,8,this.length),e.read(this,g,!1,52,8)};function l(S,g,m,B,q,J){if(!a.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>q||g<J)throw new RangeError('"value" argument is out of bounds');if(m+B>S.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(g,m,B,q){if(g=+g,m=m>>>0,B=B>>>0,!q){const St=Math.pow(2,8*B)-1;l(this,g,m,B,St,0)}let J=1,tt=0;for(this[m]=g&255;++tt<B&&(J*=256);)this[m+tt]=g/J&255;return m+B},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(g,m,B,q){if(g=+g,m=m>>>0,B=B>>>0,!q){const St=Math.pow(2,8*B)-1;l(this,g,m,B,St,0)}let J=B-1,tt=1;for(this[m+J]=g&255;--J>=0&&(tt*=256);)this[m+J]=g/tt&255;return m+B},a.prototype.writeUint8=a.prototype.writeUInt8=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,1,255,0),this[m]=g&255,m+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,2,65535,0),this[m]=g&255,this[m+1]=g>>>8,m+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,2,65535,0),this[m]=g>>>8,this[m+1]=g&255,m+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,4,4294967295,0),this[m+3]=g>>>24,this[m+2]=g>>>16,this[m+1]=g>>>8,this[m]=g&255,m+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,4,4294967295,0),this[m]=g>>>24,this[m+1]=g>>>16,this[m+2]=g>>>8,this[m+3]=g&255,m+4};function d(S,g,m,B,q){Ut(g,B,q,S,m,7);let J=Number(g&BigInt(4294967295));S[m++]=J,J=J>>8,S[m++]=J,J=J>>8,S[m++]=J,J=J>>8,S[m++]=J;let tt=Number(g>>BigInt(32)&BigInt(4294967295));return S[m++]=tt,tt=tt>>8,S[m++]=tt,tt=tt>>8,S[m++]=tt,tt=tt>>8,S[m++]=tt,m}function x(S,g,m,B,q){Ut(g,B,q,S,m,7);let J=Number(g&BigInt(4294967295));S[m+7]=J,J=J>>8,S[m+6]=J,J=J>>8,S[m+5]=J,J=J>>8,S[m+4]=J;let tt=Number(g>>BigInt(32)&BigInt(4294967295));return S[m+3]=tt,tt=tt>>8,S[m+2]=tt,tt=tt>>8,S[m+1]=tt,tt=tt>>8,S[m]=tt,m+8}a.prototype.writeBigUInt64LE=Un(function(g,m=0){return d(this,g,m,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Un(function(g,m=0){return x(this,g,m,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(g,m,B,q){if(g=+g,m=m>>>0,!q){const Rt=Math.pow(2,8*B-1);l(this,g,m,B,Rt-1,-Rt)}let J=0,tt=1,St=0;for(this[m]=g&255;++J<B&&(tt*=256);)g<0&&St===0&&this[m+J-1]!==0&&(St=1),this[m+J]=(g/tt>>0)-St&255;return m+B},a.prototype.writeIntBE=function(g,m,B,q){if(g=+g,m=m>>>0,!q){const Rt=Math.pow(2,8*B-1);l(this,g,m,B,Rt-1,-Rt)}let J=B-1,tt=1,St=0;for(this[m+J]=g&255;--J>=0&&(tt*=256);)g<0&&St===0&&this[m+J+1]!==0&&(St=1),this[m+J]=(g/tt>>0)-St&255;return m+B},a.prototype.writeInt8=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,1,127,-128),g<0&&(g=255+g+1),this[m]=g&255,m+1},a.prototype.writeInt16LE=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,2,32767,-32768),this[m]=g&255,this[m+1]=g>>>8,m+2},a.prototype.writeInt16BE=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,2,32767,-32768),this[m]=g>>>8,this[m+1]=g&255,m+2},a.prototype.writeInt32LE=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,4,2147483647,-2147483648),this[m]=g&255,this[m+1]=g>>>8,this[m+2]=g>>>16,this[m+3]=g>>>24,m+4},a.prototype.writeInt32BE=function(g,m,B){return g=+g,m=m>>>0,B||l(this,g,m,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[m]=g>>>24,this[m+1]=g>>>16,this[m+2]=g>>>8,this[m+3]=g&255,m+4},a.prototype.writeBigInt64LE=Un(function(g,m=0){return d(this,g,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Un(function(g,m=0){return x(this,g,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function C(S,g,m,B,q,J){if(m+B>S.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Q(S,g,m,B,q){return g=+g,m=m>>>0,q||C(S,g,m,4),e.write(S,g,m,B,23,4),m+4}a.prototype.writeFloatLE=function(g,m,B){return Q(this,g,m,!0,B)},a.prototype.writeFloatBE=function(g,m,B){return Q(this,g,m,!1,B)};function nt(S,g,m,B,q){return g=+g,m=m>>>0,q||C(S,g,m,8),e.write(S,g,m,B,52,8),m+8}a.prototype.writeDoubleLE=function(g,m,B){return nt(this,g,m,!0,B)},a.prototype.writeDoubleBE=function(g,m,B){return nt(this,g,m,!1,B)},a.prototype.copy=function(g,m,B,q){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(B||(B=0),!q&&q!==0&&(q=this.length),m>=g.length&&(m=g.length),m||(m=0),q>0&&q<B&&(q=B),q===B||g.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),g.length-m<q-B&&(q=g.length-m+B);const J=q-B;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,B,q):Uint8Array.prototype.set.call(g,this.subarray(B,q),m),J},a.prototype.fill=function(g,m,B,q){if(typeof g=="string"){if(typeof m=="string"?(q=m,m=0,B=this.length):typeof B=="string"&&(q=B,B=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!a.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(g.length===1){const tt=g.charCodeAt(0);(q==="utf8"&&tt<128||q==="latin1")&&(g=tt)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(m<0||this.length<m||this.length<B)throw new RangeError("Out of range index");if(B<=m)return this;m=m>>>0,B=B===void 0?this.length:B>>>0,g||(g=0);let J;if(typeof g=="number")for(J=m;J<B;++J)this[J]=g;else{const tt=a.isBuffer(g)?g:a.from(g,q),St=tt.length;if(St===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(J=0;J<B-m;++J)this[J+m]=tt[J%St]}return this};const ft={};function mt(S,g,m){ft[S]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}mt("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),mt("ERR_INVALID_ARG_TYPE",function(S,g){return`The "${S}" argument must be of type number. Received type ${typeof g}`},TypeError),mt("ERR_OUT_OF_RANGE",function(S,g,m){let B=`The value of "${S}" is out of range.`,q=m;return Number.isInteger(m)&&Math.abs(m)>2**32?q=$t(String(m)):typeof m=="bigint"&&(q=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(q=$t(q)),q+="n"),B+=` It must be ${g}. Received ${q}`,B},RangeError);function $t(S){let g="",m=S.length;const B=S[0]==="-"?1:0;for(;m>=B+4;m-=3)g=`_${S.slice(m-3,m)}${g}`;return`${S.slice(0,m)}${g}`}function Ct(S,g,m){ce(g,"offset"),(S[g]===void 0||S[g+m]===void 0)&&Pt(g,S.length-(m+1))}function Ut(S,g,m,B,q,J){if(S>m||S<g){const tt=typeof g=="bigint"?"n":"";let St;throw g===0||g===BigInt(0)?St=`>= 0${tt} and < 2${tt} ** ${(J+1)*8}${tt}`:St=`>= -(2${tt} ** ${(J+1)*8-1}${tt}) and < 2 ** ${(J+1)*8-1}${tt}`,new ft.ERR_OUT_OF_RANGE("value",St,S)}Ct(B,q,J)}function ce(S,g){if(typeof S!="number")throw new ft.ERR_INVALID_ARG_TYPE(g,"number",S)}function Pt(S,g,m){throw Math.floor(S)!==S?(ce(S,m),new ft.ERR_OUT_OF_RANGE("offset","an integer",S)):g<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,S)}const qt=/[^+/0-9A-Za-z-_]/g;function Bs(S){if(S=S.split("=")[0],S=S.trim().replace(qt,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function Jt(S,g){g=g||1/0;let m;const B=S.length;let q=null;const J=[];for(let tt=0;tt<B;++tt){if(m=S.charCodeAt(tt),m>55295&&m<57344){if(!q){if(m>56319){(g-=3)>-1&&J.push(239,191,189);continue}else if(tt+1===B){(g-=3)>-1&&J.push(239,191,189);continue}q=m;continue}if(m<56320){(g-=3)>-1&&J.push(239,191,189),q=m;continue}m=(q-55296<<10|m-56320)+65536}else q&&(g-=3)>-1&&J.push(239,191,189);if(q=null,m<128){if((g-=1)<0)break;J.push(m)}else if(m<2048){if((g-=2)<0)break;J.push(m>>6|192,m&63|128)}else if(m<65536){if((g-=3)<0)break;J.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((g-=4)<0)break;J.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return J}function ne(S){const g=[];for(let m=0;m<S.length;++m)g.push(S.charCodeAt(m)&255);return g}function sc(S,g){let m,B,q;const J=[];for(let tt=0;tt<S.length&&!((g-=2)<0);++tt)m=S.charCodeAt(tt),B=m>>8,q=m%256,J.push(q),J.push(B);return J}function Yt(S){return t.toByteArray(Bs(S))}function Wt(S,g,m,B){let q;for(q=0;q<B&&!(q+m>=g.length||q>=S.length);++q)g[q+m]=S[q];return q}function yn(S,g){return S instanceof g||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===g.name}function jt(S){return S!==S}const re=function(){const S="0123456789abcdef",g=new Array(256);for(let m=0;m<16;++m){const B=m*16;for(let q=0;q<16;++q)g[B+q]=S[m]+S[q]}return g}();function Un(S){return typeof BigInt>"u"?se:S}function se(){throw new Error("BigInt not supported")}}(ol)),ol}var It=Hf();const xi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zf(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Ql(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function mr(r,...t){if(!zf(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Dm(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ql(r.outputLen),Ql(r.blockLen)}function Pc(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Fm(r,t){mr(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Go(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function al(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Xn(r,t){return r<<32-t|r>>>t}const L0=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Gm=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Ho(r){if(mr(r),L0)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=Gm[r[e]];return t}const Ar={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ph(r){if(r>=Ar._0&&r<=Ar._9)return r-Ar._0;if(r>=Ar.A&&r<=Ar.F)return r-(Ar.A-10);if(r>=Ar.a&&r<=Ar.f)return r-(Ar.a-10)}function Vf(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(L0)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Ph(r.charCodeAt(i)),a=Ph(r.charCodeAt(i+1));if(o===void 0||a===void 0){const c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Hm(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Kf(r){return typeof r=="string"&&(r=Hm(r)),mr(r),r}function Hr(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];mr(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}let P0=class{};function M0(r){const t=n=>r().update(Kf(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function U0(r=32){if(xi&&typeof xi.getRandomValues=="function")return xi.getRandomValues(new Uint8Array(r));if(xi&&typeof xi.randomBytes=="function")return Uint8Array.from(xi.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function zm(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),c=n?4:0,f=n?0:4;r.setUint32(t+c,o,n),r.setUint32(t+f,a,n)}function Vm(r,t,e){return r&t^~r&e}function Km(r,t,e){return r&t^r&e^t&e}class D0 extends P0{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=al(this.buffer)}update(t){Pc(this),t=Kf(t),mr(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=al(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pc(this),Fm(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Go(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let y=o;y<s;y++)e[y]=0;zm(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=al(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<f;y++)a.setUint32(4*y,h[y],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=a,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Qr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$e=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),oc=BigInt(2**32-1),Mh=BigInt(32);function $m(r,t=!1){return t?{h:Number(r&oc),l:Number(r>>Mh&oc)}:{h:Number(r>>Mh&oc)|0,l:Number(r&oc)|0}}function qm(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:a}=$m(r[i],t);[n[i],s[i]]=[o,a]}return[n,s]}const Uh=(r,t,e)=>r>>>e,Dh=(r,t,e)=>r<<32-e|t>>>e,Ii=(r,t,e)=>r>>>e|t<<32-e,Ni=(r,t,e)=>r<<32-e|t>>>e,ac=(r,t,e)=>r<<64-e|t>>>e-32,cc=(r,t,e)=>r>>>e-32|t<<64-e;function br(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Wm=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Qm=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Jm=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),jm=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,Zm=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Ym=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Xm=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Jr=new Uint32Array(64);let ty=class extends D0{constructor(t=32){super(64,t,8,!1),this.A=Qr[0]|0,this.B=Qr[1]|0,this.C=Qr[2]|0,this.D=Qr[3]|0,this.E=Qr[4]|0,this.F=Qr[5]|0,this.G=Qr[6]|0,this.H=Qr[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,e,n,s,i,o,a,c]}set(t,e,n,s,i,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let y=0;y<16;y++,e+=4)Jr[y]=t.getUint32(e,!1);for(let y=16;y<64;y++){const _=Jr[y-15],A=Jr[y-2],O=Xn(_,7)^Xn(_,18)^_>>>3,E=Xn(A,17)^Xn(A,19)^A>>>10;Jr[y]=E+Jr[y-7]+O+Jr[y-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:f,H:h}=this;for(let y=0;y<64;y++){const _=Xn(a,6)^Xn(a,11)^Xn(a,25),A=h+_+Vm(a,c,f)+Xm[y]+Jr[y]|0,E=(Xn(n,2)^Xn(n,13)^Xn(n,22))+Km(n,s,i)|0;h=f,f=c,c=a,a=o+A|0,o=i,i=s,s=n,n=A+E|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,s,i,o,a,c,f,h)}roundClean(){Go(Jr)}destroy(){this.set(0,0,0,0,0,0,0,0),Go(this.buffer)}};const F0=qm(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),ey=F0[0],ny=F0[1],jr=new Uint32Array(80),Zr=new Uint32Array(80);let ry=class extends D0{constructor(t=64){super(128,t,16,!1),this.Ah=$e[0]|0,this.Al=$e[1]|0,this.Bh=$e[2]|0,this.Bl=$e[3]|0,this.Ch=$e[4]|0,this.Cl=$e[5]|0,this.Dh=$e[6]|0,this.Dl=$e[7]|0,this.Eh=$e[8]|0,this.El=$e[9]|0,this.Fh=$e[10]|0,this.Fl=$e[11]|0,this.Gh=$e[12]|0,this.Gl=$e[13]|0,this.Hh=$e[14]|0,this.Hl=$e[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:f,El:h,Fh:y,Fl:_,Gh:A,Gl:O,Hh:E,Hl:v}=this;return[t,e,n,s,i,o,a,c,f,h,y,_,A,O,E,v]}set(t,e,n,s,i,o,a,c,f,h,y,_,A,O,E,v){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=h|0,this.Fh=y|0,this.Fl=_|0,this.Gh=A|0,this.Gl=O|0,this.Hh=E|0,this.Hl=v|0}process(t,e){for(let z=0;z<16;z++,e+=4)jr[z]=t.getUint32(e),Zr[z]=t.getUint32(e+=4);for(let z=16;z<80;z++){const rt=jr[z-15]|0,V=Zr[z-15]|0,Y=Ii(rt,V,1)^Ii(rt,V,8)^Uh(rt,V,7),st=Ni(rt,V,1)^Ni(rt,V,8)^Dh(rt,V,7),et=jr[z-2]|0,U=Zr[z-2]|0,P=Ii(et,U,19)^ac(et,U,61)^Uh(et,U,6),M=Ni(et,U,19)^cc(et,U,61)^Dh(et,U,6),H=Jm(st,M,Zr[z-7],Zr[z-16]),R=jm(H,Y,P,jr[z-7],jr[z-16]);jr[z]=R|0,Zr[z]=H|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:f,Dl:h,Eh:y,El:_,Fh:A,Fl:O,Gh:E,Gl:v,Hh:L,Hl:K}=this;for(let z=0;z<80;z++){const rt=Ii(y,_,14)^Ii(y,_,18)^ac(y,_,41),V=Ni(y,_,14)^Ni(y,_,18)^cc(y,_,41),Y=y&A^~y&E,st=_&O^~_&v,et=Zm(K,V,st,ny[z],Zr[z]),U=Ym(et,L,rt,Y,ey[z],jr[z]),P=et|0,M=Ii(n,s,28)^ac(n,s,34)^ac(n,s,39),H=Ni(n,s,28)^cc(n,s,34)^cc(n,s,39),R=n&i^n&a^i&a,u=s&o^s&c^o&c;L=E|0,K=v|0,E=A|0,v=O|0,A=y|0,O=_|0,{h:y,l:_}=br(f|0,h|0,U|0,P|0),f=a|0,h=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const p=Wm(P,H,u);n=Qm(p,U,M,R),s=p|0}({h:n,l:s}=br(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=br(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=br(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:h}=br(this.Dh|0,this.Dl|0,f|0,h|0),{h:y,l:_}=br(this.Eh|0,this.El|0,y|0,_|0),{h:A,l:O}=br(this.Fh|0,this.Fl|0,A|0,O|0),{h:E,l:v}=br(this.Gh|0,this.Gl|0,E|0,v|0),{h:L,l:K}=br(this.Hh|0,this.Hl|0,L|0,K|0),this.set(n,s,i,o,a,c,f,h,y,_,A,O,E,v,L,K)}roundClean(){Go(jr,Zr)}destroy(){Go(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const G0=M0(()=>new ty),sy=M0(()=>new ry);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $f=BigInt(0),Jl=BigInt(1);function gi(r,t){if(typeof t!="boolean")throw new Error(r+" boolean expected, got "+t)}function uc(r){const t=r.toString(16);return t.length&1?"0"+t:t}function H0(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?$f:BigInt("0x"+r)}function pu(r){return H0(Ho(r))}function _a(r){return mr(r),H0(Ho(Uint8Array.from(r).reverse()))}function qf(r,t){return Vf(r.toString(16).padStart(t*2,"0"))}function gu(r,t){return qf(r,t).reverse()}function le(r,t,e){let n;if(typeof t=="string")try{n=Vf(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(zf(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}const cl=r=>typeof r=="bigint"&&$f<=r;function iy(r,t,e){return cl(r)&&cl(t)&&cl(e)&&t<=r&&r<e}function Di(r,t,e,n){if(!iy(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function oy(r){let t;for(t=0;r>$f;r>>=Jl,t+=1);return t}const mu=r=>(Jl<<BigInt(r))-Jl;function ay(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=A=>new Uint8Array(A),s=A=>Uint8Array.of(A);let i=n(r),o=n(r),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},f=(...A)=>e(o,i,...A),h=(A=n(0))=>{o=f(s(0),A),i=f(),A.length!==0&&(o=f(s(1),A),i=f())},y=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let A=0;const O=[];for(;A<t;){i=f();const E=i.slice();O.push(E),A+=i.length}return Hr(...O)};return(A,O)=>{c(),h(A);let E;for(;!(E=O(y()));)h();return c(),E}}function Wa(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const a=r[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(t).forEach(([s,i])=>n(s,i,!1)),Object.entries(e).forEach(([s,i])=>n(s,i,!0))}function Mc(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pn=BigInt(0),Ve=BigInt(1),Hs=BigInt(2),cy=BigInt(3),z0=BigInt(4),V0=BigInt(5),K0=BigInt(8);function fe(r,t){const e=r%t;return e>=pn?e:t+e}function ie(r,t,e){let n=r;for(;t-- >pn;)n*=n,n%=e;return n}function Fh(r,t){if(r===pn)throw new Error("invert: expected non-zero number");if(t<=pn)throw new Error("invert: expected positive modulus, got "+t);let e=fe(r,t),n=t,s=pn,i=Ve;for(;e!==pn;){const a=n/e,c=n%e,f=s-i*a;n=e,e=c,s=i,i=f}if(n!==Ve)throw new Error("invert: does not exist");return fe(s,t)}function $0(r,t){const e=(r.ORDER+Ve)/z0,n=r.pow(t,e);if(!r.eql(r.sqr(n),t))throw new Error("Cannot find square root");return n}function uy(r,t){const e=(r.ORDER-V0)/K0,n=r.mul(t,Hs),s=r.pow(n,e),i=r.mul(t,s),o=r.mul(r.mul(i,Hs),s),a=r.mul(i,r.sub(o,r.ONE));if(!r.eql(r.sqr(a),t))throw new Error("Cannot find square root");return a}function ly(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let t=r-Ve,e=0;for(;t%Hs===pn;)t/=Hs,e++;let n=Hs;const s=Xo(r);for(;Gh(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return $0;let i=s.pow(n,t);const o=(t+Ve)/Hs;return function(c,f){if(c.is0(f))return f;if(Gh(c,f)!==1)throw new Error("Cannot find square root");let h=e,y=c.mul(c.ONE,i),_=c.pow(f,t),A=c.pow(f,o);for(;!c.eql(_,c.ONE);){if(c.is0(_))return c.ZERO;let O=1,E=c.sqr(_);for(;!c.eql(E,c.ONE);)if(O++,E=c.sqr(E),O===h)throw new Error("Cannot find square root");const v=Ve<<BigInt(h-O-1),L=c.pow(y,v);h=O,y=c.sqr(L),_=c.mul(_,y),A=c.mul(A,L)}return A}}function fy(r){return r%z0===cy?$0:r%K0===V0?uy:ly(r)}const hy=(r,t)=>(fe(r,t)&Ve)===Ve,dy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function py(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=dy.reduce((n,s)=>(n[s]="function",n),t);return Wa(r,e),r}function gy(r,t,e){if(e<pn)throw new Error("invalid exponent, negatives unsupported");if(e===pn)return r.ONE;if(e===Ve)return t;let n=r.ONE,s=t;for(;e>pn;)e&Ve&&(n=r.mul(n,s)),s=r.sqr(s),e>>=Ve;return n}function q0(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((o,a,c)=>r.is0(a)?o:(n[c]=o,r.mul(o,a)),r.ONE),i=r.inv(s);return t.reduceRight((o,a,c)=>r.is0(a)?o:(n[c]=r.mul(o,n[c]),r.mul(o,a)),i),n}function Gh(r,t){const e=(r.ORDER-Ve)/Hs,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function my(r,t){t!==void 0&&Ql(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Xo(r,t,e=!1,n={}){if(r<=pn)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const h=t;h.BITS&&(s=h.BITS),h.sqrt&&(i=h.sqrt),typeof h.isLE=="boolean"&&(e=h.isLE)}else typeof t=="number"&&(s=t),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:a}=my(r,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const f=Object.freeze({ORDER:r,isLE:e,BITS:o,BYTES:a,MASK:mu(o),ZERO:pn,ONE:Ve,create:h=>fe(h,r),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return pn<=h&&h<r},is0:h=>h===pn,isValidNot0:h=>!f.is0(h)&&f.isValid(h),isOdd:h=>(h&Ve)===Ve,neg:h=>fe(-h,r),eql:(h,y)=>h===y,sqr:h=>fe(h*h,r),add:(h,y)=>fe(h+y,r),sub:(h,y)=>fe(h-y,r),mul:(h,y)=>fe(h*y,r),pow:(h,y)=>gy(f,h,y),div:(h,y)=>fe(h*Fh(y,r),r),sqrN:h=>h*h,addN:(h,y)=>h+y,subN:(h,y)=>h-y,mulN:(h,y)=>h*y,inv:h=>Fh(h,r),sqrt:i||(h=>(c||(c=fy(r)),c(f,h))),toBytes:h=>e?gu(h,a):qf(h,a),fromBytes:h=>{if(h.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);return e?_a(h):pu(h)},invertBatch:h=>q0(f,h),cmov:(h,y,_)=>_?y:h});return Object.freeze(f)}function W0(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Q0(r){const t=W0(r);return t+Math.ceil(t/2)}function yy(r,t,e=!1){const n=r.length,s=W0(t),i=Q0(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?_a(r):pu(r),a=fe(o,t-Ve)+Ve;return e?gu(a,s):qf(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zo=BigInt(0),zs=BigInt(1);function ma(r,t){const e=t.negate();return r?e:t}function J0(r,t,e){const n=t==="pz"?o=>o.pz:o=>o.ez,s=q0(r.Fp,e.map(n));return e.map((o,a)=>o.toAffine(s[a])).map(r.fromAffine)}function j0(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function ul(r,t){j0(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=mu(r),o=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function Hh(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=e;let a=Number(r&s),c=r>>o;a>n&&(a-=i,c+=zs);const f=t*n,h=f+Math.abs(a)-1,y=a===0,_=a<0,A=t%2!==0;return{nextN:c,offset:h,isZero:y,isNeg:_,isNegF:A,offsetF:f}}function wy(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function Ay(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const ll=new WeakMap,Z0=new WeakMap;function fl(r){return Z0.get(r)||1}function zh(r){if(r!==zo)throw new Error("invalid wNAF")}function Y0(r,t){return{constTimeNegate:ma,hasPrecomputes(e){return fl(e)!==1},unsafeLadder(e,n,s=r.ZERO){let i=e;for(;n>zo;)n&zs&&(s=s.add(i)),i=i.double(),n>>=zs;return s},precomputeWindow(e,n){const{windows:s,windowSize:i}=ul(n,t),o=[];let a=e,c=a;for(let f=0;f<s;f++){c=a,o.push(c);for(let h=1;h<i;h++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(e,n,s){let i=r.ZERO,o=r.BASE;const a=ul(e,t);for(let c=0;c<a.windows;c++){const{nextN:f,offset:h,isZero:y,isNeg:_,isNegF:A,offsetF:O}=Hh(s,c,a);s=f,y?o=o.add(ma(A,n[O])):i=i.add(ma(_,n[h]))}return zh(s),{p:i,f:o}},wNAFUnsafe(e,n,s,i=r.ZERO){const o=ul(e,t);for(let a=0;a<o.windows&&s!==zo;a++){const{nextN:c,offset:f,isZero:h,isNeg:y}=Hh(s,a,o);if(s=c,!h){const _=n[f];i=i.add(y?_.negate():_)}}return zh(s),i},getPrecomputes(e,n,s){let i=ll.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof s=="function"&&(i=s(i)),ll.set(n,i))),i},wNAFCached(e,n,s){const i=fl(e);return this.wNAF(i,this.getPrecomputes(i,e,s),n)},wNAFCachedUnsafe(e,n,s,i){const o=fl(e);return o===1?this.unsafeLadder(e,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),n,i)},setWindowSize(e,n){j0(n,t),Z0.set(e,n),ll.delete(e)}}}function by(r,t,e,n){let s=t,i=r.ZERO,o=r.ZERO;for(;e>zo||n>zo;)e&zs&&(i=i.add(s)),n&zs&&(o=o.add(s)),s=s.double(),e>>=zs,n>>=zs;return{p1:i,p2:o}}function X0(r,t,e,n){wy(e,r),Ay(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=oy(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const f=mu(c),h=new Array(Number(f)+1).fill(o),y=Math.floor((t.BITS-1)/c)*c;let _=o;for(let A=y;A>=0;A-=c){h.fill(o);for(let E=0;E<i;E++){const v=n[E],L=Number(v>>BigInt(A)&f);h[L]=h[L].add(e[E])}let O=o;for(let E=h.length-1,v=o;E>0;E--)v=v.add(h[E]),O=O.add(v);if(_=_.add(O),A!==0)for(let E=0;E<c;E++)_=_.double()}return _}function Vh(r,t){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return py(t),t}else return Xo(r)}function tp(r,t,e={}){if(!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const a of["p","n","h"]){const c=t[a];if(!(typeof c=="bigint"&&c>zo))throw new Error(`CURVE.${a} must be positive bigint`)}const n=Vh(t.p,e.Fp),s=Vh(t.n,e.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const a of o)if(!n.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nr=BigInt(0),tn=BigInt(1),hl=BigInt(2),Ey=BigInt(8),_y={zip215:!0};function Ry(r,t,e,n){const s=r.sqr(e),i=r.sqr(n),o=r.add(r.mul(t.a,s),i),a=r.add(r.ONE,r.mul(t.d,r.mul(s,i)));return r.eql(o,a)}function Sy(r,t={}){const{Fp:e,Fn:n}=tp("edwards",r,t),{h:s,n:i}=r;Wa(t,{},{uvRatio:"function"});const o=hl<<BigInt(n.BYTES*8)-tn,a=E=>e.create(E),c=t.uvRatio||((E,v)=>{try{return{isValid:!0,value:e.sqrt(e.div(E,v))}}catch{return{isValid:!1,value:nr}}});if(!Ry(e,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function f(E,v,L=!1){const K=L?tn:nr;return Di("coordinate "+E,v,K,o),v}function h(E){if(!(E instanceof A))throw new Error("ExtendedPoint expected")}const y=Mc((E,v)=>{const{ex:L,ey:K,ez:z}=E,rt=E.is0();v==null&&(v=rt?Ey:e.inv(z));const V=a(L*v),Y=a(K*v),st=a(z*v);if(rt)return{x:nr,y:tn};if(st!==tn)throw new Error("invZ was invalid");return{x:V,y:Y}}),_=Mc(E=>{const{a:v,d:L}=r;if(E.is0())throw new Error("bad point: ZERO");const{ex:K,ey:z,ez:rt,et:V}=E,Y=a(K*K),st=a(z*z),et=a(rt*rt),U=a(et*et),P=a(Y*v),M=a(et*a(P+st)),H=a(U+a(L*a(Y*st)));if(M!==H)throw new Error("bad point: equation left != right (1)");const R=a(K*z),u=a(rt*V);if(R!==u)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(v,L,K,z){this.ex=f("x",v),this.ey=f("y",L),this.ez=f("z",K,!0),this.et=f("t",z),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof A)throw new Error("extended point not allowed");const{x:L,y:K}=v||{};return f("x",L),f("y",K),new A(L,K,tn,a(L*K))}static normalizeZ(v){return J0(A,"ez",v)}static msm(v,L){return X0(A,n,v,L)}_setWindowSize(v){this.precompute(v)}precompute(v=8,L=!0){return O.setWindowSize(this,v),L||this.multiply(hl),this}assertValidity(){_(this)}equals(v){h(v);const{ex:L,ey:K,ez:z}=this,{ex:rt,ey:V,ez:Y}=v,st=a(L*Y),et=a(rt*z),U=a(K*Y),P=a(V*z);return st===et&&U===P}is0(){return this.equals(A.ZERO)}negate(){return new A(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:v}=r,{ex:L,ey:K,ez:z}=this,rt=a(L*L),V=a(K*K),Y=a(hl*a(z*z)),st=a(v*rt),et=L+K,U=a(a(et*et)-rt-V),P=st+V,M=P-Y,H=st-V,R=a(U*M),u=a(P*H),p=a(U*H),w=a(M*P);return new A(R,u,w,p)}add(v){h(v);const{a:L,d:K}=r,{ex:z,ey:rt,ez:V,et:Y}=this,{ex:st,ey:et,ez:U,et:P}=v,M=a(z*st),H=a(rt*et),R=a(Y*K*P),u=a(V*U),p=a((z+rt)*(st+et)-M-H),w=u-R,I=u+R,T=a(H-L*M),D=a(p*w),G=a(I*T),N=a(p*T),l=a(w*I);return new A(D,G,l,N)}subtract(v){return this.add(v.negate())}multiply(v){const L=v;Di("scalar",L,tn,i);const{p:K,f:z}=O.wNAFCached(this,L,A.normalizeZ);return A.normalizeZ([K,z])[0]}multiplyUnsafe(v,L=A.ZERO){const K=v;return Di("scalar",K,nr,i),K===nr?A.ZERO:this.is0()||K===tn?this:O.wNAFCachedUnsafe(this,K,A.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return O.wNAFCachedUnsafe(this,i).is0()}toAffine(v){return y(this,v)}clearCofactor(){return s===tn?this:this.multiplyUnsafe(s)}static fromBytes(v,L=!1){return mr(v),this.fromHex(v,L)}static fromHex(v,L=!1){const{d:K,a:z}=r,rt=e.BYTES;v=le("pointHex",v,rt),gi("zip215",L);const V=v.slice(),Y=v[rt-1];V[rt-1]=Y&-129;const st=_a(V),et=L?o:e.ORDER;Di("pointHex.y",st,nr,et);const U=a(st*st),P=a(U-tn),M=a(K*U-z);let{isValid:H,value:R}=c(P,M);if(!H)throw new Error("Point.fromHex: invalid y coordinate");const u=(R&tn)===tn,p=(Y&128)!==0;if(!L&&R===nr&&p)throw new Error("Point.fromHex: x=0 and x_0=1");return p!==u&&(R=a(-R)),A.fromAffine({x:R,y:st})}static fromPrivateScalar(v){return A.BASE.multiply(v)}toBytes(){const{x:v,y:L}=this.toAffine(),K=gu(L,e.BYTES);return K[K.length-1]|=v&tn?128:0,K}toRawBytes(){return this.toBytes()}toHex(){return Ho(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}A.BASE=new A(r.Gx,r.Gy,tn,a(r.Gx*r.Gy)),A.ZERO=new A(nr,tn,tn,nr),A.Fp=e,A.Fn=n;const O=Y0(A,n.BYTES*8);return A}function vy(r,t){Wa(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:e,hash:n}=t,{BASE:s,Fp:i,Fn:o}=r,a=o.ORDER,c=t.randomBytes||U0,f=t.adjustScalarBytes||(V=>V),h=t.domain||((V,Y,st)=>{if(gi("phflag",st),Y.length||st)throw new Error("Contexts/pre-hash are not supported");return V});function y(V){return o.create(V)}function _(V){return y(_a(V))}function A(V){const Y=i.BYTES;V=le("private key",V,Y);const st=le("hashed private key",n(V),2*Y),et=f(st.slice(0,Y)),U=st.slice(Y,2*Y),P=_(et);return{head:et,prefix:U,scalar:P}}function O(V){const{head:Y,prefix:st,scalar:et}=A(V),U=s.multiply(et),P=U.toBytes();return{head:Y,prefix:st,scalar:et,point:U,pointBytes:P}}function E(V){return O(V).pointBytes}function v(V=Uint8Array.of(),...Y){const st=Hr(...Y);return _(n(h(st,le("context",V),!!e)))}function L(V,Y,st={}){V=le("message",V),e&&(V=e(V));const{prefix:et,scalar:U,pointBytes:P}=O(Y),M=v(st.context,et,V),H=s.multiply(M).toBytes(),R=v(st.context,H,P,V),u=y(M+R*U);Di("signature.s",u,nr,a);const p=i.BYTES,w=Hr(H,gu(u,p));return le("result",w,p*2)}const K=_y;function z(V,Y,st,et=K){const{context:U,zip215:P}=et,M=i.BYTES;V=le("signature",V,2*M),Y=le("message",Y),st=le("publicKey",st,M),P!==void 0&&gi("zip215",P),e&&(Y=e(Y));const H=_a(V.slice(M,2*M));let R,u,p;try{R=r.fromHex(st,P),u=r.fromHex(V.slice(0,M),P),p=s.multiplyUnsafe(H)}catch{return!1}if(!P&&R.isSmallOrder())return!1;const w=v(U,u.toBytes(),R.toBytes(),Y);return u.add(R.multiplyUnsafe(w)).subtract(p).clearCofactor().is0()}return s.precompute(8),{getPublicKey:E,sign:L,verify:z,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>c(i.BYTES),precompute(V=8,Y=r.BASE){return Y.precompute(V,!1)}},Point:r}}function xy(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=Xo(t.n,r.nBitLength,!0),s={Fp:e,Fn:n,uvRatio:r.uvRatio},i={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:s,eddsaOpts:i}}function Iy(r,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:r})}function Ny(r){const{CURVE:t,curveOpts:e,eddsaOpts:n}=xy(r),s=Sy(t,e),i=vy(s,n);return Iy(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const Oy=BigInt(1),Kh=BigInt(2);BigInt(3);const Ty=BigInt(5),By=BigInt(8),yu={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:By,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Cy(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=yu.p,a=r*r%i*r%i,c=ie(a,Kh,i)*a%i,f=ie(c,Oy,i)*r%i,h=ie(f,Ty,i)*f%i,y=ie(h,t,i)*h%i,_=ie(y,e,i)*y%i,A=ie(_,n,i)*_%i,O=ie(A,s,i)*A%i,E=ie(O,s,i)*A%i,v=ie(E,t,i)*h%i;return{pow_p_5_8:ie(v,Kh,i)*r%i,b2:a}}function ky(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const $h=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Ly(r,t){const e=yu.p,n=fe(t*t*t,e),s=fe(n*n*t,e),i=Cy(r*s).pow_p_5_8;let o=fe(r*n*i,e);const a=fe(t*o*o,e),c=o,f=fe(o*$h,e),h=a===r,y=a===fe(-r,e),_=a===fe(-r*$h,e);return h&&(o=c),(y||_)&&(o=f),hy(o,e)&&(o=fe(-o,e)),{isValid:h||y,value:o}}const Py=Xo(yu.p,void 0,!0),My={...yu,Fp:Py,hash:sy,adjustScalarBytes:ky,uvRatio:Ly},Qa=Ny(My);var Rc={exports:{}};const Uy=new Proxy({},{get(r,t){throw new Error(`Module "" has been externalized for browser compatibility. Cannot access ".${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),Dy=Object.freeze(Object.defineProperty({__proto__:null,default:Uy},Symbol.toStringTag,{value:"Module"})),Fy=Gf(Dy);var Gy=Rc.exports,qh;function ep(){return qh||(qh=1,function(r){(function(t,e){function n(R,u){if(!R)throw new Error(u||"Assertion failed")}function s(R,u){R.super_=u;var p=function(){};p.prototype=u.prototype,R.prototype=new p,R.prototype.constructor=R}function i(R,u,p){if(i.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(R||0,u||10,p||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Fy.Buffer}catch{}i.isBN=function(u){return u instanceof i?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===i.wordSize&&Array.isArray(u.words)},i.max=function(u,p){return u.cmp(p)>0?u:p},i.min=function(u,p){return u.cmp(p)<0?u:p},i.prototype._init=function(u,p,w){if(typeof u=="number")return this._initNumber(u,p,w);if(typeof u=="object")return this._initArray(u,p,w);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var I=0;u[0]==="-"&&(I++,this.negative=1),I<u.length&&(p===16?this._parseHex(u,I,w):(this._parseBase(u,p,I),w==="le"&&this._initArray(this.toArray(),p,w)))},i.prototype._initNumber=function(u,p,w){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),p,w)},i.prototype._initArray=function(u,p,w){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var T,D,G=0;if(w==="be")for(I=u.length-1,T=0;I>=0;I-=3)D=u[I]|u[I-1]<<8|u[I-2]<<16,this.words[T]|=D<<G&67108863,this.words[T+1]=D>>>26-G&67108863,G+=24,G>=26&&(G-=26,T++);else if(w==="le")for(I=0,T=0;I<u.length;I+=3)D=u[I]|u[I+1]<<8|u[I+2]<<16,this.words[T]|=D<<G&67108863,this.words[T+1]=D>>>26-G&67108863,G+=24,G>=26&&(G-=26,T++);return this._strip()};function a(R,u){var p=R.charCodeAt(u);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+R)}function c(R,u,p){var w=a(R,p);return p-1>=u&&(w|=a(R,p-1)<<4),w}i.prototype._parseHex=function(u,p,w){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var T=0,D=0,G;if(w==="be")for(I=u.length-1;I>=p;I-=2)G=c(u,p,I)<<T,this.words[D]|=G&67108863,T>=18?(T-=18,D+=1,this.words[D]|=G>>>26):T+=8;else{var N=u.length-p;for(I=N%2===0?p+1:p;I<u.length;I+=2)G=c(u,p,I)<<T,this.words[D]|=G&67108863,T>=18?(T-=18,D+=1,this.words[D]|=G>>>26):T+=8}this._strip()};function f(R,u,p,w){for(var I=0,T=0,D=Math.min(R.length,p),G=u;G<D;G++){var N=R.charCodeAt(G)-48;I*=w,N>=49?T=N-49+10:N>=17?T=N-17+10:T=N,n(N>=0&&T<w,"Invalid character"),I+=T}return I}i.prototype._parseBase=function(u,p,w){this.words=[0],this.length=1;for(var I=0,T=1;T<=67108863;T*=p)I++;I--,T=T/p|0;for(var D=u.length-w,G=D%I,N=Math.min(D,D-G)+w,l=0,d=w;d<N;d+=I)l=f(u,d,d+I,p),this.imuln(T),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(G!==0){var x=1;for(l=f(u,d,u.length,p),d=0;d<G;d++)x*=p;this.imuln(x),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},i.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red};function h(R,u){R.words=u.words,R.length=u.length,R.negative=u.negative,R.red=u.red}if(i.prototype._move=function(u){h(u,this)},i.prototype.clone=function(){var u=new i(null);return this.copy(u),u},i.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{i.prototype.inspect=y}else i.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(u,p){u=u||10,p=p|0||1;var w;if(u===16||u==="hex"){w="";for(var I=0,T=0,D=0;D<this.length;D++){var G=this.words[D],N=((G<<I|T)&16777215).toString(16);T=G>>>24-I&16777215,I+=2,I>=26&&(I-=26,D--),T!==0||D!==this.length-1?w=_[6-N.length]+N+w:w=N+w}for(T!==0&&(w=T.toString(16)+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(u===(u|0)&&u>=2&&u<=36){var l=A[u],d=O[u];w="";var x=this.clone();for(x.negative=0;!x.isZero();){var C=x.modrn(d).toString(u);x=x.idivn(d),x.isZero()?w=C+w:w=_[l-C.length]+C+w}for(this.isZero()&&(w="0"+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(u,p){return this.toArrayLike(o,u,p)}),i.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)};var E=function(u,p){return u.allocUnsafe?u.allocUnsafe(p):new u(p)};i.prototype.toArrayLike=function(u,p,w){this._strip();var I=this.byteLength(),T=w||Math.max(1,I);n(I<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var D=E(u,T),G=p==="le"?"LE":"BE";return this["_toArrayLike"+G](D,I),D},i.prototype._toArrayLikeLE=function(u,p){for(var w=0,I=0,T=0,D=0;T<this.length;T++){var G=this.words[T]<<D|I;u[w++]=G&255,w<u.length&&(u[w++]=G>>8&255),w<u.length&&(u[w++]=G>>16&255),D===6?(w<u.length&&(u[w++]=G>>24&255),I=0,D=0):(I=G>>>24,D+=2)}if(w<u.length)for(u[w++]=I;w<u.length;)u[w++]=0},i.prototype._toArrayLikeBE=function(u,p){for(var w=u.length-1,I=0,T=0,D=0;T<this.length;T++){var G=this.words[T]<<D|I;u[w--]=G&255,w>=0&&(u[w--]=G>>8&255),w>=0&&(u[w--]=G>>16&255),D===6?(w>=0&&(u[w--]=G>>24&255),I=0,D=0):(I=G>>>24,D+=2)}if(w>=0)for(u[w--]=I;w>=0;)u[w--]=0},Math.clz32?i.prototype._countBits=function(u){return 32-Math.clz32(u)}:i.prototype._countBits=function(u){var p=u,w=0;return p>=4096&&(w+=13,p>>>=13),p>=64&&(w+=7,p>>>=7),p>=8&&(w+=4,p>>>=4),p>=2&&(w+=2,p>>>=2),w+p},i.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,w=0;return(p&8191)===0&&(w+=13,p>>>=13),(p&127)===0&&(w+=7,p>>>=7),(p&15)===0&&(w+=4,p>>>=4),(p&3)===0&&(w+=2,p>>>=2),(p&1)===0&&w++,w},i.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function v(R){for(var u=new Array(R.bitLength()),p=0;p<u.length;p++){var w=p/26|0,I=p%26;u[p]=R.words[w]>>>I&1}return u}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var w=this._zeroBits(this.words[p]);if(u+=w,w!==26)break}return u},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},i.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this._strip()},i.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},i.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},i.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},i.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var w=0;w<p.length;w++)this.words[w]=this.words[w]&u.words[w];return this.length=p.length,this._strip()},i.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},i.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},i.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},i.prototype.iuxor=function(u){var p,w;this.length>u.length?(p=this,w=u):(p=u,w=this);for(var I=0;I<w.length;I++)this.words[I]=p.words[I]^w.words[I];if(this!==p)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=p.length,this._strip()},i.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},i.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},i.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},i.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,w=u%26;this._expand(p),w>0&&p--;for(var I=0;I<p;I++)this.words[I]=~this.words[I]&67108863;return w>0&&(this.words[I]=~this.words[I]&67108863>>26-w),this._strip()},i.prototype.notn=function(u){return this.clone().inotn(u)},i.prototype.setn=function(u,p){n(typeof u=="number"&&u>=0);var w=u/26|0,I=u%26;return this._expand(w+1),p?this.words[w]=this.words[w]|1<<I:this.words[w]=this.words[w]&~(1<<I),this._strip()},i.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var w,I;this.length>u.length?(w=this,I=u):(w=u,I=this);for(var T=0,D=0;D<I.length;D++)p=(w.words[D]|0)+(I.words[D]|0)+T,this.words[D]=p&67108863,T=p>>>26;for(;T!==0&&D<w.length;D++)p=(w.words[D]|0)+T,this.words[D]=p&67108863,T=p>>>26;if(this.length=w.length,T!==0)this.words[this.length]=T,this.length++;else if(w!==this)for(;D<w.length;D++)this.words[D]=w.words[D];return this},i.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},i.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var w=this.cmp(u);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var I,T;w>0?(I=this,T=u):(I=u,T=this);for(var D=0,G=0;G<T.length;G++)p=(I.words[G]|0)-(T.words[G]|0)+D,D=p>>26,this.words[G]=p&67108863;for(;D!==0&&G<I.length;G++)p=(I.words[G]|0)+D,D=p>>26,this.words[G]=p&67108863;if(D===0&&G<I.length&&I!==this)for(;G<I.length;G++)this.words[G]=I.words[G];return this.length=Math.max(this.length,G),I!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(u){return this.clone().isub(u)};function L(R,u,p){p.negative=u.negative^R.negative;var w=R.length+u.length|0;p.length=w,w=w-1|0;var I=R.words[0]|0,T=u.words[0]|0,D=I*T,G=D&67108863,N=D/67108864|0;p.words[0]=G;for(var l=1;l<w;l++){for(var d=N>>>26,x=N&67108863,C=Math.min(l,u.length-1),Q=Math.max(0,l-R.length+1);Q<=C;Q++){var nt=l-Q|0;I=R.words[nt]|0,T=u.words[Q]|0,D=I*T+x,d+=D/67108864|0,x=D&67108863}p.words[l]=x|0,N=d|0}return N!==0?p.words[l]=N|0:p.length--,p._strip()}var K=function(u,p,w){var I=u.words,T=p.words,D=w.words,G=0,N,l,d,x=I[0]|0,C=x&8191,Q=x>>>13,nt=I[1]|0,ft=nt&8191,mt=nt>>>13,$t=I[2]|0,Ct=$t&8191,Ut=$t>>>13,ce=I[3]|0,Pt=ce&8191,qt=ce>>>13,Bs=I[4]|0,Jt=Bs&8191,ne=Bs>>>13,sc=I[5]|0,Yt=sc&8191,Wt=sc>>>13,yn=I[6]|0,jt=yn&8191,re=yn>>>13,Un=I[7]|0,se=Un&8191,S=Un>>>13,g=I[8]|0,m=g&8191,B=g>>>13,q=I[9]|0,J=q&8191,tt=q>>>13,St=T[0]|0,Rt=St&8191,_t=St>>>13,Qt=T[1]|0,bt=Qt&8191,pe=Qt>>>13,Rh=T[2]|0,ge=Rh&8191,me=Rh>>>13,Sh=T[3]|0,ye=Sh&8191,we=Sh>>>13,vh=T[4]|0,Ae=vh&8191,be=vh>>>13,xh=T[5]|0,Ee=xh&8191,_e=xh>>>13,Ih=T[6]|0,Re=Ih&8191,Se=Ih>>>13,Nh=T[7]|0,ve=Nh&8191,xe=Nh>>>13,Oh=T[8]|0,Ie=Oh&8191,Ne=Oh>>>13,Th=T[9]|0,Oe=Th&8191,Te=Th>>>13;w.negative=u.negative^p.negative,w.length=19,N=Math.imul(C,Rt),l=Math.imul(C,_t),l=l+Math.imul(Q,Rt)|0,d=Math.imul(Q,_t);var Gu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Gu>>>26)|0,Gu&=67108863,N=Math.imul(ft,Rt),l=Math.imul(ft,_t),l=l+Math.imul(mt,Rt)|0,d=Math.imul(mt,_t),N=N+Math.imul(C,bt)|0,l=l+Math.imul(C,pe)|0,l=l+Math.imul(Q,bt)|0,d=d+Math.imul(Q,pe)|0;var Hu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Hu>>>26)|0,Hu&=67108863,N=Math.imul(Ct,Rt),l=Math.imul(Ct,_t),l=l+Math.imul(Ut,Rt)|0,d=Math.imul(Ut,_t),N=N+Math.imul(ft,bt)|0,l=l+Math.imul(ft,pe)|0,l=l+Math.imul(mt,bt)|0,d=d+Math.imul(mt,pe)|0,N=N+Math.imul(C,ge)|0,l=l+Math.imul(C,me)|0,l=l+Math.imul(Q,ge)|0,d=d+Math.imul(Q,me)|0;var zu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(zu>>>26)|0,zu&=67108863,N=Math.imul(Pt,Rt),l=Math.imul(Pt,_t),l=l+Math.imul(qt,Rt)|0,d=Math.imul(qt,_t),N=N+Math.imul(Ct,bt)|0,l=l+Math.imul(Ct,pe)|0,l=l+Math.imul(Ut,bt)|0,d=d+Math.imul(Ut,pe)|0,N=N+Math.imul(ft,ge)|0,l=l+Math.imul(ft,me)|0,l=l+Math.imul(mt,ge)|0,d=d+Math.imul(mt,me)|0,N=N+Math.imul(C,ye)|0,l=l+Math.imul(C,we)|0,l=l+Math.imul(Q,ye)|0,d=d+Math.imul(Q,we)|0;var Vu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Vu>>>26)|0,Vu&=67108863,N=Math.imul(Jt,Rt),l=Math.imul(Jt,_t),l=l+Math.imul(ne,Rt)|0,d=Math.imul(ne,_t),N=N+Math.imul(Pt,bt)|0,l=l+Math.imul(Pt,pe)|0,l=l+Math.imul(qt,bt)|0,d=d+Math.imul(qt,pe)|0,N=N+Math.imul(Ct,ge)|0,l=l+Math.imul(Ct,me)|0,l=l+Math.imul(Ut,ge)|0,d=d+Math.imul(Ut,me)|0,N=N+Math.imul(ft,ye)|0,l=l+Math.imul(ft,we)|0,l=l+Math.imul(mt,ye)|0,d=d+Math.imul(mt,we)|0,N=N+Math.imul(C,Ae)|0,l=l+Math.imul(C,be)|0,l=l+Math.imul(Q,Ae)|0,d=d+Math.imul(Q,be)|0;var Ku=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Ku>>>26)|0,Ku&=67108863,N=Math.imul(Yt,Rt),l=Math.imul(Yt,_t),l=l+Math.imul(Wt,Rt)|0,d=Math.imul(Wt,_t),N=N+Math.imul(Jt,bt)|0,l=l+Math.imul(Jt,pe)|0,l=l+Math.imul(ne,bt)|0,d=d+Math.imul(ne,pe)|0,N=N+Math.imul(Pt,ge)|0,l=l+Math.imul(Pt,me)|0,l=l+Math.imul(qt,ge)|0,d=d+Math.imul(qt,me)|0,N=N+Math.imul(Ct,ye)|0,l=l+Math.imul(Ct,we)|0,l=l+Math.imul(Ut,ye)|0,d=d+Math.imul(Ut,we)|0,N=N+Math.imul(ft,Ae)|0,l=l+Math.imul(ft,be)|0,l=l+Math.imul(mt,Ae)|0,d=d+Math.imul(mt,be)|0,N=N+Math.imul(C,Ee)|0,l=l+Math.imul(C,_e)|0,l=l+Math.imul(Q,Ee)|0,d=d+Math.imul(Q,_e)|0;var $u=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+($u>>>26)|0,$u&=67108863,N=Math.imul(jt,Rt),l=Math.imul(jt,_t),l=l+Math.imul(re,Rt)|0,d=Math.imul(re,_t),N=N+Math.imul(Yt,bt)|0,l=l+Math.imul(Yt,pe)|0,l=l+Math.imul(Wt,bt)|0,d=d+Math.imul(Wt,pe)|0,N=N+Math.imul(Jt,ge)|0,l=l+Math.imul(Jt,me)|0,l=l+Math.imul(ne,ge)|0,d=d+Math.imul(ne,me)|0,N=N+Math.imul(Pt,ye)|0,l=l+Math.imul(Pt,we)|0,l=l+Math.imul(qt,ye)|0,d=d+Math.imul(qt,we)|0,N=N+Math.imul(Ct,Ae)|0,l=l+Math.imul(Ct,be)|0,l=l+Math.imul(Ut,Ae)|0,d=d+Math.imul(Ut,be)|0,N=N+Math.imul(ft,Ee)|0,l=l+Math.imul(ft,_e)|0,l=l+Math.imul(mt,Ee)|0,d=d+Math.imul(mt,_e)|0,N=N+Math.imul(C,Re)|0,l=l+Math.imul(C,Se)|0,l=l+Math.imul(Q,Re)|0,d=d+Math.imul(Q,Se)|0;var qu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(qu>>>26)|0,qu&=67108863,N=Math.imul(se,Rt),l=Math.imul(se,_t),l=l+Math.imul(S,Rt)|0,d=Math.imul(S,_t),N=N+Math.imul(jt,bt)|0,l=l+Math.imul(jt,pe)|0,l=l+Math.imul(re,bt)|0,d=d+Math.imul(re,pe)|0,N=N+Math.imul(Yt,ge)|0,l=l+Math.imul(Yt,me)|0,l=l+Math.imul(Wt,ge)|0,d=d+Math.imul(Wt,me)|0,N=N+Math.imul(Jt,ye)|0,l=l+Math.imul(Jt,we)|0,l=l+Math.imul(ne,ye)|0,d=d+Math.imul(ne,we)|0,N=N+Math.imul(Pt,Ae)|0,l=l+Math.imul(Pt,be)|0,l=l+Math.imul(qt,Ae)|0,d=d+Math.imul(qt,be)|0,N=N+Math.imul(Ct,Ee)|0,l=l+Math.imul(Ct,_e)|0,l=l+Math.imul(Ut,Ee)|0,d=d+Math.imul(Ut,_e)|0,N=N+Math.imul(ft,Re)|0,l=l+Math.imul(ft,Se)|0,l=l+Math.imul(mt,Re)|0,d=d+Math.imul(mt,Se)|0,N=N+Math.imul(C,ve)|0,l=l+Math.imul(C,xe)|0,l=l+Math.imul(Q,ve)|0,d=d+Math.imul(Q,xe)|0;var Wu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Wu>>>26)|0,Wu&=67108863,N=Math.imul(m,Rt),l=Math.imul(m,_t),l=l+Math.imul(B,Rt)|0,d=Math.imul(B,_t),N=N+Math.imul(se,bt)|0,l=l+Math.imul(se,pe)|0,l=l+Math.imul(S,bt)|0,d=d+Math.imul(S,pe)|0,N=N+Math.imul(jt,ge)|0,l=l+Math.imul(jt,me)|0,l=l+Math.imul(re,ge)|0,d=d+Math.imul(re,me)|0,N=N+Math.imul(Yt,ye)|0,l=l+Math.imul(Yt,we)|0,l=l+Math.imul(Wt,ye)|0,d=d+Math.imul(Wt,we)|0,N=N+Math.imul(Jt,Ae)|0,l=l+Math.imul(Jt,be)|0,l=l+Math.imul(ne,Ae)|0,d=d+Math.imul(ne,be)|0,N=N+Math.imul(Pt,Ee)|0,l=l+Math.imul(Pt,_e)|0,l=l+Math.imul(qt,Ee)|0,d=d+Math.imul(qt,_e)|0,N=N+Math.imul(Ct,Re)|0,l=l+Math.imul(Ct,Se)|0,l=l+Math.imul(Ut,Re)|0,d=d+Math.imul(Ut,Se)|0,N=N+Math.imul(ft,ve)|0,l=l+Math.imul(ft,xe)|0,l=l+Math.imul(mt,ve)|0,d=d+Math.imul(mt,xe)|0,N=N+Math.imul(C,Ie)|0,l=l+Math.imul(C,Ne)|0,l=l+Math.imul(Q,Ie)|0,d=d+Math.imul(Q,Ne)|0;var Qu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Qu>>>26)|0,Qu&=67108863,N=Math.imul(J,Rt),l=Math.imul(J,_t),l=l+Math.imul(tt,Rt)|0,d=Math.imul(tt,_t),N=N+Math.imul(m,bt)|0,l=l+Math.imul(m,pe)|0,l=l+Math.imul(B,bt)|0,d=d+Math.imul(B,pe)|0,N=N+Math.imul(se,ge)|0,l=l+Math.imul(se,me)|0,l=l+Math.imul(S,ge)|0,d=d+Math.imul(S,me)|0,N=N+Math.imul(jt,ye)|0,l=l+Math.imul(jt,we)|0,l=l+Math.imul(re,ye)|0,d=d+Math.imul(re,we)|0,N=N+Math.imul(Yt,Ae)|0,l=l+Math.imul(Yt,be)|0,l=l+Math.imul(Wt,Ae)|0,d=d+Math.imul(Wt,be)|0,N=N+Math.imul(Jt,Ee)|0,l=l+Math.imul(Jt,_e)|0,l=l+Math.imul(ne,Ee)|0,d=d+Math.imul(ne,_e)|0,N=N+Math.imul(Pt,Re)|0,l=l+Math.imul(Pt,Se)|0,l=l+Math.imul(qt,Re)|0,d=d+Math.imul(qt,Se)|0,N=N+Math.imul(Ct,ve)|0,l=l+Math.imul(Ct,xe)|0,l=l+Math.imul(Ut,ve)|0,d=d+Math.imul(Ut,xe)|0,N=N+Math.imul(ft,Ie)|0,l=l+Math.imul(ft,Ne)|0,l=l+Math.imul(mt,Ie)|0,d=d+Math.imul(mt,Ne)|0,N=N+Math.imul(C,Oe)|0,l=l+Math.imul(C,Te)|0,l=l+Math.imul(Q,Oe)|0,d=d+Math.imul(Q,Te)|0;var Ju=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Ju>>>26)|0,Ju&=67108863,N=Math.imul(J,bt),l=Math.imul(J,pe),l=l+Math.imul(tt,bt)|0,d=Math.imul(tt,pe),N=N+Math.imul(m,ge)|0,l=l+Math.imul(m,me)|0,l=l+Math.imul(B,ge)|0,d=d+Math.imul(B,me)|0,N=N+Math.imul(se,ye)|0,l=l+Math.imul(se,we)|0,l=l+Math.imul(S,ye)|0,d=d+Math.imul(S,we)|0,N=N+Math.imul(jt,Ae)|0,l=l+Math.imul(jt,be)|0,l=l+Math.imul(re,Ae)|0,d=d+Math.imul(re,be)|0,N=N+Math.imul(Yt,Ee)|0,l=l+Math.imul(Yt,_e)|0,l=l+Math.imul(Wt,Ee)|0,d=d+Math.imul(Wt,_e)|0,N=N+Math.imul(Jt,Re)|0,l=l+Math.imul(Jt,Se)|0,l=l+Math.imul(ne,Re)|0,d=d+Math.imul(ne,Se)|0,N=N+Math.imul(Pt,ve)|0,l=l+Math.imul(Pt,xe)|0,l=l+Math.imul(qt,ve)|0,d=d+Math.imul(qt,xe)|0,N=N+Math.imul(Ct,Ie)|0,l=l+Math.imul(Ct,Ne)|0,l=l+Math.imul(Ut,Ie)|0,d=d+Math.imul(Ut,Ne)|0,N=N+Math.imul(ft,Oe)|0,l=l+Math.imul(ft,Te)|0,l=l+Math.imul(mt,Oe)|0,d=d+Math.imul(mt,Te)|0;var ju=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(ju>>>26)|0,ju&=67108863,N=Math.imul(J,ge),l=Math.imul(J,me),l=l+Math.imul(tt,ge)|0,d=Math.imul(tt,me),N=N+Math.imul(m,ye)|0,l=l+Math.imul(m,we)|0,l=l+Math.imul(B,ye)|0,d=d+Math.imul(B,we)|0,N=N+Math.imul(se,Ae)|0,l=l+Math.imul(se,be)|0,l=l+Math.imul(S,Ae)|0,d=d+Math.imul(S,be)|0,N=N+Math.imul(jt,Ee)|0,l=l+Math.imul(jt,_e)|0,l=l+Math.imul(re,Ee)|0,d=d+Math.imul(re,_e)|0,N=N+Math.imul(Yt,Re)|0,l=l+Math.imul(Yt,Se)|0,l=l+Math.imul(Wt,Re)|0,d=d+Math.imul(Wt,Se)|0,N=N+Math.imul(Jt,ve)|0,l=l+Math.imul(Jt,xe)|0,l=l+Math.imul(ne,ve)|0,d=d+Math.imul(ne,xe)|0,N=N+Math.imul(Pt,Ie)|0,l=l+Math.imul(Pt,Ne)|0,l=l+Math.imul(qt,Ie)|0,d=d+Math.imul(qt,Ne)|0,N=N+Math.imul(Ct,Oe)|0,l=l+Math.imul(Ct,Te)|0,l=l+Math.imul(Ut,Oe)|0,d=d+Math.imul(Ut,Te)|0;var Zu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Zu>>>26)|0,Zu&=67108863,N=Math.imul(J,ye),l=Math.imul(J,we),l=l+Math.imul(tt,ye)|0,d=Math.imul(tt,we),N=N+Math.imul(m,Ae)|0,l=l+Math.imul(m,be)|0,l=l+Math.imul(B,Ae)|0,d=d+Math.imul(B,be)|0,N=N+Math.imul(se,Ee)|0,l=l+Math.imul(se,_e)|0,l=l+Math.imul(S,Ee)|0,d=d+Math.imul(S,_e)|0,N=N+Math.imul(jt,Re)|0,l=l+Math.imul(jt,Se)|0,l=l+Math.imul(re,Re)|0,d=d+Math.imul(re,Se)|0,N=N+Math.imul(Yt,ve)|0,l=l+Math.imul(Yt,xe)|0,l=l+Math.imul(Wt,ve)|0,d=d+Math.imul(Wt,xe)|0,N=N+Math.imul(Jt,Ie)|0,l=l+Math.imul(Jt,Ne)|0,l=l+Math.imul(ne,Ie)|0,d=d+Math.imul(ne,Ne)|0,N=N+Math.imul(Pt,Oe)|0,l=l+Math.imul(Pt,Te)|0,l=l+Math.imul(qt,Oe)|0,d=d+Math.imul(qt,Te)|0;var Yu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Yu>>>26)|0,Yu&=67108863,N=Math.imul(J,Ae),l=Math.imul(J,be),l=l+Math.imul(tt,Ae)|0,d=Math.imul(tt,be),N=N+Math.imul(m,Ee)|0,l=l+Math.imul(m,_e)|0,l=l+Math.imul(B,Ee)|0,d=d+Math.imul(B,_e)|0,N=N+Math.imul(se,Re)|0,l=l+Math.imul(se,Se)|0,l=l+Math.imul(S,Re)|0,d=d+Math.imul(S,Se)|0,N=N+Math.imul(jt,ve)|0,l=l+Math.imul(jt,xe)|0,l=l+Math.imul(re,ve)|0,d=d+Math.imul(re,xe)|0,N=N+Math.imul(Yt,Ie)|0,l=l+Math.imul(Yt,Ne)|0,l=l+Math.imul(Wt,Ie)|0,d=d+Math.imul(Wt,Ne)|0,N=N+Math.imul(Jt,Oe)|0,l=l+Math.imul(Jt,Te)|0,l=l+Math.imul(ne,Oe)|0,d=d+Math.imul(ne,Te)|0;var Xu=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(Xu>>>26)|0,Xu&=67108863,N=Math.imul(J,Ee),l=Math.imul(J,_e),l=l+Math.imul(tt,Ee)|0,d=Math.imul(tt,_e),N=N+Math.imul(m,Re)|0,l=l+Math.imul(m,Se)|0,l=l+Math.imul(B,Re)|0,d=d+Math.imul(B,Se)|0,N=N+Math.imul(se,ve)|0,l=l+Math.imul(se,xe)|0,l=l+Math.imul(S,ve)|0,d=d+Math.imul(S,xe)|0,N=N+Math.imul(jt,Ie)|0,l=l+Math.imul(jt,Ne)|0,l=l+Math.imul(re,Ie)|0,d=d+Math.imul(re,Ne)|0,N=N+Math.imul(Yt,Oe)|0,l=l+Math.imul(Yt,Te)|0,l=l+Math.imul(Wt,Oe)|0,d=d+Math.imul(Wt,Te)|0;var tl=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(tl>>>26)|0,tl&=67108863,N=Math.imul(J,Re),l=Math.imul(J,Se),l=l+Math.imul(tt,Re)|0,d=Math.imul(tt,Se),N=N+Math.imul(m,ve)|0,l=l+Math.imul(m,xe)|0,l=l+Math.imul(B,ve)|0,d=d+Math.imul(B,xe)|0,N=N+Math.imul(se,Ie)|0,l=l+Math.imul(se,Ne)|0,l=l+Math.imul(S,Ie)|0,d=d+Math.imul(S,Ne)|0,N=N+Math.imul(jt,Oe)|0,l=l+Math.imul(jt,Te)|0,l=l+Math.imul(re,Oe)|0,d=d+Math.imul(re,Te)|0;var el=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(el>>>26)|0,el&=67108863,N=Math.imul(J,ve),l=Math.imul(J,xe),l=l+Math.imul(tt,ve)|0,d=Math.imul(tt,xe),N=N+Math.imul(m,Ie)|0,l=l+Math.imul(m,Ne)|0,l=l+Math.imul(B,Ie)|0,d=d+Math.imul(B,Ne)|0,N=N+Math.imul(se,Oe)|0,l=l+Math.imul(se,Te)|0,l=l+Math.imul(S,Oe)|0,d=d+Math.imul(S,Te)|0;var nl=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(nl>>>26)|0,nl&=67108863,N=Math.imul(J,Ie),l=Math.imul(J,Ne),l=l+Math.imul(tt,Ie)|0,d=Math.imul(tt,Ne),N=N+Math.imul(m,Oe)|0,l=l+Math.imul(m,Te)|0,l=l+Math.imul(B,Oe)|0,d=d+Math.imul(B,Te)|0;var rl=(G+N|0)+((l&8191)<<13)|0;G=(d+(l>>>13)|0)+(rl>>>26)|0,rl&=67108863,N=Math.imul(J,Oe),l=Math.imul(J,Te),l=l+Math.imul(tt,Oe)|0,d=Math.imul(tt,Te);var sl=(G+N|0)+((l&8191)<<13)|0;return G=(d+(l>>>13)|0)+(sl>>>26)|0,sl&=67108863,D[0]=Gu,D[1]=Hu,D[2]=zu,D[3]=Vu,D[4]=Ku,D[5]=$u,D[6]=qu,D[7]=Wu,D[8]=Qu,D[9]=Ju,D[10]=ju,D[11]=Zu,D[12]=Yu,D[13]=Xu,D[14]=tl,D[15]=el,D[16]=nl,D[17]=rl,D[18]=sl,G!==0&&(D[19]=G,w.length++),w};Math.imul||(K=L);function z(R,u,p){p.negative=u.negative^R.negative,p.length=R.length+u.length;for(var w=0,I=0,T=0;T<p.length-1;T++){var D=I;I=0;for(var G=w&67108863,N=Math.min(T,u.length-1),l=Math.max(0,T-R.length+1);l<=N;l++){var d=T-l,x=R.words[d]|0,C=u.words[l]|0,Q=x*C,nt=Q&67108863;D=D+(Q/67108864|0)|0,nt=nt+G|0,G=nt&67108863,D=D+(nt>>>26)|0,I+=D>>>26,D&=67108863}p.words[T]=G,w=D,D=I}return w!==0?p.words[T]=w:p.length--,p._strip()}function rt(R,u,p){return z(R,u,p)}i.prototype.mulTo=function(u,p){var w,I=this.length+u.length;return this.length===10&&u.length===10?w=K(this,u,p):I<63?w=L(this,u,p):I<1024?w=z(this,u,p):w=rt(this,u,p),w},i.prototype.mul=function(u){var p=new i(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},i.prototype.mulf=function(u){var p=new i(null);return p.words=new Array(this.length+u.length),rt(this,u,p)},i.prototype.imul=function(u){return this.clone().mulTo(u,this)},i.prototype.imuln=function(u){var p=u<0;p&&(u=-u),n(typeof u=="number"),n(u<67108864);for(var w=0,I=0;I<this.length;I++){var T=(this.words[I]|0)*u,D=(T&67108863)+(w&67108863);w>>=26,w+=T/67108864|0,w+=D>>>26,this.words[I]=D&67108863}return w!==0&&(this.words[I]=w,this.length++),this.length=u===0?1:this.length,p?this.ineg():this},i.prototype.muln=function(u){return this.clone().imuln(u)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(u){var p=v(u);if(p.length===0)return new i(1);for(var w=this,I=0;I<p.length&&p[I]===0;I++,w=w.sqr());if(++I<p.length)for(var T=w.sqr();I<p.length;I++,T=T.sqr())p[I]!==0&&(w=w.mul(T));return w},i.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var p=u%26,w=(u-p)/26,I=67108863>>>26-p<<26-p,T;if(p!==0){var D=0;for(T=0;T<this.length;T++){var G=this.words[T]&I,N=(this.words[T]|0)-G<<p;this.words[T]=N|D,D=G>>>26-p}D&&(this.words[T]=D,this.length++)}if(w!==0){for(T=this.length-1;T>=0;T--)this.words[T+w]=this.words[T];for(T=0;T<w;T++)this.words[T]=0;this.length+=w}return this._strip()},i.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},i.prototype.iushrn=function(u,p,w){n(typeof u=="number"&&u>=0);var I;p?I=(p-p%26)/26:I=0;var T=u%26,D=Math.min((u-T)/26,this.length),G=67108863^67108863>>>T<<T,N=w;if(I-=D,I=Math.max(0,I),N){for(var l=0;l<D;l++)N.words[l]=this.words[l];N.length=D}if(D!==0)if(this.length>D)for(this.length-=D,l=0;l<this.length;l++)this.words[l]=this.words[l+D];else this.words[0]=0,this.length=1;var d=0;for(l=this.length-1;l>=0&&(d!==0||l>=I);l--){var x=this.words[l]|0;this.words[l]=d<<26-T|x>>>T,d=x&G}return N&&d!==0&&(N.words[N.length++]=d),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(u,p,w){return n(this.negative===0),this.iushrn(u,p,w)},i.prototype.shln=function(u){return this.clone().ishln(u)},i.prototype.ushln=function(u){return this.clone().iushln(u)},i.prototype.shrn=function(u){return this.clone().ishrn(u)},i.prototype.ushrn=function(u){return this.clone().iushrn(u)},i.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,w=(u-p)/26,I=1<<p;if(this.length<=w)return!1;var T=this.words[w];return!!(T&I)},i.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,w=(u-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(p!==0&&w++,this.length=Math.min(w,this.length),p!==0){var I=67108863^67108863>>>p<<p;this.words[this.length-1]&=I}return this._strip()},i.prototype.maskn=function(u){return this.clone().imaskn(u)},i.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},i.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},i.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},i.prototype.addn=function(u){return this.clone().iaddn(u)},i.prototype.subn=function(u){return this.clone().isubn(u)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(u,p,w){var I=u.length+w,T;this._expand(I);var D,G=0;for(T=0;T<u.length;T++){D=(this.words[T+w]|0)+G;var N=(u.words[T]|0)*p;D-=N&67108863,G=(D>>26)-(N/67108864|0),this.words[T+w]=D&67108863}for(;T<this.length-w;T++)D=(this.words[T+w]|0)+G,G=D>>26,this.words[T+w]=D&67108863;if(G===0)return this._strip();for(n(G===-1),G=0,T=0;T<this.length;T++)D=-(this.words[T]|0)+G,G=D>>26,this.words[T]=D&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(u,p){var w=this.length-u.length,I=this.clone(),T=u,D=T.words[T.length-1]|0,G=this._countBits(D);w=26-G,w!==0&&(T=T.ushln(w),I.iushln(w),D=T.words[T.length-1]|0);var N=I.length-T.length,l;if(p!=="mod"){l=new i(null),l.length=N+1,l.words=new Array(l.length);for(var d=0;d<l.length;d++)l.words[d]=0}var x=I.clone()._ishlnsubmul(T,1,N);x.negative===0&&(I=x,l&&(l.words[N]=1));for(var C=N-1;C>=0;C--){var Q=(I.words[T.length+C]|0)*67108864+(I.words[T.length+C-1]|0);for(Q=Math.min(Q/D|0,67108863),I._ishlnsubmul(T,Q,C);I.negative!==0;)Q--,I.negative=0,I._ishlnsubmul(T,1,C),I.isZero()||(I.negative^=1);l&&(l.words[C]=Q)}return l&&l._strip(),I._strip(),p!=="div"&&w!==0&&I.iushrn(w),{div:l||null,mod:I}},i.prototype.divmod=function(u,p,w){if(n(!u.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var I,T,D;return this.negative!==0&&u.negative===0?(D=this.neg().divmod(u,p),p!=="mod"&&(I=D.div.neg()),p!=="div"&&(T=D.mod.neg(),w&&T.negative!==0&&T.iadd(u)),{div:I,mod:T}):this.negative===0&&u.negative!==0?(D=this.divmod(u.neg(),p),p!=="mod"&&(I=D.div.neg()),{div:I,mod:D.mod}):(this.negative&u.negative)!==0?(D=this.neg().divmod(u.neg(),p),p!=="div"&&(T=D.mod.neg(),w&&T.negative!==0&&T.isub(u)),{div:D.div,mod:T}):u.length>this.length||this.cmp(u)<0?{div:new i(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new i(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new i(this.modrn(u.words[0]))}:this._wordDiv(u,p)},i.prototype.div=function(u){return this.divmod(u,"div",!1).div},i.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},i.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},i.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var w=p.div.negative!==0?p.mod.isub(u):p.mod,I=u.ushrn(1),T=u.andln(1),D=w.cmp(I);return D<0||T===1&&D===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},i.prototype.modrn=function(u){var p=u<0;p&&(u=-u),n(u<=67108863);for(var w=(1<<26)%u,I=0,T=this.length-1;T>=0;T--)I=(w*I+(this.words[T]|0))%u;return p?-I:I},i.prototype.modn=function(u){return this.modrn(u)},i.prototype.idivn=function(u){var p=u<0;p&&(u=-u),n(u<=67108863);for(var w=0,I=this.length-1;I>=0;I--){var T=(this.words[I]|0)+w*67108864;this.words[I]=T/u|0,w=T%u}return this._strip(),p?this.ineg():this},i.prototype.divn=function(u){return this.clone().idivn(u)},i.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var p=this,w=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var I=new i(1),T=new i(0),D=new i(0),G=new i(1),N=0;p.isEven()&&w.isEven();)p.iushrn(1),w.iushrn(1),++N;for(var l=w.clone(),d=p.clone();!p.isZero();){for(var x=0,C=1;(p.words[0]&C)===0&&x<26;++x,C<<=1);if(x>0)for(p.iushrn(x);x-- >0;)(I.isOdd()||T.isOdd())&&(I.iadd(l),T.isub(d)),I.iushrn(1),T.iushrn(1);for(var Q=0,nt=1;(w.words[0]&nt)===0&&Q<26;++Q,nt<<=1);if(Q>0)for(w.iushrn(Q);Q-- >0;)(D.isOdd()||G.isOdd())&&(D.iadd(l),G.isub(d)),D.iushrn(1),G.iushrn(1);p.cmp(w)>=0?(p.isub(w),I.isub(D),T.isub(G)):(w.isub(p),D.isub(I),G.isub(T))}return{a:D,b:G,gcd:w.iushln(N)}},i.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var p=this,w=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var I=new i(1),T=new i(0),D=w.clone();p.cmpn(1)>0&&w.cmpn(1)>0;){for(var G=0,N=1;(p.words[0]&N)===0&&G<26;++G,N<<=1);if(G>0)for(p.iushrn(G);G-- >0;)I.isOdd()&&I.iadd(D),I.iushrn(1);for(var l=0,d=1;(w.words[0]&d)===0&&l<26;++l,d<<=1);if(l>0)for(w.iushrn(l);l-- >0;)T.isOdd()&&T.iadd(D),T.iushrn(1);p.cmp(w)>=0?(p.isub(w),I.isub(T)):(w.isub(p),T.isub(I))}var x;return p.cmpn(1)===0?x=I:x=T,x.cmpn(0)<0&&x.iadd(u),x},i.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),w=u.clone();p.negative=0,w.negative=0;for(var I=0;p.isEven()&&w.isEven();I++)p.iushrn(1),w.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;w.isEven();)w.iushrn(1);var T=p.cmp(w);if(T<0){var D=p;p=w,w=D}else if(T===0||w.cmpn(1)===0)break;p.isub(w)}while(!0);return w.iushln(I)},i.prototype.invm=function(u){return this.egcd(u).a.umod(u)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(u){return this.words[0]&u},i.prototype.bincn=function(u){n(typeof u=="number");var p=u%26,w=(u-p)/26,I=1<<p;if(this.length<=w)return this._expand(w+1),this.words[w]|=I,this;for(var T=I,D=w;T!==0&&D<this.length;D++){var G=this.words[D]|0;G+=T,T=G>>>26,G&=67108863,this.words[D]=G}return T!==0&&(this.words[D]=T,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var w;if(this.length>1)w=1;else{p&&(u=-u),n(u<=67108863,"Number is too big");var I=this.words[0]|0;w=I===u?0:I<u?-1:1}return this.negative!==0?-w|0:w},i.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},i.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,w=this.length-1;w>=0;w--){var I=this.words[w]|0,T=u.words[w]|0;if(I!==T){I<T?p=-1:I>T&&(p=1);break}}return p},i.prototype.gtn=function(u){return this.cmpn(u)===1},i.prototype.gt=function(u){return this.cmp(u)===1},i.prototype.gten=function(u){return this.cmpn(u)>=0},i.prototype.gte=function(u){return this.cmp(u)>=0},i.prototype.ltn=function(u){return this.cmpn(u)===-1},i.prototype.lt=function(u){return this.cmp(u)===-1},i.prototype.lten=function(u){return this.cmpn(u)<=0},i.prototype.lte=function(u){return this.cmp(u)<=0},i.prototype.eqn=function(u){return this.cmpn(u)===0},i.prototype.eq=function(u){return this.cmp(u)===0},i.red=function(u){return new M(u)},i.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(u){return this.red=u,this},i.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},i.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},i.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},i.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},i.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},i.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},i.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},i.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var V={k256:null,p224:null,p192:null,p25519:null};function Y(R,u){this.name=R,this.p=new i(u,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var u=new i(null);return u.words=new Array(Math.ceil(this.n/13)),u},Y.prototype.ireduce=function(u){var p=u,w;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),w=p.bitLength();while(w>this.n);var I=w<this.n?-1:p.ucmp(this.p);return I===0?(p.words[0]=0,p.length=1):I>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},Y.prototype.split=function(u,p){u.iushrn(this.n,0,p)},Y.prototype.imulK=function(u){return u.imul(this.k)};function st(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(st,Y),st.prototype.split=function(u,p){for(var w=4194303,I=Math.min(u.length,9),T=0;T<I;T++)p.words[T]=u.words[T];if(p.length=I,u.length<=9){u.words[0]=0,u.length=1;return}var D=u.words[9];for(p.words[p.length++]=D&w,T=10;T<u.length;T++){var G=u.words[T]|0;u.words[T-10]=(G&w)<<4|D>>>22,D=G}D>>>=22,u.words[T-10]=D,D===0&&u.length>10?u.length-=10:u.length-=9},st.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,w=0;w<u.length;w++){var I=u.words[w]|0;p+=I*977,u.words[w]=p&67108863,p=I*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function et(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(et,Y);function U(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(U,Y);function P(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(P,Y),P.prototype.imulK=function(u){for(var p=0,w=0;w<u.length;w++){var I=(u.words[w]|0)*19+p,T=I&67108863;I>>>=26,u.words[w]=T,p=I}return p!==0&&(u.words[u.length++]=p),u},i._prime=function(u){if(V[u])return V[u];var p;if(u==="k256")p=new st;else if(u==="p224")p=new et;else if(u==="p192")p=new U;else if(u==="p25519")p=new P;else throw new Error("Unknown prime "+u);return V[u]=p,p};function M(R){if(typeof R=="string"){var u=i._prime(R);this.m=u.p,this.prime=u}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}M.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},M.prototype._verify2=function(u,p){n((u.negative|p.negative)===0,"red works only with positives"),n(u.red&&u.red===p.red,"red works only with red numbers")},M.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(h(u,u.umod(this.m)._forceRed(this)),u)},M.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},M.prototype.add=function(u,p){this._verify2(u,p);var w=u.add(p);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},M.prototype.iadd=function(u,p){this._verify2(u,p);var w=u.iadd(p);return w.cmp(this.m)>=0&&w.isub(this.m),w},M.prototype.sub=function(u,p){this._verify2(u,p);var w=u.sub(p);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},M.prototype.isub=function(u,p){this._verify2(u,p);var w=u.isub(p);return w.cmpn(0)<0&&w.iadd(this.m),w},M.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},M.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},M.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},M.prototype.isqr=function(u){return this.imul(u,u.clone())},M.prototype.sqr=function(u){return this.mul(u,u)},M.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(u,w)}for(var I=this.m.subn(1),T=0;!I.isZero()&&I.andln(1)===0;)T++,I.iushrn(1);n(!I.isZero());var D=new i(1).toRed(this),G=D.redNeg(),N=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,N).cmp(G)!==0;)l.redIAdd(G);for(var d=this.pow(l,I),x=this.pow(u,I.addn(1).iushrn(1)),C=this.pow(u,I),Q=T;C.cmp(D)!==0;){for(var nt=C,ft=0;nt.cmp(D)!==0;ft++)nt=nt.redSqr();n(ft<Q);var mt=this.pow(d,new i(1).iushln(Q-ft-1));x=x.redMul(mt),d=mt.redSqr(),C=C.redMul(d),Q=ft}return x},M.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},M.prototype.pow=function(u,p){if(p.isZero())return new i(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var w=4,I=new Array(1<<w);I[0]=new i(1).toRed(this),I[1]=u;for(var T=2;T<I.length;T++)I[T]=this.mul(I[T-1],u);var D=I[0],G=0,N=0,l=p.bitLength()%26;for(l===0&&(l=26),T=p.length-1;T>=0;T--){for(var d=p.words[T],x=l-1;x>=0;x--){var C=d>>x&1;if(D!==I[0]&&(D=this.sqr(D)),C===0&&G===0){N=0;continue}G<<=1,G|=C,N++,!(N!==w&&(T!==0||x!==0))&&(D=this.mul(D,I[G]),N=0,G=0)}l=26}return D},M.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},M.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},i.mont=function(u){return new H(u)};function H(R){M.call(this,R),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(H,M),H.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},H.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},H.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var w=u.imul(p),I=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(I).iushrn(this.shift),D=T;return T.cmp(this.m)>=0?D=T.isub(this.m):T.cmpn(0)<0&&(D=T.iadd(this.m)),D._forceRed(this)},H.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new i(0)._forceRed(this);var w=u.mul(p),I=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(I).iushrn(this.shift),D=T;return T.cmp(this.m)>=0?D=T.isub(this.m):T.cmpn(0)<0&&(D=T.iadd(this.m)),D._forceRed(this)},H.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,Gy)}(Rc)),Rc.exports}var Hy=ep();const Wh=du(Hy);var lc={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Qh;function zy(){return Qh||(Qh=1,function(r,t){var e=Hf(),n=e.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,a,c){return n(o,a,c)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var f=n(o);return a!==void 0?typeof c=="string"?f.fill(a,c):f.fill(a):f.fill(0),f},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}}(lc,lc.exports)),lc.exports}var dl,Jh;function Vy(){if(Jh)return dl;Jh=1;var r=zy().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var c=e.length,f=e.charAt(0),h=Math.log(c)/Math.log(256),y=Math.log(256)/Math.log(c);function _(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=r.from(E)),!r.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var v=0,L=0,K=0,z=E.length;K!==z&&E[K]===0;)K++,v++;for(var rt=(z-K)*y+1>>>0,V=new Uint8Array(rt);K!==z;){for(var Y=E[K],st=0,et=rt-1;(Y!==0||st<L)&&et!==-1;et--,st++)Y+=256*V[et]>>>0,V[et]=Y%c>>>0,Y=Y/c>>>0;if(Y!==0)throw new Error("Non-zero carry");L=st,K++}for(var U=rt-L;U!==rt&&V[U]===0;)U++;for(var P=f.repeat(v);U<rt;++U)P+=e.charAt(V[U]);return P}function A(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return r.alloc(0);for(var v=0,L=0,K=0;E[v]===f;)L++,v++;for(var z=(E.length-v)*h+1>>>0,rt=new Uint8Array(z);v<E.length;){var V=E.charCodeAt(v);if(V>255)return;var Y=n[V];if(Y===255)return;for(var st=0,et=z-1;(Y!==0||st<K)&&et!==-1;et--,st++)Y+=c*rt[et]>>>0,rt[et]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");K=st,v++}for(var U=z-K;U!==z&&rt[U]===0;)U++;var P=r.allocUnsafe(L+(z-U));P.fill(0,0,L);for(var M=L;U!==z;)P[M++]=rt[U++];return P}function O(E){var v=A(E);if(v)return v;throw new Error("Non-base"+c+" character")}return{encode:_,decodeUnsafe:A,decode:O}}return dl=t,dl}var pl,jh;function np(){if(jh)return pl;jh=1;var r=Vy(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return pl=r(t),pl}var Ky=np();const Ge=du(Ky),Zh=G0;var Gt={};function Dr(r,t,e){return t<=r&&r<=e}function wu(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function $y(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),n+=1}else s.push(65533)}n+=1}return s}function qy(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Uc=-1;function Wf(r){this.tokens=[].slice.call(r)}Wf.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Uc},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Vo=-1;function gl(r,t){if(r)throw TypeError("Decoder error");return t||65533}var Dc="utf-8";function Fc(r,t){if(!(this instanceof Fc))return new Fc(r,t);if(r=r!==void 0?String(r).toLowerCase():Dc,r!==Dc)throw new Error("Encoding not supported. Only utf-8 is supported");t=wu(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Fc.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=wu(e),this._streaming||(this._decoder=new Wy({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Wf(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Vo);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Vo)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),qy(i)}};function Gc(r,t){if(!(this instanceof Gc))return new Gc(r,t);if(r=r!==void 0?String(r).toLowerCase():Dc,r!==Dc)throw new Error("Encoding not supported. Only utf-8 is supported");t=wu(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Gc.prototype={encode:function(t,e){t=t?String(t):"",e=wu(e),this._streaming||(this._encoder=new Qy(this._options)),this._streaming=!!e.stream;for(var n=[],s=new Wf($y(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Vo);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Vo;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Wy(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===Uc&&s!==0)return s=0,gl(t);if(c===Uc)return Vo;if(s===0){if(Dr(c,0,127))return c;if(Dr(c,194,223))s=1,e=c-192;else if(Dr(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,e=c-224;else if(Dr(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,e=c-240;else return gl(t);return e=e<<6*s,null}if(!Dr(c,i,o))return e=s=n=0,i=128,o=191,a.prepend(c),gl(t);if(i=128,o=191,n+=1,e+=c-128<<6*(s-n),n!==s)return null;var f=e;return e=s=n=0,f}}function Qy(r){r.fatal,this.handler=function(t,e){if(e===Uc)return Vo;if(Dr(e,0,127))return e;var n,s;Dr(e,128,2047)?(n=1,s=192):Dr(e,2048,65535)?(n=2,s=224):Dr(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Jy=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Fc,TextEncoder:Gc},Symbol.toStringTag,{value:"Module"})),jy=Gf(Jy);var Yh;function Zy(){if(Yh)return Gt;Yh=1;var r=Gt&&Gt.__createBinding||(Object.create?function(U,P,M,H){H===void 0&&(H=M),Object.defineProperty(U,H,{enumerable:!0,get:function(){return P[M]}})}:function(U,P,M,H){H===void 0&&(H=M),U[H]=P[M]}),t=Gt&&Gt.__setModuleDefault||(Object.create?function(U,P){Object.defineProperty(U,"default",{enumerable:!0,value:P})}:function(U,P){U.default=P}),e=Gt&&Gt.__decorate||function(U,P,M,H){var R=arguments.length,u=R<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,M):H,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(U,P,M,H);else for(var w=U.length-1;w>=0;w--)(p=U[w])&&(u=(R<3?p(u):R>3?p(P,M,u):p(P,M))||u);return R>3&&u&&Object.defineProperty(P,M,u),u},n=Gt&&Gt.__importStar||function(U){if(U&&U.__esModule)return U;var P={};if(U!=null)for(var M in U)M!=="default"&&Object.hasOwnProperty.call(U,M)&&r(P,U,M);return t(P,U),P},s=Gt&&Gt.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.deserializeUnchecked=Gt.deserialize=Gt.serialize=Gt.BinaryReader=Gt.BinaryWriter=Gt.BorshError=Gt.baseDecode=Gt.baseEncode=void 0;const i=s(ep()),o=s(np()),a=n(jy),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,f=new c("utf-8",{fatal:!0});function h(U){return typeof U=="string"&&(U=Buffer.from(U,"utf8")),o.default.encode(Buffer.from(U))}Gt.baseEncode=h;function y(U){return Buffer.from(o.default.decode(U))}Gt.baseDecode=y;const _=1024;class A extends Error{constructor(P){super(P),this.fieldPath=[],this.originalMessage=P}addToFieldPath(P){this.fieldPath.splice(0,0,P),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Gt.BorshError=A;class O{constructor(){this.buf=Buffer.alloc(_),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(_)]))}writeU8(P){this.maybeResize(),this.buf.writeUInt8(P,this.length),this.length+=1}writeU16(P){this.maybeResize(),this.buf.writeUInt16LE(P,this.length),this.length+=2}writeU32(P){this.maybeResize(),this.buf.writeUInt32LE(P,this.length),this.length+=4}writeU64(P){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(P).toArray("le",8)))}writeU128(P){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(P).toArray("le",16)))}writeU256(P){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(P).toArray("le",32)))}writeU512(P){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(P).toArray("le",64)))}writeBuffer(P){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),P,Buffer.alloc(_)]),this.length+=P.length}writeString(P){this.maybeResize();const M=Buffer.from(P,"utf8");this.writeU32(M.length),this.writeBuffer(M)}writeFixedArray(P){this.writeBuffer(Buffer.from(P))}writeArray(P,M){this.maybeResize(),this.writeU32(P.length);for(const H of P)this.maybeResize(),M(H)}toArray(){return this.buf.subarray(0,this.length)}}Gt.BinaryWriter=O;function E(U,P,M){const H=M.value;M.value=function(...R){try{return H.apply(this,R)}catch(u){if(u instanceof RangeError){const p=u.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(p)>=0)throw new A("Reached the end of buffer when deserializing")}throw u}}}class v{constructor(P){this.buf=P,this.offset=0}readU8(){const P=this.buf.readUInt8(this.offset);return this.offset+=1,P}readU16(){const P=this.buf.readUInt16LE(this.offset);return this.offset+=2,P}readU32(){const P=this.buf.readUInt32LE(this.offset);return this.offset+=4,P}readU64(){const P=this.readBuffer(8);return new i.default(P,"le")}readU128(){const P=this.readBuffer(16);return new i.default(P,"le")}readU256(){const P=this.readBuffer(32);return new i.default(P,"le")}readU512(){const P=this.readBuffer(64);return new i.default(P,"le")}readBuffer(P){if(this.offset+P>this.buf.length)throw new A(`Expected buffer length ${P} isn't within bounds`);const M=this.buf.slice(this.offset,this.offset+P);return this.offset+=P,M}readString(){const P=this.readU32(),M=this.readBuffer(P);try{return f.decode(M)}catch(H){throw new A(`Error decoding UTF-8 string: ${H}`)}}readFixedArray(P){return new Uint8Array(this.readBuffer(P))}readArray(P){const M=this.readU32(),H=Array();for(let R=0;R<M;++R)H.push(P());return H}}e([E],v.prototype,"readU8",null),e([E],v.prototype,"readU16",null),e([E],v.prototype,"readU32",null),e([E],v.prototype,"readU64",null),e([E],v.prototype,"readU128",null),e([E],v.prototype,"readU256",null),e([E],v.prototype,"readU512",null),e([E],v.prototype,"readString",null),e([E],v.prototype,"readFixedArray",null),e([E],v.prototype,"readArray",null),Gt.BinaryReader=v;function L(U){return U.charAt(0).toUpperCase()+U.slice(1)}function K(U,P,M,H,R){try{if(typeof H=="string")R[`write${L(H)}`](M);else if(H instanceof Array)if(typeof H[0]=="number"){if(M.length!==H[0])throw new A(`Expecting byte array of length ${H[0]}, but got ${M.length} bytes`);R.writeFixedArray(M)}else if(H.length===2&&typeof H[1]=="number"){if(M.length!==H[1])throw new A(`Expecting byte array of length ${H[1]}, but got ${M.length} bytes`);for(let u=0;u<H[1];u++)K(U,null,M[u],H[0],R)}else R.writeArray(M,u=>{K(U,P,u,H[0],R)});else if(H.kind!==void 0)switch(H.kind){case"option":{M==null?R.writeU8(0):(R.writeU8(1),K(U,P,M,H.type,R));break}case"map":{R.writeU32(M.size),M.forEach((u,p)=>{K(U,P,p,H.key,R),K(U,P,u,H.value,R)});break}default:throw new A(`FieldType ${H} unrecognized`)}else z(U,M,R)}catch(u){throw u instanceof A&&u.addToFieldPath(P),u}}function z(U,P,M){if(typeof P.borshSerialize=="function"){P.borshSerialize(M);return}const H=U.get(P.constructor);if(!H)throw new A(`Class ${P.constructor.name} is missing in schema`);if(H.kind==="struct")H.fields.map(([R,u])=>{K(U,R,P[R],u,M)});else if(H.kind==="enum"){const R=P[H.field];for(let u=0;u<H.values.length;++u){const[p,w]=H.values[u];if(p===R){M.writeU8(u),K(U,p,P[p],w,M);break}}}else throw new A(`Unexpected schema kind: ${H.kind} for ${P.constructor.name}`)}function rt(U,P,M=O){const H=new M;return z(U,P,H),H.toArray()}Gt.serialize=rt;function V(U,P,M,H){try{if(typeof M=="string")return H[`read${L(M)}`]();if(M instanceof Array){if(typeof M[0]=="number")return H.readFixedArray(M[0]);if(typeof M[1]=="number"){const R=[];for(let u=0;u<M[1];u++)R.push(V(U,null,M[0],H));return R}else return H.readArray(()=>V(U,P,M[0],H))}if(M.kind==="option")return H.readU8()?V(U,P,M.type,H):void 0;if(M.kind==="map"){let R=new Map;const u=H.readU32();for(let p=0;p<u;p++){const w=V(U,P,M.key,H),I=V(U,P,M.value,H);R.set(w,I)}return R}return Y(U,M,H)}catch(R){throw R instanceof A&&R.addToFieldPath(P),R}}function Y(U,P,M){if(typeof P.borshDeserialize=="function")return P.borshDeserialize(M);const H=U.get(P);if(!H)throw new A(`Class ${P.name} is missing in schema`);if(H.kind==="struct"){const R={};for(const[u,p]of U.get(P).fields)R[u]=V(U,u,p,M);return new P(R)}if(H.kind==="enum"){const R=M.readU8();if(R>=H.values.length)throw new A(`Enum index: ${R} is out of range`);const[u,p]=H.values[R],w=V(U,u,p,M);return new P({[u]:w})}throw new A(`Unexpected schema kind: ${H.kind} for ${P.constructor.name}`)}function st(U,P,M,H=v){const R=new H(M),u=Y(U,P,R);if(R.offset<M.length)throw new A(`Unexpected ${M.length-R.offset} bytes after deserialized data`);return u}Gt.deserialize=st;function et(U,P,M,H=v){const R=new H(M);return Y(U,P,R)}return Gt.deserializeUnchecked=et,Gt}var ml=Zy(),Z={},Xh;function Yy(){if(Xh)return Z;Xh=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.s16=Z.s8=Z.nu64be=Z.u48be=Z.u40be=Z.u32be=Z.u24be=Z.u16be=Z.nu64=Z.u48=Z.u40=Z.u32=Z.u24=Z.u16=Z.u8=Z.offset=Z.greedy=Z.Constant=Z.UTF8=Z.CString=Z.Blob=Z.Boolean=Z.BitField=Z.BitStructure=Z.VariantLayout=Z.Union=Z.UnionLayoutDiscriminator=Z.UnionDiscriminator=Z.Structure=Z.Sequence=Z.DoubleBE=Z.Double=Z.FloatBE=Z.Float=Z.NearInt64BE=Z.NearInt64=Z.NearUInt64BE=Z.NearUInt64=Z.IntBE=Z.Int=Z.UIntBE=Z.UInt=Z.OffsetLayout=Z.GreedyCount=Z.ExternalLayout=Z.bindConstructorLayout=Z.nameWithProperty=Z.Layout=Z.uint8ArrayToBuffer=Z.checkUint8Array=void 0,Z.constant=Z.utf8=Z.cstr=Z.blob=Z.unionLayoutDiscriminator=Z.union=Z.seq=Z.bits=Z.struct=Z.f64be=Z.f64=Z.f32be=Z.f32=Z.ns64be=Z.s48be=Z.s40be=Z.s32be=Z.s24be=Z.s16be=Z.ns64=Z.s48=Z.s40=Z.s32=Z.s24=void 0;const r=Hf();function t(l){if(!(l instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Z.checkUint8Array=t;function e(l){return t(l),r.Buffer.from(l.buffer,l.byteOffset,l.length)}Z.uint8ArrayToBuffer=e;let n=class{constructor(d,x){if(!Number.isInteger(d))throw new TypeError("span must be an integer");this.span=d,this.property=x}makeDestinationObject(){return{}}getSpan(d,x){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(d){const x=Object.create(this.constructor.prototype);return Object.assign(x,this),x.property=d,x}fromArray(d){}};Z.Layout=n;function s(l,d){return d.property?l+"["+d.property+"]":l}Z.nameWithProperty=s;function i(l,d){if(typeof l!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(l,"layout_"))throw new Error("Class is already bound to a layout");if(!(d&&d instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(d,"boundConstructor_"))throw new Error("layout is already bound to a constructor");l.layout_=d,d.boundConstructor_=l,d.makeDestinationObject=()=>new l,Object.defineProperty(l.prototype,"encode",{value(x,C){return d.encode(this,x,C)},writable:!0}),Object.defineProperty(l,"decode",{value(x,C){return d.decode(x,C)},writable:!0})}Z.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Z.ExternalLayout=o;class a extends o{constructor(d=1,x){if(!Number.isInteger(d)||0>=d)throw new TypeError("elementSpan must be a (positive) integer");super(-1,x),this.elementSpan=d}isCount(){return!0}decode(d,x=0){t(d);const C=d.length-x;return Math.floor(C/this.elementSpan)}encode(d,x,C){return 0}}Z.GreedyCount=a;class c extends o{constructor(d,x=0,C){if(!(d instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(x))throw new TypeError("offset must be integer or undefined");super(d.span,C||d.property),this.layout=d,this.offset=x}isCount(){return this.layout instanceof f||this.layout instanceof h}decode(d,x=0){return this.layout.decode(d,x+this.offset)}encode(d,x,C=0){return this.layout.encode(d,x,C+this.offset)}}Z.OffsetLayout=c;class f extends n{constructor(d,x){if(super(d,x),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,x=0){return e(d).readUIntLE(x,this.span)}encode(d,x,C=0){return e(x).writeUIntLE(d,C,this.span),this.span}}Z.UInt=f;class h extends n{constructor(d,x){if(super(d,x),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,x=0){return e(d).readUIntBE(x,this.span)}encode(d,x,C=0){return e(x).writeUIntBE(d,C,this.span),this.span}}Z.UIntBE=h;class y extends n{constructor(d,x){if(super(d,x),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,x=0){return e(d).readIntLE(x,this.span)}encode(d,x,C=0){return e(x).writeIntLE(d,C,this.span),this.span}}Z.Int=y;class _ extends n{constructor(d,x){if(super(d,x),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,x=0){return e(d).readIntBE(x,this.span)}encode(d,x,C=0){return e(x).writeIntBE(d,C,this.span),this.span}}Z.IntBE=_;const A=Math.pow(2,32);function O(l){const d=Math.floor(l/A),x=l-d*A;return{hi32:d,lo32:x}}function E(l,d){return l*A+d}class v extends n{constructor(d){super(8,d)}decode(d,x=0){const C=e(d),Q=C.readUInt32LE(x),nt=C.readUInt32LE(x+4);return E(nt,Q)}encode(d,x,C=0){const Q=O(d),nt=e(x);return nt.writeUInt32LE(Q.lo32,C),nt.writeUInt32LE(Q.hi32,C+4),8}}Z.NearUInt64=v;class L extends n{constructor(d){super(8,d)}decode(d,x=0){const C=e(d),Q=C.readUInt32BE(x),nt=C.readUInt32BE(x+4);return E(Q,nt)}encode(d,x,C=0){const Q=O(d),nt=e(x);return nt.writeUInt32BE(Q.hi32,C),nt.writeUInt32BE(Q.lo32,C+4),8}}Z.NearUInt64BE=L;class K extends n{constructor(d){super(8,d)}decode(d,x=0){const C=e(d),Q=C.readUInt32LE(x),nt=C.readInt32LE(x+4);return E(nt,Q)}encode(d,x,C=0){const Q=O(d),nt=e(x);return nt.writeUInt32LE(Q.lo32,C),nt.writeInt32LE(Q.hi32,C+4),8}}Z.NearInt64=K;class z extends n{constructor(d){super(8,d)}decode(d,x=0){const C=e(d),Q=C.readInt32BE(x),nt=C.readUInt32BE(x+4);return E(Q,nt)}encode(d,x,C=0){const Q=O(d),nt=e(x);return nt.writeInt32BE(Q.hi32,C),nt.writeUInt32BE(Q.lo32,C+4),8}}Z.NearInt64BE=z;class rt extends n{constructor(d){super(4,d)}decode(d,x=0){return e(d).readFloatLE(x)}encode(d,x,C=0){return e(x).writeFloatLE(d,C),4}}Z.Float=rt;class V extends n{constructor(d){super(4,d)}decode(d,x=0){return e(d).readFloatBE(x)}encode(d,x,C=0){return e(x).writeFloatBE(d,C),4}}Z.FloatBE=V;class Y extends n{constructor(d){super(8,d)}decode(d,x=0){return e(d).readDoubleLE(x)}encode(d,x,C=0){return e(x).writeDoubleLE(d,C),8}}Z.Double=Y;class st extends n{constructor(d){super(8,d)}decode(d,x=0){return e(d).readDoubleBE(x)}encode(d,x,C=0){return e(x).writeDoubleBE(d,C),8}}Z.DoubleBE=st;class et extends n{constructor(d,x,C){if(!(d instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(x instanceof o&&x.isCount()||Number.isInteger(x)&&0<=x))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let Q=-1;!(x instanceof o)&&0<d.span&&(Q=x*d.span),super(Q,C),this.elementLayout=d,this.count=x}getSpan(d,x=0){if(0<=this.span)return this.span;let C=0,Q=this.count;if(Q instanceof o&&(Q=Q.decode(d,x)),0<this.elementLayout.span)C=Q*this.elementLayout.span;else{let nt=0;for(;nt<Q;)C+=this.elementLayout.getSpan(d,x+C),++nt}return C}decode(d,x=0){const C=[];let Q=0,nt=this.count;for(nt instanceof o&&(nt=nt.decode(d,x));Q<nt;)C.push(this.elementLayout.decode(d,x)),x+=this.elementLayout.getSpan(d,x),Q+=1;return C}encode(d,x,C=0){const Q=this.elementLayout,nt=d.reduce((ft,mt)=>ft+Q.encode(mt,x,C+ft),0);return this.count instanceof o&&this.count.encode(d.length,x,C),nt}}Z.Sequence=et;class U extends n{constructor(d,x,C){if(!(Array.isArray(d)&&d.reduce((nt,ft)=>nt&&ft instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof x=="boolean"&&C===void 0&&(C=x,x=void 0);for(const nt of d)if(0>nt.span&&nt.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let Q=-1;try{Q=d.reduce((nt,ft)=>nt+ft.getSpan(),0)}catch{}super(Q,x),this.fields=d,this.decodePrefixes=!!C}getSpan(d,x=0){if(0<=this.span)return this.span;let C=0;try{C=this.fields.reduce((Q,nt)=>{const ft=nt.getSpan(d,x);return x+=ft,Q+ft},0)}catch{throw new RangeError("indeterminate span")}return C}decode(d,x=0){t(d);const C=this.makeDestinationObject();for(const Q of this.fields)if(Q.property!==void 0&&(C[Q.property]=Q.decode(d,x)),x+=Q.getSpan(d,x),this.decodePrefixes&&d.length===x)break;return C}encode(d,x,C=0){const Q=C;let nt=0,ft=0;for(const mt of this.fields){let $t=mt.span;if(ft=0<$t?$t:0,mt.property!==void 0){const Ct=d[mt.property];Ct!==void 0&&(ft=mt.encode(Ct,x,C),0>$t&&($t=mt.getSpan(x,C)))}nt=C,C+=$t}return nt+ft-Q}fromArray(d){const x=this.makeDestinationObject();for(const C of this.fields)C.property!==void 0&&0<d.length&&(x[C.property]=d.shift());return x}layoutFor(d){if(typeof d!="string")throw new TypeError("property must be string");for(const x of this.fields)if(x.property===d)return x}offsetOf(d){if(typeof d!="string")throw new TypeError("property must be string");let x=0;for(const C of this.fields){if(C.property===d)return x;0>C.span?x=-1:0<=x&&(x+=C.span)}}}Z.Structure=U;class P{constructor(d){this.property=d}decode(d,x){throw new Error("UnionDiscriminator is abstract")}encode(d,x,C){throw new Error("UnionDiscriminator is abstract")}}Z.UnionDiscriminator=P;class M extends P{constructor(d,x){if(!(d instanceof o&&d.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(x||d.property||"variant"),this.layout=d}decode(d,x){return this.layout.decode(d,x)}encode(d,x,C){return this.layout.encode(d,x,C)}}Z.UnionLayoutDiscriminator=M;class H extends n{constructor(d,x,C){let Q;if(d instanceof f||d instanceof h)Q=new M(new c(d));else if(d instanceof o&&d.isCount())Q=new M(d);else if(d instanceof P)Q=d;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(x===void 0&&(x=null),!(x===null||x instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(x!==null){if(0>x.span)throw new Error("defaultLayout must have constant span");x.property===void 0&&(x=x.replicate("content"))}let nt=-1;x&&(nt=x.span,0<=nt&&(d instanceof f||d instanceof h)&&(nt+=Q.layout.span)),super(nt,C),this.discriminator=Q,this.usesPrefixDiscriminator=d instanceof f||d instanceof h,this.defaultLayout=x,this.registry={};let ft=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(mt){return ft(mt)},this.configGetSourceVariant=function(mt){ft=mt.bind(this)}}getSpan(d,x=0){if(0<=this.span)return this.span;const C=this.getVariant(d,x);if(!C)throw new Error("unable to determine span for unrecognized variant");return C.getSpan(d,x)}defaultGetSourceVariant(d){if(Object.prototype.hasOwnProperty.call(d,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(d,this.defaultLayout.property))return;const x=this.registry[d[this.discriminator.property]];if(x&&(!x.layout||x.property&&Object.prototype.hasOwnProperty.call(d,x.property)))return x}else for(const x in this.registry){const C=this.registry[x];if(C.property&&Object.prototype.hasOwnProperty.call(d,C.property))return C}throw new Error("unable to infer src variant")}decode(d,x=0){let C;const Q=this.discriminator,nt=Q.decode(d,x),ft=this.registry[nt];if(ft===void 0){const mt=this.defaultLayout;let $t=0;this.usesPrefixDiscriminator&&($t=Q.layout.span),C=this.makeDestinationObject(),C[Q.property]=nt,C[mt.property]=mt.decode(d,x+$t)}else C=ft.decode(d,x);return C}encode(d,x,C=0){const Q=this.getSourceVariant(d);if(Q===void 0){const nt=this.discriminator,ft=this.defaultLayout;let mt=0;return this.usesPrefixDiscriminator&&(mt=nt.layout.span),nt.encode(d[nt.property],x,C),mt+ft.encode(d[ft.property],x,C+mt)}return Q.encode(d,x,C)}addVariant(d,x,C){const Q=new R(this,d,x,C);return this.registry[d]=Q,Q}getVariant(d,x=0){let C;return d instanceof Uint8Array?C=this.discriminator.decode(d,x):C=d,this.registry[C]}}Z.Union=H;class R extends n{constructor(d,x,C,Q){if(!(d instanceof H))throw new TypeError("union must be a Union");if(!Number.isInteger(x)||0>x)throw new TypeError("variant must be a (non-negative) integer");if(typeof C=="string"&&Q===void 0&&(Q=C,C=null),C){if(!(C instanceof n))throw new TypeError("layout must be a Layout");if(d.defaultLayout!==null&&0<=C.span&&C.span>d.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof Q!="string")throw new TypeError("variant must have a String property")}let nt=d.span;0>d.span&&(nt=C?C.span:0,0<=nt&&d.usesPrefixDiscriminator&&(nt+=d.discriminator.layout.span)),super(nt,Q),this.union=d,this.variant=x,this.layout=C||null}getSpan(d,x=0){if(0<=this.span)return this.span;let C=0;this.union.usesPrefixDiscriminator&&(C=this.union.discriminator.layout.span);let Q=0;return this.layout&&(Q=this.layout.getSpan(d,x+C)),C+Q}decode(d,x=0){const C=this.makeDestinationObject();if(this!==this.union.getVariant(d,x))throw new Error("variant mismatch");let Q=0;return this.union.usesPrefixDiscriminator&&(Q=this.union.discriminator.layout.span),this.layout?C[this.property]=this.layout.decode(d,x+Q):this.property?C[this.property]=!0:this.union.usesPrefixDiscriminator&&(C[this.union.discriminator.property]=this.variant),C}encode(d,x,C=0){let Q=0;if(this.union.usesPrefixDiscriminator&&(Q=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(d,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,x,C);let nt=Q;if(this.layout&&(this.layout.encode(d[this.property],x,C+Q),nt+=this.layout.getSpan(x,C+Q),0<=this.union.span&&nt>this.union.span))throw new Error("encoded variant overruns containing union");return nt}fromArray(d){if(this.layout)return this.layout.fromArray(d)}}Z.VariantLayout=R;function u(l){return 0>l&&(l+=4294967296),l}class p extends n{constructor(d,x,C){if(!(d instanceof f||d instanceof h))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof x=="string"&&C===void 0&&(C=x,x=!1),4<d.span)throw new RangeError("word cannot exceed 32 bits");super(d.span,C),this.word=d,this.msb=!!x,this.fields=[];let Q=0;this._packedSetValue=function(nt){return Q=u(nt),this},this._packedGetValue=function(){return Q}}decode(d,x=0){const C=this.makeDestinationObject(),Q=this.word.decode(d,x);this._packedSetValue(Q);for(const nt of this.fields)nt.property!==void 0&&(C[nt.property]=nt.decode(d));return C}encode(d,x,C=0){const Q=this.word.decode(x,C);this._packedSetValue(Q);for(const nt of this.fields)if(nt.property!==void 0){const ft=d[nt.property];ft!==void 0&&nt.encode(ft)}return this.word.encode(this._packedGetValue(),x,C)}addField(d,x){const C=new w(this,d,x);return this.fields.push(C),C}addBoolean(d){const x=new I(this,d);return this.fields.push(x),x}fieldFor(d){if(typeof d!="string")throw new TypeError("property must be string");for(const x of this.fields)if(x.property===d)return x}}Z.BitStructure=p;class w{constructor(d,x,C){if(!(d instanceof p))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(x)||0>=x)throw new TypeError("bits must be positive integer");const Q=8*d.span,nt=d.fields.reduce((ft,mt)=>ft+mt.bits,0);if(x+nt>Q)throw new Error("bits too long for span remainder ("+(Q-nt)+" of "+Q+" remain)");this.container=d,this.bits=x,this.valueMask=(1<<x)-1,x===32&&(this.valueMask=4294967295),this.start=nt,this.container.msb&&(this.start=Q-nt-x),this.wordMask=u(this.valueMask<<this.start),this.property=C}decode(d,x){const C=this.container._packedGetValue();return u(C&this.wordMask)>>>this.start}encode(d){if(typeof d!="number"||!Number.isInteger(d)||d!==u(d&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const x=this.container._packedGetValue(),C=u(d<<this.start);this.container._packedSetValue(u(x&~this.wordMask)|C)}}Z.BitField=w;class I extends w{constructor(d,x){super(d,1,x)}decode(d,x){return!!super.decode(d,x)}encode(d){typeof d=="boolean"&&(d=+d),super.encode(d)}}Z.Boolean=I;class T extends n{constructor(d,x){if(!(d instanceof o&&d.isCount()||Number.isInteger(d)&&0<=d))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let C=-1;d instanceof o||(C=d),super(C,x),this.length=d}getSpan(d,x){let C=this.span;return 0>C&&(C=this.length.decode(d,x)),C}decode(d,x=0){let C=this.span;return 0>C&&(C=this.length.decode(d,x)),e(d).slice(x,x+C)}encode(d,x,C){let Q=this.length;if(this.length instanceof o&&(Q=d.length),!(d instanceof Uint8Array&&Q===d.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+Q+") Uint8Array as src");if(C+Q>x.length)throw new RangeError("encoding overruns Uint8Array");const nt=e(d);return e(x).write(nt.toString("hex"),C,Q,"hex"),this.length instanceof o&&this.length.encode(Q,x,C),Q}}Z.Blob=T;class D extends n{constructor(d){super(-1,d)}getSpan(d,x=0){t(d);let C=x;for(;C<d.length&&d[C]!==0;)C+=1;return 1+C-x}decode(d,x=0){const C=this.getSpan(d,x);return e(d).slice(x,x+C-1).toString("utf-8")}encode(d,x,C=0){typeof d!="string"&&(d=String(d));const Q=r.Buffer.from(d,"utf8"),nt=Q.length;if(C+nt>x.length)throw new RangeError("encoding overruns Buffer");const ft=e(x);return Q.copy(ft,C),ft[C+nt]=0,nt+1}}Z.CString=D;class G extends n{constructor(d,x){if(typeof d=="string"&&x===void 0&&(x=d,d=void 0),d===void 0)d=-1;else if(!Number.isInteger(d))throw new TypeError("maxSpan must be an integer");super(-1,x),this.maxSpan=d}getSpan(d,x=0){return t(d),d.length-x}decode(d,x=0){const C=this.getSpan(d,x);if(0<=this.maxSpan&&this.maxSpan<C)throw new RangeError("text length exceeds maxSpan");return e(d).slice(x,x+C).toString("utf-8")}encode(d,x,C=0){typeof d!="string"&&(d=String(d));const Q=r.Buffer.from(d,"utf8"),nt=Q.length;if(0<=this.maxSpan&&this.maxSpan<nt)throw new RangeError("text length exceeds maxSpan");if(C+nt>x.length)throw new RangeError("encoding overruns Buffer");return Q.copy(e(x),C),nt}}Z.UTF8=G;class N extends n{constructor(d,x){super(0,x),this.value=d}decode(d,x){return this.value}encode(d,x,C){return 0}}return Z.Constant=N,Z.greedy=(l,d)=>new a(l,d),Z.offset=(l,d,x)=>new c(l,d,x),Z.u8=l=>new f(1,l),Z.u16=l=>new f(2,l),Z.u24=l=>new f(3,l),Z.u32=l=>new f(4,l),Z.u40=l=>new f(5,l),Z.u48=l=>new f(6,l),Z.nu64=l=>new v(l),Z.u16be=l=>new h(2,l),Z.u24be=l=>new h(3,l),Z.u32be=l=>new h(4,l),Z.u40be=l=>new h(5,l),Z.u48be=l=>new h(6,l),Z.nu64be=l=>new L(l),Z.s8=l=>new y(1,l),Z.s16=l=>new y(2,l),Z.s24=l=>new y(3,l),Z.s32=l=>new y(4,l),Z.s40=l=>new y(5,l),Z.s48=l=>new y(6,l),Z.ns64=l=>new K(l),Z.s16be=l=>new _(2,l),Z.s24be=l=>new _(3,l),Z.s32be=l=>new _(4,l),Z.s40be=l=>new _(5,l),Z.s48be=l=>new _(6,l),Z.ns64be=l=>new z(l),Z.f32=l=>new rt(l),Z.f32be=l=>new V(l),Z.f64=l=>new Y(l),Z.f64be=l=>new st(l),Z.struct=(l,d,x)=>new U(l,d,x),Z.bits=(l,d,x)=>new p(l,d,x),Z.seq=(l,d,x)=>new et(l,d,x),Z.union=(l,d,x)=>new H(l,d,x),Z.unionLayoutDiscriminator=(l,d)=>new M(l,d),Z.blob=(l,d)=>new T(l,d),Z.cstr=l=>new D(l),Z.utf8=(l,d)=>new G(l,d),Z.constant=(l,d)=>new N(l,d),Z}var F=Yy(),Xy=1,tw=2,ew=3,nw=4,rw=5,sw=6,iw=7,ow=8,aw=9,cw=10,uw=-32700,lw=-32603,fw=-32602,hw=-32601,dw=-32600,pw=-32016,gw=-32015,mw=-32014,yw=-32013,ww=-32012,Aw=-32011,bw=-32010,Ew=-32009,_w=-32008,Rw=-32007,Sw=-32006,vw=-32005,xw=-32004,Iw=-32003,Nw=-32002,Ow=-32001,Tw=28e5,Bw=2800001,Cw=2800002,kw=2800003,Lw=2800004,Pw=2800005,Mw=2800006,Uw=2800007,Dw=2800008,Fw=2800009,Gw=2800010,Hw=323e4,zw=32300001,Vw=3230002,Kw=3230003,$w=3230004,qw=361e4,Ww=3610001,Qw=3610002,Jw=3610003,jw=3610004,Zw=3610005,Yw=3610006,Xw=3610007,tA=3611e3,eA=3704e3,nA=3704001,rA=3704002,sA=3704003,iA=3704004,oA=4128e3,aA=4128001,cA=4128002,uA=4615e3,lA=4615001,fA=4615002,hA=4615003,dA=4615004,pA=4615005,gA=4615006,mA=4615007,yA=4615008,wA=4615009,AA=4615010,bA=4615011,EA=4615012,_A=4615013,RA=4615014,SA=4615015,vA=4615016,xA=4615017,IA=4615018,NA=4615019,OA=4615020,TA=4615021,BA=4615022,CA=4615023,kA=4615024,LA=4615025,PA=4615026,MA=4615027,UA=4615028,DA=4615029,FA=4615030,GA=4615031,HA=4615032,zA=4615033,VA=4615034,KA=4615035,$A=4615036,qA=4615037,WA=4615038,QA=4615039,JA=4615040,jA=4615041,ZA=4615042,YA=4615043,XA=4615044,t1=4615045,e1=4615046,n1=4615047,r1=4615048,s1=4615049,i1=4615050,o1=4615051,a1=4615052,c1=4615053,u1=4615054,l1=5508e3,f1=5508001,h1=5508002,d1=5508003,p1=5508004,g1=5508005,m1=5508006,y1=5508007,w1=5508008,A1=5508009,b1=5508010,E1=5508011,_1=5663e3,R1=5663001,S1=5663002,v1=5663003,x1=5663004,I1=5663005,N1=5663006,O1=5663007,T1=5663008,B1=5663009,C1=5663010,k1=5663011,L1=5663012,P1=5663013,M1=5663014,U1=5663015,D1=5663016,F1=5663017,G1=5663018,H1=5663019,z1=705e4,V1=7050001,K1=7050002,$1=7050003,q1=7050004,W1=7050005,Q1=7050006,J1=7050007,j1=7050008,Z1=7050009,Y1=7050010,X1=7050011,tb=7050012,eb=7050013,nb=7050014,rb=7050015,sb=7050016,ib=7050017,ob=7050018,ab=7050019,cb=7050020,ub=7050021,lb=7050022,fb=7050023,hb=7050024,db=7050025,pb=7050026,gb=7050027,mb=7050028,yb=7050029,wb=7050030,Ab=7050031,bb=7050032,Eb=7050033,_b=7050034,Rb=7050035,Sb=7050036,rp=8078e3,sp=8078001,vb=8078002,xb=8078003,ip=8078004,op=8078005,ap=8078006,Ib=8078007,Nb=8078008,Ob=8078009,Tb=8078010,cp=8078011,Bb=8078012,Cb=8078013,kb=8078014,Lb=8078015,Pb=8078016,Mb=8078017,Ub=8078018,Db=8078019,Fb=8078020,Gb=8078021,Hb=8078022,zb=81e5,Vb=8100001,Kb=8100002,$b=8100003,qb=819e4,Wb=8190001,Qb=8190002,Jb=8190003,jb=8190004,Zb=99e5,Yb=9900001,Xb=9900002,tE=9900003,eE=9900004,nE={[Hw]:"Account not found at address: $address",[$w]:"Not all accounts were decoded. Encoded accounts found at addresses: $addresses.",[Kw]:"Expected decoded account at address: $address",[Vw]:"Failed to decode account data at address: $address",[zw]:"Accounts not found at addresses: $addresses",[Fw]:"Unable to find a viable program address bump seed.",[Cw]:"$putativeAddress is not a base58-encoded address.",[Tw]:"Expected base58 encoded address to decode to a byte array of length 32. Actual length: $actualLength.",[kw]:"The `CryptoKey` must be an `Ed25519` public key.",[Dw]:"Invalid seeds; point must fall off the Ed25519 curve.",[Lw]:"Expected given program derived address to have the following format: [Address, ProgramDerivedAddressBump].",[Mw]:"A maximum of $maxSeeds seeds, including the bump seed, may be supplied when creating an address. Received: $actual.",[Uw]:"The seed at index $index with length $actual exceeds the maximum length of $maxSeedLength bytes.",[Pw]:"Expected program derived address bump to be in the range [0, 255], got: $bump.",[Gw]:"Program address cannot end with PDA marker.",[Bw]:"Expected base58-encoded address string of length in the range [32, 44]. Actual length: $actualLength.",[nw]:"Expected base58-encoded blockash string of length in the range [32, 44]. Actual length: $actualLength.",[Xy]:"The network has progressed past the last block for which this transaction could have been committed.",[rp]:"Codec [$codecDescription] cannot decode empty byte arrays.",[Hb]:"Enum codec cannot use lexical values [$stringValues] as discriminators. Either remove all lexical values or set `useValuesAsDiscriminators` to `false`.",[Fb]:"Sentinel [$hexSentinel] must not be present in encoded bytes [$hexEncodedBytes].",[op]:"Encoder and decoder must have the same fixed size, got [$encoderFixedSize] and [$decoderFixedSize].",[ap]:"Encoder and decoder must have the same max size, got [$encoderMaxSize] and [$decoderMaxSize].",[ip]:"Encoder and decoder must either both be fixed-size or variable-size.",[Nb]:"Enum discriminator out of range. Expected a number in [$formattedValidDiscriminators], got $discriminator.",[vb]:"Expected a fixed-size codec, got a variable-size one.",[Cb]:"Codec [$codecDescription] expected a positive byte length, got $bytesLength.",[xb]:"Expected a variable-size codec, got a fixed-size one.",[Db]:"Codec [$codecDescription] expected zero-value [$hexZeroValue] to have the same size as the provided fixed-size item [$expectedSize bytes].",[sp]:"Codec [$codecDescription] expected $expected bytes, got $bytesLength.",[Ub]:"Expected byte array constant [$hexConstant] to be present in data [$hexData] at offset [$offset].",[Ob]:"Invalid discriminated union variant. Expected one of [$variants], got $value.",[Tb]:"Invalid enum variant. Expected one of [$stringValues] or a number in [$formattedNumericalValues], got $variant.",[Lb]:"Invalid literal union variant. Expected one of [$variants], got $value.",[Ib]:"Expected [$codecDescription] to have $expected items, got $actual.",[Bb]:"Invalid value $value for base $base with alphabet $alphabet.",[Pb]:"Literal union discriminator out of range. Expected a number between $minRange and $maxRange, got $discriminator.",[cp]:"Codec [$codecDescription] expected number to be in the range [$min, $max], got $value.",[kb]:"Codec [$codecDescription] expected offset to be in the range [0, $bytesLength], got $offset.",[Gb]:"Expected sentinel [$hexSentinel] to be present in decoded bytes [$hexDecodedBytes].",[Mb]:"Union variant out of range. Expected an index between $minRange and $maxRange, got $variant.",[tA]:"No random values implementation could be found.",[wA]:"instruction requires an uninitialized account",[CA]:"instruction tries to borrow reference for an account which is already borrowed",[kA]:"instruction left account with an outstanding borrowed reference",[TA]:"program other than the account's owner changed the size of the account data",[pA]:"account data too small for instruction",[BA]:"instruction expected an executable account",[e1]:"An account does not have enough lamports to be rent-exempt",[r1]:"Program arithmetic overflowed",[t1]:"Failed to serialize or deserialize account data: $encodedData",[u1]:"Builtin programs must consume compute units",[HA]:"Cross-program invocation call depth too deep",[WA]:"Computational budget exceeded",[PA]:"custom program error: #$code",[xA]:"instruction contains duplicate accounts",[LA]:"instruction modifications of multiply-passed account differ",[FA]:"executable accounts must be rent exempt",[UA]:"instruction changed executable accounts data",[DA]:"instruction changed the balance of an executable account",[IA]:"instruction changed executable bit of an account",[RA]:"instruction modified data of an account it does not own",[_A]:"instruction spent from the balance of an account it does not own",[lA]:"generic instruction error",[i1]:"Provided owner is not allowed",[YA]:"Account is immutable",[XA]:"Incorrect authority provided",[mA]:"incorrect program id for instruction",[gA]:"insufficient funds for instruction",[dA]:"invalid account data for instruction",[n1]:"Invalid account owner",[fA]:"invalid program argument",[MA]:"program returned invalid error code",[hA]:"invalid instruction data",[qA]:"Failed to reallocate account data",[$A]:"Provided seeds do not result in a valid address",[o1]:"Accounts data allocations exceeded the maximum allowed per transaction",[a1]:"Max accounts exceeded",[c1]:"Max instruction trace length exceeded",[KA]:"Length of the seed is too long for address generation",[zA]:"An account required by the instruction is missing",[yA]:"missing required signature for instruction",[EA]:"instruction illegally modified the program id of an account",[OA]:"insufficient account keys for instruction",[QA]:"Cross-program invocation with unauthorized signer or writable account",[JA]:"Failed to create program execution environment",[ZA]:"Program failed to compile",[jA]:"Program failed to complete",[vA]:"instruction modified data of a read-only account",[SA]:"instruction changed the balance of a read-only account",[VA]:"Cross-program invocation reentrancy not allowed for this instruction",[NA]:"instruction modified rent epoch of an account",[bA]:"sum of account balances before and after instruction do not match",[AA]:"instruction requires an initialized account",[uA]:"",[GA]:"Unsupported program id",[s1]:"Unsupported sysvar",[oA]:"The instruction does not have any accounts.",[aA]:"The instruction does not have any data.",[cA]:"Expected instruction to have progress address $expectedProgramAddress, got $actualProgramAddress.",[rw]:"Expected base58 encoded blockhash to decode to a byte array of length 32. Actual length: $actualLength.",[tw]:"The nonce `$expectedNonceValue` is no longer valid. It has advanced to `$actualNonceValue`",[Xb]:"Invariant violation: Found no abortable iterable cache entry for key `$cacheKey`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[eE]:"Invariant violation: This data publisher does not publish to the channel named `$channelName`. Supported channels include $supportedChannelNames.",[Yb]:"Invariant violation: WebSocket message iterator state is corrupt; iterated without first resolving existing message promise. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[Zb]:"Invariant violation: WebSocket message iterator is missing state storage. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[tE]:"Invariant violation: Switch statement non-exhaustive. Received unexpected value `$unexpectedValue`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[lw]:"JSON-RPC error: Internal JSON-RPC error ($__serverMessage)",[fw]:"JSON-RPC error: Invalid method parameter(s) ($__serverMessage)",[dw]:"JSON-RPC error: The JSON sent is not a valid `Request` object ($__serverMessage)",[hw]:"JSON-RPC error: The method does not exist / is not available ($__serverMessage)",[uw]:"JSON-RPC error: An error occurred on the server while parsing the JSON text ($__serverMessage)",[ww]:"$__serverMessage",[Ow]:"$__serverMessage",[xw]:"$__serverMessage",[mw]:"$__serverMessage",[bw]:"$__serverMessage",[Ew]:"$__serverMessage",[pw]:"Minimum context slot has not been reached",[vw]:"Node is unhealthy; behind by $numSlotsBehind slots",[_w]:"No snapshot",[Nw]:"Transaction simulation failed",[Rw]:"$__serverMessage",[Aw]:"Transaction history is not available from this node",[Sw]:"$__serverMessage",[yw]:"Transaction signature length mismatch",[Iw]:"Transaction signature verification failure",[gw]:"$__serverMessage",[eA]:"Key pair bytes must be of length 64, got $byteLength.",[nA]:"Expected private key bytes with length 32. Actual length: $actualLength.",[rA]:"Expected base58-encoded signature to decode to a byte array of length 64. Actual length: $actualLength.",[iA]:"The provided private key does not match the provided public key.",[sA]:"Expected base58-encoded signature string of length in the range [64, 88]. Actual length: $actualLength.",[sw]:"Lamports value must be in the range [0, 2e64-1]",[iw]:"`$value` cannot be parsed as a `BigInt`",[cw]:"$message",[ow]:"`$value` cannot be parsed as a `Number`",[ew]:"No nonce account could be found at address `$nonceAccountAddress`",[qb]:"The notification name must end in 'Notifications' and the API must supply a subscription plan creator function for the notification '$notificationName'.",[Qb]:"WebSocket was closed before payload could be added to the send buffer",[Jb]:"WebSocket connection closed",[jb]:"WebSocket failed to connect",[Wb]:"Failed to obtain a subscription id from the server",[$b]:"Could not find an API plan for RPC method: `$method`",[zb]:"The $argumentLabel argument to the `$methodName` RPC method$optionalPathLabel was `$value`. This number is unsafe for use with the Solana JSON-RPC because it exceeds `Number.MAX_SAFE_INTEGER`.",[Kb]:"HTTP error ($statusCode): $message",[Vb]:"HTTP header(s) forbidden: $headers. Learn more at https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name.",[l1]:"Multiple distinct signers were identified for address `$address`. Please ensure that you are using the same signer instance for each address.",[f1]:"The provided value does not implement the `KeyPairSigner` interface",[d1]:"The provided value does not implement the `MessageModifyingSigner` interface",[p1]:"The provided value does not implement the `MessagePartialSigner` interface",[h1]:"The provided value does not implement any of the `MessageSigner` interfaces",[m1]:"The provided value does not implement the `TransactionModifyingSigner` interface",[y1]:"The provided value does not implement the `TransactionPartialSigner` interface",[w1]:"The provided value does not implement the `TransactionSendingSigner` interface",[g1]:"The provided value does not implement any of the `TransactionSigner` interfaces",[A1]:"More than one `TransactionSendingSigner` was identified.",[b1]:"No `TransactionSendingSigner` was identified. Please provide a valid `ITransactionWithSingleSendingSigner` transaction.",[E1]:"Wallet account signers do not support signing multiple messages/transactions in a single operation",[Xw]:"Cannot export a non-extractable key.",[Ww]:"No digest implementation could be found.",[qw]:"Cryptographic operations are only allowed in secure browser contexts. Read more here: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts.",[Qw]:`This runtime does not support the generation of Ed25519 key pairs.

Install @solana/webcrypto-ed25519-polyfill and call its \`install\` function before generating keys in environments that do not support Ed25519.

For a list of runtimes that currently support Ed25519 operations, visit https://github.com/WICG/webcrypto-secure-curves/issues/20.`,[Jw]:"No signature verification implementation could be found.",[jw]:"No key generation implementation could be found.",[Zw]:"No signing implementation could be found.",[Yw]:"No key export implementation could be found.",[aw]:"Timestamp value must be in the range [-(2n ** 63n), (2n ** 63n) - 1]. `$value` given",[sb]:"Transaction processing left an account with an outstanding borrowed reference",[V1]:"Account in use",[K1]:"Account loaded twice",[$1]:"Attempt to debit an account but found no record of a prior credit.",[fb]:"Transaction loads an address table account that doesn't exist",[J1]:"This transaction has already been processed",[j1]:"Blockhash not found",[Z1]:"Loader call chain is too deep",[rb]:"Transactions are currently disabled due to cluster maintenance",[wb]:"Transaction contains a duplicate instruction ($index) that is not allowed",[W1]:"Insufficient funds for fee",[Ab]:"Transaction results in an account ($accountIndex) with insufficient funds for rent",[Q1]:"This account may not be used to pay transaction fees",[X1]:"Transaction contains an invalid account reference",[db]:"Transaction loads an address table account with invalid data",[pb]:"Transaction address table lookup uses an invalid index",[hb]:"Transaction loads an address table account with an invalid owner",[Eb]:"LoadedAccountsDataSizeLimit set for transaction must be greater than 0.",[eb]:"This program may not be used for executing instructions",[gb]:"Transaction leaves an account with a lower balance than rent-exempt minimum",[ab]:"Transaction loads a writable account that cannot be written",[bb]:"Transaction exceeded max loaded accounts data size cap",[Y1]:"Transaction requires a fee but has no signature present",[q1]:"Attempt to load a program that does not exist",[Rb]:"Execution of the program referenced by account at index $accountIndex is temporarily restricted.",[_b]:"ResanitizationNeeded",[nb]:"Transaction failed to sanitize accounts offsets correctly",[tb]:"Transaction did not pass signature verification",[lb]:"Transaction locked too many accounts",[Sb]:"Sum of account balances before and after transaction do not match",[z1]:"The transaction failed with the error `$errorName`",[ob]:"Transaction version is unsupported",[ub]:"Transaction would exceed account data limit within the block",[yb]:"Transaction would exceed total account data limit",[cb]:"Transaction would exceed max account limit within the block",[ib]:"Transaction would exceed max Block Cost Limit",[mb]:"Transaction would exceed max Vote Cost Limit",[U1]:"Attempted to sign a transaction with an address that is not a signer for it",[C1]:"Transaction is missing an address at index: $index.",[D1]:"Transaction has no expected signers therefore it cannot be encoded",[S1]:"Transaction does not have a blockhash lifetime",[v1]:"Transaction is not a durable nonce transaction",[I1]:"Contents of these address lookup tables unknown: $lookupTableAddresses",[N1]:"Lookup of address at index $highestRequestedIndex failed for lookup table `$lookupTableAddress`. Highest known index is $highestKnownIndex. The lookup table may have been extended since its contents were retrieved",[T1]:"No fee payer set in CompiledTransaction",[O1]:"Could not find program address at index $index",[G1]:"Failed to estimate the compute unit consumption for this transaction message. This is likely because simulating the transaction failed. Inspect the `cause` property of this error to learn more",[H1]:"Transaction failed when it was simulated in order to estimate the compute unit consumption. The compute unit estimate provided is for a transaction that failed when simulated and may not be representative of the compute units this transaction would consume if successful. Inspect the `cause` property of this error to learn more",[k1]:"Transaction is missing a fee payer.",[L1]:"Could not determine this transaction's signature. Make sure that the transaction has been signed by its fee payer.",[M1]:"Transaction first instruction is not advance nonce account instruction.",[P1]:"Transaction with no instructions cannot be durable nonce transaction.",[_1]:"This transaction includes an address (`$programAddress`) which is both invoked and set as the fee payer. Program addresses may not pay fees",[R1]:"This transaction includes an address (`$programAddress`) which is both invoked and marked writable. Program addresses may not be writable",[F1]:"The transaction message expected the transaction to have $signerAddressesLength signatures, got $signaturesLength.",[B1]:"Transaction is missing signatures for addresses: $addresses.",[x1]:"Transaction version must be in the range [0, 127]. `$actualVersion` given"},Er="i",tr="t";function rE(r,t={}){const e=nE[r];if(e.length===0)return"";let n;function s(o){if(n[tr]===2){const a=e.slice(n[Er]+1,o);i.push(a in t?`${t[a]}`:`$${a}`)}else n[tr]===1&&i.push(e.slice(n[Er],o))}const i=[];return e.split("").forEach((o,a)=>{if(a===0){n={[Er]:0,[tr]:e[0]==="\\"?0:e[0]==="$"?2:1};return}let c;switch(n[tr]){case 0:c={[Er]:a,[tr]:1};break;case 1:o==="\\"?c={[Er]:a,[tr]:0}:o==="$"&&(c={[Er]:a,[tr]:2});break;case 2:o==="\\"?c={[Er]:a,[tr]:0}:o==="$"?c={[Er]:a,[tr]:2}:o.match(/\w/)||(c={[Er]:a,[tr]:1});break}c&&(n!==c&&s(a),n=c)}),s(),i.join("")}function sE(r,t={}){return rE(r,t)}var qi=class extends Error{constructor(...[t,e]){let n,s;if(e){const{cause:o,...a}=e;o&&(s={cause:o}),Object.keys(a).length>0&&(n=a)}const i=sE(t,n);super(i,s);W(this,"cause",this.cause);W(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function iE(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function oE(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(iE(t,r));return r.write(t,e,0),e}})}function aE(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function Oi(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function cE(r,t){if(Oi(r)!==Oi(t))throw new qi(ip);if(Oi(r)&&Oi(t)&&r.fixedSize!==t.fixedSize)throw new qi(op,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!Oi(r)&&!Oi(t)&&r.maxSize!==t.maxSize)throw new qi(ap,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function uE(r,t,e=0){if(t.length-e<=0)throw new qi(rp,{codecDescription:r})}function lE(r,t,e,n=0){const s=e.length-n;if(s<t)throw new qi(sp,{bytesLength:s,codecDescription:r,expected:t})}function fE(r,t,e,n){if(n<t||n>e)throw new qi(cp,{codecDescription:r,max:e,min:t,value:n})}function up(r){return(r==null?void 0:r.endian)!==1}function hE(r){return oE({fixedSize:r.size,write(t,e,n){r.range&&fE(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,up(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function dE(r){return aE({fixedSize:r.size,read(t,e=0){uE(r.name,t,e),lE(r.name,r.size,t,e);const n=new DataView(pE(t,e,r.size));return[r.get(n,up(r.config)),e+r.size]}})}function pE(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var gE=(r={})=>hE({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),mE=(r={})=>dE({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),yE=(r={})=>cE(gE(r),mE(r));class wE extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:a}=t,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function AE(r){return Ja(r)&&typeof r[Symbol.iterator]=="function"}function Ja(r){return typeof r=="object"&&r!=null}function Hc(r){return Ja(r)&&!Array.isArray(r)}function jn(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function bE(r){const{done:t,value:e}=r.next();return t?void 0:e}function EE(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${jn(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:c}}function*td(r,t,e,n){AE(r)||(r=[r]);for(const s of r){const i=EE(s,t,e,n);i&&(yield i)}}function*Qf(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,a={path:n,branch:s,mask:o};i&&(r=t.coercer(r,a));let c="valid";for(const f of t.validator(r,a))f.explanation=e.message,c="not_valid",yield[f,void 0];for(let[f,h,y]of t.entries(r,a)){const _=Qf(h,y,{path:f===void 0?n:[...n,f],branch:f===void 0?s:[...s,h],coerce:i,mask:o,message:e.message});for(const A of _)A[0]?(c=A[0].refinement!=null?"not_refined":"not_valid",yield[A[0],void 0]):i&&(h=A[1],f===void 0?r=h:r instanceof Map?r.set(f,h):r instanceof Set?r.add(h):Ja(r)&&(h!==void 0||f in r)&&(r[f]=h))}if(c!=="not_valid")for(const f of t.refiner(r,a))f.explanation=e.message,c="not_refined",yield[f,void 0];c==="valid"&&(yield[void 0,r])}let wr=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=t;this.type=e,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(c,f)=>{const h=s(c,f);return td(h,f,this,c)}:this.validator=()=>[],i?this.refiner=(c,f)=>{const h=i(c,f);return td(h,f,this,c)}:this.refiner=()=>[]}assert(t,e){return _E(t,this,e)}create(t,e){return ut(t,this,e)}is(t){return lp(t,this)}mask(t,e){return RE(t,this,e)}validate(t,e={}){return ja(t,this,e)}};function _E(r,t,e){const n=ja(r,t,{message:e});if(n[0])throw n[0]}function ut(r,t,e){const n=ja(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function RE(r,t,e){const n=ja(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function lp(r,t){return!ja(r,t)[0]}function ja(r,t,e={}){const n=Qf(r,t,e),s=bE(n);return s[0]?[new wE(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Ei(r,t){return new wr({type:r,schema:null,validator:t})}function SE(){return Ei("any",()=>!0)}function lt(r){return new wr({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${jn(t)}`}})}function yr(){return Ei("boolean",r=>typeof r=="boolean")}function Jf(r){return Ei("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${jn(t)}`)}function Xt(r){const t=jn(r),e=typeof r;return new wr({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${jn(n)}`}})}function vE(){return Ei("never",()=>!1)}function ht(r){return new wr({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function j(){return Ei("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${jn(r)}`)}function wt(r){return new wr({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function fp(r,t){return new wr({type:"record",schema:null,*entries(e){if(Ja(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return Hc(e)||`Expected an object, but received: ${jn(e)}`},coercer(e){return Hc(e)?{...e}:e}})}function ct(){return Ei("string",r=>typeof r=="string"||`Expected a string, but received: ${jn(r)}`)}function jf(r){const t=vE();return new wr({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${jn(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function ot(r){const t=Object.keys(r);return new wr({type:"type",schema:r,*entries(e){if(Ja(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return Hc(e)||`Expected an object, but received: ${jn(e)}`},coercer(e){return Hc(e)?{...e}:e}})}function un(r){const t=r.map(e=>e.type).join(" | ");return new wr({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=Qf(e,i,n),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${jn(e)}`,...s]}})}function ta(){return Ei("unknown",()=>!0)}function Za(r,t,e){return new wr({...r,coercer:(n,s)=>lp(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var fc,xE=new Uint8Array(16);function hp(){if(!fc&&(fc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!fc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fc(xE)}const IE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Au(r){return typeof r=="string"&&IE.test(r)}var Ue=[];for(var yl=0;yl<256;++yl)Ue.push((yl+256).toString(16).substr(1));function bu(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Ue[r[t+0]]+Ue[r[t+1]]+Ue[r[t+2]]+Ue[r[t+3]]+"-"+Ue[r[t+4]]+Ue[r[t+5]]+"-"+Ue[r[t+6]]+Ue[r[t+7]]+"-"+Ue[r[t+8]]+Ue[r[t+9]]+"-"+Ue[r[t+10]]+Ue[r[t+11]]+Ue[r[t+12]]+Ue[r[t+13]]+Ue[r[t+14]]+Ue[r[t+15]]).toLowerCase();if(!Au(e))throw TypeError("Stringified UUID is invalid");return e}var ed,wl,Al=0,bl=0;function NE(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||ed,o=r.clockseq!==void 0?r.clockseq:wl;if(i==null||o==null){var a=r.random||(r.rng||hp)();i==null&&(i=ed=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=wl=(a[6]<<8|a[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),f=r.nsecs!==void 0?r.nsecs:bl+1,h=c-Al+(f-bl)/1e4;if(h<0&&r.clockseq===void 0&&(o=o+1&16383),(h<0||c>Al)&&r.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Al=c,bl=f,wl=o,c+=122192928e5;var y=((c&268435455)*1e4+f)%4294967296;s[n++]=y>>>24&255,s[n++]=y>>>16&255,s[n++]=y>>>8&255,s[n++]=y&255;var _=c/4294967296*1e4&268435455;s[n++]=_>>>8&255,s[n++]=_&255,s[n++]=_>>>24&15|16,s[n++]=_>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var A=0;A<6;++A)s[n+A]=i[A];return t||bu(s)}function dp(r){if(!Au(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function OE(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var TE="6ba7b810-9dad-11d1-80b4-00c04fd430c8",BE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function pp(r,t,e){function n(s,i,o,a){if(typeof s=="string"&&(s=OE(s)),typeof i=="string"&&(i=dp(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=e(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){a=a||0;for(var f=0;f<16;++f)o[a+f]=c[f];return o}return bu(c)}try{n.name=r}catch{}return n.DNS=TE,n.URL=BE,n}function CE(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return kE(LE(PE(r),r.length*8))}function kE(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function gp(r){return(r+64>>>9<<4)+14+1}function LE(r,t){r[t>>5]|=128<<t%32,r[gp(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=e,c=n,f=s,h=i;e=qe(e,n,s,i,r[o],7,-680876936),i=qe(i,e,n,s,r[o+1],12,-389564586),s=qe(s,i,e,n,r[o+2],17,606105819),n=qe(n,s,i,e,r[o+3],22,-1044525330),e=qe(e,n,s,i,r[o+4],7,-176418897),i=qe(i,e,n,s,r[o+5],12,1200080426),s=qe(s,i,e,n,r[o+6],17,-1473231341),n=qe(n,s,i,e,r[o+7],22,-45705983),e=qe(e,n,s,i,r[o+8],7,1770035416),i=qe(i,e,n,s,r[o+9],12,-1958414417),s=qe(s,i,e,n,r[o+10],17,-42063),n=qe(n,s,i,e,r[o+11],22,-1990404162),e=qe(e,n,s,i,r[o+12],7,1804603682),i=qe(i,e,n,s,r[o+13],12,-40341101),s=qe(s,i,e,n,r[o+14],17,-1502002290),n=qe(n,s,i,e,r[o+15],22,1236535329),e=We(e,n,s,i,r[o+1],5,-165796510),i=We(i,e,n,s,r[o+6],9,-1069501632),s=We(s,i,e,n,r[o+11],14,643717713),n=We(n,s,i,e,r[o],20,-373897302),e=We(e,n,s,i,r[o+5],5,-701558691),i=We(i,e,n,s,r[o+10],9,38016083),s=We(s,i,e,n,r[o+15],14,-660478335),n=We(n,s,i,e,r[o+4],20,-405537848),e=We(e,n,s,i,r[o+9],5,568446438),i=We(i,e,n,s,r[o+14],9,-1019803690),s=We(s,i,e,n,r[o+3],14,-187363961),n=We(n,s,i,e,r[o+8],20,1163531501),e=We(e,n,s,i,r[o+13],5,-1444681467),i=We(i,e,n,s,r[o+2],9,-51403784),s=We(s,i,e,n,r[o+7],14,1735328473),n=We(n,s,i,e,r[o+12],20,-1926607734),e=Qe(e,n,s,i,r[o+5],4,-378558),i=Qe(i,e,n,s,r[o+8],11,-2022574463),s=Qe(s,i,e,n,r[o+11],16,1839030562),n=Qe(n,s,i,e,r[o+14],23,-35309556),e=Qe(e,n,s,i,r[o+1],4,-1530992060),i=Qe(i,e,n,s,r[o+4],11,1272893353),s=Qe(s,i,e,n,r[o+7],16,-155497632),n=Qe(n,s,i,e,r[o+10],23,-1094730640),e=Qe(e,n,s,i,r[o+13],4,681279174),i=Qe(i,e,n,s,r[o],11,-358537222),s=Qe(s,i,e,n,r[o+3],16,-722521979),n=Qe(n,s,i,e,r[o+6],23,76029189),e=Qe(e,n,s,i,r[o+9],4,-640364487),i=Qe(i,e,n,s,r[o+12],11,-421815835),s=Qe(s,i,e,n,r[o+15],16,530742520),n=Qe(n,s,i,e,r[o+2],23,-995338651),e=Je(e,n,s,i,r[o],6,-198630844),i=Je(i,e,n,s,r[o+7],10,1126891415),s=Je(s,i,e,n,r[o+14],15,-1416354905),n=Je(n,s,i,e,r[o+5],21,-57434055),e=Je(e,n,s,i,r[o+12],6,1700485571),i=Je(i,e,n,s,r[o+3],10,-1894986606),s=Je(s,i,e,n,r[o+10],15,-1051523),n=Je(n,s,i,e,r[o+1],21,-2054922799),e=Je(e,n,s,i,r[o+8],6,1873313359),i=Je(i,e,n,s,r[o+15],10,-30611744),s=Je(s,i,e,n,r[o+6],15,-1560198380),n=Je(n,s,i,e,r[o+13],21,1309151649),e=Je(e,n,s,i,r[o+4],6,-145523070),i=Je(i,e,n,s,r[o+11],10,-1120210379),s=Je(s,i,e,n,r[o+2],15,718787259),n=Je(n,s,i,e,r[o+9],21,-343485551),e=_s(e,a),n=_s(n,c),s=_s(s,f),i=_s(i,h)}return[e,n,s,i]}function PE(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(gp(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function _s(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function ME(r,t){return r<<t|r>>>32-t}function Eu(r,t,e,n,s,i){return _s(ME(_s(_s(t,r),_s(n,i)),s),e)}function qe(r,t,e,n,s,i,o){return Eu(t&e|~t&n,r,t,s,i,o)}function We(r,t,e,n,s,i,o){return Eu(t&n|e&~n,r,t,s,i,o)}function Qe(r,t,e,n,s,i,o){return Eu(t^e^n,r,t,s,i,o)}function Je(r,t,e,n,s,i,o){return Eu(e^(t|~n),r,t,s,i,o)}var UE=pp("v3",48,CE);function DE(r,t,e){r=r||{};var n=r.random||(r.rng||hp)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return bu(n)}function FE(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function El(r,t){return r<<t|r>>>32-t}function GE(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var f=new Uint32Array(16),h=0;h<16;++h)f[h]=r[c*64+h*4]<<24|r[c*64+h*4+1]<<16|r[c*64+h*4+2]<<8|r[c*64+h*4+3];a[c]=f}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var y=0;y<o;++y){for(var _=new Uint32Array(80),A=0;A<16;++A)_[A]=a[y][A];for(var O=16;O<80;++O)_[O]=El(_[O-3]^_[O-8]^_[O-14]^_[O-16],1);for(var E=e[0],v=e[1],L=e[2],K=e[3],z=e[4],rt=0;rt<80;++rt){var V=Math.floor(rt/20),Y=El(E,5)+FE(V,v,L,K)+z+t[V]+_[rt]>>>0;z=K,K=L,L=El(v,30)>>>0,v=E,E=Y}e[0]=e[0]+E>>>0,e[1]=e[1]+v>>>0,e[2]=e[2]+L>>>0,e[3]=e[3]+K>>>0,e[4]=e[4]+z>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var HE=pp("v5",80,GE);const zE="00000000-0000-0000-0000-000000000000";function VE(r){if(!Au(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const KE=Object.freeze(Object.defineProperty({__proto__:null,NIL:zE,parse:dp,stringify:bu,v1:NE,v3:UE,v4:DE,v5:HE,validate:Au,version:VE},Symbol.toStringTag,{value:"Module"})),mp=Gf(KE);var _l,nd;function $E(){if(nd)return _l;nd=1;const r=mp.v4;return _l=function(e,n,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:e};if(o===2&&(a.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");a.params=n}if(typeof s>"u"){const c=typeof i.generator=="function"?i.generator:function(){return r()};a.id=c(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},_l}var Rl,rd;function qE(){if(rd)return Rl;rd=1;const r=mp.v4,t=$E(),e=function(n,s){if(!(this instanceof e))return new e(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return Rl=e,e.prototype.request=function(n,s,i,o){const a=this;let c=null;const f=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&f)throw new TypeError("JSON-RPC 1.0 does not support batching");if(f||!f&&n&&typeof n=="object"&&typeof s=="function")o=s,c=n;else{typeof i=="function"&&(o=i,i=void 0);const _=typeof o=="function";try{c=t(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(A){if(_)return o(A);throw A}if(!_)return c}let y;try{y=JSON.stringify(c,this.options.replacer)}catch(_){return o(_)}return this.callServer(y,function(_,A){a._parseResponse(_,A,o)}),c},e.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(f){return typeof f.error<"u"},c=function(f){return!a(f)};return i(null,o.filter(a),o.filter(c))}else return i(null,o.error,o.result);i(null,o)},Rl}var WE=qE();const QE=du(WE);var Sl={exports:{}},sd;function JE(){return sd||(sd=1,function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function i(c,f,h,y,_){if(typeof h!="function")throw new TypeError("The listener must be a function");var A=new s(h,y||c,_),O=e?e+f:f;return c._events[O]?c._events[O].fn?c._events[O]=[c._events[O],A]:c._events[O].push(A):(c._events[O]=A,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var f=[],h,y;if(this._eventsCount===0)return f;for(y in h=this._events)t.call(h,y)&&f.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},a.prototype.listeners=function(f){var h=e?e+f:f,y=this._events[h];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,A=y.length,O=new Array(A);_<A;_++)O[_]=y[_].fn;return O},a.prototype.listenerCount=function(f){var h=e?e+f:f,y=this._events[h];return y?y.fn?1:y.length:0},a.prototype.emit=function(f,h,y,_,A,O){var E=e?e+f:f;if(!this._events[E])return!1;var v=this._events[E],L=arguments.length,K,z;if(v.fn){switch(v.once&&this.removeListener(f,v.fn,void 0,!0),L){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,y),!0;case 4:return v.fn.call(v.context,h,y,_),!0;case 5:return v.fn.call(v.context,h,y,_,A),!0;case 6:return v.fn.call(v.context,h,y,_,A,O),!0}for(z=1,K=new Array(L-1);z<L;z++)K[z-1]=arguments[z];v.fn.apply(v.context,K)}else{var rt=v.length,V;for(z=0;z<rt;z++)switch(v[z].once&&this.removeListener(f,v[z].fn,void 0,!0),L){case 1:v[z].fn.call(v[z].context);break;case 2:v[z].fn.call(v[z].context,h);break;case 3:v[z].fn.call(v[z].context,h,y);break;case 4:v[z].fn.call(v[z].context,h,y,_);break;default:if(!K)for(V=1,K=new Array(L-1);V<L;V++)K[V-1]=arguments[V];v[z].fn.apply(v[z].context,K)}}return!0},a.prototype.on=function(f,h,y){return i(this,f,h,y,!1)},a.prototype.once=function(f,h,y){return i(this,f,h,y,!0)},a.prototype.removeListener=function(f,h,y,_){var A=e?e+f:f;if(!this._events[A])return this;if(!h)return o(this,A),this;var O=this._events[A];if(O.fn)O.fn===h&&(!_||O.once)&&(!y||O.context===y)&&o(this,A);else{for(var E=0,v=[],L=O.length;E<L;E++)(O[E].fn!==h||_&&!O[E].once||y&&O[E].context!==y)&&v.push(O[E]);v.length?this._events[A]=v.length===1?v[0]:v:o(this,A)}return this},a.prototype.removeAllListeners=function(f){var h;return f?(h=e?e+f:f,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a}(Sl)),Sl.exports}var jE=JE();const yp=du(jE);var ZE=class extends yp{constructor(t,e,n){super();W(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function YE(r,t){return new ZE(r,t)}var XE=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},t_=class extends yp{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,f){super();W(this,"address");W(this,"rpc_id");W(this,"queue");W(this,"options");W(this,"autoconnect");W(this,"ready");W(this,"reconnect");W(this,"reconnect_timer_id");W(this,"reconnect_interval");W(this,"max_reconnects");W(this,"rest_options");W(this,"current_reconnects");W(this,"generate_request_id");W(this,"socket");W(this,"webSocketFactory");W(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),f?this.dataPack=f:this.dataPack=new XE,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,e),c={jsonrpc:"2.0",method:t,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,f=>{if(f)return o(f);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=It.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};let wp=class extends P0{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Dm(t);const n=Kf(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Go(i)}update(t){return Pc(this),this.iHash.update(t),this}digestInto(t){Pc(this),mr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Ap=(r,t,e)=>new wp(r,t).update(e).digest();Ap.create=(r,t)=>new wp(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function id(r){r.lowS!==void 0&&gi("lowS",r.lowS),r.prehash!==void 0&&gi("prehash",r.prehash)}class e_ extends Error{constructor(t=""){super(t)}}const vr={Err:e_,_tlv:{encode:(r,t)=>{const{Err:e}=vr;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=uc(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?uc(s.length/2|128):"";return uc(r)+i+s+t},decode(r,t){const{Err:e}=vr;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new e("tlv.decode(long): indefinite length not supported");if(c>4)throw new e("tlv.decode(long): byte length is too big");const f=t.subarray(n,n+c);if(f.length!==c)throw new e("tlv.decode: length bytes not complete");if(f[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const h of f)o=o<<8|h;if(n+=c,o<128)throw new e("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=vr;if(r<ya)throw new t("integer: negative integers are not allowed");let e=uc(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=vr;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return pu(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=vr,s=le("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:f,l:h}=n.decode(2,c);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(f)}},hexFromSig(r){const{_tlv:t,_int:e}=vr,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},ya=BigInt(0),wa=BigInt(1),n_=BigInt(2),hc=BigInt(3),r_=BigInt(4);function s_(r,t,e){function n(s){const i=r.sqr(s),o=r.mul(i,s);return r.add(r.add(o,r.mul(s,t)),e)}return n}function bp(r,t,e){const{BYTES:n}=r;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=le("private key",i);if(t){if(!t.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=r.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(e&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function i_(r,t={}){const{Fp:e,Fn:n}=tp("weierstrass",r,t),{h:s,n:i}=r;Wa(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!e.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(et,U,P){const{x:M,y:H}=U.toAffine(),R=e.toBytes(M);if(gi("isCompressed",P),P){a();const u=!e.isOdd(H);return Hr(Ep(u),R)}else return Hr(Uint8Array.of(4),R,e.toBytes(H))}function f(et){mr(et);const U=e.BYTES,P=U+1,M=2*U+1,H=et.length,R=et[0],u=et.subarray(1);if(H===P&&(R===2||R===3)){const p=e.fromBytes(u);if(!e.isValid(p))throw new Error("bad point: is not on curve, wrong x");const w=_(p);let I;try{I=e.sqrt(w)}catch(G){const N=G instanceof Error?": "+G.message:"";throw new Error("bad point: is not on curve, sqrt error"+N)}a();const T=e.isOdd(I);return(R&1)===1!==T&&(I=e.neg(I)),{x:p,y:I}}else if(H===M&&R===4){const p=e.fromBytes(u.subarray(U*0,U*1)),w=e.fromBytes(u.subarray(U*1,U*2));if(!A(p,w))throw new Error("bad point: is not on curve");return{x:p,y:w}}else throw new Error(`bad point: got length ${H}, expected compressed=${P} or uncompressed=${M}`)}const h=t.toBytes||c,y=t.fromBytes||f,_=s_(e,r.a,r.b);function A(et,U){const P=e.sqr(U),M=_(et);return e.eql(P,M)}if(!A(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const O=e.mul(e.pow(r.a,hc),r_),E=e.mul(e.sqr(r.b),BigInt(27));if(e.is0(e.add(O,E)))throw new Error("bad curve params: a or b");function v(et,U,P=!1){if(!e.isValid(U)||P&&e.is0(U))throw new Error(`bad point coordinate ${et}`);return U}function L(et){if(!(et instanceof V))throw new Error("ProjectivePoint expected")}const K=Mc((et,U)=>{const{px:P,py:M,pz:H}=et;if(e.eql(H,e.ONE))return{x:P,y:M};const R=et.is0();U==null&&(U=R?e.ONE:e.inv(H));const u=e.mul(P,U),p=e.mul(M,U),w=e.mul(H,U);if(R)return{x:e.ZERO,y:e.ZERO};if(!e.eql(w,e.ONE))throw new Error("invZ was invalid");return{x:u,y:p}}),z=Mc(et=>{if(et.is0()){if(t.allowInfinityPoint&&!e.is0(et.py))return;throw new Error("bad point: ZERO")}const{x:U,y:P}=et.toAffine();if(!e.isValid(U)||!e.isValid(P))throw new Error("bad point: x or y not field elements");if(!A(U,P))throw new Error("bad point: equation left != right");if(!et.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function rt(et,U,P,M,H){return P=new V(e.mul(P.px,et),P.py,P.pz),U=ma(M,U),P=ma(H,P),U.add(P)}class V{constructor(U,P,M){this.px=v("x",U),this.py=v("y",P,!0),this.pz=v("z",M),Object.freeze(this)}static fromAffine(U){const{x:P,y:M}=U||{};if(!U||!e.isValid(P)||!e.isValid(M))throw new Error("invalid affine point");if(U instanceof V)throw new Error("projective point not allowed");return e.is0(P)&&e.is0(M)?V.ZERO:new V(P,M,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(U){return J0(V,"pz",U)}static fromBytes(U){return mr(U),V.fromHex(U)}static fromHex(U){const P=V.fromAffine(y(le("pointHex",U)));return P.assertValidity(),P}static fromPrivateKey(U){const P=bp(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return V.BASE.multiply(P(U))}static msm(U,P){return X0(V,n,U,P)}precompute(U=8,P=!0){return st.setWindowSize(this,U),P||this.multiply(hc),this}_setWindowSize(U){this.precompute(U)}assertValidity(){z(this)}hasEvenY(){const{y:U}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(U)}equals(U){L(U);const{px:P,py:M,pz:H}=this,{px:R,py:u,pz:p}=U,w=e.eql(e.mul(P,p),e.mul(R,H)),I=e.eql(e.mul(M,p),e.mul(u,H));return w&&I}negate(){return new V(this.px,e.neg(this.py),this.pz)}double(){const{a:U,b:P}=r,M=e.mul(P,hc),{px:H,py:R,pz:u}=this;let p=e.ZERO,w=e.ZERO,I=e.ZERO,T=e.mul(H,H),D=e.mul(R,R),G=e.mul(u,u),N=e.mul(H,R);return N=e.add(N,N),I=e.mul(H,u),I=e.add(I,I),p=e.mul(U,I),w=e.mul(M,G),w=e.add(p,w),p=e.sub(D,w),w=e.add(D,w),w=e.mul(p,w),p=e.mul(N,p),I=e.mul(M,I),G=e.mul(U,G),N=e.sub(T,G),N=e.mul(U,N),N=e.add(N,I),I=e.add(T,T),T=e.add(I,T),T=e.add(T,G),T=e.mul(T,N),w=e.add(w,T),G=e.mul(R,u),G=e.add(G,G),T=e.mul(G,N),p=e.sub(p,T),I=e.mul(G,D),I=e.add(I,I),I=e.add(I,I),new V(p,w,I)}add(U){L(U);const{px:P,py:M,pz:H}=this,{px:R,py:u,pz:p}=U;let w=e.ZERO,I=e.ZERO,T=e.ZERO;const D=r.a,G=e.mul(r.b,hc);let N=e.mul(P,R),l=e.mul(M,u),d=e.mul(H,p),x=e.add(P,M),C=e.add(R,u);x=e.mul(x,C),C=e.add(N,l),x=e.sub(x,C),C=e.add(P,H);let Q=e.add(R,p);return C=e.mul(C,Q),Q=e.add(N,d),C=e.sub(C,Q),Q=e.add(M,H),w=e.add(u,p),Q=e.mul(Q,w),w=e.add(l,d),Q=e.sub(Q,w),T=e.mul(D,C),w=e.mul(G,d),T=e.add(w,T),w=e.sub(l,T),T=e.add(l,T),I=e.mul(w,T),l=e.add(N,N),l=e.add(l,N),d=e.mul(D,d),C=e.mul(G,C),l=e.add(l,d),d=e.sub(N,d),d=e.mul(D,d),C=e.add(C,d),N=e.mul(l,C),I=e.add(I,N),N=e.mul(Q,C),w=e.mul(x,w),w=e.sub(w,N),N=e.mul(x,l),T=e.mul(Q,T),T=e.add(T,N),new V(w,I,T)}subtract(U){return this.add(U.negate())}is0(){return this.equals(V.ZERO)}multiply(U){const{endo:P}=t;if(!n.isValidNot0(U))throw new Error("invalid scalar: out of range");let M,H;const R=u=>st.wNAFCached(this,u,V.normalizeZ);if(P){const{k1neg:u,k1:p,k2neg:w,k2:I}=P.splitScalar(U),{p:T,f:D}=R(p),{p:G,f:N}=R(I);H=D.add(N),M=rt(P.beta,T,G,u,w)}else{const{p:u,f:p}=R(U);M=u,H=p}return V.normalizeZ([M,H])[0]}multiplyUnsafe(U){const{endo:P}=t,M=this;if(!n.isValid(U))throw new Error("invalid scalar: out of range");if(U===ya||M.is0())return V.ZERO;if(U===wa)return M;if(st.hasPrecomputes(this))return this.multiply(U);if(P){const{k1neg:H,k1:R,k2neg:u,k2:p}=P.splitScalar(U),{p1:w,p2:I}=by(V,M,R,p);return rt(P.beta,w,I,H,u)}else return st.wNAFCachedUnsafe(M,U)}multiplyAndAddUnsafe(U,P,M){const H=this.multiplyUnsafe(P).add(U.multiplyUnsafe(M));return H.is0()?void 0:H}toAffine(U){return K(this,U)}isTorsionFree(){const{isTorsionFree:U}=t;return s===wa?!0:U?U(V,this):st.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:U}=t;return s===wa?this:U?U(V,this):this.multiplyUnsafe(s)}toBytes(U=!0){return gi("isCompressed",U),this.assertValidity(),h(V,this,U)}toRawBytes(U=!0){return this.toBytes(U)}toHex(U=!0){return Ho(this.toBytes(U))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}V.BASE=new V(r.Gx,r.Gy,e.ONE),V.ZERO=new V(e.ZERO,e.ONE,e.ZERO),V.Fp=e,V.Fn=n;const Y=n.BITS,st=Y0(V,t.endo?Math.ceil(Y/2):Y);return V}function Ep(r){return Uint8Array.of(r?2:3)}function o_(r,t,e={}){Wa(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||U0,s=t.hmac||((M,...H)=>Ap(t.hash,M,Hr(...H))),{Fp:i,Fn:o}=r,{ORDER:a,BITS:c}=o;function f(M){const H=a>>wa;return M>H}function h(M){return f(M)?o.neg(M):M}function y(M,H){if(!o.isValidNot0(H))throw new Error(`invalid signature ${M}: out of range 1..CURVE.n`)}class _{constructor(H,R,u){y("r",H),y("s",R),this.r=H,this.s=R,u!=null&&(this.recovery=u),Object.freeze(this)}static fromCompact(H){const R=o.BYTES,u=le("compactSignature",H,R*2);return new _(o.fromBytes(u.subarray(0,R)),o.fromBytes(u.subarray(R,R*2)))}static fromDER(H){const{r:R,s:u}=vr.toSig(le("DER",H));return new _(R,u)}assertValidity(){}addRecoveryBit(H){return new _(this.r,this.s,H)}recoverPublicKey(H){const R=i.ORDER,{r:u,s:p,recovery:w}=this;if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");if(a*n_<R&&w>1)throw new Error("recovery id is ambiguous for h>1 curve");const T=w===2||w===3?u+a:u;if(!i.isValid(T))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(T),G=r.fromHex(Hr(Ep((w&1)===0),D)),N=o.inv(T),l=z(le("msgHash",H)),d=o.create(-l*N),x=o.create(p*N),C=r.BASE.multiplyUnsafe(d).add(G.multiplyUnsafe(x));if(C.is0())throw new Error("point at infinify");return C.assertValidity(),C}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,o.neg(this.s),this.recovery):this}toBytes(H){if(H==="compact")return Hr(o.toBytes(this.r),o.toBytes(this.s));if(H==="der")return Vf(vr.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ho(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ho(this.toBytes("compact"))}}const A=bp(o,e.allowedPrivateKeyLengths,e.wrapPrivateKey),O={isValidPrivateKey(M){try{return A(M),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:()=>{const M=a;return yy(n(Q0(M)),M)},precompute(M=8,H=r.BASE){return H.precompute(M,!1)}};function E(M,H=!0){return r.fromPrivateKey(M).toBytes(H)}function v(M){if(typeof M=="bigint")return!1;if(M instanceof r)return!0;const R=le("key",M).length,u=i.BYTES,p=u+1,w=2*u+1;if(!(e.allowedPrivateKeyLengths||o.BYTES===p))return R===p||R===w}function L(M,H,R=!0){if(v(M)===!0)throw new Error("first arg must be private key");if(v(H)===!1)throw new Error("second arg must be public key");return r.fromHex(H).multiply(A(M)).toBytes(R)}const K=t.bits2int||function(M){if(M.length>8192)throw new Error("input is too large");const H=pu(M),R=M.length*8-c;return R>0?H>>BigInt(R):H},z=t.bits2int_modN||function(M){return o.create(K(M))},rt=mu(c);function V(M){return Di("num < 2^"+c,M,ya,rt),o.toBytes(M)}function Y(M,H,R=st){if(["recovered","canonical"].some(x=>x in R))throw new Error("sign() legacy options not supported");const{hash:u}=t;let{lowS:p,prehash:w,extraEntropy:I}=R;p==null&&(p=!0),M=le("msgHash",M),id(R),w&&(M=le("prehashed msgHash",u(M)));const T=z(M),D=A(H),G=[V(D),V(T)];if(I!=null&&I!==!1){const x=I===!0?n(i.BYTES):I;G.push(le("extraEntropy",x))}const N=Hr(...G),l=T;function d(x){const C=K(x);if(!o.isValidNot0(C))return;const Q=o.inv(C),nt=r.BASE.multiply(C).toAffine(),ft=o.create(nt.x);if(ft===ya)return;const mt=o.create(Q*o.create(l+ft*D));if(mt===ya)return;let $t=(nt.x===ft?0:2)|Number(nt.y&wa),Ct=mt;return p&&f(mt)&&(Ct=h(mt),$t^=1),new _(ft,Ct,$t)}return{seed:N,k2sig:d}}const st={lowS:t.lowS,prehash:!1},et={lowS:t.lowS,prehash:!1};function U(M,H,R=st){const{seed:u,k2sig:p}=Y(M,H,R);return ay(t.hash.outputLen,o.BYTES,s)(u,p)}r.BASE.precompute(8);function P(M,H,R,u=et){const p=M;H=le("msgHash",H),R=le("publicKey",R),id(u);const{lowS:w,prehash:I,format:T}=u;if("strict"in u)throw new Error("options.strict was renamed to lowS");if(T!==void 0&&!["compact","der","js"].includes(T))throw new Error('format must be "compact", "der" or "js"');const D=typeof p=="string"||zf(p),G=!D&&!T&&typeof p=="object"&&p!==null&&typeof p.r=="bigint"&&typeof p.s=="bigint";if(!D&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let N,l;try{if(G)if(T===void 0||T==="js")N=new _(p.r,p.s);else throw new Error("invalid format");if(D){try{T!=="compact"&&(N=_.fromDER(p))}catch(Ct){if(!(Ct instanceof vr.Err))throw Ct}!N&&T!=="der"&&(N=_.fromCompact(p))}l=r.fromHex(R)}catch{return!1}if(!N||w&&N.hasHighS())return!1;I&&(H=t.hash(H));const{r:d,s:x}=N,C=z(H),Q=o.inv(x),nt=o.create(C*Q),ft=o.create(d*Q),mt=r.BASE.multiplyUnsafe(nt).add(l.multiplyUnsafe(ft));return mt.is0()?!1:o.create(mt.x)===d}return Object.freeze({getPublicKey:E,getSharedSecret:L,sign:U,verify:P,utils:O,Point:r,Signature:_})}function a_(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=Xo(t.n,r.nBitLength),s={Fp:e,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:s}}function c_(r){const{CURVE:t,curveOpts:e}=a_(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,ecdsaOpts:n}}function u_(r,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:r})}function l_(r){const{CURVE:t,curveOpts:e,ecdsaOpts:n}=c_(r),s=i_(t,e),i=o_(s,n,e);return u_(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function f_(r,t){const e=n=>l_({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zc={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const h_=BigInt(1),jl=BigInt(2),od=(r,t)=>(r+t/jl)/t;function d_(r){const t=zc.p,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),f=r*r*r%t,h=f*f*r%t,y=ie(h,e,t)*h%t,_=ie(y,e,t)*h%t,A=ie(_,jl,t)*f%t,O=ie(A,s,t)*A%t,E=ie(O,i,t)*O%t,v=ie(E,a,t)*E%t,L=ie(v,c,t)*v%t,K=ie(L,a,t)*E%t,z=ie(K,e,t)*h%t,rt=ie(z,o,t)*O%t,V=ie(rt,n,t)*f%t,Y=ie(V,jl,t);if(!Zl.eql(Zl.sqr(Y),r))throw new Error("Cannot find square root");return Y}const Zl=Xo(zc.p,void 0,void 0,{sqrt:d_}),p_=f_({...zc,Fp:Zl,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=zc.n,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-h_*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=od(i*r,t),c=od(-n*r,t);let f=fe(r-a*e-c*s,t),h=fe(-a*n-c*i,t);const y=f>o,_=h>o;if(y&&(f=t-f),_&&(h=t-h),f>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:y,k1:f,k2neg:_,k2:h}}}},G0);Qa.utils.randomPrivateKey;Qa.getPublicKey;function ad(r){try{return Qa.ExtendedPoint.fromHex(r),!0}catch{return!1}}const g_=(r,t)=>Qa.sign(r,t.slice(0,32)),m_=Qa.verify,Fe=r=>It.Buffer.isBuffer(r)?r:r instanceof Uint8Array?It.Buffer.from(r.buffer,r.byteOffset,r.byteLength):It.Buffer.from(r);class y_{constructor(t){Object.assign(this,t)}encode(){return It.Buffer.from(ml.serialize(Sc,this))}static decode(t){return ml.deserialize(Sc,this,t)}static decodeUnchecked(t){return ml.deserializeUnchecked(Sc,this,t)}}const Sc=new Map;var _p;const w_=32,Rs=32;function A_(r){return r._bn!==void 0}let cd=1;class Et extends y_{constructor(t){if(super({}),this._bn=void 0,A_(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Ge.decode(t);if(e.length!=Rs)throw new Error("Invalid public key input");this._bn=new Wh(e)}else this._bn=new Wh(t);if(this._bn.byteLength()>Rs)throw new Error("Invalid public key input")}}static unique(){const t=new Et(cd);return cd+=1,new Et(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Ge.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(It.Buffer);if(t.length===Rs)return t;const e=It.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=It.Buffer.concat([t.toBuffer(),It.Buffer.from(e),n.toBuffer()]),i=Zh(s);return new Et(i)}static createProgramAddressSync(t,e){let n=It.Buffer.alloc(0);t.forEach(function(i){if(i.length>w_)throw new TypeError("Max seed length exceeded");n=It.Buffer.concat([n,Fe(i)])}),n=It.Buffer.concat([n,e.toBuffer(),It.Buffer.from("ProgramDerivedAddress")]);const s=Zh(n);if(ad(s))throw new Error("Invalid seeds, address must fall off the curve");return new Et(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(It.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new Et(t);return ad(e.toBytes())}}_p=Et;Et.default=new _p("11111111111111111111111111111111");Sc.set(Et,{kind:"struct",fields:[["_bn","u256"]]});new Et("BPFLoader1111111111111111111111111111111111");const Wi=1232,Rp=127,Sp=64;class vp extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(vp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class xp extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(xp.prototype,"name",{value:"TransactionExpiredTimeoutError"});class la extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(la.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Vc{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Bt=(r="publicKey")=>F.blob(32,r),Fi=(r="string")=>{const t=F.struct([F.u32("length"),F.u32("lengthPadding"),F.blob(F.offset(F.u32(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:It.Buffer.from(i,"utf8")};return n(c,o,a)},s.alloc=i=>F.u32().span+F.u32().span+It.Buffer.from(i,"utf8").length,s},b_=(r="authorized")=>F.struct([Bt("staker"),Bt("withdrawer")],r),E_=(r="lockup")=>F.struct([F.ns64("unixTimestamp"),F.ns64("epoch"),Bt("custodian")],r),__=(r="voteInit")=>F.struct([Bt("nodePubkey"),Bt("authorizedVoter"),Bt("authorizedWithdrawer"),F.u8("commission")],r),R_=(r="voteAuthorizeWithSeedArgs")=>F.struct([F.u32("voteAuthorizationType"),Bt("currentAuthorityDerivedKeyOwnerPubkey"),Fi("currentAuthorityDerivedKeySeed"),Bt("newAuthorized")],r);function Ip(r,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Ip({layout:s},t[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function Ln(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,(n&128)===0)break}return t}function Pn(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function Be(r,t){if(!r)throw new Error(t||"Assertion failed")}class _u{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new _u(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Be(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,c])=>c.isSigner&&c.isWritable),n=t.filter(([,c])=>c.isSigner&&!c.isWritable),s=t.filter(([,c])=>!c.isSigner&&c.isWritable),i=t.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Be(e.length>0,"Expected at least one writable signer key");const[c]=e[0];Be(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([c])=>new Et(c)),...n.map(([c])=>new Et(c)),...s.map(([c])=>new Et(c)),...i.map(([c])=>new Et(c))];return[o,a]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const a=new Et(i),c=t.findIndex(f=>f.equals(a));c>=0&&(Be(c<256,"Max lookup table index exceeded"),n.push(c),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const Np="Reached end of buffer unexpectedly";function Fr(r){if(r.length===0)throw new Error(Np);return r.shift()}function Mn(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(Np);return r.splice(...t)}class vs{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new Et(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ge.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Vc(this.staticAccountKeys)}static compile(t){const e=_u.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new Vc(s).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Ge.encode(a.data)}));return new vs({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Pn(e,t);const n=this.instructions.map(y=>{const{accounts:_,programIdIndex:A}=y,O=Array.from(Ge.decode(y.data));let E=[];Pn(E,_.length);let v=[];return Pn(v,O.length),{programIdIndex:A,keyIndicesCount:It.Buffer.from(E),keyIndices:_,dataLength:It.Buffer.from(v),data:O}});let s=[];Pn(s,n.length);let i=It.Buffer.alloc(Wi);It.Buffer.from(s).copy(i);let o=s.length;n.forEach(y=>{const A=F.struct([F.u8("programIdIndex"),F.blob(y.keyIndicesCount.length,"keyIndicesCount"),F.seq(F.u8("keyIndex"),y.keyIndices.length,"keyIndices"),F.blob(y.dataLength.length,"dataLength"),F.seq(F.u8("userdatum"),y.data.length,"data")]).encode(y,i,o);o+=A}),i=i.slice(0,o);const a=F.struct([F.blob(1,"numRequiredSignatures"),F.blob(1,"numReadonlySignedAccounts"),F.blob(1,"numReadonlyUnsignedAccounts"),F.blob(e.length,"keyCount"),F.seq(Bt("key"),t,"keys"),Bt("recentBlockhash")]),c={numRequiredSignatures:It.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:It.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:It.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:It.Buffer.from(e),keys:this.accountKeys.map(y=>Fe(y.toBytes())),recentBlockhash:Ge.decode(this.recentBlockhash)};let f=It.Buffer.alloc(2048);const h=a.encode(c,f);return i.copy(f,h),f.slice(0,h+i.length)}static from(t){let e=[...t];const n=Fr(e);if(n!==(n&Rp))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Fr(e),i=Fr(e),o=Ln(e);let a=[];for(let _=0;_<o;_++){const A=Mn(e,0,Rs);a.push(new Et(It.Buffer.from(A)))}const c=Mn(e,0,Rs),f=Ln(e);let h=[];for(let _=0;_<f;_++){const A=Fr(e),O=Ln(e),E=Mn(e,0,O),v=Ln(e),L=Mn(e,0,v),K=Ge.encode(It.Buffer.from(L));h.push({programIdIndex:A,accounts:E,data:K})}const y={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Ge.encode(It.Buffer.from(c)),accountKeys:a,instructions:h};return new vs(y)}}class Kc{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Vc(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=_u.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const h of i){const y=e.extractTableLookup(h);if(y!==void 0){const[_,{writable:A,readonly:O}]=y;n.push(_),s.writable.push(...A),s.readonly.push(...O)}}const[o,a]=e.getMessageComponents(),f=new Vc(a,s).compileInstructions(t.instructions);return new Kc({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:f,addressTableLookups:n})}serialize(){const t=Array();Pn(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Pn(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Pn(i,this.addressTableLookups.length);const o=F.struct([F.u8("prefix"),F.struct([F.u8("numRequiredSignatures"),F.u8("numReadonlySignedAccounts"),F.u8("numReadonlyUnsignedAccounts")],"header"),F.blob(t.length,"staticAccountKeysLength"),F.seq(Bt(),this.staticAccountKeys.length,"staticAccountKeys"),Bt("recentBlockhash"),F.blob(n.length,"instructionsLength"),F.blob(e.length,"serializedInstructions"),F.blob(i.length,"addressTableLookupsLength"),F.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Wi),f=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:Ge.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,f)}serializeInstructions(){let t=0;const e=new Uint8Array(Wi);for(const n of this.compiledInstructions){const s=Array();Pn(s,n.accountKeyIndexes.length);const i=Array();Pn(i,n.data.length);const o=F.struct([F.u8("programIdIndex"),F.blob(s.length,"encodedAccountKeyIndexesLength"),F.seq(F.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),F.blob(i.length,"encodedDataLength"),F.blob(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Wi);for(const n of this.addressTableLookups){const s=Array();Pn(s,n.writableIndexes.length);const i=Array();Pn(i,n.readonlyIndexes.length);const o=F.struct([Bt("accountKey"),F.blob(s.length,"encodedWritableIndexesLength"),F.seq(F.u8(),n.writableIndexes.length,"writableIndexes"),F.blob(i.length,"encodedReadonlyIndexesLength"),F.seq(F.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=Fr(e),s=n&Rp;Be(n!==s,"Expected versioned message but received legacy message");const i=s;Be(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Fr(e),numReadonlySignedAccounts:Fr(e),numReadonlyUnsignedAccounts:Fr(e)},a=[],c=Ln(e);for(let O=0;O<c;O++)a.push(new Et(Mn(e,0,Rs)));const f=Ge.encode(Mn(e,0,Rs)),h=Ln(e),y=[];for(let O=0;O<h;O++){const E=Fr(e),v=Ln(e),L=Mn(e,0,v),K=Ln(e),z=new Uint8Array(Mn(e,0,K));y.push({programIdIndex:E,accountKeyIndexes:L,data:z})}const _=Ln(e),A=[];for(let O=0;O<_;O++){const E=new Et(Mn(e,0,Rs)),v=Ln(e),L=Mn(e,0,v),K=Ln(e),z=Mn(e,0,K);A.push({accountKey:E,writableIndexes:L,readonlyIndexes:z})}return new Kc({header:o,staticAccountKeys:a,recentBlockhash:f,compiledInstructions:y,addressTableLookups:A})}}let Yr=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const S_=It.Buffer.alloc(Sp).fill(0);class Dn{constructor(t){this.keys=void 0,this.programId=void 0,this.data=It.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}let ki=class Yl{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Dn(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let E=0;E<e.length;E++)if(e[E].programId===void 0)throw new Error(`Transaction instruction index ${E} has undefined program id`);const s=[],i=[];e.forEach(E=>{E.keys.forEach(L=>{i.push({...L})});const v=E.programId.toString();s.includes(v)||s.push(v)}),s.forEach(E=>{i.push({pubkey:new Et(E),isSigner:!1,isWritable:!1})});const o=[];i.forEach(E=>{const v=E.pubkey.toString(),L=o.findIndex(K=>K.pubkey.toString()===v);L>-1?(o[L].isWritable=o[L].isWritable||E.isWritable,o[L].isSigner=o[L].isSigner||E.isSigner):o.push(E)}),o.sort(function(E,v){if(E.isSigner!==v.isSigner)return E.isSigner?-1:1;if(E.isWritable!==v.isWritable)return E.isWritable?-1:1;const L={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return E.pubkey.toBase58().localeCompare(v.pubkey.toBase58(),"en",L)});const a=o.findIndex(E=>E.pubkey.equals(n));if(a>-1){const[E]=o.splice(a,1);E.isSigner=!0,E.isWritable=!0,o.unshift(E)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const E of this.signatures){const v=o.findIndex(L=>L.pubkey.equals(E.publicKey));if(v>-1)o[v].isSigner||(o[v].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${E.publicKey.toString()}`)}let c=0,f=0,h=0;const y=[],_=[];o.forEach(({pubkey:E,isSigner:v,isWritable:L})=>{v?(y.push(E.toString()),c+=1,L||(f+=1)):(_.push(E.toString()),L||(h+=1))});const A=y.concat(_),O=e.map(E=>{const{data:v,programId:L}=E;return{programIdIndex:A.indexOf(L.toString()),accounts:E.keys.map(K=>A.indexOf(K.pubkey.toString())),data:Ge.encode(v)}});return O.forEach(E=>{Be(E.programIdIndex>=0),E.accounts.forEach(v=>Be(v>=0))}),new vs({header:{numRequiredSignatures:c,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:h},accountKeys:A,recentBlockhash:t,instructions:O})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=g_(n,s.secretKey);this._addSignature(s.publicKey,Fe(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Be(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=It.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):m_(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];Pn(n,e.length);const s=n.length+e.length*64+t.length,i=It.Buffer.alloc(s);return Be(e.length<256),It.Buffer.from(n).copy(i,0),e.forEach(({signature:o},a)=>{o!==null&&(Be(o.length===64,"signature has invalid length"),It.Buffer.from(o).copy(i,n.length+a*64))}),t.copy(i,n.length+e.length*64),Be(i.length<=Wi,`Transaction too large: ${i.length} > ${Wi}`),i}get keys(){return Be(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Be(this.instructions.length===1),this.instructions[0].programId}get data(){return Be(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=Ln(e);let s=[];for(let i=0;i<n;i++){const o=Mn(e,0,Sp);s.push(Ge.encode(It.Buffer.from(o)))}return Yl.populate(vs.from(e),s)}static populate(t,e=[]){const n=new Yl;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==Ge.encode(S_)?null:Ge.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new Dn({keys:i,programId:t.accountKeys[s.programIdIndex],data:Ge.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}};const v_=160,x_=64,I_=v_/x_,N_=1e3/I_;new Et("SysvarC1ock11111111111111111111111111111111");new Et("SysvarEpochSchedu1e111111111111111111111111");new Et("Sysvar1nstructions1111111111111111111111111");const vl=new Et("SysvarRecentB1ockHashes11111111111111111111"),ud=new Et("SysvarRent111111111111111111111111111111111");new Et("SysvarRewards111111111111111111111111111111");new Et("SysvarS1otHashes111111111111111111111111111");new Et("SysvarS1otHistory11111111111111111111111111");new Et("SysvarStakeHistory1111111111111111111111111");class ld extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class yt extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function Li(r){return new Promise(t=>setTimeout(t,r))}function Sn(r,t){const e=r.layout.span>=0?r.layout.span:Ip(r,t),n=It.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}const O_=F.nu64("lamportsPerSignature"),Op=F.struct([F.u32("version"),F.u32("state"),Bt("authorizedPubkey"),Bt("nonce"),F.struct([O_],"feeCalculator")]),fd=Op.span;class Zf{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Op.decode(Fe(t),0);return new Zf({authorizedPubkey:new Et(e.authorizedPubkey),nonce:new Et(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Ko(r){const t=F.blob(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=yE();return s.decode=(o,a)=>{const c=e(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const f=i.encode(o);return n(f,a,c)},s}const vn=Object.freeze({Create:{index:0,layout:F.struct([F.u32("instruction"),F.ns64("lamports"),F.ns64("space"),Bt("programId")])},Assign:{index:1,layout:F.struct([F.u32("instruction"),Bt("programId")])},Transfer:{index:2,layout:F.struct([F.u32("instruction"),Ko("lamports")])},CreateWithSeed:{index:3,layout:F.struct([F.u32("instruction"),Bt("base"),Fi("seed"),F.ns64("lamports"),F.ns64("space"),Bt("programId")])},AdvanceNonceAccount:{index:4,layout:F.struct([F.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:F.struct([F.u32("instruction"),Bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:F.struct([F.u32("instruction"),Bt("authorized")])},Allocate:{index:8,layout:F.struct([F.u32("instruction"),F.ns64("space")])},AllocateWithSeed:{index:9,layout:F.struct([F.u32("instruction"),Bt("base"),Fi("seed"),F.ns64("space"),Bt("programId")])},AssignWithSeed:{index:10,layout:F.struct([F.u32("instruction"),Bt("base"),Fi("seed"),Bt("programId")])},TransferWithSeed:{index:11,layout:F.struct([F.u32("instruction"),Ko("lamports"),Fi("seed"),Bt("programId")])},UpgradeNonceAccount:{index:12,layout:F.struct([F.u32("instruction")])}});class $c{constructor(){}static createAccount(t){const e=vn.Create,n=Sn(e,{lamports:t.lamports,space:t.space,programId:Fe(t.programId.toBuffer())});return new Dn({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const s=vn.TransferWithSeed;e=Sn(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:Fe(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=vn.Transfer;e=Sn(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Dn({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const s=vn.AssignWithSeed;e=Sn(s,{base:Fe(t.basePubkey.toBuffer()),seed:t.seed,programId:Fe(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=vn.Assign;e=Sn(s,{programId:Fe(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Dn({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=vn.CreateWithSeed,n=Sn(e,{base:Fe(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Fe(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Dn({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){const e=new ki;"basePubkey"in t&&"seed"in t?e.add($c.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:fd,programId:this.programId})):e.add($c.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:fd,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=vn.InitializeNonceAccount,n=Sn(e,{authorized:Fe(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:vl,isSigner:!1,isWritable:!1},{pubkey:ud,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Dn(s)}static nonceAdvance(t){const e=vn.AdvanceNonceAccount,n=Sn(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:vl,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Dn(s)}static nonceWithdraw(t){const e=vn.WithdrawNonceAccount,n=Sn(e,{lamports:t.lamports});return new Dn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:vl,isSigner:!1,isWritable:!1},{pubkey:ud,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=vn.AuthorizeNonceAccount,n=Sn(e,{authorized:Fe(t.newAuthorizedPubkey.toBuffer())});return new Dn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const s=vn.AllocateWithSeed;e=Sn(s,{base:Fe(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Fe(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=vn.Allocate;e=Sn(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Dn({keys:n,programId:this.programId,data:e})}}$c.programId=new Et("11111111111111111111111111111111");new Et("BPFLoader2111111111111111111111111111111111");function T_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xl,hd;function B_(){if(hd)return xl;hd=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,a,c,f,h,y;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(y=r.call(n),y==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=e(n[i],!0)+",";return o>-1&&(a+=e(n[i],!0)),a+"]"}else if(y==="[object Object]"){for(c=t(n).sort(),o=c.length,a="",i=0;i<o;)f=c[i],h=e(n[f],!1),h!==void 0&&(a&&(a+=","),a+=JSON.stringify(f)+":"+h),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return xl=function(n){var s=e(n,!1);if(s!==void 0)return""+s},xl}var C_=B_(),dd=T_(C_);const oa=32;function Il(r){let t=0;for(;r>1;)r/=2,t++;return t}function k_(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class L_{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Il(k_(t+oa+1))-Il(oa)-1,n=this.getSlotsInEpoch(e),s=t-(n-oa);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*oa:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Il(oa)):this.slotsPerEpoch}}var P_=globalThis.fetch;class M_ extends t_{constructor(t,e,n){const s=i=>{const o=YE(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function U_(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const pd=56;class gd{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=U_(D_,t),n=t.length-pd;Be(n>=0,"lookup table is invalid"),Be(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=F.struct([F.seq(Bt(),s,"addresses")]).decode(t.slice(pd));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new Et(e.authority[0]):void 0,addresses:i.map(o=>new Et(o))}}}const D_={index:1,layout:F.struct([F.u32("typeIndex"),Ko("deactivationSlot"),F.nu64("lastExtendedSlot"),F.u8("lastExtendedStartIndex"),F.u8(),F.seq(Bt(),F.offset(F.u8(),-1),"authority")])},F_=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function G_(r){const t=r.match(F_);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${i}`}const ee=Za(Jf(Et),ct(),r=>new Et(r)),Tp=jf([ct(),Xt("base64")]),Yf=Za(Jf(It.Buffer),Tp,r=>It.Buffer.from(r[0],"base64")),H_=30*1e3;function z_(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Vt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function md(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Bp(r){return un([ot({jsonrpc:Xt("2.0"),id:ct(),result:r}),ot({jsonrpc:Xt("2.0"),id:ct(),error:ot({code:ta(),message:ct(),data:wt(SE())})})])}const V_=Bp(ta());function xt(r){return Za(Bp(r),V_,t=>"error"in t?t:{...t,result:ut(t.result,r)})}function ue(r){return xt(ot({context:ot({slot:j()}),value:r}))}function Ru(r){return ot({context:ot({slot:j()}),value:r})}function Nl(r,t){return r===0?new Kc({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new Et(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ge.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new vs(t)}const K_=ot({foundation:j(),foundationTerm:j(),initial:j(),taper:j(),terminal:j()}),$_=xt(lt(ht(ot({epoch:j(),effectiveSlot:j(),amount:j(),postBalance:j(),commission:wt(ht(j()))})))),q_=lt(ot({slot:j(),prioritizationFee:j()})),W_=ot({total:j(),validator:j(),foundation:j(),epoch:j()}),Q_=ot({epoch:j(),slotIndex:j(),slotsInEpoch:j(),absoluteSlot:j(),blockHeight:wt(j()),transactionCount:wt(j())}),J_=ot({slotsPerEpoch:j(),leaderScheduleSlotOffset:j(),warmup:yr(),firstNormalEpoch:j(),firstNormalSlot:j()}),j_=fp(ct(),lt(j())),_i=ht(un([ot({}),ct()])),Z_=ot({err:_i}),Y_=Xt("receivedSignature"),X_=ot({"solana-core":ct(),"feature-set":wt(j())}),tR=ot({program:ct(),programId:ee,parsed:ta()}),eR=ot({programId:ee,accounts:lt(ee),data:ct()}),yd=ue(ot({err:ht(un([ot({}),ct()])),logs:ht(lt(ct())),accounts:wt(ht(lt(ht(ot({executable:yr(),owner:ct(),lamports:j(),data:lt(ct()),rentEpoch:wt(j())}))))),unitsConsumed:wt(j()),returnData:wt(ht(ot({programId:ct(),data:jf([ct(),Xt("base64")])}))),innerInstructions:wt(ht(lt(ot({index:j(),instructions:lt(un([tR,eR]))}))))})),nR=ue(ot({byIdentity:fp(ct(),lt(j())),range:ot({firstSlot:j(),lastSlot:j()})}));function rR(r,t,e,n,s,i){const o=e||P_;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(h,y)=>{const _=await new Promise((A,O)=>{try{n(h,y,(E,v)=>A([E,v]))}catch(E){O(E)}});return await o(..._)}),new QE(async(h,y)=>{const _={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},rS)};try{let A=5,O,E=500;for(;c?O=await c(r,_):O=await o(r,_),!(O.status!==429||s===!0||(A-=1,A===0));)console.error(`Server responded with ${O.status} ${O.statusText}.  Retrying after ${E}ms delay...`),await Li(E),E*=2;const v=await O.text();O.ok?y(null,v):y(new Error(`${O.status} ${O.statusText}: ${v}`))}catch(A){A instanceof Error&&y(A)}},{})}function sR(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function iR(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const oR=xt(K_),aR=xt(W_),cR=xt(q_),uR=xt(Q_),lR=xt(J_),fR=xt(j_),hR=xt(j()),dR=ue(ot({total:j(),circulating:j(),nonCirculating:j(),nonCirculatingAccounts:lt(ee)})),Xl=ot({amount:ct(),uiAmount:ht(j()),decimals:j(),uiAmountString:wt(ct())}),pR=ue(lt(ot({address:ee,amount:ct(),uiAmount:ht(j()),decimals:j(),uiAmountString:wt(ct())}))),gR=ue(lt(ot({pubkey:ee,account:ot({executable:yr(),owner:ee,lamports:j(),data:Yf,rentEpoch:j()})}))),tf=ot({program:ct(),parsed:ta(),space:j()}),mR=ue(lt(ot({pubkey:ee,account:ot({executable:yr(),owner:ee,lamports:j(),data:tf,rentEpoch:j()})}))),yR=ue(lt(ot({lamports:j(),address:ee}))),Ra=ot({executable:yr(),owner:ee,lamports:j(),data:Yf,rentEpoch:j()}),wR=ot({pubkey:ee,account:Ra}),AR=Za(un([Jf(It.Buffer),tf]),un([Tp,tf]),r=>Array.isArray(r)?ut(r,Yf):r),ef=ot({executable:yr(),owner:ee,lamports:j(),data:AR,rentEpoch:j()}),bR=ot({pubkey:ee,account:ef}),ER=ot({state:un([Xt("active"),Xt("inactive"),Xt("activating"),Xt("deactivating")]),active:j(),inactive:j()}),_R=xt(lt(ot({signature:ct(),slot:j(),err:_i,memo:ht(ct()),blockTime:wt(ht(j()))}))),RR=xt(lt(ot({signature:ct(),slot:j(),err:_i,memo:ht(ct()),blockTime:wt(ht(j()))}))),SR=ot({subscription:j(),result:Ru(Ra)}),vR=ot({pubkey:ee,account:Ra}),xR=ot({subscription:j(),result:Ru(vR)}),IR=ot({parent:j(),slot:j(),root:j()}),NR=ot({subscription:j(),result:IR}),OR=un([ot({type:un([Xt("firstShredReceived"),Xt("completed"),Xt("optimisticConfirmation"),Xt("root")]),slot:j(),timestamp:j()}),ot({type:Xt("createdBank"),parent:j(),slot:j(),timestamp:j()}),ot({type:Xt("frozen"),slot:j(),timestamp:j(),stats:ot({numTransactionEntries:j(),numSuccessfulTransactions:j(),numFailedTransactions:j(),maxTransactionsPerEntry:j()})}),ot({type:Xt("dead"),slot:j(),timestamp:j(),err:ct()})]),TR=ot({subscription:j(),result:OR}),BR=ot({subscription:j(),result:Ru(un([Z_,Y_]))}),CR=ot({subscription:j(),result:j()}),kR=ot({pubkey:ct(),gossip:ht(ct()),tpu:ht(ct()),rpc:ht(ct()),version:ht(ct())}),wd=ot({votePubkey:ct(),nodePubkey:ct(),activatedStake:j(),epochVoteAccount:yr(),epochCredits:lt(jf([j(),j(),j()])),commission:j(),lastVote:j(),rootSlot:ht(j())}),LR=xt(ot({current:lt(wd),delinquent:lt(wd)})),PR=un([Xt("processed"),Xt("confirmed"),Xt("finalized")]),MR=ot({slot:j(),confirmations:ht(j()),err:_i,confirmationStatus:wt(PR)}),UR=ue(lt(ht(MR))),DR=xt(j()),Cp=ot({accountKey:ee,writableIndexes:lt(j()),readonlyIndexes:lt(j())}),Xf=ot({signatures:lt(ct()),message:ot({accountKeys:lt(ct()),header:ot({numRequiredSignatures:j(),numReadonlySignedAccounts:j(),numReadonlyUnsignedAccounts:j()}),instructions:lt(ot({accounts:lt(j()),data:ct(),programIdIndex:j()})),recentBlockhash:ct(),addressTableLookups:wt(lt(Cp))})}),kp=ot({pubkey:ee,signer:yr(),writable:yr(),source:wt(un([Xt("transaction"),Xt("lookupTable")]))}),Lp=ot({accountKeys:lt(kp),signatures:lt(ct())}),Pp=ot({parsed:ta(),program:ct(),programId:ee}),Mp=ot({accounts:lt(ee),data:ct(),programId:ee}),FR=un([Mp,Pp]),GR=un([ot({parsed:ta(),program:ct(),programId:ct()}),ot({accounts:lt(ct()),data:ct(),programId:ct()})]),Up=Za(FR,GR,r=>"accounts"in r?ut(r,Mp):ut(r,Pp)),Dp=ot({signatures:lt(ct()),message:ot({accountKeys:lt(kp),instructions:lt(Up),recentBlockhash:ct(),addressTableLookups:wt(ht(lt(Cp)))})}),qc=ot({accountIndex:j(),mint:ct(),owner:wt(ct()),programId:wt(ct()),uiTokenAmount:Xl}),Fp=ot({writable:lt(ee),readonly:lt(ee)}),Su=ot({err:_i,fee:j(),innerInstructions:wt(ht(lt(ot({index:j(),instructions:lt(ot({accounts:lt(j()),data:ct(),programIdIndex:j()}))})))),preBalances:lt(j()),postBalances:lt(j()),logMessages:wt(ht(lt(ct()))),preTokenBalances:wt(ht(lt(qc))),postTokenBalances:wt(ht(lt(qc))),loadedAddresses:wt(Fp),computeUnitsConsumed:wt(j())}),th=ot({err:_i,fee:j(),innerInstructions:wt(ht(lt(ot({index:j(),instructions:lt(Up)})))),preBalances:lt(j()),postBalances:lt(j()),logMessages:wt(ht(lt(ct()))),preTokenBalances:wt(ht(lt(qc))),postTokenBalances:wt(ht(lt(qc))),loadedAddresses:wt(Fp),computeUnitsConsumed:wt(j())}),ea=un([Xt(0),Xt("legacy")]),Ri=ot({pubkey:ct(),lamports:j(),postBalance:ht(j()),rewardType:ht(ct()),commission:wt(ht(j()))}),HR=xt(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:Xf,meta:ht(Su),version:wt(ea)})),rewards:wt(lt(Ri)),blockTime:ht(j()),blockHeight:ht(j())}))),zR=xt(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),rewards:wt(lt(Ri)),blockTime:ht(j()),blockHeight:ht(j())}))),VR=xt(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:Lp,meta:ht(Su),version:wt(ea)})),rewards:wt(lt(Ri)),blockTime:ht(j()),blockHeight:ht(j())}))),KR=xt(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:Dp,meta:ht(th),version:wt(ea)})),rewards:wt(lt(Ri)),blockTime:ht(j()),blockHeight:ht(j())}))),$R=xt(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:Lp,meta:ht(th),version:wt(ea)})),rewards:wt(lt(Ri)),blockTime:ht(j()),blockHeight:ht(j())}))),qR=xt(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),rewards:wt(lt(Ri)),blockTime:ht(j()),blockHeight:ht(j())}))),WR=xt(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),transactions:lt(ot({transaction:Xf,meta:ht(Su)})),rewards:wt(lt(Ri)),blockTime:ht(j())}))),Ad=xt(ht(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:j(),signatures:lt(ct()),blockTime:ht(j())}))),Ol=xt(ht(ot({slot:j(),meta:ht(Su),blockTime:wt(ht(j())),transaction:Xf,version:wt(ea)}))),dc=xt(ht(ot({slot:j(),transaction:Dp,meta:ht(th),blockTime:wt(ht(j())),version:wt(ea)}))),QR=ue(ot({blockhash:ct(),lastValidBlockHeight:j()})),JR=ue(yr()),jR=ot({slot:j(),numTransactions:j(),numSlots:j(),samplePeriodSecs:j()}),ZR=xt(lt(jR)),YR=ue(ht(ot({feeCalculator:ot({lamportsPerSignature:j()})}))),XR=xt(ct()),tS=xt(ct()),eS=ot({err:_i,logs:lt(ct()),signature:ct()}),nS=ot({result:Ru(eS),subscription:j()}),rS={"solana-client":"js/1.0.0-maintenance"};class JN{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const f={};return async h=>{const{commitment:y,config:_}=Vt(h),A=this._buildArgs([],y,void 0,_),O=dd(A);return f[O]=f[O]??(async()=>{try{const E=await this._rpcRequest("getBlockHeight",A),v=ut(E,xt(j()));if("error"in v)throw new yt(v.error,"failed to get block height information");return v.result}finally{delete f[O]}})(),await f[O]}})();let n,s,i,o,a,c;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,c=e.httpAgent),this._rpcEndpoint=z_(t),this._rpcWsEndpoint=n||G_(t),this._rpcClient=rR(t,s,i,o,a,c),this._rpcRequest=sR(this._rpcClient),this._rpcBatchRequest=iR(this._rpcClient),this._rpcWebSocket=new M_(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=ut(o,ue(j()));if("error"in a)throw new yt(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=ut(e,xt(ht(j())));if("error"in n)throw new yt(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=ut(t,xt(j()));if("error"in e)throw new yt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=ut(t,hR);if("error"in e)throw new yt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=ut(n,dR);if("error"in s)throw new yt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=ut(s,ue(Xl));if("error"in i)throw new yt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=ut(s,ue(Xl));if("error"in i)throw new yt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=Vt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),f=ut(c,gR);if("error"in f)throw new yt(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=ut(o,mR);if("error"in a)throw new yt(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=ut(s,yR);if("error"in i)throw new yt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=ut(s,pR);if("error"in i)throw new yt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=ut(o,ue(ht(Ra)));if("error"in a)throw new yt(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=ut(o,ue(ht(ef)));if("error"in a)throw new yt(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=Vt(e),i=t.map(f=>f.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=ut(a,ue(lt(ht(ef))));if("error"in c)throw new yt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=Vt(e),i=t.map(f=>f.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=ut(a,ue(lt(ht(Ra))));if("error"in c)throw new yt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=Vt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=ut(a,xt(ER));if("error"in c)throw new yt(c.error,`failed to get Stake Activation ${t.toBase58()}`);return c.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=Vt(e),{encoding:i,...o}=s||{},a=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:md(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),f=lt(wR),h=o.withContext===!0?ut(c,ue(f)):ut(c,xt(f));if("error"in h)throw new yt(h.error,`failed to get accounts owned by program ${t.toBase58()}`);return h.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=ut(o,xt(lt(bR)));if("error"in a)throw new yt(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=Ge.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Be(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((c,f)=>{try{n=this.onSignature(e,(y,_)=>{n=void 0;const A={context:_,value:y};c({__type:Yr.PROCESSED,response:A})},t);const h=new Promise(y=>{n==null?y():s=this._onSubscriptionStateChange(n,_=>{_==="subscribed"&&y()})});(async()=>{if(await h,i)return;const y=await this.getSignatureStatus(e);if(i||y==null)return;const{context:_,value:A}=y;if(A!=null)if(A!=null&&A.err)f(A.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(A.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(A.confirmationStatus==="processed"||A.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:Yr.PROCESSED,response:{context:_,value:A}})}})()}catch(h){f(h)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(y=>{const _=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let A=await _();if(!i){for(;A<=n;)if(await Li(1e3),i||(A=await _(),i))return;y({__type:Yr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),f=this.getCancellationPromise(e);let h;try{const y=await Promise.race([f,c,o]);if(y.__type===Yr.PROCESSED)h=y.response;else throw new vp(s)}finally{i=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(A=>{let O=i,E=null;const v=async()=>{try{const{context:L,value:K}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return E=L.slot,K==null?void 0:K.nonce}catch{return O}};(async()=>{if(O=await v(),!a)for(;;){if(i!==O){A({__type:Yr.NONCE_INVALID,slotInWhichNonceDidAdvance:E});return}if(await Li(2e3),a||(O=await v(),a))return}})()}),{abortConfirmation:f,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),y=this.getCancellationPromise(e);let _;try{const A=await Promise.race([y,h,c]);if(A.__type===Yr.PROCESSED)_=A.response;else{let O;for(;;){const E=await this.getSignatureStatus(o);if(E==null)break;if(E.context.slot<(A.slotInWhichNonceDidAdvance??n)){await Li(400);continue}O=E;break}if(O!=null&&O.value){const E=t||"finalized",{confirmationStatus:v}=O.value;switch(E){case"processed":case"recent":if(v!=="processed"&&v!=="confirmed"&&v!=="finalized")throw new la(o);break;case"confirmed":case"single":case"singleGossip":if(v!=="confirmed"&&v!=="finalized")throw new la(o);break;case"finalized":case"max":case"root":if(v!=="finalized")throw new la(o);break;default:}_={context:O.context,value:{err:O.value.err}}}else throw new la(o)}}finally{a=!0,f()}return _}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(c=>{let f=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{f=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Yr.TIMED_OUT,timeoutMs:f}),f)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const c=await Promise.race([o,s]);if(c.__type===Yr.PROCESSED)a=c.response;else throw new xp(e,c.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=ut(t,xt(lt(kR)));if("error"in e)throw new yt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=ut(n,LR);if("error"in s)throw new yt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=Vt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=ut(i,xt(j()));if("error"in o)throw new yt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=Vt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=ut(i,xt(ct()));if("error"in o)throw new yt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=ut(s,xt(lt(ee)));if("error"in i)throw new yt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);Be(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=ut(s,UR);if("error"in i)throw new yt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=Vt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=ut(i,xt(j()));if("error"in o)throw new yt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=ut(n,oR);if("error"in s)throw new yt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=Vt(n),o=this._buildArgs([t.map(f=>f.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=ut(a,$_);if("error"in c)throw new yt(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=ut(t,aR);if("error"in e)throw new yt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Vt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=ut(i,uR);if("error"in o)throw new yt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=ut(t,lR);if("error"in e)throw new yt(e.error,"failed to get epoch schedule");const n=e.result;return new L_(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=ut(t,fR);if("error"in e)throw new yt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=ut(s,DR);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=ut(e,ZR);if("error"in n)throw new yt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=ut(s,YR);if("error"in i)throw new yt(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const n=Fe(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=ut(i,ue(ht(j())));if("error"in o)throw new yt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=ut(s,cR);if("error"in i)throw new yt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Vt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=ut(i,QR);if("error"in o)throw new yt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=ut(o,JR);if("error"in a)throw new yt(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=ut(t,xt(X_));if("error"in e)throw new yt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=ut(t,xt(ct()));if("error"in e)throw new yt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=ut(o,VR);if("error"in a)throw a.error;return a.result}case"none":{const a=ut(o,zR);if("error"in a)throw a.error;return a.result}default:{const a=ut(o,HR);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:f,meta:h,version:y})=>({meta:h,transaction:{...f,message:Nl(y,f.message)},version:y}))}:null}}}catch(a){throw new yt(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=ut(o,$R);if("error"in a)throw a.error;return a.result}case"none":{const a=ut(o,qR);if("error"in a)throw a.error;return a.result}default:{const a=ut(o,KR);if("error"in a)throw a.error;return a.result}}}catch(a){throw new yt(a,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:a,...c}=t;n=a,e=c}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=ut(i,nR);if("error"in o)throw new yt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=ut(o,Ol);if("error"in a)throw new yt(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:Nl(c.version,c.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=Vt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=ut(o,dc);if("error"in a)throw new yt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=Vt(e),i=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const f=ut(c,dc);if("error"in f)throw new yt(f.error,"failed to get transactions");return f.result})}async getTransactions(t,e){const{commitment:n,config:s}=Vt(e),i=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const f=ut(c,Ol);if("error"in f)throw new yt(f.error,"failed to get transactions");const h=f.result;return h&&{...h,transaction:{...h.transaction,message:Nl(h.version,h.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=ut(s,WR);if("error"in i)throw new yt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:f})=>{const h=new vs(c.message);return{meta:f,transaction:{...c,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:f})=>({meta:f,transaction:ki.populate(c.message,c.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=ut(i,xt(lt(j())));if("error"in o)throw new yt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=ut(s,Ad);if("error"in i)throw new yt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=ut(s,Ad);if("error"in i)throw new yt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=ut(s,Ol);if("error"in i)throw new yt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new vs(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:ki.populate(a,c)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=ut(s,dc);if("error"in i)throw new yt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=ut(o,dc);if("error"in a)throw new yt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const c=await this.getConfirmedBlockSignatures(e,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=ut(i,_R);if("error"in o)throw new yt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=ut(i,RR);if("error"in o)throw new yt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new gd({key:t,state:gd.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Zf.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=ut(n,XR);if("error"in s)throw new yt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Li(100);const n=Date.now()-this._blockhashInfo.lastFetch>=H_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Li(N_/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Vt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=ut(i,ue(j()));if("error"in o)throw new yt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const E=t.serialize(),v=It.Buffer.from(E).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const L=e||{};L.encoding="base64","commitment"in L||(L.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(L.innerInstructions=e.innerInstructions);const K=[v,L],z=await this._rpcRequest("simulateTransaction",K),rt=ut(z,yd);if("error"in rt)throw new Error("failed to simulate transaction: "+rt.error.message);return rt.result}let s;if(t instanceof ki){let O=t;s=new ki,s.feePayer=O.feePayer,s.instructions=t.instructions,s.nonceInfo=O.nonceInfo,s.signatures=O.signatures}else s=ki.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let O=this._disableBlockhashCaching;for(;;){const E=await this._blockhashWithExpiryBlockHeight(O);if(s.lastValidBlockHeight=E.lastValidBlockHeight,s.recentBlockhash=E.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const v=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(v)&&!this._blockhashInfo.transactionSignatures.includes(v)){this._blockhashInfo.simulatedSignatures.push(v);break}else O=!0}}const o=s._compile(),a=o.serialize(),f=s._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){const O=(Array.isArray(n)?n:o.nonProgramIds()).map(E=>E.toBase58());h.accounts={encoding:"base64",addresses:O}}i&&(h.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(h.innerInstructions=e.innerInstructions);const y=[f,h],_=await this._rpcRequest("simulateTransaction",y),A=ut(_,yd);if("error"in A){let O;if("data"in A.error&&(O=A.error.data.logs,O&&Array.isArray(O))){const E=`
    `,v=E+O.join(E);console.error(A.error.message,v)}throw new ld({action:"simulate",signature:"",transactionMessage:A.error.message,logs:O})}return A.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const c=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=Fe(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],a=await this._rpcRequest("sendTransaction",o),c=ut(a,tS);if("error"in c){let f;throw"data"in c.error&&(f=c.error.data.logs),new ld({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:f})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=ut(t,SR);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=dd([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Be(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=Vt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=ut(t,xR);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=Vt(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:md(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=ut(t,nS);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=ut(t,NR);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=ut(t,TR);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=ut(t,BR);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),a=this._makeSubscription({callback:(c,f)=>{e(c,f);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=ut(t,CR);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:F.struct([F.u32("instruction"),Ko("recentSlot"),F.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:F.struct([F.u32("instruction")])},ExtendLookupTable:{index:2,layout:F.struct([F.u32("instruction"),Ko(),F.seq(Bt(),F.offset(F.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:F.struct([F.u32("instruction")])},CloseLookupTable:{index:4,layout:F.struct([F.u32("instruction")])}});new Et("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:F.struct([F.u8("instruction"),F.u32("units"),F.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:F.struct([F.u8("instruction"),F.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:F.struct([F.u8("instruction"),F.u32("units")])},SetComputeUnitPrice:{index:3,layout:F.struct([F.u8("instruction"),Ko("microLamports")])}});new Et("ComputeBudget111111111111111111111111111111");F.struct([F.u8("numSignatures"),F.u8("padding"),F.u16("signatureOffset"),F.u16("signatureInstructionIndex"),F.u16("publicKeyOffset"),F.u16("publicKeyInstructionIndex"),F.u16("messageDataOffset"),F.u16("messageDataSize"),F.u16("messageInstructionIndex")]);new Et("Ed25519SigVerify111111111111111111111111111");p_.utils.isValidPrivateKey;F.struct([F.u8("numSignatures"),F.u16("signatureOffset"),F.u8("signatureInstructionIndex"),F.u16("ethAddressOffset"),F.u8("ethAddressInstructionIndex"),F.u16("messageDataOffset"),F.u16("messageDataSize"),F.u8("messageInstructionIndex"),F.blob(20,"ethAddress"),F.blob(64,"signature"),F.u8("recoveryId")]);new Et("KeccakSecp256k11111111111111111111111111111");var Gp;new Et("StakeConfig11111111111111111111111111111111");class Hp{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Gp=Hp;Hp.default=new Gp(0,0,Et.default);Object.freeze({Initialize:{index:0,layout:F.struct([F.u32("instruction"),b_(),E_()])},Authorize:{index:1,layout:F.struct([F.u32("instruction"),Bt("newAuthorized"),F.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:F.struct([F.u32("instruction")])},Split:{index:3,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},Withdraw:{index:4,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},Deactivate:{index:5,layout:F.struct([F.u32("instruction")])},Merge:{index:7,layout:F.struct([F.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:F.struct([F.u32("instruction"),Bt("newAuthorized"),F.u32("stakeAuthorizationType"),Fi("authoritySeed"),Bt("authorityOwner")])}});new Et("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:F.struct([F.u32("instruction"),__()])},Authorize:{index:1,layout:F.struct([F.u32("instruction"),Bt("newAuthorized"),F.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:F.struct([F.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:F.struct([F.u32("instruction"),R_()])}});new Et("Vote111111111111111111111111111111111111111");new Et("Va1idator1nfo111111111111111111111111111111");ot({name:ct(),website:wt(ct()),details:wt(ct()),iconUrl:wt(ct()),keybaseUsername:wt(ct())});new Et("Vote111111111111111111111111111111111111111");F.struct([Bt("nodePubkey"),Bt("authorizedWithdrawer"),F.u8("commission"),F.nu64(),F.seq(F.struct([F.nu64("slot"),F.u32("confirmationCount")]),F.offset(F.u32(),-8),"votes"),F.u8("rootSlotValid"),F.nu64("rootSlot"),F.nu64(),F.seq(F.struct([F.nu64("epoch"),Bt("authorizedVoter")]),F.offset(F.u32(),-8),"authorizedVoters"),F.struct([F.seq(F.struct([Bt("authorizedPubkey"),F.nu64("epochOfLastAuthorizedSwitch"),F.nu64("targetEpoch")]),32,"buf"),F.nu64("idx"),F.u8("isEmpty")],"priorVoters"),F.nu64(),F.seq(F.struct([F.nu64("epoch"),F.nu64("credits"),F.nu64("prevCredits")]),F.offset(F.u32(),-8),"epochCredits"),F.struct([F.nu64("slot"),F.nu64("timestamp")],"lastTimestamp")]);const jN=1e9,sS="6.14.4";function iS(r,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${e}`,s.value=r,s}async function rn(r){const t=Object.keys(r);return(await Promise.all(t.map(n=>Promise.resolve(r[n])))).reduce((n,s,i)=>(n[t[i]]=s,n),{})}function At(r,t,e){for(let n in t){let s=t[n];const i=e?e[n]:null;i&&iS(s,i,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function Gi(r,t){if(r==null)return"null";if(t==null&&(t=new Set),typeof r=="object"){if(t.has(r))return"[Circular]";t.add(r)}if(Array.isArray(r))return"[ "+r.map(e=>Gi(e,t)).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let s=0;s<r.length;s++)n+=e[r[s]>>4],n+=e[r[s]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return Gi(r.toJSON(),t);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(n=>`${Gi(n,t)}: ${Gi(r[n],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ze(r,t){return r&&r.code===t}function eh(r){return ze(r,"CALL_EXCEPTION")}function Zt(r,t,e){let n=r;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${Gi(e)}`);for(const o in e){if(o==="shortMessage")continue;const a=e[o];i.push(o+"="+Gi(a))}}i.push(`code=${t}`),i.push(`version=${sS}`),i.length&&(r+=" ("+i.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return At(s,{code:t}),e&&Object.assign(s,e),s.shortMessage==null&&At(s,{shortMessage:n}),s}function it(r,t,e,n){if(!r)throw Zt(t,e,n)}function $(r,t,e,n){it(r,t,"INVALID_ARGUMENT",{argument:e,value:n})}function zp(r,t,e){e==null&&(e=""),e&&(e=": "+e),it(r>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:r,expectedCount:t}),it(r<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((r,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(t)}catch{}return r},[]);function Ya(r,t,e){if(e==null&&(e=""),r!==t){let n=e,s="new";e&&(n+=".",s+=" "+e),it(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Vp(r,t,e){if(r instanceof Uint8Array)return e?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(r.substring(s,s+2),16),s+=2;return n}$(!1,"invalid BytesLike value",t||"value",r)}function Nt(r,t){return Vp(r,t,!1)}function sn(r,t){return Vp(r,t,!0)}function Kt(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&r.length!==2+2*t||t===!0&&r.length%2!==0)}function nh(r){return Kt(r,!0)||r instanceof Uint8Array}const bd="0123456789abcdef";function dt(r){const t=Nt(r);let e="0x";for(let n=0;n<t.length;n++){const s=t[n];e+=bd[(s&240)>>4]+bd[s&15]}return e}function ae(r){return"0x"+r.map(t=>dt(t).substring(2)).join("")}function Qi(r){return Kt(r,!0)?(r.length-2)/2:Nt(r).length}function oe(r,t,e){const n=Nt(r);return e!=null&&e>n.length&&it(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),dt(n.slice(t??0,e??n.length))}function Kp(r,t,e){const n=Nt(r);it(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),e?s.set(n,t-n.length):s.set(n,0),dt(s)}function $r(r,t){return Kp(r,t,!0)}function oS(r,t){return Kp(r,t,!1)}const vu=BigInt(0),Jn=BigInt(1),Hi=9007199254740991;function Wc(r,t){const e=xu(r,"value"),n=BigInt(Ot(t,"width"));if(it(e>>n===vu,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),e>>n-Jn){const s=(Jn<<n)-Jn;return-((~e&s)+Jn)}return e}function $p(r,t){let e=gt(r,"value");const n=BigInt(Ot(t,"width")),s=Jn<<n-Jn;if(e<vu){e=-e,it(e<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const i=(Jn<<n)-Jn;return(~e&i)+Jn}else it(e<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return e}function Vs(r,t){const e=xu(r,"value"),n=BigInt(Ot(t,"bits"));return e&(Jn<<n)-Jn}function gt(r,t){switch(typeof r){case"bigint":return r;case"number":return $(Number.isInteger(r),"underflow",t||"value",r),$(r>=-Hi&&r<=Hi,"overflow",t||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(e){$(!1,`invalid BigNumberish string: ${e.message}`,t||"value",r)}}$(!1,"invalid BigNumberish value",t||"value",r)}function xu(r,t){const e=gt(r,t);return it(e>=vu,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),e}const Ed="0123456789abcdef";function Iu(r){if(r instanceof Uint8Array){let t="0x0";for(const e of r)t+=Ed[e>>4],t+=Ed[e&15];return BigInt(t)}return gt(r)}function Ot(r,t){switch(typeof r){case"bigint":return $(r>=-Hi&&r<=Hi,"overflow",t||"value",r),Number(r);case"number":return $(Number.isInteger(r),"underflow",t||"value",r),$(r>=-Hi&&r<=Hi,"overflow",t||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Ot(BigInt(r),t)}catch(e){$(!1,`invalid numeric string: ${e.message}`,t||"value",r)}}$(!1,"invalid numeric value",t||"value",r)}function aS(r){return Ot(Iu(r))}function xs(r,t){let n=xu(r,"value").toString(16);if(t==null)n.length%2&&(n="0"+n);else{const s=Ot(t,"width");for(it(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<s*2;)n="0"+n}return"0x"+n}function ke(r){const t=xu(r,"value");if(t===vu)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(e.substring(i,i+2),16)}return n}function Qn(r){let t=dt(nh(r)?r:ke(r)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const _d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Rd=BigInt(58);function cS(r){const t=Nt(r);let e=Iu(t),n="";for(;e;)n=_d[Number(e%Rd)]+n,e/=Rd;for(let s=0;s<t.length&&!t[s];s++)n=_d[0]+n;return n}function uS(r){r=atob(r);const t=new Uint8Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return Nt(t)}function lS(r){const t=Nt(r);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}var Yi;class qp{constructor(t,e,n){W(this,"filter");W(this,"emitter");X(this,Yi);k(this,Yi,e),At(this,{emitter:t,filter:n})}async removeListener(){b(this,Yi)!=null&&await this.emitter.off(this.filter,b(this,Yi))}}Yi=new WeakMap;function fS(r,t,e,n,s){$(!1,`invalid codepoint at offset ${t}; ${r}`,"bytes",e)}function Wp(r,t,e,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let i=0;for(let o=t+1;o<e.length&&e[o]>>6===2;o++)i++;return i}return r==="OVERRUN"?e.length-t-1:0}function hS(r,t,e,n,s){return r==="OVERLONG"?($(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),Wp(r,t,e))}const dS=Object.freeze({error:fS,ignore:Wp,replace:hS});function pS(r,t){t==null&&(t=dS.error);const e=Nt(r,"bytes"),n=[];let s=0;for(;s<e.length;){const i=e[s++];if(i>>7===0){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=t("UNEXPECTED_CONTINUE",s-1,e,n):s+=t("BAD_PREFIX",s-1,e,n);continue}if(s-1+o>=e.length){s+=t("OVERRUN",s-1,e,n);continue}let c=i&(1<<8-o-1)-1;for(let f=0;f<o;f++){let h=e[s];if((h&192)!=128){s+=t("MISSING_CONTINUE",s,e,n),c=null;break}c=c<<6|h&63,s++}if(c!==null){if(c>1114111){s+=t("OUT_OF_RANGE",s-1-o,e,n,c);continue}if(c>=55296&&c<=57343){s+=t("UTF16_SURROGATE",s-1-o,e,n,c);continue}if(c<=a){s+=t("OVERLONG",s-1-o,e,n,c);continue}n.push(c)}}return n}function Vr(r,t){$(typeof r=="string","invalid string value","str",r);let e=[];for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){n++;const i=r.charCodeAt(n);$(n<r.length&&(i&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((s&1023)<<10)+(i&1023);e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return new Uint8Array(e)}function gS(r){return r.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function Qc(r,t){return gS(pS(r,t))}function Qp(r){async function t(e,n){it(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();it(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),it(s==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Zt("request timeout","TIMEOUT"),o.abort()},e.timeout);n&&n.addListener(()=>{i=Zt("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},r,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal});let f;try{f=await fetch(e.url,c)}catch(A){throw clearTimeout(a),i||A}clearTimeout(a);const h={};f.headers.forEach((A,O)=>{h[O.toLowerCase()]=A});const y=await f.arrayBuffer(),_=y==null?null:new Uint8Array(y);return{statusCode:f.status,statusMessage:f.statusText,headers:h,body:_}}return t}const mS=12,yS=250;let Sd=Qp();const wS=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),AS=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Tl=!1;async function Jp(r,t){try{const e=r.match(wS);if(!e)throw new Error("invalid data");return new Ss(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?uS(e[3]):ES(e[3]))}catch{return new Ss(599,"BAD REQUEST (invalid data: URI)",{},null,new Is(r))}}function jp(r){async function t(e,n){try{const s=e.match(AS);if(!s)throw new Error("invalid link");return new Is(`${r}${s[2]}`)}catch{return new Ss(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Is(e))}}return t}const pc={data:Jp,ipfs:jp("https://gateway.ipfs.io/ipfs/")},Zp=new WeakMap;var Ws,is;class bS{constructor(t){X(this,Ws);X(this,is);k(this,Ws,[]),k(this,is,!1),Zp.set(t,()=>{if(!b(this,is)){k(this,is,!0);for(const e of b(this,Ws))setTimeout(()=>{e()},0);k(this,Ws,[])}})}addListener(t){it(!b(this,is),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),b(this,Ws).push(t)}get cancelled(){return b(this,is)}checkSignal(){it(!this.cancelled,"cancelled","CANCELLED",{})}}Ws=new WeakMap,is=new WeakMap;function gc(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var Xi,to,zn,Ir,eo,no,Le,bn,Nr,Qs,Js,js,sr,Vn,os,Zs,fa;const ou=class ou{constructor(t){X(this,Zs);X(this,Xi);X(this,to);X(this,zn);X(this,Ir);X(this,eo);X(this,no);X(this,Le);X(this,bn);X(this,Nr);X(this,Qs);X(this,Js);X(this,js);X(this,sr);X(this,Vn);X(this,os);k(this,no,String(t)),k(this,Xi,!1),k(this,to,!0),k(this,zn,{}),k(this,Ir,""),k(this,eo,3e5),k(this,Vn,{slotInterval:yS,maxAttempts:mS}),k(this,os,null)}get url(){return b(this,no)}set url(t){k(this,no,String(t))}get body(){return b(this,Le)==null?null:new Uint8Array(b(this,Le))}set body(t){if(t==null)k(this,Le,void 0),k(this,bn,void 0);else if(typeof t=="string")k(this,Le,Vr(t)),k(this,bn,"text/plain");else if(t instanceof Uint8Array)k(this,Le,t),k(this,bn,"application/octet-stream");else if(typeof t=="object")k(this,Le,Vr(JSON.stringify(t))),k(this,bn,"application/json");else throw new Error("invalid body")}hasBody(){return b(this,Le)!=null}get method(){return b(this,Ir)?b(this,Ir):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),k(this,Ir,String(t).toUpperCase())}get headers(){const t=Object.assign({},b(this,zn));return b(this,Nr)&&(t.authorization=`Basic ${lS(Vr(b(this,Nr)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&b(this,bn)&&(t["content-type"]=b(this,bn)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){b(this,zn)[String(t).toLowerCase()]=String(e)}clearHeaders(){k(this,zn,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return b(this,Nr)||null}setCredentials(t,e){$(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),k(this,Nr,`${t}:${e}`)}get allowGzip(){return b(this,to)}set allowGzip(t){k(this,to,!!t)}get allowInsecureAuthentication(){return!!b(this,Xi)}set allowInsecureAuthentication(t){k(this,Xi,!!t)}get timeout(){return b(this,eo)}set timeout(t){$(t>=0,"timeout must be non-zero","timeout",t),k(this,eo,t)}get preflightFunc(){return b(this,Qs)||null}set preflightFunc(t){k(this,Qs,t)}get processFunc(){return b(this,Js)||null}set processFunc(t){k(this,Js,t)}get retryFunc(){return b(this,js)||null}set retryFunc(t){k(this,js,t)}get getUrlFunc(){return b(this,os)||Sd}set getUrlFunc(t){k(this,os,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${b(this,Le)?dt(b(this,Le)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(b(this,Vn).slotInterval=t.slotInterval),t.maxAttempts!=null&&(b(this,Vn).maxAttempts=t.maxAttempts)}send(){return it(b(this,sr)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),k(this,sr,new bS(this)),at(this,Zs,fa).call(this,0,vd()+this.timeout,0,this,new Ss(0,"",{},null,this))}cancel(){it(b(this,sr)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Zp.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();it(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const s=new ou(t);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,k(s,zn,Object.assign({},b(this,zn))),b(this,Le)&&k(s,Le,new Uint8Array(b(this,Le))),k(s,bn,b(this,bn)),s}clone(){const t=new ou(this.url);return k(t,Ir,b(this,Ir)),b(this,Le)&&k(t,Le,b(this,Le)),k(t,bn,b(this,bn)),k(t,zn,Object.assign({},b(this,zn))),k(t,Nr,b(this,Nr)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),k(t,Qs,b(this,Qs)),k(t,Js,b(this,Js)),k(t,js,b(this,js)),k(t,Vn,Object.assign({},b(this,Vn))),k(t,os,b(this,os)),t}static lockConfig(){Tl=!0}static getGateway(t){return pc[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Tl)throw new Error("gateways locked");pc[t]=e}static registerGetUrl(t){if(Tl)throw new Error("gateways locked");Sd=t}static createGetUrlFunc(t){return Qp(t)}static createDataGateway(){return Jp}static createIpfsGatewayFunc(t){return jp(t)}};Xi=new WeakMap,to=new WeakMap,zn=new WeakMap,Ir=new WeakMap,eo=new WeakMap,no=new WeakMap,Le=new WeakMap,bn=new WeakMap,Nr=new WeakMap,Qs=new WeakMap,Js=new WeakMap,js=new WeakMap,sr=new WeakMap,Vn=new WeakMap,os=new WeakMap,Zs=new WeakSet,fa=async function(t,e,n,s,i){var h,y,_;if(t>=b(this,Vn).maxAttempts)return i.makeServerError("exceeded maximum retry limit");it(vd()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await _S(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in pc){const A=await pc[a](o.url,gc(b(s,sr)));if(A instanceof Ss){let O=A;if(this.processFunc){gc(b(s,sr));try{O=await this.processFunc(o,O)}catch(E){(E.throttle==null||typeof E.stall!="number")&&O.makeServerError("error in post-processing function",E).assertOk()}}return O}o=A}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,gc(b(s,sr)));let f=new Ss(c.statusCode,c.statusMessage,c.headers,c.body,s);if(f.statusCode===301||f.statusCode===302){try{const A=f.headers.location||"";return at(h=o.redirect(A),Zs,fa).call(h,t+1,e,0,s,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,f,t))){const A=f.headers["retry-after"];let O=b(this,Vn).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof A=="string"&&A.match(/^[1-9][0-9]*$/)&&(O=parseInt(A)),at(y=o.clone(),Zs,fa).call(y,t+1,e,O,s,f)}if(this.processFunc){gc(b(s,sr));try{f=await this.processFunc(o,f)}catch(A){(A.throttle==null||typeof A.stall!="number")&&f.makeServerError("error in post-processing function",A).assertOk();let O=b(this,Vn).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return A.stall>=0&&(O=A.stall),at(_=o.clone(),Zs,fa).call(_,t+1,e,O,s,f)}}return f};let Is=ou;var Pa,Ma,Ua,En,ro,Ys;const bh=class bh{constructor(t,e,n,s,i){X(this,Pa);X(this,Ma);X(this,Ua);X(this,En);X(this,ro);X(this,Ys);k(this,Pa,t),k(this,Ma,e),k(this,Ua,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),k(this,En,s==null?null:new Uint8Array(s)),k(this,ro,i||null),k(this,Ys,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${b(this,En)?dt(b(this,En)):"null"}>`}get statusCode(){return b(this,Pa)}get statusMessage(){return b(this,Ma)}get headers(){return Object.assign({},b(this,Ua))}get body(){return b(this,En)==null?null:new Uint8Array(b(this,En))}get bodyText(){try{return b(this,En)==null?"":Qc(b(this,En))}catch{it(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{it(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const s=new bh(599,n,this.headers,this.body,b(this,ro)||void 0);return k(s,Ys,{message:t,error:e}),s}throwThrottleError(t,e){e==null?e=-1:$(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw At(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return b(this,En)!=null}get request(){return b(this,ro)}ok(){return b(this,Ys).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=b(this,Ys);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{b(this,En)&&(s=Qc(b(this,En)))}catch{}it(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Pa=new WeakMap,Ma=new WeakMap,Ua=new WeakMap,En=new WeakMap,ro=new WeakMap,Ys=new WeakMap;let Ss=bh;function vd(){return new Date().getTime()}function ES(r){return Vr(r.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function _S(r){return new Promise(t=>setTimeout(t,r))}const RS=BigInt(-1),Fn=BigInt(0),zi=BigInt(1),SS=BigInt(5),Ti={};let Ji="0000";for(;Ji.length<80;)Ji+=Ji;function Cs(r){let t=Ji;for(;t.length<r;)t+=t;return BigInt("1"+t.substring(0,r))}function aa(r,t,e){const n=BigInt(t.width);if(t.signed){const s=zi<<n-zi;it(e==null||r>=-s&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r>Fn?r=Wc(Vs(r,n),n):r=-Wc(Vs(-r,n),n)}else{const s=zi<<n;it(e==null||r>=0&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r=(r%s+s)%s&s-zi}return r}function Bl(r){typeof r=="number"&&(r=`fixed128x${r}`);let t=!0,e=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")t=!1;else{const i=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);$(i,"invalid fixed format","format",r),t=i[1]!=="u",e=parseInt(i[2]),n=parseInt(i[3])}}else if(r){const i=r,o=(a,c,f)=>i[a]==null?f:($(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);t=o("signed","boolean",t),e=o("width","number",e),n=o("decimals","number",n)}$(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),$(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(t?"":"u")+"fixed"+String(e)+"x"+String(n);return{signed:t,width:e,decimals:n,name:s}}function vS(r,t){let e="";r<Fn&&(e="-",r*=RS);let n=r.toString();if(t===0)return e+n;for(;n.length<=t;)n=Ji+n;const s=n.length-t;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return e+n}var Kn,Ht,en,Dt,Ls,_r,rf,sf,of,af;const ss=class ss{constructor(t,e,n){X(this,Dt);W(this,"format");X(this,Kn);X(this,Ht);X(this,en);W(this,"_value");Ya(t,Ti,"FixedNumber"),k(this,Ht,e),k(this,Kn,n);const s=vS(e,n.decimals);At(this,{format:n.name,_value:s}),k(this,en,Cs(n.decimals))}get signed(){return b(this,Kn).signed}get width(){return b(this,Kn).width}get decimals(){return b(this,Kn).decimals}get value(){return b(this,Ht)}addUnsafe(t){return at(this,Dt,rf).call(this,t)}add(t){return at(this,Dt,rf).call(this,t,"add")}subUnsafe(t){return at(this,Dt,sf).call(this,t)}sub(t){return at(this,Dt,sf).call(this,t,"sub")}mulUnsafe(t){return at(this,Dt,of).call(this,t)}mul(t){return at(this,Dt,of).call(this,t,"mul")}mulSignal(t){at(this,Dt,Ls).call(this,t);const e=b(this,Ht)*b(t,Ht);return it(e%b(this,en)===Fn,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),at(this,Dt,_r).call(this,e/b(this,en),"mulSignal")}divUnsafe(t){return at(this,Dt,af).call(this,t)}div(t){return at(this,Dt,af).call(this,t,"div")}divSignal(t){it(b(t,Ht)!==Fn,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),at(this,Dt,Ls).call(this,t);const e=b(this,Ht)*b(this,en);return it(e%b(t,Ht)===Fn,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),at(this,Dt,_r).call(this,e/b(t,Ht),"divSignal")}cmp(t){let e=this.value,n=t.value;const s=this.decimals-t.decimals;return s>0?n*=Cs(s):s<0&&(e*=Cs(-s)),e<n?-1:e>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=b(this,Ht);return b(this,Ht)<Fn&&(t-=b(this,en)-zi),t=b(this,Ht)/b(this,en)*b(this,en),at(this,Dt,_r).call(this,t,"floor")}ceiling(){let t=b(this,Ht);return b(this,Ht)>Fn&&(t+=b(this,en)-zi),t=b(this,Ht)/b(this,en)*b(this,en),at(this,Dt,_r).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=SS*Cs(e-1);let s=this.value+n;const i=Cs(e);return s=s/i*i,aa(s,b(this,Kn),"round"),new ss(Ti,s,b(this,Kn))}isZero(){return b(this,Ht)===Fn}isNegative(){return b(this,Ht)<Fn}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return ss.fromString(this.toString(),t)}static fromValue(t,e,n){const s=e==null?0:Ot(e),i=Bl(n);let o=gt(t,"value");const a=s-i.decimals;if(a>0){const c=Cs(a);it(o%c===Fn,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=c}else a<0&&(o*=Cs(-a));return aa(o,i,"fromValue"),new ss(Ti,o,i)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);$(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const s=Bl(e);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=Ji;it(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return aa(a,s,"fromString"),new ss(Ti,a,s)}static fromBytes(t,e){let n=Iu(Nt(t,"value"));const s=Bl(e);return s.signed&&(n=Wc(n,s.width)),aa(n,s,"fromBytes"),new ss(Ti,n,s)}};Kn=new WeakMap,Ht=new WeakMap,en=new WeakMap,Dt=new WeakSet,Ls=function(t){$(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},_r=function(t,e){return t=aa(t,b(this,Kn),e),new ss(Ti,t,b(this,Kn))},rf=function(t,e){return at(this,Dt,Ls).call(this,t),at(this,Dt,_r).call(this,b(this,Ht)+b(t,Ht),e)},sf=function(t,e){return at(this,Dt,Ls).call(this,t),at(this,Dt,_r).call(this,b(this,Ht)-b(t,Ht),e)},of=function(t,e){return at(this,Dt,Ls).call(this,t),at(this,Dt,_r).call(this,b(this,Ht)*b(t,Ht)/b(this,en),e)},af=function(t,e){return it(b(t,Ht)!==Fn,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),at(this,Dt,Ls).call(this,t),at(this,Dt,_r).call(this,b(this,Ht)*b(this,en)/b(t,Ht),e)};let nf=ss;function xS(r){let t=r.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function xd(r,t,e){let n=0;for(let s=0;s<e;s++)n=n*256+r[t+s];return n}function Id(r,t,e,n){const s=[];for(;e<t+1+n;){const i=Yp(r,e);s.push(i.result),e+=i.consumed,it(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:t})}return{consumed:1+n,result:s}}function Yp(r,t){it(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const e=n=>{it(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[t]>=248){const n=r[t]-247;e(t+1+n);const s=xd(r,t+1,n);return e(t+1+n+s),Id(r,t,t+1+n,n+s)}else if(r[t]>=192){const n=r[t]-192;return e(t+1+n),Id(r,t,t+1,n)}else if(r[t]>=184){const n=r[t]-183;e(t+1+n);const s=xd(r,t+1,n);e(t+1+n+s);const i=dt(r.slice(t+1+n,t+1+n+s));return{consumed:1+n+s,result:i}}else if(r[t]>=128){const n=r[t]-128;e(t+1+n);const s=dt(r.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:xS(r[t])}}function Xa(r){const t=Nt(r,"data"),e=Yp(t,0);return $(e.consumed===t.length,"unexpected junk after rlp payload","data",r),e.result}function Nd(r){const t=[];for(;r;)t.unshift(r&255),r>>=8;return t}function Xp(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(i){n=n.concat(Xp(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=Nd(n.length);return s.unshift(247+s.length),s.concat(n)}const t=Array.prototype.slice.call(Nt(r,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Nd(t.length);return e.unshift(183+e.length),e.concat(t)}const Od="0123456789abcdef";function Ns(r){let t="0x";for(const e of Xp(r))t+=Od[e>>4],t+=Od[e&15];return t}function IS(r,t){$(typeof r=="string","value must be a string","value",r);let e=18;return e=Ot(t,"unit"),nf.fromString(r,{decimals:e,width:512}).value}function ZN(r){return IS(r,18)}const on=32,cf=new Uint8Array(on),NS=["then"],mc={},tg=new WeakMap;function Ms(r){return tg.get(r)}function Td(r,t){tg.set(r,t)}function ca(r,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw e.error=t,e}function uf(r,t,e){return r.indexOf(null)>=0?t.map((n,s)=>n instanceof $o?uf(Ms(n),n,e):n):r.reduce((n,s,i)=>{let o=t.getValue(s);return s in n||(e&&o instanceof $o&&(o=uf(Ms(o),o,e)),n[s]=o),n},{})}var so;const Vi=class Vi extends Array{constructor(...e){const n=e[0];let s=e[1],i=(e[2]||[]).slice(),o=!0;n!==mc&&(s=e,i=[],o=!1);super(s.length);X(this,so);s.forEach((f,h)=>{this[h]=f});const a=i.reduce((f,h)=>(typeof h=="string"&&f.set(h,(f.get(h)||0)+1),f),new Map);if(Td(this,Object.freeze(s.map((f,h)=>{const y=i[h];return y!=null&&a.get(y)===1?y:null}))),k(this,so,[]),b(this,so)==null&&b(this,so),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(f,h,y)=>{if(typeof h=="string"){if(h.match(/^[0-9]+$/)){const A=Ot(h,"%index");if(A<0||A>=this.length)throw new RangeError("out of result range");const O=f[A];return O instanceof Error&&ca(`index ${A}`,O),O}if(NS.indexOf(h)>=0)return Reflect.get(f,h,y);const _=f[h];if(_ instanceof Function)return function(...A){return _.apply(this===y?f:this,A)};if(!(h in f))return f.getValue.apply(this===y?f:this,[h])}return Reflect.get(f,h,y)}});return Td(c,Ms(this)),c}toArray(e){const n=[];return this.forEach((s,i)=>{s instanceof Error&&ca(`index ${i}`,s),e&&s instanceof Vi&&(s=s.toArray(e)),n.push(s)}),n}toObject(e){const n=Ms(this);return n.reduce((s,i,o)=>(it(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),uf(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=Ms(this),i=[],o=[];for(let a=e;a<n;a++)i.push(this[a]),o.push(s[a]);return new Vi(mc,i,o)}filter(e,n){const s=Ms(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&ca(`index ${a}`,c),e.call(n,c,a,this)&&(i.push(c),o.push(s[a]))}return new Vi(mc,i,o)}map(e,n){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&ca(`index ${i}`,o),s.push(e.call(n,o,i,this))}return s}getValue(e){const n=Ms(this).indexOf(e);if(n===-1)return;const s=this[n];return s instanceof Error&&ca(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,n){return new Vi(mc,e,n)}};so=new WeakMap;let $o=Vi;function Bd(r){let t=ke(r);return it(t.length<=on,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:on,offset:t.length}),t.length!==on&&(t=sn(ae([cf.slice(t.length%on),t]))),t}class Wr{constructor(t,e,n,s){W(this,"name");W(this,"type");W(this,"localName");W(this,"dynamic");At(this,{name:t,type:e,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){$(!1,t,this.localName,e)}}var Or,Xs,io,vc;class lf{constructor(){X(this,io);X(this,Or);X(this,Xs);k(this,Or,[]),k(this,Xs,0)}get data(){return ae(b(this,Or))}get length(){return b(this,Xs)}appendWriter(t){return at(this,io,vc).call(this,sn(t.data))}writeBytes(t){let e=sn(t);const n=e.length%on;return n&&(e=sn(ae([e,cf.slice(n)]))),at(this,io,vc).call(this,e)}writeValue(t){return at(this,io,vc).call(this,Bd(t))}writeUpdatableValue(){const t=b(this,Or).length;return b(this,Or).push(cf),k(this,Xs,b(this,Xs)+on),e=>{b(this,Or)[t]=Bd(e)}}}Or=new WeakMap,Xs=new WeakMap,io=new WeakSet,vc=function(t){return b(this,Or).push(t),k(this,Xs,b(this,Xs)+t.length),t.length};var ln,_n,ti,ei,as,bi,hf,eg;const Eh=class Eh{constructor(t,e,n){X(this,bi);W(this,"allowLoose");X(this,ln);X(this,_n);X(this,ti);X(this,ei);X(this,as);At(this,{allowLoose:!!e}),k(this,ln,sn(t)),k(this,ti,0),k(this,ei,null),k(this,as,n??1024),k(this,_n,0)}get data(){return dt(b(this,ln))}get dataLength(){return b(this,ln).length}get consumed(){return b(this,_n)}get bytes(){return new Uint8Array(b(this,ln))}subReader(t){const e=new Eh(b(this,ln).slice(b(this,_n)+t),this.allowLoose,b(this,as));return k(e,ei,this),e}readBytes(t,e){let n=at(this,bi,eg).call(this,0,t,!!e);return at(this,bi,hf).call(this,t),k(this,_n,b(this,_n)+n.length),n.slice(0,t)}readValue(){return Iu(this.readBytes(on))}readIndex(){return aS(this.readBytes(on))}};ln=new WeakMap,_n=new WeakMap,ti=new WeakMap,ei=new WeakMap,as=new WeakMap,bi=new WeakSet,hf=function(t){var e;if(b(this,ei))return at(e=b(this,ei),bi,hf).call(e,t);k(this,ti,b(this,ti)+t),it(b(this,as)<1||b(this,ti)<=b(this,as)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${b(this,as)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:sn(b(this,ln)),offset:b(this,_n),length:t,info:{bytesRead:b(this,ti),dataLength:this.dataLength}})},eg=function(t,e,n){let s=Math.ceil(e/on)*on;return b(this,_n)+s>b(this,ln).length&&(this.allowLoose&&n&&b(this,_n)+e<=b(this,ln).length?s=e:it(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:sn(b(this,ln)),length:b(this,ln).length,offset:b(this,_n)+s})),b(this,ln).slice(b(this,_n),b(this,_n)+s)};let ff=Eh;function Jc(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function rh(r,...t){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(r.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${r.length}`)}function OS(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Jc(r.outputLen),Jc(r.blockLen)}function qo(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function ng(r,t){rh(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Cl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rg=r=>r instanceof Uint8Array,TS=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),kl=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),er=(r,t)=>r<<32-t|r>>>t,BS=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!BS)throw new Error("Non little-endian hardware is not supported");function CS(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Nu(r){if(typeof r=="string"&&(r=CS(r)),!rg(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function kS(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!rg(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}class sh{clone(){return this._cloneInto()}}function ih(r){const t=n=>r().update(Nu(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function LS(r=32){if(Cl&&typeof Cl.getRandomValues=="function")return Cl.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class sg extends sh{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,OS(t);const n=Nu(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return qo(this),this.iHash.update(t),this}digestInto(t){qo(this),rh(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ig=(r,t,e)=>new sg(r,t).update(e).digest();ig.create=(r,t)=>new sg(r,t);function PS(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),c=n?4:0,f=n?0:4;r.setUint32(t+c,o,n),r.setUint32(t+f,a,n)}class og extends sh{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=kl(this.buffer)}update(t){qo(this);const{view:e,buffer:n,blockLen:s}=this;t=Nu(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=kl(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){qo(this),ng(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let y=o;y<s;y++)e[y]=0;PS(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=kl(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<f;y++)a.setUint32(4*y,h[y],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}}const MS=(r,t,e)=>r&t^~r&e,US=(r,t,e)=>r&t^r&e^t&e,DS=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ts=new Uint32Array(64);class FS extends og{constructor(){super(64,32,8,!1),this.A=Xr[0]|0,this.B=Xr[1]|0,this.C=Xr[2]|0,this.D=Xr[3]|0,this.E=Xr[4]|0,this.F=Xr[5]|0,this.G=Xr[6]|0,this.H=Xr[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,e,n,s,i,o,a,c]}set(t,e,n,s,i,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let y=0;y<16;y++,e+=4)ts[y]=t.getUint32(e,!1);for(let y=16;y<64;y++){const _=ts[y-15],A=ts[y-2],O=er(_,7)^er(_,18)^_>>>3,E=er(A,17)^er(A,19)^A>>>10;ts[y]=E+ts[y-7]+O+ts[y-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:f,H:h}=this;for(let y=0;y<64;y++){const _=er(a,6)^er(a,11)^er(a,25),A=h+_+MS(a,c,f)+DS[y]+ts[y]|0,E=(er(n,2)^er(n,13)^er(n,22))+US(n,s,i)|0;h=f,f=c,c=a,a=o+A|0,o=i,i=s,s=n,n=A+E|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,s,i,o,a,c,f,h)}roundClean(){ts.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ag=ih(()=>new FS),yc=BigInt(2**32-1),df=BigInt(32);function cg(r,t=!1){return t?{h:Number(r&yc),l:Number(r>>df&yc)}:{h:Number(r>>df&yc)|0,l:Number(r&yc)|0}}function ug(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=cg(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}const GS=(r,t)=>BigInt(r>>>0)<<df|BigInt(t>>>0),HS=(r,t,e)=>r>>>e,zS=(r,t,e)=>r<<32-e|t>>>e,VS=(r,t,e)=>r>>>e|t<<32-e,KS=(r,t,e)=>r<<32-e|t>>>e,$S=(r,t,e)=>r<<64-e|t>>>e-32,qS=(r,t,e)=>r>>>e-32|t<<64-e,WS=(r,t)=>t,QS=(r,t)=>r,lg=(r,t,e)=>r<<e|t>>>32-e,fg=(r,t,e)=>t<<e|r>>>32-e,hg=(r,t,e)=>t<<e-32|r>>>64-e,dg=(r,t,e)=>r<<e-32|t>>>64-e;function JS(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const jS=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),ZS=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,YS=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),XS=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,tv=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),ev=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,vt={fromBig:cg,split:ug,toBig:GS,shrSH:HS,shrSL:zS,rotrSH:VS,rotrSL:KS,rotrBH:$S,rotrBL:qS,rotr32H:WS,rotr32L:QS,rotlSH:lg,rotlSL:fg,rotlBH:hg,rotlBL:dg,add:JS,add3L:jS,add3H:ZS,add4L:YS,add4H:XS,add5H:ev,add5L:tv},[nv,rv]=vt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),es=new Uint32Array(80),ns=new Uint32Array(80);class sv extends og{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:f,El:h,Fh:y,Fl:_,Gh:A,Gl:O,Hh:E,Hl:v}=this;return[t,e,n,s,i,o,a,c,f,h,y,_,A,O,E,v]}set(t,e,n,s,i,o,a,c,f,h,y,_,A,O,E,v){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=h|0,this.Fh=y|0,this.Fl=_|0,this.Gh=A|0,this.Gl=O|0,this.Hh=E|0,this.Hl=v|0}process(t,e){for(let z=0;z<16;z++,e+=4)es[z]=t.getUint32(e),ns[z]=t.getUint32(e+=4);for(let z=16;z<80;z++){const rt=es[z-15]|0,V=ns[z-15]|0,Y=vt.rotrSH(rt,V,1)^vt.rotrSH(rt,V,8)^vt.shrSH(rt,V,7),st=vt.rotrSL(rt,V,1)^vt.rotrSL(rt,V,8)^vt.shrSL(rt,V,7),et=es[z-2]|0,U=ns[z-2]|0,P=vt.rotrSH(et,U,19)^vt.rotrBH(et,U,61)^vt.shrSH(et,U,6),M=vt.rotrSL(et,U,19)^vt.rotrBL(et,U,61)^vt.shrSL(et,U,6),H=vt.add4L(st,M,ns[z-7],ns[z-16]),R=vt.add4H(H,Y,P,es[z-7],es[z-16]);es[z]=R|0,ns[z]=H|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:f,Dl:h,Eh:y,El:_,Fh:A,Fl:O,Gh:E,Gl:v,Hh:L,Hl:K}=this;for(let z=0;z<80;z++){const rt=vt.rotrSH(y,_,14)^vt.rotrSH(y,_,18)^vt.rotrBH(y,_,41),V=vt.rotrSL(y,_,14)^vt.rotrSL(y,_,18)^vt.rotrBL(y,_,41),Y=y&A^~y&E,st=_&O^~_&v,et=vt.add5L(K,V,st,rv[z],ns[z]),U=vt.add5H(et,L,rt,Y,nv[z],es[z]),P=et|0,M=vt.rotrSH(n,s,28)^vt.rotrBH(n,s,34)^vt.rotrBH(n,s,39),H=vt.rotrSL(n,s,28)^vt.rotrBL(n,s,34)^vt.rotrBL(n,s,39),R=n&i^n&a^i&a,u=s&o^s&c^o&c;L=E|0,K=v|0,E=A|0,v=O|0,A=y|0,O=_|0,{h:y,l:_}=vt.add(f|0,h|0,U|0,P|0),f=a|0,h=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const p=vt.add3L(P,H,u);n=vt.add3H(p,U,M,R),s=p|0}({h:n,l:s}=vt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=vt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=vt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:h}=vt.add(this.Dh|0,this.Dl|0,f|0,h|0),{h:y,l:_}=vt.add(this.Eh|0,this.El|0,y|0,_|0),{h:A,l:O}=vt.add(this.Fh|0,this.Fl|0,A|0,O|0),{h:E,l:v}=vt.add(this.Gh|0,this.Gl|0,E|0,v|0),{h:L,l:K}=vt.add(this.Hh|0,this.Hl|0,L|0,K|0),this.set(n,s,i,o,a,c,f,h,y,_,A,O,E,v,L,K)}roundClean(){es.fill(0),ns.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const iv=ih(()=>new sv);function ov(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const Cd=ov();Cd.crypto||Cd.msCrypto;function av(r){switch(r){case"sha256":return ag.create();case"sha512":return iv.create()}$(!1,"invalid hashing algorithm name","algorithm",r)}const[pg,gg,mg]=[[],[],[]],cv=BigInt(0),ua=BigInt(1),uv=BigInt(2),lv=BigInt(7),fv=BigInt(256),hv=BigInt(113);for(let r=0,t=ua,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],pg.push(2*(5*n+e)),gg.push((r+1)*(r+2)/2%64);let s=cv;for(let i=0;i<7;i++)t=(t<<ua^(t>>lv)*hv)%fv,t&uv&&(s^=ua<<(ua<<BigInt(i))-ua);mg.push(s)}const[dv,pv]=ug(mg,!0),kd=(r,t,e)=>e>32?hg(r,t,e):lg(r,t,e),Ld=(r,t,e)=>e>32?dg(r,t,e):fg(r,t,e);function gv(r,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,f=e[c],h=e[c+1],y=kd(f,h,1)^e[a],_=Ld(f,h,1)^e[a+1];for(let A=0;A<50;A+=10)r[o+A]^=y,r[o+A+1]^=_}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=gg[o],c=kd(s,i,a),f=Ld(s,i,a),h=pg[o];s=r[h],i=r[h+1],r[h]=c,r[h+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}r[0]^=dv[n],r[1]^=pv[n]}e.fill(0)}class oh extends sh{constructor(t,e,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Jc(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=TS(this.state)}keccak(){gv(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){qo(this);const{blockLen:e,state:n}=this;t=Nu(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,(e&128)!==0&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){qo(this,!1),rh(t),this.finish();const e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Jc(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ng(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new oh(e,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const mv=(r,t,e)=>ih(()=>new oh(t,r,e)),yv=mv(1,136,256/8);let yg=!1;const wg=function(r){return yv(r)};let Ag=wg;function Ce(r){const t=Nt(r,"data");return dt(Ag(t))}Ce._=wg;Ce.lock=function(){yg=!0};Ce.register=function(r){if(yg)throw new TypeError("keccak256 is locked");Ag=r};Object.freeze(Ce);const bg=function(r){return av("sha256").update(r).digest()};let Eg=bg,_g=!1;function na(r){const t=Nt(r,"data");return dt(Eg(t))}na._=bg;na.lock=function(){_g=!0};na.register=function(r){if(_g)throw new Error("sha256 is locked");Eg=r};Object.freeze(na);Object.freeze(na);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rg=BigInt(0),Ou=BigInt(1),wv=BigInt(2),Tu=r=>r instanceof Uint8Array,Av=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Wo(r){if(!Tu(r))throw new Error("Uint8Array expected");let t="";for(let e=0;e<r.length;e++)t+=Av[r[e]];return t}function Sg(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function ah(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Qo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let n=0;n<e.length;n++){const s=n*2,i=r.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function di(r){return ah(Wo(r))}function ch(r){if(!Tu(r))throw new Error("Uint8Array expected");return ah(Wo(Uint8Array.from(r).reverse()))}function Jo(r,t){return Qo(r.toString(16).padStart(t*2,"0"))}function uh(r,t){return Jo(r,t).reverse()}function bv(r){return Qo(Sg(r))}function Hn(r,t,e){let n;if(typeof t=="string")try{n=Qo(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Tu(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function Sa(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!Tu(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}function Ev(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function _v(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Rv(r){let t;for(t=0;r>Rg;r>>=Ou,t+=1);return t}function Sv(r,t){return r>>BigInt(t)&Ou}const vv=(r,t,e)=>r|(e?Ou:Rg)<<BigInt(t),lh=r=>(wv<<BigInt(r-1))-Ou,Ll=r=>new Uint8Array(r),Pd=r=>Uint8Array.from(r);function vg(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=Ll(r),s=Ll(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...y)=>e(s,n,...y),c=(y=Ll())=>{s=a(Pd([0]),y),n=a(),y.length!==0&&(s=a(Pd([1]),y),n=a())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const _=[];for(;y<t;){n=a();const A=n.slice();_.push(A),y+=n.length}return Sa(..._)};return(y,_)=>{o(),c(y);let A;for(;!(A=_(f()));)c();return o(),A}}const xv={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function tc(r,t,e={}){const n=(s,i,o)=>{const a=xv[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const Iv=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Sv,bitLen:Rv,bitMask:lh,bitSet:vv,bytesToHex:Wo,bytesToNumberBE:di,bytesToNumberLE:ch,concatBytes:Sa,createHmacDrbg:vg,ensureBytes:Hn,equalBytes:Ev,hexToBytes:Qo,hexToNumber:ah,numberToBytesBE:Jo,numberToBytesLE:uh,numberToHexUnpadded:Sg,numberToVarBytesBE:bv,utf8ToBytes:_v,validateObject:tc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Me=BigInt(0),de=BigInt(1),Us=BigInt(2),Nv=BigInt(3),pf=BigInt(4),Md=BigInt(5),Ud=BigInt(8);BigInt(9);BigInt(16);function hn(r,t){const e=r%t;return e>=Me?e:t+e}function Ov(r,t,e){if(e<=Me||t<Me)throw new Error("Expected power/modulo > 0");if(e===de)return Me;let n=de;for(;t>Me;)t&de&&(n=n*r%e),r=r*r%e,t>>=de;return n}function xn(r,t,e){let n=r;for(;t-- >Me;)n*=n,n%=e;return n}function gf(r,t){if(r===Me||t<=Me)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=hn(r,t),n=t,s=Me,i=de;for(;e!==Me;){const a=n/e,c=n%e,f=s-i*a;n=e,e=c,s=i,i=f}if(n!==de)throw new Error("invert: does not exist");return hn(s,t)}function Tv(r){const t=(r-de)/Us;let e,n,s;for(e=r-de,n=0;e%Us===Me;e/=Us,n++);for(s=Us;s<r&&Ov(s,t,r)!==r-de;s++);if(n===1){const o=(r+de)/pf;return function(c,f){const h=c.pow(f,o);if(!c.eql(c.sqr(h),f))throw new Error("Cannot find square root");return h}}const i=(e+de)/Us;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,h=a.pow(a.mul(a.ONE,s),e),y=a.pow(c,i),_=a.pow(c,e);for(;!a.eql(_,a.ONE);){if(a.eql(_,a.ZERO))return a.ZERO;let A=1;for(let E=a.sqr(_);A<f&&!a.eql(E,a.ONE);A++)E=a.sqr(E);const O=a.pow(h,de<<BigInt(f-A-1));h=a.sqr(O),y=a.mul(y,O),_=a.mul(_,h),f=A}return y}}function Bv(r){if(r%pf===Nv){const t=(r+de)/pf;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Ud===Md){const t=(r-Md)/Ud;return function(n,s){const i=n.mul(s,Us),o=n.pow(i,t),a=n.mul(s,o),c=n.mul(n.mul(a,Us),o),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),s))throw new Error("Cannot find square root");return f}}return Tv(r)}const Cv=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function kv(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Cv.reduce((n,s)=>(n[s]="function",n),t);return tc(r,e)}function Lv(r,t,e){if(e<Me)throw new Error("Expected power > 0");if(e===Me)return r.ONE;if(e===de)return t;let n=r.ONE,s=t;for(;e>Me;)e&de&&(n=r.mul(n,s)),s=r.sqr(s),e>>=de;return n}function Pv(r,t){const e=new Array(t.length),n=t.reduce((i,o,a)=>r.is0(o)?i:(e[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,a)=>r.is0(o)?i:(e[a]=r.mul(i,e[a]),r.mul(i,o)),s),e}function xg(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Mv(r,t,e=!1,n={}){if(r<=Me)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=xg(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Bv(r),a=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:lh(s),ZERO:Me,ONE:de,create:c=>hn(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Me<=c&&c<r},is0:c=>c===Me,isOdd:c=>(c&de)===de,neg:c=>hn(-c,r),eql:(c,f)=>c===f,sqr:c=>hn(c*c,r),add:(c,f)=>hn(c+f,r),sub:(c,f)=>hn(c-f,r),mul:(c,f)=>hn(c*f,r),pow:(c,f)=>Lv(a,c,f),div:(c,f)=>hn(c*gf(f,r),r),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>gf(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>Pv(a,c),cmov:(c,f,h)=>h?f:c,toBytes:c=>e?uh(c,i):Jo(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return e?ch(c):di(c)}});return Object.freeze(a)}function Ig(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Ng(r){const t=Ig(r);return t+Math.ceil(t/2)}function Uv(r,t,e=!1){const n=r.length,s=Ig(t),i=Ng(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=e?di(r):ch(r),a=hn(o,t-de)+de;return e?uh(a,s):Jo(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dv=BigInt(0),Pl=BigInt(1);function Fv(r,t){const e=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=r.ZERO,a=s;for(;i>Dv;)i&Pl&&(o=o.add(a)),a=a.double(),i>>=Pl;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let f=s,h=f;for(let y=0;y<o;y++){h=f,c.push(h);for(let _=1;_<a;_++)h=h.add(f),c.push(h);f=h.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let f=r.ZERO,h=r.BASE;const y=BigInt(2**s-1),_=2**s,A=BigInt(s);for(let O=0;O<a;O++){const E=O*c;let v=Number(o&y);o>>=A,v>c&&(v-=_,o+=Pl);const L=E,K=E+Math.abs(v)-1,z=O%2!==0,rt=v<0;v===0?h=h.add(e(z,i[L])):f=f.add(e(rt,i[K]))}return{p:f,f:h}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let f=i.get(s);return f||(f=this.precomputeWindow(s,c),c!==1&&i.set(s,a(f))),this.wNAF(c,f,o)}}}function Og(r){return kv(r.Fp),tc(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xg(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gv(r){const t=Og(r);tc(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Hv,hexToBytes:zv}=Iv,Ks={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){const{Err:t}=Ks;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Hv(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=Ks,e=typeof r=="string"?zv(r):r;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Ks._parseInt(e.subarray(2)),{d:o,l:a}=Ks._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,e=f=>{const h=f.toString(16);return h.length&1?`0${h}`:h},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,o=s.length/2,a=e(i),c=e(o);return`30${e(o+i+4)}02${c}${s}02${a}${n}`}},Gr=BigInt(0),kn=BigInt(1);BigInt(2);const Dd=BigInt(3);BigInt(4);function Vv(r){const t=Gv(r),{Fp:e}=t,n=t.toBytes||((O,E,v)=>{const L=E.toAffine();return Sa(Uint8Array.from([4]),e.toBytes(L.x),e.toBytes(L.y))}),s=t.fromBytes||(O=>{const E=O.subarray(1),v=e.fromBytes(E.subarray(0,e.BYTES)),L=e.fromBytes(E.subarray(e.BYTES,2*e.BYTES));return{x:v,y:L}});function i(O){const{a:E,b:v}=t,L=e.sqr(O),K=e.mul(L,O);return e.add(e.add(K,e.mul(O,E)),v)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(O){return typeof O=="bigint"&&Gr<O&&O<t.n}function a(O){if(!o(O))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(O){const{allowedPrivateKeyLengths:E,nByteLength:v,wrapPrivateKey:L,n:K}=t;if(E&&typeof O!="bigint"){if(O instanceof Uint8Array&&(O=Wo(O)),typeof O!="string"||!E.includes(O.length))throw new Error("Invalid key");O=O.padStart(v*2,"0")}let z;try{z=typeof O=="bigint"?O:di(Hn("private key",O,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof O}`)}return L&&(z=hn(z,K)),a(z),z}const f=new Map;function h(O){if(!(O instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(E,v,L){if(this.px=E,this.py=v,this.pz=L,E==null||!e.isValid(E))throw new Error("x required");if(v==null||!e.isValid(v))throw new Error("y required");if(L==null||!e.isValid(L))throw new Error("z required")}static fromAffine(E){const{x:v,y:L}=E||{};if(!E||!e.isValid(v)||!e.isValid(L))throw new Error("invalid affine point");if(E instanceof y)throw new Error("projective point not allowed");const K=z=>e.eql(z,e.ZERO);return K(v)&&K(L)?y.ZERO:new y(v,L,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const v=e.invertBatch(E.map(L=>L.pz));return E.map((L,K)=>L.toAffine(v[K])).map(y.fromAffine)}static fromHex(E){const v=y.fromAffine(s(Hn("pointHex",E)));return v.assertValidity(),v}static fromPrivateKey(E){return y.BASE.multiply(c(E))}_setWindowSize(E){this._WINDOW_SIZE=E,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:E,y:v}=this.toAffine();if(!e.isValid(E)||!e.isValid(v))throw new Error("bad point: x or y not FE");const L=e.sqr(v),K=i(E);if(!e.eql(L,K))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:E}=this.toAffine();if(e.isOdd)return!e.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);const{px:v,py:L,pz:K}=this,{px:z,py:rt,pz:V}=E,Y=e.eql(e.mul(v,V),e.mul(z,K)),st=e.eql(e.mul(L,V),e.mul(rt,K));return Y&&st}negate(){return new y(this.px,e.neg(this.py),this.pz)}double(){const{a:E,b:v}=t,L=e.mul(v,Dd),{px:K,py:z,pz:rt}=this;let V=e.ZERO,Y=e.ZERO,st=e.ZERO,et=e.mul(K,K),U=e.mul(z,z),P=e.mul(rt,rt),M=e.mul(K,z);return M=e.add(M,M),st=e.mul(K,rt),st=e.add(st,st),V=e.mul(E,st),Y=e.mul(L,P),Y=e.add(V,Y),V=e.sub(U,Y),Y=e.add(U,Y),Y=e.mul(V,Y),V=e.mul(M,V),st=e.mul(L,st),P=e.mul(E,P),M=e.sub(et,P),M=e.mul(E,M),M=e.add(M,st),st=e.add(et,et),et=e.add(st,et),et=e.add(et,P),et=e.mul(et,M),Y=e.add(Y,et),P=e.mul(z,rt),P=e.add(P,P),et=e.mul(P,M),V=e.sub(V,et),st=e.mul(P,U),st=e.add(st,st),st=e.add(st,st),new y(V,Y,st)}add(E){h(E);const{px:v,py:L,pz:K}=this,{px:z,py:rt,pz:V}=E;let Y=e.ZERO,st=e.ZERO,et=e.ZERO;const U=t.a,P=e.mul(t.b,Dd);let M=e.mul(v,z),H=e.mul(L,rt),R=e.mul(K,V),u=e.add(v,L),p=e.add(z,rt);u=e.mul(u,p),p=e.add(M,H),u=e.sub(u,p),p=e.add(v,K);let w=e.add(z,V);return p=e.mul(p,w),w=e.add(M,R),p=e.sub(p,w),w=e.add(L,K),Y=e.add(rt,V),w=e.mul(w,Y),Y=e.add(H,R),w=e.sub(w,Y),et=e.mul(U,p),Y=e.mul(P,R),et=e.add(Y,et),Y=e.sub(H,et),et=e.add(H,et),st=e.mul(Y,et),H=e.add(M,M),H=e.add(H,M),R=e.mul(U,R),p=e.mul(P,p),H=e.add(H,R),R=e.sub(M,R),R=e.mul(U,R),p=e.add(p,R),M=e.mul(H,p),st=e.add(st,M),M=e.mul(w,p),Y=e.mul(u,Y),Y=e.sub(Y,M),M=e.mul(u,H),et=e.mul(w,et),et=e.add(et,M),new y(Y,st,et)}subtract(E){return this.add(E.negate())}is0(){return this.equals(y.ZERO)}wNAF(E){return A.wNAFCached(this,f,E,v=>{const L=e.invertBatch(v.map(K=>K.pz));return v.map((K,z)=>K.toAffine(L[z])).map(y.fromAffine)})}multiplyUnsafe(E){const v=y.ZERO;if(E===Gr)return v;if(a(E),E===kn)return this;const{endo:L}=t;if(!L)return A.unsafeLadder(this,E);let{k1neg:K,k1:z,k2neg:rt,k2:V}=L.splitScalar(E),Y=v,st=v,et=this;for(;z>Gr||V>Gr;)z&kn&&(Y=Y.add(et)),V&kn&&(st=st.add(et)),et=et.double(),z>>=kn,V>>=kn;return K&&(Y=Y.negate()),rt&&(st=st.negate()),st=new y(e.mul(st.px,L.beta),st.py,st.pz),Y.add(st)}multiply(E){a(E);let v=E,L,K;const{endo:z}=t;if(z){const{k1neg:rt,k1:V,k2neg:Y,k2:st}=z.splitScalar(v);let{p:et,f:U}=this.wNAF(V),{p:P,f:M}=this.wNAF(st);et=A.constTimeNegate(rt,et),P=A.constTimeNegate(Y,P),P=new y(e.mul(P.px,z.beta),P.py,P.pz),L=et.add(P),K=U.add(M)}else{const{p:rt,f:V}=this.wNAF(v);L=rt,K=V}return y.normalizeZ([L,K])[0]}multiplyAndAddUnsafe(E,v,L){const K=y.BASE,z=(V,Y)=>Y===Gr||Y===kn||!V.equals(K)?V.multiplyUnsafe(Y):V.multiply(Y),rt=z(this,v).add(z(E,L));return rt.is0()?void 0:rt}toAffine(E){const{px:v,py:L,pz:K}=this,z=this.is0();E==null&&(E=z?e.ONE:e.inv(K));const rt=e.mul(v,E),V=e.mul(L,E),Y=e.mul(K,E);if(z)return{x:e.ZERO,y:e.ZERO};if(!e.eql(Y,e.ONE))throw new Error("invZ was invalid");return{x:rt,y:V}}isTorsionFree(){const{h:E,isTorsionFree:v}=t;if(E===kn)return!0;if(v)return v(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:v}=t;return E===kn?this:v?v(y,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return this.assertValidity(),n(y,this,E)}toHex(E=!0){return Wo(this.toRawBytes(E))}}y.BASE=new y(t.Gx,t.Gy,e.ONE),y.ZERO=new y(e.ZERO,e.ONE,e.ZERO);const _=t.nBitLength,A=Fv(y,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Kv(r){const t=Og(r);return tc(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function $v(r){const t=Kv(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(p){return Gr<p&&p<e.ORDER}function a(p){return hn(p,n)}function c(p){return gf(p,n)}const{ProjectivePoint:f,normPrivateKeyToScalar:h,weierstrassEquation:y,isWithinCurveOrder:_}=Vv({...t,toBytes(p,w,I){const T=w.toAffine(),D=e.toBytes(T.x),G=Sa;return I?G(Uint8Array.from([w.hasEvenY()?2:3]),D):G(Uint8Array.from([4]),D,e.toBytes(T.y))},fromBytes(p){const w=p.length,I=p[0],T=p.subarray(1);if(w===s&&(I===2||I===3)){const D=di(T);if(!o(D))throw new Error("Point is not on curve");const G=y(D);let N=e.sqrt(G);const l=(N&kn)===kn;return(I&1)===1!==l&&(N=e.neg(N)),{x:D,y:N}}else if(w===i&&I===4){const D=e.fromBytes(T.subarray(0,e.BYTES)),G=e.fromBytes(T.subarray(e.BYTES,2*e.BYTES));return{x:D,y:G}}else throw new Error(`Point of length ${w} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),A=p=>Wo(Jo(p,t.nByteLength));function O(p){const w=n>>kn;return p>w}function E(p){return O(p)?a(-p):p}const v=(p,w,I)=>di(p.slice(w,I));class L{constructor(w,I,T){this.r=w,this.s=I,this.recovery=T,this.assertValidity()}static fromCompact(w){const I=t.nByteLength;return w=Hn("compactSignature",w,I*2),new L(v(w,0,I),v(w,I,2*I))}static fromDER(w){const{r:I,s:T}=Ks.toSig(Hn("DER",w));return new L(I,T)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new L(this.r,this.s,w)}recoverPublicKey(w){const{r:I,s:T,recovery:D}=this,G=st(Hn("msgHash",w));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const N=D===2||D===3?I+t.n:I;if(N>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=(D&1)===0?"02":"03",d=f.fromHex(l+A(N)),x=c(N),C=a(-G*x),Q=a(T*x),nt=f.BASE.multiplyAndAddUnsafe(d,C,Q);if(!nt)throw new Error("point at infinify");return nt.assertValidity(),nt}hasHighS(){return O(this.s)}normalizeS(){return this.hasHighS()?new L(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Qo(this.toDERHex())}toDERHex(){return Ks.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Qo(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}const K={isValidPrivateKey(p){try{return h(p),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const p=Ng(t.n);return Uv(t.randomBytes(p),t.n)},precompute(p=8,w=f.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}};function z(p,w=!0){return f.fromPrivateKey(p).toRawBytes(w)}function rt(p){const w=p instanceof Uint8Array,I=typeof p=="string",T=(w||I)&&p.length;return w?T===s||T===i:I?T===2*s||T===2*i:p instanceof f}function V(p,w,I=!0){if(rt(p))throw new Error("first arg must be private key");if(!rt(w))throw new Error("second arg must be public key");return f.fromHex(w).multiply(h(p)).toRawBytes(I)}const Y=t.bits2int||function(p){const w=di(p),I=p.length*8-t.nBitLength;return I>0?w>>BigInt(I):w},st=t.bits2int_modN||function(p){return a(Y(p))},et=lh(t.nBitLength);function U(p){if(typeof p!="bigint")throw new Error("bigint expected");if(!(Gr<=p&&p<et))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Jo(p,t.nByteLength)}function P(p,w,I=M){if(["recovered","canonical"].some(mt=>mt in I))throw new Error("sign() legacy options not supported");const{hash:T,randomBytes:D}=t;let{lowS:G,prehash:N,extraEntropy:l}=I;G==null&&(G=!0),p=Hn("msgHash",p),N&&(p=Hn("prehashed msgHash",T(p)));const d=st(p),x=h(w),C=[U(x),U(d)];if(l!=null){const mt=l===!0?D(e.BYTES):l;C.push(Hn("extraEntropy",mt))}const Q=Sa(...C),nt=d;function ft(mt){const $t=Y(mt);if(!_($t))return;const Ct=c($t),Ut=f.BASE.multiply($t).toAffine(),ce=a(Ut.x);if(ce===Gr)return;const Pt=a(Ct*a(nt+ce*x));if(Pt===Gr)return;let qt=(Ut.x===ce?0:2)|Number(Ut.y&kn),Bs=Pt;return G&&O(Pt)&&(Bs=E(Pt),qt^=1),new L(ce,Bs,qt)}return{seed:Q,k2sig:ft}}const M={lowS:t.lowS,prehash:!1},H={lowS:t.lowS,prehash:!1};function R(p,w,I=M){const{seed:T,k2sig:D}=P(p,w,I),G=t;return vg(G.hash.outputLen,G.nByteLength,G.hmac)(T,D)}f.BASE._setWindowSize(8);function u(p,w,I,T=H){var Ut;const D=p;if(w=Hn("msgHash",w),I=Hn("publicKey",I),"strict"in T)throw new Error("options.strict was renamed to lowS");const{lowS:G,prehash:N}=T;let l,d;try{if(typeof D=="string"||D instanceof Uint8Array)try{l=L.fromDER(D)}catch(ce){if(!(ce instanceof Ks.Err))throw ce;l=L.fromCompact(D)}else if(typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint"){const{r:ce,s:Pt}=D;l=new L(ce,Pt)}else throw new Error("PARSE");d=f.fromHex(I)}catch(ce){if(ce.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(G&&l.hasHighS())return!1;N&&(w=t.hash(w));const{r:x,s:C}=l,Q=st(w),nt=c(C),ft=a(Q*nt),mt=a(x*nt),$t=(Ut=f.BASE.multiplyAndAddUnsafe(d,ft,mt))==null?void 0:Ut.toAffine();return $t?a($t.x)===x:!1}return{CURVE:t,getPublicKey:z,getSharedSecret:V,sign:R,verify:u,ProjectivePoint:f,Signature:L,utils:K}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qv(r){return{hash:r,hmac:(t,...e)=>ig(r,t,kS(...e)),randomBytes:LS}}function Wv(r,t){const e=n=>$v({...r,...qv(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tg=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Fd=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Qv=BigInt(1),mf=BigInt(2),Gd=(r,t)=>(r+t/mf)/t;function Jv(r){const t=Tg,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),f=r*r*r%t,h=f*f*r%t,y=xn(h,e,t)*h%t,_=xn(y,e,t)*h%t,A=xn(_,mf,t)*f%t,O=xn(A,s,t)*A%t,E=xn(O,i,t)*O%t,v=xn(E,a,t)*E%t,L=xn(v,c,t)*v%t,K=xn(L,a,t)*E%t,z=xn(K,e,t)*h%t,rt=xn(z,o,t)*O%t,V=xn(rt,n,t)*f%t,Y=xn(V,mf,t);if(!yf.eql(yf.sqr(Y),r))throw new Error("Cannot find square root");return Y}const yf=Mv(Tg,void 0,void 0,{sqrt:Jv}),rs=Wv({a:BigInt(0),b:BigInt(7),Fp:yf,n:Fd,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Fd,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Qv*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=Gd(i*r,t),c=Gd(-n*r,t);let f=hn(r-a*e-c*s,t),h=hn(-a*n-c*i,t);const y=f>o,_=h>o;if(y&&(f=t-f),_&&(h=t-h),f>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:y,k1:f,k2neg:_,k2:h}}}},ag);BigInt(0);rs.ProjectivePoint;const va="0x0000000000000000000000000000000000000000",Hd="0x0000000000000000000000000000000000000000000000000000000000000000",zd=BigInt(0),Vd=BigInt(1),Kd=BigInt(2),$d=BigInt(27),qd=BigInt(28),wc=BigInt(35),Bi={};function Wd(r){return $r(ke(r),32)}var oo,ao,co,ni;const Gn=class Gn{constructor(t,e,n,s){X(this,oo);X(this,ao);X(this,co);X(this,ni);Ya(t,Bi,"Signature"),k(this,oo,e),k(this,ao,n),k(this,co,s),k(this,ni,null)}get r(){return b(this,oo)}set r(t){$(Qi(t)===32,"invalid r","value",t),k(this,oo,dt(t))}get s(){return b(this,ao)}set s(t){$(Qi(t)===32,"invalid s","value",t);const e=dt(t);$(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),k(this,ao,e)}get v(){return b(this,co)}set v(t){const e=Ot(t,"value");$(e===27||e===28,"invalid v","v",t),k(this,co,e)}get networkV(){return b(this,ni)}get legacyChainId(){const t=this.networkV;return t==null?null:Gn.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=Nt(this.s);return this.yParity&&(t[0]|=128),dt(t)}get compactSerialized(){return ae([this.r,this.yParityAndS])}get serialized(){return ae([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Gn(Bi,this.r,this.s,this.v);return this.networkV&&k(t,ni,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=gt(t,"v");return e==$d||e==qd?zd:($(e>=wc,"invalid EIP-155 v","v",t),(e-wc)/Kd)}static getChainIdV(t,e){return gt(t)*Kd+BigInt(35+e-27)}static getNormalizedV(t){const e=gt(t);return e===zd||e===$d?27:e===Vd||e===qd?28:($(e>=wc,"invalid v","v",t),e&Vd?27:28)}static from(t){function e(f,h){$(f,h,"signature",t)}if(t==null)return new Gn(Bi,Hd,Hd,27);if(typeof t=="string"){const f=Nt(t,"signature");if(f.length===64){const h=dt(f.slice(0,32)),y=f.slice(32,64),_=y[0]&128?28:27;return y[0]&=127,new Gn(Bi,h,dt(y),_)}if(f.length===65){const h=dt(f.slice(0,32)),y=f.slice(32,64);e((y[0]&128)===0,"non-canonical s");const _=Gn.getNormalizedV(f[64]);return new Gn(Bi,h,dt(y),_)}e(!1,"invalid raw signature length")}if(t instanceof Gn)return t.clone();const n=t.r;e(n!=null,"missing r");const s=Wd(n),i=function(f,h){if(f!=null)return Wd(f);if(h!=null){e(Kt(h,32),"invalid yParityAndS");const y=Nt(h);return y[0]&=127,dt(y)}e(!1,"missing s")}(t.s,t.yParityAndS);e((Nt(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(f,h,y){if(f!=null){const _=gt(f);return{networkV:_>=wc?_:void 0,v:Gn.getNormalizedV(_)}}if(h!=null)return e(Kt(h,32),"invalid yParityAndS"),{v:Nt(h)[0]&128?28:27};if(y!=null){switch(Ot(y,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new Gn(Bi,s,i,a);return o&&k(c,ni,o),e(t.yParity==null||Ot(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};oo=new WeakMap,ao=new WeakMap,co=new WeakMap,ni=new WeakMap;let gn=Gn;var Tr;const Ds=class Ds{constructor(t){X(this,Tr);$(Qi(t)===32,"invalid private key","privateKey","[REDACTED]"),k(this,Tr,dt(t))}get privateKey(){return b(this,Tr)}get publicKey(){return Ds.computePublicKey(b(this,Tr))}get compressedPublicKey(){return Ds.computePublicKey(b(this,Tr),!0)}sign(t){$(Qi(t)===32,"invalid digest length","digest",t);const e=rs.sign(sn(t),sn(b(this,Tr)),{lowS:!0});return gn.from({r:xs(e.r,32),s:xs(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=Ds.computePublicKey(t);return dt(rs.getSharedSecret(sn(b(this,Tr)),Nt(e),!1))}static computePublicKey(t,e){let n=Nt(t,"key");if(n.length===32){const i=rs.getPublicKey(n,!!e);return dt(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=rs.ProjectivePoint.fromHex(n);return dt(s.toRawBytes(e))}static recoverPublicKey(t,e){$(Qi(t)===32,"invalid digest length","digest",t);const n=gn.from(e);let s=rs.Signature.fromCompact(sn(ae([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(sn(t));return $(i!=null,"invalid signature for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,n){const s=rs.ProjectivePoint.fromHex(Ds.computePublicKey(t).substring(2)),i=rs.ProjectivePoint.fromHex(Ds.computePublicKey(e).substring(2));return"0x"+s.add(i).toHex(!!n)}};Tr=new WeakMap;let xa=Ds;const jv=BigInt(0),Zv=BigInt(36);function Qd(r){r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const n=Nt(Ce(e));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(n[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const fh={};for(let r=0;r<10;r++)fh[String(r)]=String(r);for(let r=0;r<26;r++)fh[String.fromCharCode(65+r)]=String(10+r);const Jd=15;function Yv(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(n=>fh[n]).join("");for(;t.length>=Jd;){let n=t.substring(0,Jd);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const Xv=function(){const r={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];r[e]=BigInt(t)}return r}();function tx(r){r=r.toLowerCase();let t=jv;for(let e=0;e<r.length;e++)t=t*Zv+Xv[r[e]];return t}function Ft(r){if($(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const t=Qd(r);return $(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===r,"bad address checksum","address",r),t}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){$(r.substring(2,4)===Yv(r),"bad icap checksum","address",r);let t=tx(r.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Qd("0x"+t)}$(!1,"invalid address","address",r)}function ex(r){const t=Ft(r.from);let n=gt(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,Ft(oe(Ce(Ns([t,n])),12))}function Bg(r){return r&&typeof r.getAddress=="function"}async function Ml(r,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(it(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),$(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),Ft(e)}function an(r,t){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?Ft(r):(it(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Ml(r,t.resolveName(r)));if(Bg(r))return Ml(r,r.getAddress());if(r&&typeof r.then=="function")return Ml(r,r);$(!1,"unsupported addressable value","target",r)}const Rr={};function pt(r,t){let e=!1;return t<0&&(e=!0,t*=-1),new Xe(Rr,`${e?"":"u"}int${t}`,r,{signed:e,width:t})}function Mt(r,t){return new Xe(Rr,`bytes${t||""}`,r,{size:t})}const jd=Symbol.for("_ethers_typed");var ri;const Sr=class Sr{constructor(t,e,n,s){W(this,"type");W(this,"value");X(this,ri);W(this,"_typedSymbol");s==null&&(s=null),Ya(Rr,t,"Typed"),At(this,{_typedSymbol:jd,type:e,value:n}),k(this,ri,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return b(this,ri)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return b(this,ri)===!0?-1:b(this,ri)===!1?this.value.length:null}static from(t,e){return new Sr(Rr,t,e)}static uint8(t){return pt(t,8)}static uint16(t){return pt(t,16)}static uint24(t){return pt(t,24)}static uint32(t){return pt(t,32)}static uint40(t){return pt(t,40)}static uint48(t){return pt(t,48)}static uint56(t){return pt(t,56)}static uint64(t){return pt(t,64)}static uint72(t){return pt(t,72)}static uint80(t){return pt(t,80)}static uint88(t){return pt(t,88)}static uint96(t){return pt(t,96)}static uint104(t){return pt(t,104)}static uint112(t){return pt(t,112)}static uint120(t){return pt(t,120)}static uint128(t){return pt(t,128)}static uint136(t){return pt(t,136)}static uint144(t){return pt(t,144)}static uint152(t){return pt(t,152)}static uint160(t){return pt(t,160)}static uint168(t){return pt(t,168)}static uint176(t){return pt(t,176)}static uint184(t){return pt(t,184)}static uint192(t){return pt(t,192)}static uint200(t){return pt(t,200)}static uint208(t){return pt(t,208)}static uint216(t){return pt(t,216)}static uint224(t){return pt(t,224)}static uint232(t){return pt(t,232)}static uint240(t){return pt(t,240)}static uint248(t){return pt(t,248)}static uint256(t){return pt(t,256)}static uint(t){return pt(t,256)}static int8(t){return pt(t,-8)}static int16(t){return pt(t,-16)}static int24(t){return pt(t,-24)}static int32(t){return pt(t,-32)}static int40(t){return pt(t,-40)}static int48(t){return pt(t,-48)}static int56(t){return pt(t,-56)}static int64(t){return pt(t,-64)}static int72(t){return pt(t,-72)}static int80(t){return pt(t,-80)}static int88(t){return pt(t,-88)}static int96(t){return pt(t,-96)}static int104(t){return pt(t,-104)}static int112(t){return pt(t,-112)}static int120(t){return pt(t,-120)}static int128(t){return pt(t,-128)}static int136(t){return pt(t,-136)}static int144(t){return pt(t,-144)}static int152(t){return pt(t,-152)}static int160(t){return pt(t,-160)}static int168(t){return pt(t,-168)}static int176(t){return pt(t,-176)}static int184(t){return pt(t,-184)}static int192(t){return pt(t,-192)}static int200(t){return pt(t,-200)}static int208(t){return pt(t,-208)}static int216(t){return pt(t,-216)}static int224(t){return pt(t,-224)}static int232(t){return pt(t,-232)}static int240(t){return pt(t,-240)}static int248(t){return pt(t,-248)}static int256(t){return pt(t,-256)}static int(t){return pt(t,-256)}static bytes1(t){return Mt(t,1)}static bytes2(t){return Mt(t,2)}static bytes3(t){return Mt(t,3)}static bytes4(t){return Mt(t,4)}static bytes5(t){return Mt(t,5)}static bytes6(t){return Mt(t,6)}static bytes7(t){return Mt(t,7)}static bytes8(t){return Mt(t,8)}static bytes9(t){return Mt(t,9)}static bytes10(t){return Mt(t,10)}static bytes11(t){return Mt(t,11)}static bytes12(t){return Mt(t,12)}static bytes13(t){return Mt(t,13)}static bytes14(t){return Mt(t,14)}static bytes15(t){return Mt(t,15)}static bytes16(t){return Mt(t,16)}static bytes17(t){return Mt(t,17)}static bytes18(t){return Mt(t,18)}static bytes19(t){return Mt(t,19)}static bytes20(t){return Mt(t,20)}static bytes21(t){return Mt(t,21)}static bytes22(t){return Mt(t,22)}static bytes23(t){return Mt(t,23)}static bytes24(t){return Mt(t,24)}static bytes25(t){return Mt(t,25)}static bytes26(t){return Mt(t,26)}static bytes27(t){return Mt(t,27)}static bytes28(t){return Mt(t,28)}static bytes29(t){return Mt(t,29)}static bytes30(t){return Mt(t,30)}static bytes31(t){return Mt(t,31)}static bytes32(t){return Mt(t,32)}static address(t){return new Sr(Rr,"address",t)}static bool(t){return new Sr(Rr,"bool",!!t)}static bytes(t){return new Sr(Rr,"bytes",t)}static string(t){return new Sr(Rr,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new Sr(Rr,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===jd}static dereference(t,e){if(Sr.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};ri=new WeakMap;let Xe=Sr;class nx extends Wr{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=Xe.dereference(e,"string");try{n=Ft(n)}catch(s){return this._throwError(s.message,e)}return t.writeValue(n)}decode(t){return Ft(xs(t.readValue(),20))}}class rx extends Wr{constructor(e){super(e.name,e.type,"_",e.dynamic);W(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function Cg(r,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(f=>{const h=f.localName;return it(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:e}),it(!c[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:e}),c[h]=!0,e[h]})}else $(!1,"invalid tuple value","tuple",e);$(t.length===n.length,"types/value length mismatch","tuple",e);let s=new lf,i=new lf,o=[];t.forEach((c,f)=>{let h=n[f];if(c.dynamic){let y=i.length;c.encode(i,h);let _=s.writeUpdatableValue();o.push(A=>{_(A+y)})}else c.encode(s,h)}),o.forEach(c=>{c(s.length)});let a=r.appendWriter(s);return a+=r.appendWriter(i),a}function kg(r,t){let e=[],n=[],s=r.subReader(0);return t.forEach(i=>{let o=null;if(i.dynamic){let a=r.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(f){if(ze(f,"BUFFER_OVERRUN"))throw f;o=f,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(r)}catch(a){if(ze(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");e.push(o),n.push(i.localName||null)}),$o.fromItems(e,n)}class sx extends Wr{constructor(e,n,s){const i=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",i,s,o);W(this,"coder");W(this,"length");At(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(e);return n}encode(e,n){const s=Xe.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,e.writeValue(s.length)),zp(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Cg(e,o,s)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),it(n*on<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*on,length:e.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new rx(this.coder));return kg(e,s)}}class ix extends Wr{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=Xe.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class Lg extends Wr{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=sn(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class ox extends Lg{constructor(t){super("bytes",t)}decode(t){return dt(super.decode(t))}}class ax extends Wr{constructor(e,n){let s="bytes"+String(e);super(s,s,n,!1);W(this,"size");At(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let s=sn(Xe.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(s)}decode(e){return dt(e.readBytes(this.size))}}const cx=new Uint8Array([]);class ux extends Wr{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(cx)}decode(t){return t.readBytes(0),null}}const lx=BigInt(0),fx=BigInt(1),hx=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class dx extends Wr{constructor(e,n,s){const i=(n?"int":"uint")+e*8;super(i,i,s,!1);W(this,"size");W(this,"signed");At(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let s=gt(Xe.dereference(n,this.type)),i=Vs(hx,on*8);if(this.signed){let o=Vs(i,this.size*8-1);(s>o||s<-(o+fx))&&this._throwError("value out-of-bounds",n),s=$p(s,8*on)}else(s<lx||s>Vs(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(s)}decode(e){let n=Vs(e.readValue(),this.size*8);return this.signed&&(n=Wc(n,this.size*8)),n}}class px extends Lg{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Vr(Xe.dereference(e,"string")))}decode(t){return Qc(super.decode(t))}}class Ac extends Wr{constructor(e,n){let s=!1;const i=[];e.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,s);W(this,"coders");At(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,n){const s=Xe.dereference(n,"tuple");return Cg(e,this.coders,s)}decode(e){return kg(e,this.coders)}}function Ul(r,t){return{address:Ft(r),storageKeys:t.map((e,n)=>($(Kt(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function Si(r){if(Array.isArray(r))return r.map((e,n)=>Array.isArray(e)?($(e.length===2,"invalid slot set",`value[${n}]`,e),Ul(e[0],e[1])):($(e!=null&&typeof e=="object","invalid address-slot set","value",r),Ul(e.address,e.storageKeys)));$(r!=null&&typeof r=="object","invalid access list","value",r);const t=Object.keys(r).map(e=>{const n=r[e].reduce((s,i)=>(s[i]=!0,s),{});return Ul(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function Pg(r){return{address:Ft(r.address),nonce:gt(r.nonce!=null?r.nonce:0),chainId:gt(r.chainId!=null?r.chainId:0),signature:gn.from(r.signature)}}function gx(r){let t;return typeof r=="string"?t=xa.computePublicKey(r,!1):t=r.publicKey,Ft(Ce("0x"+t.substring(4)).substring(26))}function mx(r,t){return gx(xa.recoverPublicKey(r,t))}const Pe=BigInt(0),yx=BigInt(2),wx=BigInt(27),Ax=BigInt(28),bx=BigInt(35),Ex=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Dl=4096*32;function _x(r){return{blobToKzgCommitment:n=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return Nt(r.blobToKzgCommitment(dt(n)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return Nt(r.blobToKzgCommitment(n));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return Nt(r.blobToKZGCommitment(dt(n)));$(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(n,s)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return Nt(r.computeBlobProof(dt(n),dt(s)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(n,s);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return Nt(r.computeBlobKZGProof(dt(n),dt(s)));$(!1,"unsupported KZG library","kzg",r)}}}function Zd(r,t){let e=r.toString(16);for(;e.length<2;)e="0"+e;return e+=na(t).substring(4),"0x"+e}function ra(r){return r==="0x"?null:Ft(r)}function Bu(r,t){try{return Si(r)}catch(e){$(!1,e.message,t,r)}}function Rx(r,t){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const e=[];for(let n=0;n<r.length;n++){const s=r[n];if(!Array.isArray(s))throw new Error(`authorization[${n}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!s[1])throw new Error(`authorization[${n}]: null address`);e.push({address:ra(s[1]),nonce:zt(s[2],"nonce"),chainId:zt(s[0],"chainId"),signature:gn.from({yParity:vi(s[3],"yParity"),r:$r(s[4],32),s:$r(s[5],32)})})}return e}catch(e){$(!1,e.message,t,r)}}function vi(r,t){return r==="0x"?0:Ot(r,t)}function zt(r,t){if(r==="0x")return Pe;const e=gt(r,t);return $(e<=Ex,"value exceeds uint size",t,e),e}function Lt(r,t){const e=gt(r,"value"),n=ke(e);return $(n.length<=32,"value too large",`tx.${t}`,e),n}function Cu(r){return Si(r).map(t=>[t.address,t.storageKeys])}function Sx(r){return r.map(t=>[Lt(t.chainId,"chainId"),t.address,Lt(t.nonce,"nonce"),Lt(t.signature.yParity,"yParity"),ke(t.signature.r),ke(t.signature.s)])}function vx(r,t){$(Array.isArray(r),`invalid ${t}`,"value",r);for(let e=0;e<r.length;e++)$(Kt(r[e],32),"invalid ${ param } hash",`value[${e}]`,r[e]);return r}function xx(r){const t=Xa(r);$(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",r);const e={type:0,nonce:vi(t[0],"nonce"),gasPrice:zt(t[1],"gasPrice"),gasLimit:zt(t[2],"gasLimit"),to:ra(t[3]),value:zt(t[4],"value"),data:dt(t[5]),chainId:Pe};if(t.length===6)return e;const n=zt(t[6],"v"),s=zt(t[7],"r"),i=zt(t[8],"s");if(s===Pe&&i===Pe)e.chainId=n;else{let o=(n-bx)/yx;o<Pe&&(o=Pe),e.chainId=o,$(o!==Pe||n===wx||n===Ax,"non-canonical legacy v","v",t[6]),e.signature=gn.from({r:$r(t[7],32),s:$r(t[8],32),v:n})}return e}function Ix(r,t){const e=[Lt(r.nonce,"nonce"),Lt(r.gasPrice||0,"gasPrice"),Lt(r.gasLimit,"gasLimit"),r.to||"0x",Lt(r.value,"value"),r.data];let n=Pe;if(r.chainId!=Pe)n=gt(r.chainId,"tx.chainId"),$(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(r.signature){const i=r.signature.legacyChainId;i!=null&&(n=i)}if(!t)return n!==Pe&&(e.push(ke(n)),e.push("0x"),e.push("0x")),Ns(e);let s=BigInt(27+t.yParity);return n!==Pe?s=gn.getChainIdV(n,t.v):BigInt(t.v)!==s&&$(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(ke(s)),e.push(ke(t.r)),e.push(ke(t.s)),Ns(e)}function ku(r,t){let e;try{if(e=vi(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{$(!1,"invalid yParity","yParity",t[0])}const n=$r(t[1],32),s=$r(t[2],32),i=gn.from({r:n,s,yParity:e});r.signature=i}function Nx(r){const t=Xa(Nt(r).slice(1));$(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",dt(r));const e={type:2,chainId:zt(t[0],"chainId"),nonce:vi(t[1],"nonce"),maxPriorityFeePerGas:zt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:zt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:zt(t[4],"gasLimit"),to:ra(t[5]),value:zt(t[6],"value"),data:dt(t[7]),accessList:Bu(t[8],"accessList")};return t.length===9||ku(e,t.slice(9)),e}function Ox(r,t){const e=[Lt(r.chainId,"chainId"),Lt(r.nonce,"nonce"),Lt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Lt(r.maxFeePerGas||0,"maxFeePerGas"),Lt(r.gasLimit,"gasLimit"),r.to||"0x",Lt(r.value,"value"),r.data,Cu(r.accessList||[])];return t&&(e.push(Lt(t.yParity,"yParity")),e.push(ke(t.r)),e.push(ke(t.s))),ae(["0x02",Ns(e)])}function Tx(r){const t=Xa(Nt(r).slice(1));$(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",dt(r));const e={type:1,chainId:zt(t[0],"chainId"),nonce:vi(t[1],"nonce"),gasPrice:zt(t[2],"gasPrice"),gasLimit:zt(t[3],"gasLimit"),to:ra(t[4]),value:zt(t[5],"value"),data:dt(t[6]),accessList:Bu(t[7],"accessList")};return t.length===8||ku(e,t.slice(8)),e}function Bx(r,t){const e=[Lt(r.chainId,"chainId"),Lt(r.nonce,"nonce"),Lt(r.gasPrice||0,"gasPrice"),Lt(r.gasLimit,"gasLimit"),r.to||"0x",Lt(r.value,"value"),r.data,Cu(r.accessList||[])];return t&&(e.push(Lt(t.yParity,"recoveryParam")),e.push(ke(t.r)),e.push(ke(t.s))),ae(["0x01",Ns(e)])}function Cx(r){let t=Xa(Nt(r).slice(1)),e="3",n=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const i=t[1],o=t[2],a=t[3];$(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),$(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),$(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),$(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),$(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let c=0;c<t[1].length;c++)n.push({data:i[c],commitment:o[c],proof:a[c]});t=t[0]}$(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",dt(r));const s={type:3,chainId:zt(t[0],"chainId"),nonce:vi(t[1],"nonce"),maxPriorityFeePerGas:zt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:zt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:zt(t[4],"gasLimit"),to:ra(t[5]),value:zt(t[6],"value"),data:dt(t[7]),accessList:Bu(t[8],"accessList"),maxFeePerBlobGas:zt(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(s.blobs=n),$(s.to!=null,`invalid address for transaction type: ${e}`,"data",r),$(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let i=0;i<s.blobVersionedHashes.length;i++)$(Kt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",r);return t.length===11||ku(s,t.slice(11)),s}function kx(r,t,e){const n=[Lt(r.chainId,"chainId"),Lt(r.nonce,"nonce"),Lt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Lt(r.maxFeePerGas||0,"maxFeePerGas"),Lt(r.gasLimit,"gasLimit"),r.to||va,Lt(r.value,"value"),r.data,Cu(r.accessList||[]),Lt(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),vx(r.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(Lt(t.yParity,"yParity")),n.push(ke(t.r)),n.push(ke(t.s)),e)?ae(["0x03",Ns([n,e.map(s=>s.data),e.map(s=>s.commitment),e.map(s=>s.proof)])]):ae(["0x03",Ns(n)])}function Lx(r){const t=Xa(Nt(r).slice(1));$(Array.isArray(t)&&(t.length===10||t.length===13),"invalid field count for transaction type: 4","data",dt(r));const e={type:4,chainId:zt(t[0],"chainId"),nonce:vi(t[1],"nonce"),maxPriorityFeePerGas:zt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:zt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:zt(t[4],"gasLimit"),to:ra(t[5]),value:zt(t[6],"value"),data:dt(t[7]),accessList:Bu(t[8],"accessList"),authorizationList:Rx(t[9],"authorizationList")};return t.length===10||ku(e,t.slice(10)),e}function Px(r,t){const e=[Lt(r.chainId,"chainId"),Lt(r.nonce,"nonce"),Lt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Lt(r.maxFeePerGas||0,"maxFeePerGas"),Lt(r.gasLimit,"gasLimit"),r.to||"0x",Lt(r.value,"value"),r.data,Cu(r.accessList||[]),Sx(r.authorizationList||[])];return t&&(e.push(Lt(t.yParity,"yParity")),e.push(ke(t.r)),e.push(ke(t.s))),ae(["0x04",Ns(e)])}var $n,uo,lo,fo,ho,po,go,mo,yo,wo,Ao,bo,si,cs,ir,us,Eo,_o,xc;const rr=class rr{constructor(){X(this,_o);X(this,$n);X(this,uo);X(this,lo);X(this,fo);X(this,ho);X(this,po);X(this,go);X(this,mo);X(this,yo);X(this,wo);X(this,Ao);X(this,bo);X(this,si);X(this,cs);X(this,ir);X(this,us);X(this,Eo);k(this,$n,null),k(this,uo,null),k(this,fo,0),k(this,ho,Pe),k(this,po,null),k(this,go,null),k(this,mo,null),k(this,lo,"0x"),k(this,yo,Pe),k(this,wo,Pe),k(this,Ao,null),k(this,bo,null),k(this,si,null),k(this,cs,null),k(this,ir,null),k(this,us,null),k(this,Eo,null)}get type(){return b(this,$n)}set type(t){switch(t){case null:k(this,$n,null);break;case 0:case"legacy":k(this,$n,0);break;case 1:case"berlin":case"eip-2930":k(this,$n,1);break;case 2:case"london":case"eip-1559":k(this,$n,2);break;case 3:case"cancun":case"eip-4844":k(this,$n,3);break;case 4:case"pectra":case"eip-7702":k(this,$n,4);break;default:$(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=b(this,uo);return t==null&&this.type===3?va:t}set to(t){k(this,uo,t==null?null:Ft(t))}get nonce(){return b(this,fo)}set nonce(t){k(this,fo,Ot(t,"value"))}get gasLimit(){return b(this,ho)}set gasLimit(t){k(this,ho,gt(t))}get gasPrice(){const t=b(this,po);return t==null&&(this.type===0||this.type===1)?Pe:t}set gasPrice(t){k(this,po,t==null?null:gt(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=b(this,go);return t??(this.type===2||this.type===3?Pe:null)}set maxPriorityFeePerGas(t){k(this,go,t==null?null:gt(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=b(this,mo);return t??(this.type===2||this.type===3?Pe:null)}set maxFeePerGas(t){k(this,mo,t==null?null:gt(t,"maxFeePerGas"))}get data(){return b(this,lo)}set data(t){k(this,lo,dt(t))}get value(){return b(this,yo)}set value(t){k(this,yo,gt(t,"value"))}get chainId(){return b(this,wo)}set chainId(t){k(this,wo,gt(t))}get signature(){return b(this,Ao)||null}set signature(t){k(this,Ao,t==null?null:gn.from(t))}get accessList(){const t=b(this,bo)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){k(this,bo,t==null?null:Si(t))}get authorizationList(){const t=b(this,Eo)||null;return t==null&&this.type===4?[]:t}set authorizationList(t){k(this,Eo,t==null?null:t.map(e=>Pg(e)))}get maxFeePerBlobGas(){const t=b(this,si);return t==null&&this.type===3?Pe:t}set maxFeePerBlobGas(t){k(this,si,t==null?null:gt(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=b(this,cs);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){$(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)$(Kt(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}k(this,cs,t)}get blobs(){return b(this,us)==null?null:b(this,us).map(t=>Object.assign({},t))}set blobs(t){if(t==null){k(this,us,null);return}const e=[],n=[];for(let s=0;s<t.length;s++){const i=t[s];if(nh(i)){it(b(this,ir),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Nt(i);if($(o.length<=Dl,"blob is too large",`blobs[${s}]`,i),o.length!==Dl){const f=new Uint8Array(Dl);f.set(o),o=f}const a=b(this,ir).blobToKzgCommitment(o),c=dt(b(this,ir).computeBlobKzgProof(o,a));e.push({data:dt(o),commitment:dt(a),proof:c}),n.push(Zd(1,a))}else{const o=dt(i.commitment);e.push({data:dt(i.data),commitment:o,proof:dt(i.proof)}),n.push(Zd(1,o))}}k(this,us,e),k(this,cs,n)}get kzg(){return b(this,ir)}set kzg(t){t==null?k(this,ir,null):k(this,ir,_x(t))}get hash(){return this.signature==null?null:Ce(at(this,_o,xc).call(this,!0,!1))}get unsignedHash(){return Ce(this.unsignedSerialized)}get from(){return this.signature==null?null:mx(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:xa.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return at(this,_o,xc).call(this,!0,!0)}get unsignedSerialized(){return at(this,_o,xc).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=b(this,si)!=null||b(this,cs);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&it(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),it(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),it(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):e?i.push(2):t?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return rr.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new rr;if(typeof t=="string"){const n=Nt(t);if(n[0]>=127)return rr.from(xx(n));switch(n[0]){case 1:return rr.from(Tx(n));case 2:return rr.from(Nx(n));case 3:return rr.from(Cx(n));case 4:return rr.from(Lx(n))}it(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new rr;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=gn.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.authorizationList!=null&&(e.authorizationList=t.authorizationList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&($(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),$(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&($(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),$(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};$n=new WeakMap,uo=new WeakMap,lo=new WeakMap,fo=new WeakMap,ho=new WeakMap,po=new WeakMap,go=new WeakMap,mo=new WeakMap,yo=new WeakMap,wo=new WeakMap,Ao=new WeakMap,bo=new WeakMap,si=new WeakMap,cs=new WeakMap,ir=new WeakMap,us=new WeakMap,Eo=new WeakMap,_o=new WeakSet,xc=function(t,e){it(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=t?this.signature:null;switch(this.inferType()){case 0:return Ix(this,n);case 1:return Bx(this,n);case 2:return Ox(this,n);case 3:return kx(this,n,e?this.blobs:null);case 4:return Px(this,n)}it(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let jc=rr;function mi(r){return Ce(Vr(r))}var Mx="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";const Yd=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Xd=4;function Ux(r){let t=0;function e(){return r[t++]<<8|r[t++]}let n=e(),s=1,i=[0,1];for(let V=1;V<n;V++)i.push(s+=e());let o=e(),a=t;t+=o;let c=0,f=0;function h(){return c==0&&(f=f<<8|r[t++],c=8),f>>--c&1}const y=31,_=2**y,A=_>>>1,O=A>>1,E=_-1;let v=0;for(let V=0;V<y;V++)v=v<<1|h();let L=[],K=0,z=_;for(;;){let V=Math.floor(((v-K+1)*s-1)/z),Y=0,st=n;for(;st-Y>1;){let P=Y+st>>>1;V<i[P]?st=P:Y=P}if(Y==0)break;L.push(Y);let et=K+Math.floor(z*i[Y]/s),U=K+Math.floor(z*i[Y+1]/s)-1;for(;((et^U)&A)==0;)v=v<<1&E|h(),et=et<<1&E,U=U<<1&E|1;for(;et&~U&O;)v=v&A|v<<1&E>>>1|h(),et=et<<1^A,U=(U^A)<<1|A|1;K=et,z=1+U-et}let rt=n-4;return L.map(V=>{switch(V-rt){case 3:return rt+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return rt+256+(r[a++]<<8|r[a++]);case 1:return rt+r[a++];default:return V-1}})}function Dx(r){let t=0;return()=>r[t++]}function Mg(r){return Dx(Ux(Fx(r)))}function Fx(r){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>t[s.charCodeAt(0)]=i);let e=r.length,n=new Uint8Array(6*e>>3);for(let s=0,i=0,o=0,a=0;s<e;s++)a=a<<6|t[r.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function Gx(r){return r&1?~r>>1:r>>1}function Hx(r,t){let e=Array(r);for(let n=0,s=0;n<r;n++)e[n]=s+=Gx(t());return e}function Ia(r,t=0){let e=[];for(;;){let n=r(),s=r();if(!s)break;t+=n;for(let i=0;i<s;i++)e.push(t+i);t+=s+1}return e}function Ug(r){return Na(()=>{let t=Ia(r);if(t.length)return t})}function Dg(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(zx(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(Vx(e,r))}return t.flat()}function Na(r){let t=[];for(;;){let e=r(t.length);if(!e)break;t.push(e)}return t}function Fg(r,t,e){let n=Array(r).fill().map(()=>[]);for(let s=0;s<t;s++)Hx(r,e).forEach((i,o)=>n[o].push(i));return n}function zx(r,t){let e=1+t(),n=t(),s=Na(t);return Fg(s.length,1+r,t).flatMap((o,a)=>{let[c,...f]=o;return Array(s[a]).fill().map((h,y)=>{let _=y*n;return[c+y*e,f.map(A=>A+_)]})})}function Vx(r,t){let e=1+t();return Fg(e,1+r,t).map(s=>[s[0],s.slice(1)])}function Kx(r){let t=[],e=Ia(r);return s(n([]),[]),t;function n(i){let o=r(),a=Na(()=>{let c=Ia(r).map(f=>e[f]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&t.push(a);for(let f of o)for(let h of f.Q)s(f,[...a,h],c)}}}function $x(r){return r.toString(16).toUpperCase().padStart(2,"0")}function Gg(r){return`{${$x(r)}}`}function qx(r){let t=[];for(let e=0,n=r.length;e<n;){let s=r.codePointAt(e);e+=s<65536?1:2,t.push(s)}return t}function jo(r){let e=r.length;if(e<4096)return String.fromCodePoint(...r);let n=[];for(let s=0;s<e;)n.push(String.fromCodePoint(...r.slice(s,s+=4096)));return n.join("")}function Wx(r,t){let e=r.length,n=e-t.length;for(let s=0;n==0&&s<e;s++)n=r[s]-t[s];return n}var Qx="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";const Oa=44032,Zc=4352,Yc=4449,Xc=4519,Hg=19,zg=21,Zo=28,tu=zg*Zo,Jx=Hg*tu,jx=Oa+Jx,Zx=Zc+Hg,Yx=Yc+zg,Xx=Xc+Zo;function ha(r){return r>>24&255}function Vg(r){return r&16777215}let wf,t0,Af,Ic;function tI(){let r=Mg(Qx);wf=new Map(Ug(r).flatMap((t,e)=>t.map(n=>[n,e+1<<24]))),t0=new Set(Ia(r)),Af=new Map,Ic=new Map;for(let[t,e]of Dg(r)){if(!t0.has(t)&&e.length==2){let[n,s]=e,i=Ic.get(n);i||(i=new Map,Ic.set(n,i)),i.set(s,t)}Af.set(t,e.reverse())}}function Kg(r){return r>=Oa&&r<jx}function eI(r,t){if(r>=Zc&&r<Zx&&t>=Yc&&t<Yx)return Oa+(r-Zc)*tu+(t-Yc)*Zo;if(Kg(r)&&t>Xc&&t<Xx&&(r-Oa)%Zo==0)return r+(t-Xc);{let e=Ic.get(r);return e&&(e=e.get(t),e)?e:-1}}function $g(r){wf||tI();let t=[],e=[],n=!1;function s(i){let o=wf.get(i);o&&(n=!0,i|=o),t.push(i)}for(let i of r)for(;;){if(i<128)t.push(i);else if(Kg(i)){let o=i-Oa,a=o/tu|0,c=o%tu/Zo|0,f=o%Zo;s(Zc+a),s(Yc+c),f>0&&s(Xc+f)}else{let o=Af.get(i);o?e.push(...o):s(i)}if(!e.length)break;i=e.pop()}if(n&&t.length>1){let i=ha(t[0]);for(let o=1;o<t.length;o++){let a=ha(t[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let f=t[c+1];if(t[c+1]=t[c],t[c]=f,!c||(i=ha(t[--c]),i<=a))break}i=ha(t[o])}}return t}function nI(r){let t=[],e=[],n=-1,s=0;for(let i of r){let o=ha(i),a=Vg(i);if(n==-1)o==0?n=a:t.push(a);else if(s>0&&s>=o)o==0?(t.push(n,...e),e.length=0,n=a):e.push(a),s=o;else{let c=eI(n,a);c>=0?n=c:s==0&&o==0?(t.push(n),n=a):(e.push(a),s=o)}}return n>=0&&t.push(n,...e),t}function qg(r){return $g(r).map(Vg)}function rI(r){return nI($g(r))}const e0=45,Wg=".",Qg=65039,Jg=1,eu=r=>Array.from(r);function Ta(r,t){return r.P.has(t)||r.Q.has(t)}class sI extends Array{get is_emoji(){return!0}}let bf,jg,$s,Ef,Zg,ji,Fl,Pi,Ps,n0,_f;function hh(){if(bf)return;let r=Mg(Mx);const t=()=>Ia(r),e=()=>new Set(t()),n=(h,y)=>y.forEach(_=>h.add(_));bf=new Map(Dg(r)),jg=e(),$s=t(),Ef=new Set(t().map(h=>$s[h])),$s=new Set($s),Zg=e(),e();let s=Ug(r),i=r();const o=()=>{let h=new Set;return t().forEach(y=>n(h,s[y])),n(h,t()),h};ji=Na(h=>{let y=Na(r).map(_=>_+96);if(y.length){let _=h>=i;y[0]-=32,y=jo(y),_&&(y=`Restricted[${y}]`);let A=o(),O=o(),E=!r();return{N:y,P:A,Q:O,M:E,R:_}}}),Fl=e(),Pi=new Map;let a=t().concat(eu(Fl)).sort((h,y)=>h-y);a.forEach((h,y)=>{let _=r(),A=a[y]=_?a[y-_]:{V:[],M:new Map};A.V.push(h),Fl.has(h)||Pi.set(h,A)});for(let{V:h,M:y}of new Set(Pi.values())){let _=[];for(let O of h){let E=ji.filter(L=>Ta(L,O)),v=_.find(({G:L})=>E.some(K=>L.has(K)));v||(v={G:new Set,V:[]},_.push(v)),v.V.push(O),n(v.G,E)}let A=_.flatMap(O=>eu(O.G));for(let{G:O,V:E}of _){let v=new Set(A.filter(L=>!O.has(L)));for(let L of E)y.set(L,v)}}Ps=new Set;let c=new Set;const f=h=>Ps.has(h)?c.add(h):Ps.add(h);for(let h of ji){for(let y of h.P)f(y);for(let y of h.Q)f(y)}for(let h of Ps)!Pi.has(h)&&!c.has(h)&&Pi.set(h,Jg);n(Ps,qg(Ps)),n0=Kx(r).map(h=>sI.from(h)).sort(Wx),_f=new Map;for(let h of n0){let y=[_f];for(let _ of h){let A=y.map(O=>{let E=O.get(_);return E||(E=new Map,O.set(_,E)),E});_===Qg?y.push(...A):y=A}for(let _ of y)_.V=h}}function dh(r){return(Yg(r)?"":`${ph(Lu([r]))} `)+Gg(r)}function ph(r){return`"${r}"‎`}function iI(r){if(r.length>=4&&r[2]==e0&&r[3]==e0)throw new Error(`invalid label extension: "${jo(r.slice(0,4))}"`)}function oI(r){for(let e=r.lastIndexOf(95);e>0;)if(r[--e]!==95)throw new Error("underscore allowed only at start")}function aI(r){let t=r[0],e=Yd.get(t);if(e)throw Aa(`leading ${e}`);let n=r.length,s=-1;for(let i=1;i<n;i++){t=r[i];let o=Yd.get(t);if(o){if(s==i)throw Aa(`${e} + ${o}`);s=i+1,e=o}}if(s==n)throw Aa(`trailing ${e}`)}function Lu(r,t=1/0,e=Gg){let n=[];cI(r[0])&&n.push("◌"),r.length>t&&(t>>=1,r=[...r.slice(0,t),8230,...r.slice(-t)]);let s=0,i=r.length;for(let o=0;o<i;o++){let a=r[o];Yg(a)&&(n.push(jo(r.slice(s,o))),n.push(e(a)),s=o+1)}return n.push(jo(r.slice(s,i))),n.join("")}function cI(r){return hh(),$s.has(r)}function Yg(r){return hh(),Zg.has(r)}function uI(r){return dI(lI(r,rI,mI))}function lI(r,t,e){if(!r)return[];hh();let n=0;return r.split(Wg).map(s=>{let i=qx(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=gI(i,t,e),c=a.length,f;if(!c)throw new Error("empty label");let h=o.output=a.flat();if(oI(h),!(o.emoji=c>1||a[0].is_emoji)&&h.every(_=>_<128))iI(h),f="ASCII";else{let _=a.flatMap(A=>A.is_emoji?[]:A);if(!_.length)f="Emoji";else{if($s.has(h[0]))throw Aa("leading combining mark");for(let E=1;E<c;E++){let v=a[E];if(!v.is_emoji&&$s.has(v[0]))throw Aa(`emoji + combining mark: "${jo(a[E-1])} + ${Lu([v[0]])}"`)}aI(h);let A=eu(new Set(_)),[O]=hI(A);pI(O,_),fI(O,A),f=O.N}}o.type=f}catch(a){o.error=a}return o})}function fI(r,t){let e,n=[];for(let s of t){let i=Pi.get(s);if(i===Jg)return;if(i){let o=i.M.get(s);if(e=e?e.filter(a=>o.has(a)):eu(o),!e.length)return}else n.push(s)}if(e){for(let s of e)if(n.every(i=>Ta(s,i)))throw new Error(`whole-script confusable: ${r.N}/${s.N}`)}}function hI(r){let t=ji;for(let e of r){let n=t.filter(s=>Ta(s,e));if(!n.length)throw ji.some(s=>Ta(s,e))?tm(t[0],e):Xg(e);if(t=n,n.length==1)break}return t}function dI(r){return r.map(({input:t,error:e,output:n})=>{if(e){let s=e.message;throw new Error(r.length==1?s:`Invalid label ${ph(Lu(t,63))}: ${s}`)}return jo(n)}).join(Wg)}function Xg(r){return new Error(`disallowed character: ${dh(r)}`)}function tm(r,t){let e=dh(t),n=ji.find(s=>s.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${r.N} + ${e}`)}function Aa(r){return new Error(`illegal placement: ${r}`)}function pI(r,t){for(let e of t)if(!Ta(r,e))throw tm(r,e);if(r.M){let e=qg(t);for(let n=1,s=e.length;n<s;n++)if(Ef.has(e[n])){let i=n+1;for(let o;i<s&&Ef.has(o=e[i]);i++)for(let a=n;a<i;a++)if(e[a]==o)throw new Error(`duplicate non-spacing marks: ${dh(o)}`);if(i-n>Xd)throw new Error(`excessive non-spacing marks: ${ph(Lu(e.slice(n-1,i)))} (${i-n}/${Xd})`);n=i}}}function gI(r,t,e){let n=[],s=[];for(r=r.slice().reverse();r.length;){let i=yI(r);if(i)s.length&&(n.push(t(s)),s=[]),n.push(e(i));else{let o=r.pop();if(Ps.has(o))s.push(o);else{let a=bf.get(o);if(a)s.push(...a);else if(!jg.has(o))throw Xg(o)}}}return s.length&&n.push(t(s)),n}function mI(r){return r.filter(t=>t!=Qg)}function yI(r,t){let e=_f,n,s=r.length;for(;s&&(e=e.get(r[--s]),!!e);){let{V:i}=e;i&&(n=i,r.length=s)}return n}const em=new Uint8Array(32);em.fill(0);function r0(r){return $(r.length!==0,"invalid ENS name; empty component","comp",r),r}function nm(r){const t=Vr(wI(r)),e=[];if(r.length===0)return e;let n=0;for(let s=0;s<t.length;s++)t[s]===46&&(e.push(r0(t.slice(n,s))),n=s+1);return $(n<t.length,"invalid ENS name; empty component","name",r),e.push(r0(t.slice(n))),e}function wI(r){try{if(r.length===0)throw new Error("empty label");return uI(r)}catch(t){$(!1,`invalid ENS name (${t.message})`,"name",r)}}function Rf(r){$(typeof r=="string","invalid ENS name; not a string","name",r),$(r.length,"invalid ENS name (empty label)","name",r);let t=em;const e=nm(r);for(;e.length;)t=Ce(ae([t,Ce(e.pop())]));return dt(t)}function AI(r,t){const e=t;return $(e<=255,"DNS encoded label cannot exceed 255","length",e),dt(ae(nm(r).map(n=>{$(n.length<=e,`label ${JSON.stringify(r)} exceeds ${e} bytes`,"name",r);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}const rm=new Uint8Array(32);rm.fill(0);const bI=BigInt(-1),sm=BigInt(0),im=BigInt(1),EI=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function _I(r){const t=Nt(r),e=t.length%32;return e?ae([t,rm.slice(e)]):dt(t)}const RI=xs(im,32),SI=xs(sm,32),s0={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Gl=["name","version","chainId","verifyingContract","salt"];function i0(r){return function(t){return $(typeof t=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,t),t}}const vI={name:i0("name"),version:i0("version"),chainId:function(r){const t=gt(r,"domain.chainId");return $(t>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(t)?Number(t):Qn(t)},verifyingContract:function(r){try{return Ft(r).toLowerCase()}catch{}$(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const t=Nt(r,"domain.salt");return $(t.length===32,'invalid domain value "salt"',"domain.salt",r),dt(t)}};function Hl(r){{const t=r.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",n=parseInt(t[2]);$(n%8===0&&n!==0&&n<=256&&t[2]===String(n),"invalid numeric width","type",r);const s=Vs(EI,e?n-1:n),i=e?(s+im)*bI:sm;return function(o){const a=gt(o,"value");return $(a>=i&&a<=s,`value out-of-bounds for ${r}`,"value",a),xs(e?$p(a,256):a,32)}}}{const t=r.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return $(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",r),function(n){const s=Nt(n);return $(s.length===e,`invalid length for ${r}`,"value",n),_I(n)}}}switch(r){case"address":return function(t){return $r(Ft(t),32)};case"bool":return function(t){return t?RI:SI};case"bytes":return function(t){return Ce(t)};case"string":return function(t){return mi(t)}}return null}function o0(r,t){return`${r}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}function bc(r){const t=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:r}}var Da,Br,Ro,au,om;const In=class In{constructor(t){X(this,au);W(this,"primaryType");X(this,Da);X(this,Br);X(this,Ro);k(this,Br,new Map),k(this,Ro,new Map);const e=new Map,n=new Map,s=new Map,i={};Object.keys(t).forEach(c=>{i[c]=t[c].map(({name:f,type:h})=>{let{base:y,index:_}=bc(h);return y==="int"&&!t.int&&(y="int256"),y==="uint"&&!t.uint&&(y="uint256"),{name:f,type:y+(_||"")}}),e.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),k(this,Da,JSON.stringify(i));for(const c in i){const f=new Set;for(const h of i[c]){$(!f.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(c)}`,"types",t),f.add(h.name);const y=bc(h.type).base;$(y!==c,`circular type reference to ${JSON.stringify(y)}`,"types",t),!Hl(y)&&($(n.has(y),`unknown type ${JSON.stringify(y)}`,"types",t),n.get(y).push(c),e.get(c).add(y))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);$(o.length!==0,"missing primary type","types",t),$(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",t),At(this,{primaryType:o[0]});function a(c,f){$(!f.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",t),f.add(c);for(const h of e.get(c))if(n.has(h)){a(h,f);for(const y of f)s.get(y).add(h)}f.delete(c)}a(this.primaryType,new Set);for(const[c,f]of s){const h=Array.from(f);h.sort(),b(this,Br).set(c,o0(c,i[c])+h.map(y=>o0(y,i[y])).join(""))}}get types(){return JSON.parse(b(this,Da))}getEncoder(t){let e=b(this,Ro).get(t);return e||(e=at(this,au,om).call(this,t),b(this,Ro).set(t,e)),e}encodeType(t){const e=b(this,Br).get(t);return $(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return Ce(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(Hl(t))return n(t,e);const s=bc(t).array;if(s)return $(s.count===-1||s.count===e.length,`array length mismatch; expected length ${s.count}`,"value",e),e.map(o=>this._visit(s.prefix,o,n));const i=this.types[t];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,e[a],n),o),{});$(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new In(t)}static getPrimaryType(t){return In.from(t).primaryType}static hashStruct(t,e,n){return In.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const s=s0[n];$(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:s})}return e.sort((n,s)=>Gl.indexOf(n.name)-Gl.indexOf(s.name)),In.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return ae(["0x1901",In.hashDomain(t),In.from(e).hash(n)])}static hash(t,e,n){return Ce(In.encode(t,e,n))}static async resolveNames(t,e,n,s){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const i={};t.verifyingContract&&!Kt(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=In.from(e);o.visit(n,(a,c)=>(a==="address"&&!Kt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:t,value:n}}static getPayload(t,e,n){In.hashDomain(t);const s={},i=[];Gl.forEach(c=>{const f=t[c];f!=null&&(s[c]=vI[c](f),i.push({name:c,type:s0[c]}))});const o=In.from(e);e=o.types;const a=Object.assign({},e);return $(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,f)=>{if(c.match(/^bytes(\d*)/))return dt(Nt(f));if(c.match(/^u?int/))return gt(f).toString();switch(c){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return $(typeof f=="string","invalid string","value",f),f}$(!1,"unsupported type","type",c)})}}};Da=new WeakMap,Br=new WeakMap,Ro=new WeakMap,au=new WeakSet,om=function(t){{const s=Hl(t);if(s)return s}const e=bc(t).array;if(e){const s=e.prefix,i=this.getEncoder(s);return o=>{$(e.count===-1||e.count===o.length,`array length mismatch; expected length ${e.count}`,"value",o);let a=o.map(i);return b(this,Br).has(s)&&(a=a.map(Ce)),Ce(ae(a))}}const n=this.types[t];if(n){const s=mi(b(this,Br).get(t));return i=>{const o=n.map(({name:a,type:c})=>{const f=this.getEncoder(c)(i[a]);return b(this,Br).has(c)?Ce(f):f});return o.unshift(s),ae(o)}}$(!1,`unknown type: ${t}`,"type",t)};let nu=In;function cn(r){const t=new Set;return r.forEach(e=>t.add(e)),Object.freeze(t)}const xI="external public payable override",II=cn(xI.split(" ")),am="constant external internal payable private public pure view override",NI=cn(am.split(" ")),cm="constructor error event fallback function receive struct",um=cn(cm.split(" ")),lm="calldata memory storage payable indexed",OI=cn(lm.split(" ")),TI="tuple returns",BI=[cm,lm,TI,am].join(" "),CI=cn(BI.split(" ")),kI={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},LI=new RegExp("^(\\s*)"),PI=new RegExp("^([0-9]+)"),MI=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),fm=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),hm=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var De,qn,Fa,Sf;const cu=class cu{constructor(t){X(this,Fa);X(this,De);X(this,qn);k(this,De,0),k(this,qn,t.slice())}get offset(){return b(this,De)}get length(){return b(this,qn).length-b(this,De)}clone(){return new cu(b(this,qn))}reset(){k(this,De,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=at(this,Fa,Sf).call(this,b(this,De)+1,t.match+1);return k(this,De,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;b(this,De)<t.match-1;){const n=this.peek().linkNext;e.push(at(this,Fa,Sf).call(this,b(this,De)+1,n)),k(this,De,n)}return k(this,De,t.match+1),e}peek(){if(b(this,De)>=b(this,qn).length)throw new Error("out-of-bounds");return b(this,qn)[b(this,De)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return sa(this,De)._++,t}toString(){const t=[];for(let e=b(this,De);e<b(this,qn).length;e++){const n=b(this,qn)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};De=new WeakMap,qn=new WeakMap,Fa=new WeakSet,Sf=function(t=0,e=0){return new cu(b(this,qn).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let Zn=cu;function Ts(r){const t=[],e=o=>{const a=i<r.length?JSON.stringify(r[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<r.length;){let o=r.substring(i),a=o.match(LI);a&&(i+=a[1].length,o=r.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let f=kI[o[0]]||"";if(f){if(c.type=f,c.text=o[0],i++,f==="OPEN_PAREN")n.push(t.length-1),s.push(t.length-1);else if(f=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if(f==="COMMA")c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if(f==="OPEN_BRACKET")c.type="BRACKET";else if(f==="CLOSE_BRACKET"){let h=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const y=t.pop().text;h=y+h,t[t.length-1].value=Ot(y)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=h}continue}if(a=o.match(MI),a){if(c.text=a[1],i+=c.text.length,CI.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(hm)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(PI),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Zn(t.map(o=>Object.freeze(o)))}function a0(r,t){let e=[];for(const n in t.keys())r.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Pu(r,t){if(t.peekKeyword(um)){const e=t.pop().text;if(e!==r)throw new Error(`expected ${r}, got ${e}`)}return t.popType("ID")}function qr(r,t){const e=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(r.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function dm(r){let t=qr(r,NI);return a0(t,cn("constant payable nonpayable".split(" "))),a0(t,cn("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function Kr(r,t){return r.popParams().map(e=>Ke.from(e,t))}function pm(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return gt(r.pop().text);throw new Error("invalid gas")}return null}function yi(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const UI=new RegExp(/^(.*)\[([0-9]*)\]$/);function c0(r){const t=r.match(hm);if($(t,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(t[2]){const e=parseInt(t[2]);$(e!==0&&e<=32,"invalid bytes length","type",r)}else if(t[3]){const e=parseInt(t[3]);$(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",r)}return r}const te={},mn=Symbol.for("_ethers_internal"),u0="_ParamTypeInternal",l0="_ErrorInternal",f0="_EventInternal",h0="_ConstructorInternal",d0="_FallbackInternal",p0="_FunctionInternal",g0="_StructInternal";var So,Nc;const Nn=class Nn{constructor(t,e,n,s,i,o,a,c){X(this,So);W(this,"name");W(this,"type");W(this,"baseType");W(this,"indexed");W(this,"components");W(this,"arrayLength");W(this,"arrayChildren");if(Ya(t,te,"ParamType"),Object.defineProperty(this,mn,{value:u0}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");At(this,{name:e,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(s)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(s=>n.arrayChildren.walk(s,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((s,i)=>n.components[i].walk(s,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],s=[t];return at(this,So,Nc).call(this,n,t,e,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(t,e){if(Nn.isParamType(t))return t;if(typeof t=="string")try{return Nn.from(Ts(t),e)}catch{$(!1,"invalid param type","obj",t)}else if(t instanceof Zn){let a="",c="",f=null;qr(t,cn(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",f=t.popParams().map(E=>Nn.from(E)),a=`tuple(${f.map(E=>E.format()).join(",")})`):(a=c0(t.popType("TYPE")),c=a);let h=null,y=null;for(;t.length&&t.peekType("BRACKET");){const E=t.pop();h=new Nn(te,"",a,c,null,f,y,h),y=E.value,a+=E.text,c="array",f=null}let _=null;if(qr(t,OI).has("indexed")){if(!e)throw new Error("");_=!0}const O=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new Nn(te,O,a,c,_,f,y,h)}const n=t.name;$(!n||typeof n=="string"&&n.match(fm),"invalid name","obj.name",n);let s=t.indexed;s!=null&&($(e,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let i=t.type,o=i.match(UI);if(o){const a=parseInt(o[2]||"-1"),c=Nn.from({type:o[1],components:t.components});return new Nn(te,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=t.components!=null?t.components.map(f=>Nn.from(f)):null;return new Nn(te,n||"",i,"tuple",s,a,null,null)}return i=c0(t.type),new Nn(te,n||"",i,i,s,null,null,null)}static isParamType(t){return t&&t[mn]===u0}};So=new WeakSet,Nc=function(t,e,n,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=e.slice();a.forEach((c,f)=>{var h;at(h=o,So,Nc).call(h,t,c,n,y=>{a[f]=y})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(e))a=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,f)=>{var h;at(h=o[f],So,Nc).call(h,t,c,n,y=>{a[f]=y})}),s(a);return}const i=n(this.type,e);i.then?t.push(async function(){s(await i)}()):s(i)};let Ke=Nn;class wi{constructor(t,e,n){W(this,"type");W(this,"inputs");Ya(t,te,"Fragment"),n=Object.freeze(n.slice()),At(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{wi.from(JSON.parse(t))}catch{}return wi.from(Ts(t))}if(t instanceof Zn)switch(t.peekKeyword(um)){case"constructor":return zr.from(t);case"error":return dn.from(t);case"event":return hr.from(t);case"fallback":case"receive":return xr.from(t);case"function":return dr.from(t);case"struct":return pi.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return zr.from(t);case"error":return dn.from(t);case"event":return hr.from(t);case"fallback":case"receive":return xr.from(t);case"function":return dr.from(t);case"struct":return pi.from(t)}it(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}$(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return zr.isFragment(t)}static isError(t){return dn.isFragment(t)}static isEvent(t){return hr.isFragment(t)}static isFunction(t){return dr.isFragment(t)}static isStruct(t){return pi.isFragment(t)}}class Mu extends wi{constructor(e,n,s,i){super(e,n,i);W(this,"name");$(typeof s=="string"&&s.match(fm),"invalid identifier","name",s),i=Object.freeze(i.slice()),At(this,{name:s})}}function Ba(r,t){return"("+t.map(e=>e.format(r)).join(r==="full"?", ":",")+")"}class dn extends Mu{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,mn,{value:l0})}get selector(){return mi(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+Ba(t,this.inputs)),e.join(" ")}static from(t){if(dn.isFragment(t))return t;if(typeof t=="string")return dn.from(Ts(t));if(t instanceof Zn){const e=Pu("error",t),n=Kr(t);return yi(t),new dn(te,e,n)}return new dn(te,t.name,t.inputs?t.inputs.map(Ke.from):[])}static isFragment(t){return t&&t[mn]===l0}}class hr extends Mu{constructor(e,n,s,i){super(e,"event",n,s);W(this,"anonymous");Object.defineProperty(this,mn,{value:f0}),At(this,{anonymous:i})}get topicHash(){return mi(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+Ba(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>Ke.from(i)),new hr(te,e,n,!1).topicHash}static from(e){if(hr.isFragment(e))return e;if(typeof e=="string")try{return hr.from(Ts(e))}catch{$(!1,"invalid event fragment","obj",e)}else if(e instanceof Zn){const n=Pu("event",e),s=Kr(e,!0),i=!!qr(e,cn(["anonymous"])).has("anonymous");return yi(e),new hr(te,n,s,i)}return new hr(te,e.name,e.inputs?e.inputs.map(n=>Ke.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[mn]===f0}}class zr extends wi{constructor(e,n,s,i,o){super(e,n,s);W(this,"payable");W(this,"gas");Object.defineProperty(this,mn,{value:h0}),At(this,{payable:i,gas:o})}format(e){if(it(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[`constructor${Ba(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(zr.isFragment(e))return e;if(typeof e=="string")try{return zr.from(Ts(e))}catch{$(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Zn){qr(e,cn(["constructor"]));const n=Kr(e),s=!!qr(e,II).has("payable"),i=pm(e);return yi(e),new zr(te,"constructor",n,s,i)}return new zr(te,"constructor",e.inputs?e.inputs.map(Ke.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[mn]===h0}}class xr extends wi{constructor(e,n,s){super(e,"fallback",n);W(this,"payable");Object.defineProperty(this,mn,{value:d0}),At(this,{payable:s})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(e){if(xr.isFragment(e))return e;if(typeof e=="string")try{return xr.from(Ts(e))}catch{$(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Zn){const n=e.toString(),s=e.peekKeyword(cn(["fallback","receive"]));if($(s,"type must be fallback or receive","obj",n),e.popKeyword(cn(["fallback","receive"]))==="receive"){const c=Kr(e);return $(c.length===0,"receive cannot have arguments","obj.inputs",c),qr(e,cn(["payable"])),yi(e),new xr(te,[],!0)}let o=Kr(e);o.length?$(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Ke.from("bytes")];const a=dm(e);if($(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),qr(e,cn(["returns"])).has("returns")){const c=Kr(e);$(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(f=>f.format("minimal")).join(", "))}return yi(e),new xr(te,o,a==="payable")}if(e.type==="receive")return new xr(te,[],!0);if(e.type==="fallback"){const n=[Ke.from("bytes")],s=e.stateMutability==="payable";return new xr(te,n,s)}$(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[mn]===d0}}class dr extends Mu{constructor(e,n,s,i,o,a){super(e,"function",n,i);W(this,"constant");W(this,"outputs");W(this,"stateMutability");W(this,"payable");W(this,"gas");Object.defineProperty(this,mn,{value:p0}),o=Object.freeze(o.slice()),At(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return mi(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+Ba(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Ba(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>Ke.from(i)),new dr(te,e,"view",n,[],null).selector}static from(e){if(dr.isFragment(e))return e;if(typeof e=="string")try{return dr.from(Ts(e))}catch{$(!1,"invalid function fragment","obj",e)}else if(e instanceof Zn){const s=Pu("function",e),i=Kr(e),o=dm(e);let a=[];qr(e,cn(["returns"])).has("returns")&&(a=Kr(e));const c=pm(e);return yi(e),new dr(te,s,o,i,a,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new dr(te,e.name,n,e.inputs?e.inputs.map(Ke.from):[],e.outputs?e.outputs.map(Ke.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[mn]===p0}}class pi extends Mu{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,mn,{value:g0})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return pi.from(Ts(t))}catch{$(!1,"invalid struct fragment","obj",t)}else if(t instanceof Zn){const e=Pu("struct",t),n=Kr(t);return yi(t),new pi(te,e,n)}return new pi(te,t.name,t.inputs?t.inputs.map(Ke.from):[])}static isFragment(t){return t&&t[mn]===g0}}const Yn=new Map;Yn.set(0,"GENERIC_PANIC");Yn.set(1,"ASSERT_FALSE");Yn.set(17,"OVERFLOW");Yn.set(18,"DIVIDE_BY_ZERO");Yn.set(33,"ENUM_RANGE_ERROR");Yn.set(34,"BAD_STORAGE_DATA");Yn.set(49,"STACK_UNDERFLOW");Yn.set(50,"ARRAY_RANGE_ERROR");Yn.set(65,"OUT_OF_MEMORY");Yn.set(81,"UNINITIALIZED_FUNCTION_CALL");const DI=new RegExp(/^bytes([0-9]*)$/),FI=new RegExp(/^(u?int)([0-9]*)$/);let zl=null,m0=1024;function GI(r,t,e,n){let s="missing revert data",i=null;const o=null;let a=null;if(e){s="execution reverted";const f=Nt(e);if(e=dt(e),f.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(f.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(dt(f.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],f.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(dt(f.slice(0,4))==="0x4e487b71")try{const h=Number(n.decode(["uint256"],f.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[h]},i=`Panic due to ${Yn.get(h)||"UNKNOWN"}(${h})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:t.to?Ft(t.to):null,data:t.data||"0x"};return t.from&&(c.from=Ft(t.from)),Zt(s,"CALL_EXCEPTION",{action:r,data:e,reason:i,transaction:c,invocation:o,revert:a})}var ls,Mi;const uu=class uu{constructor(){X(this,ls)}getDefaultValue(t){const e=t.map(s=>at(this,ls,Mi).call(this,Ke.from(s)));return new Ac(e,"_").defaultValue()}encode(t,e){zp(e.length,t.length,"types/values length mismatch");const n=t.map(o=>at(this,ls,Mi).call(this,Ke.from(o))),s=new Ac(n,"_"),i=new lf;return s.encode(i,e),i.data}decode(t,e,n){const s=t.map(o=>at(this,ls,Mi).call(this,Ke.from(o)));return new Ac(s,"_").decode(new ff(e,n,m0))}static _setDefaultMaxInflation(t){$(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),m0=t}static defaultAbiCoder(){return zl==null&&(zl=new uu),zl}static getBuiltinCallException(t,e,n){return GI(t,e,n,uu.defaultAbiCoder())}};ls=new WeakSet,Mi=function(t){if(t.isArray())return new sx(at(this,ls,Mi).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Ac(t.components.map(n=>at(this,ls,Mi).call(this,n)),t.name);switch(t.baseType){case"address":return new nx(t.name);case"bool":return new ix(t.name);case"string":return new px(t.name);case"bytes":return new ox(t.name);case"":return new ux(t.name)}let e=t.type.match(FI);if(e){let n=parseInt(e[2]||"256");return $(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new dx(n/8,e[1]==="int",t.name)}if(e=t.type.match(DI),e){let n=parseInt(e[1]);return $(n!==0&&n<=32,"invalid bytes length","param",t),new ax(n,t.name)}$(!1,"invalid type","type",t.type)};let Ca=uu;class HI{constructor(t,e,n){W(this,"fragment");W(this,"name");W(this,"signature");W(this,"topic");W(this,"args");const s=t.name,i=t.format();At(this,{fragment:t,name:s,signature:i,topic:e,args:n})}}class zI{constructor(t,e,n,s){W(this,"fragment");W(this,"name");W(this,"args");W(this,"signature");W(this,"selector");W(this,"value");const i=t.name,o=t.format();At(this,{fragment:t,name:i,args:n,signature:o,selector:e,value:s})}}class VI{constructor(t,e,n){W(this,"fragment");W(this,"name");W(this,"args");W(this,"signature");W(this,"selector");const s=t.name,i=t.format();At(this,{fragment:t,name:s,args:n,signature:i,selector:e})}}class y0{constructor(t){W(this,"hash");W(this,"_isIndexed");At(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const w0={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},A0={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let t="unknown panic code";return r>=0&&r<=255&&w0[r.toString()]&&(t=w0[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${t})`}}};var or,ar,cr,je,gr,Oc,Tc;const Fs=class Fs{constructor(t){X(this,gr);W(this,"fragments");W(this,"deploy");W(this,"fallback");W(this,"receive");X(this,or);X(this,ar);X(this,cr);X(this,je);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,k(this,cr,new Map),k(this,or,new Map),k(this,ar,new Map);const n=[];for(const o of e)try{n.push(wi.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}At(this,{fragments:Object.freeze(n)});let s=null,i=!1;k(this,je,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}At(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:($(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=b(this,cr);break;case"event":c=b(this,ar);break;case"error":c=b(this,or);break;default:return}const f=o.format();c.has(f)||c.set(f,o)}),this.deploy||At(this,{deploy:zr.from("constructor()")}),At(this,{fallback:s,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(s=>s.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return Ca.defaultAbiCoder()}getFunctionName(t){const e=at(this,gr,Oc).call(this,t,null,!1);return $(e,"no matching function","key",t),e.name}hasFunction(t){return!!at(this,gr,Oc).call(this,t,null,!1)}getFunction(t,e){return at(this,gr,Oc).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(b(this,cr).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(b(this,cr).get(s),n)}}getEventName(t){const e=at(this,gr,Tc).call(this,t,null,!1);return $(e,"no matching event","key",t),e.name}hasEvent(t){return!!at(this,gr,Tc).call(this,t,null,!1)}getEvent(t,e){return at(this,gr,Tc).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(b(this,ar).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(b(this,ar).get(s),n)}}getError(t,e){if(Kt(t)){const s=t.toLowerCase();if(A0[s])return dn.from(A0[s].signature);for(const i of b(this,or).values())if(s===i.selector)return i;return null}if(t.indexOf("(")===-1){const s=[];for(const[i,o]of b(this,or))i.split("(")[0]===t&&s.push(o);if(s.length===0)return t==="Error"?dn.from("error Error(string)"):t==="Panic"?dn.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");$(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return s[0]}if(t=dn.from(t).format(),t==="Error(string)")return dn.from("error Error(string)");if(t==="Panic(uint256)")return dn.from("error Panic(uint256)");const n=b(this,or).get(t);return n||null}forEachError(t){const e=Array.from(b(this,or).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(b(this,or).get(s),n)}}_decodeParams(t,e){return b(this,je).decode(t,e)}_encodeParams(t,e){return b(this,je).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);$(n,"unknown error","fragment",t),t=n}return $(oe(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,oe(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);$(n,"unknown error","fragment",t),t=n}return ae([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);$(n,"unknown function","fragment",t),t=n}return $(oe(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,oe(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);$(n,"unknown function","fragment",t),t=n}return ae([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);$(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const s=sn(e);if(s.length%32===0)try{return b(this,je).decode(t.outputs,s)}catch{n="could not decode result data"}it(!1,n,"BAD_DATA",{value:dt(s),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=Nt(t,"data"),s=Ca.getBuiltinCallException("call",e,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=dt(n.slice(0,4)),c=this.getError(a);if(c)try{const f=b(this,je).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:f},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);$(n,"unknown function","fragment",t),t=n}return dt(b(this,je).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);$(i,"unknown event","eventFragment",t),t=i}it(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const s=(i,o)=>i.type==="string"?mi(o):i.type==="bytes"?Ce(dt(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=xs(o):i.type.match(/^bytes/)?o=oS(o,32):i.type==="address"&&b(this,je).encode(["address"],[o]),$r(dt(o),32));for(e.forEach((i,o)=>{const a=t.inputs[o];if(!a.indexed){$(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?$(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const o=this.getEvent(t);$(o,"unknown event","eventFragment",t),t=o}const n=[],s=[],i=[];return t.anonymous||n.push(t.topicHash),$(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((o,a)=>{const c=e[a];if(o.indexed)if(o.type==="string")n.push(mi(c));else if(o.type==="bytes")n.push(Ce(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(b(this,je).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:b(this,je).encode(s,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const A=this.getEvent(t);$(A,"unknown event","eventFragment",t),t=A}if(n!=null&&!t.anonymous){const A=t.topicHash;$(Kt(n[0],32)&&n[0].toLowerCase()===A,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];t.inputs.forEach((A,O)=>{A.indexed?A.type==="string"||A.type==="bytes"||A.baseType==="tuple"||A.baseType==="array"?(s.push(Ke.from({type:"bytes32",name:A.name})),o.push(!0)):(s.push(A),o.push(!1)):(i.push(A),o.push(!1))});const a=n!=null?b(this,je).decode(s,ae(n)):null,c=b(this,je).decode(i,e,!0),f=[],h=[];let y=0,_=0;return t.inputs.forEach((A,O)=>{let E=null;if(A.indexed)if(a==null)E=new y0(null);else if(o[O])E=new y0(a[_++]);else try{E=a[_++]}catch(v){E=v}else try{E=c[y++]}catch(v){E=v}f.push(E),h.push(A.name||null)}),$o.fromItems(f,h)}parseTransaction(t){const e=Nt(t.data,"tx.data"),n=gt(t.value!=null?t.value:0,"tx.value"),s=this.getFunction(dt(e.slice(0,4)));if(!s)return null;const i=b(this,je).decode(s.inputs,e.slice(4));return new zI(s,s.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new HI(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=dt(t),n=this.getError(oe(e,0,4));if(!n)return null;const s=b(this,je).decode(n.inputs,oe(e,4));return new VI(n,n.selector,s)}static from(t){return t instanceof Fs?t:typeof t=="string"?new Fs(JSON.parse(t)):typeof t.formatJson=="function"?new Fs(t.formatJson()):typeof t.format=="function"?new Fs(t.format("json")):new Fs(t)}};or=new WeakMap,ar=new WeakMap,cr=new WeakMap,je=new WeakMap,gr=new WeakSet,Oc=function(t,e,n){if(Kt(t)){const i=t.toLowerCase();for(const o of b(this,cr).values())if(i===o.selector)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of b(this,cr))o.split("(")[0]===t&&i.push(a);if(e){const o=e.length>0?e[e.length-1]:null;let a=e.length,c=!0;Xe.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let f=i.length-1;f>=0;f--){const h=i[f].inputs.length;h!==a&&(!c||h!==a-1)&&i.splice(f,1)}for(let f=i.length-1;f>=0;f--){const h=i[f].inputs;for(let y=0;y<e.length;y++)if(Xe.isTyped(e[y])){if(y>=h.length){if(e[y].type==="overrides")continue;i.splice(f,1);break}if(e[y].type!==h[y].baseType){i.splice(f,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const o=e[e.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");$(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return i[0]}const s=b(this,cr).get(dr.from(t).format());return s||null},Tc=function(t,e,n){if(Kt(t)){const i=t.toLowerCase();for(const o of b(this,ar).values())if(i===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of b(this,ar))o.split("(")[0]===t&&i.push(a);if(e){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<e.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<e.length;c++)if(Xe.isTyped(e[c])&&e[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");$(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return i[0]}const s=b(this,ar).get(hr.from(t).format());return s||null};let vf=Fs;const gm=BigInt(0);function Zi(r){return r??null}function he(r){return r==null?null:r.toString()}class b0{constructor(t,e,n){W(this,"gasPrice");W(this,"maxFeePerGas");W(this,"maxPriorityFeePerGas");At(this,{gasPrice:Zi(t),maxFeePerGas:Zi(e),maxPriorityFeePerGas:Zi(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:he(t),maxFeePerGas:he(e),maxPriorityFeePerGas:he(n)}}}function ru(r){const t={};r.to&&(t.to=r.to),r.from&&(t.from=r.from),r.data&&(t.data=dt(r.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of e)!(s in r)||r[s]==null||(t[s]=gt(r[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in r)||r[s]==null||(t[s]=Ot(r[s],`request.${s}`));return r.accessList&&(t.accessList=Si(r.accessList)),r.authorizationList&&(t.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(t.blockTag=r.blockTag),"enableCcipRead"in r&&(t.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(t.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(t.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(t.kzg=r.kzg),"blobs"in r&&r.blobs&&(t.blobs=r.blobs.map(s=>nh(s)?dt(s):Object.assign({},s))),t}var Cr;class KI{constructor(t,e){W(this,"provider");W(this,"number");W(this,"hash");W(this,"timestamp");W(this,"parentHash");W(this,"parentBeaconBlockRoot");W(this,"nonce");W(this,"difficulty");W(this,"gasLimit");W(this,"gasUsed");W(this,"stateRoot");W(this,"receiptsRoot");W(this,"blobGasUsed");W(this,"excessBlobGas");W(this,"miner");W(this,"prevRandao");W(this,"extraData");W(this,"baseFeePerGas");X(this,Cr);k(this,Cr,t.transactions.map(n=>typeof n!="string"?new ka(n,e):n)),At(this,{provider:e,hash:Zi(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:Zi(t.prevRandao),extraData:t.extraData,baseFeePerGas:Zi(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return b(this,Cr).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=b(this,Cr).slice();return t.length===0?[]:(it(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:f,number:h,parentHash:y,parentBeaconBlockRoot:_,stateRoot:A,receiptsRoot:O,timestamp:E,transactions:v}=this;return{_type:"Block",baseFeePerGas:he(t),difficulty:he(e),extraData:n,gasLimit:he(s),gasUsed:he(i),blobGasUsed:he(this.blobGasUsed),excessBlobGas:he(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:f,number:h,parentHash:y,timestamp:E,parentBeaconBlockRoot:_,stateRoot:A,receiptsRoot:O,transactions:v}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return b(this,Cr).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=b(this,Cr)[t];else{const n=t.toLowerCase();for(const s of b(this,Cr))if(typeof s=="string"){if(s!==n)continue;e=s;break}else{if(s.hash!==n)continue;e=s;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;$(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return $I(this)}}Cr=new WeakMap;class ec{constructor(t,e){W(this,"provider");W(this,"transactionHash");W(this,"blockHash");W(this,"blockNumber");W(this,"removed");W(this,"address");W(this,"data");W(this,"topics");W(this,"index");W(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());At(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:f}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:f}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return it(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return it(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return it(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return qI(this)}}var Ga;class mm{constructor(t,e){W(this,"provider");W(this,"to");W(this,"from");W(this,"contractAddress");W(this,"hash");W(this,"index");W(this,"blockHash");W(this,"blockNumber");W(this,"logsBloom");W(this,"gasUsed");W(this,"blobGasUsed");W(this,"cumulativeGasUsed");W(this,"gasPrice");W(this,"blobGasPrice");W(this,"type");W(this,"status");W(this,"root");X(this,Ga);k(this,Ga,Object.freeze(t.logs.map(s=>new ec(s,e))));let n=gm;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),At(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return b(this,Ga)}toJSON(){const{to:t,from:e,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:f,status:h,root:y}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:he(this.cumulativeGasUsed),from:e,gasPrice:he(this.gasPrice),blobGasUsed:he(this.blobGasUsed),blobGasPrice:he(this.blobGasPrice),gasUsed:he(this.gasUsed),hash:s,index:i,logs:f,logsBloom:c,root:y,status:h,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return wm(this)}reorderedEvent(t){return it(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),ym(this,t)}}Ga=new WeakMap;var fs;const _h=class _h{constructor(t,e){W(this,"provider");W(this,"blockNumber");W(this,"blockHash");W(this,"index");W(this,"hash");W(this,"type");W(this,"to");W(this,"from");W(this,"nonce");W(this,"gasLimit");W(this,"gasPrice");W(this,"maxPriorityFeePerGas");W(this,"maxFeePerGas");W(this,"maxFeePerBlobGas");W(this,"data");W(this,"value");W(this,"chainId");W(this,"signature");W(this,"accessList");W(this,"blobVersionedHashes");W(this,"authorizationList");X(this,fs);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,k(this,fs,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:f,signature:h,accessList:y,blobVersionedHashes:_}=this;return{_type:"TransactionResponse",accessList:y,blockNumber:t,blockHash:e,blobVersionedHashes:_,chainId:he(this.chainId),data:f,from:a,gasLimit:he(this.gasLimit),gasPrice:he(this.gasPrice),hash:s,maxFeePerGas:he(this.maxFeePerGas),maxPriorityFeePerGas:he(this.maxPriorityFeePerGas),maxFeePerBlobGas:he(this.maxFeePerBlobGas),nonce:c,signature:h,to:o,index:n,type:i,value:he(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await rn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,s=e??0;let i=b(this,fs),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:_,nonce:A}=await rn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(A<this.nonce){i=_;return}if(a)return null;const O=await this.getTransaction();if(!(O&&O.blockNumber!=null))for(o===-1&&(o=i-3,o<b(this,fs)&&(o=b(this,fs)));o<=_;){if(a)return null;const E=await this.provider.getBlock(o,!0);if(E==null)return;for(const v of E)if(v===this.hash)return;for(let v=0;v<E.length;v++){const L=await E.getTransaction(v);if(L.from===this.from&&L.nonce===this.nonce){if(a)return null;const K=await this.provider.getTransactionReceipt(L.hash);if(K==null||_-K.blockNumber+1<n)return;let z="replaced";L.data===this.data&&L.to===this.to&&L.value===this.value?z="repriced":L.data==="0x"&&L.from===L.to&&L.value===gm&&(z="cancelled"),it(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:z==="replaced"||z==="cancelled",reason:z,replacement:L.replaceableTransaction(i),hash:L.hash,receipt:K})}}o++}},f=_=>{if(_==null||_.status!==0)return _;it(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:_.to,from:_.from,data:""},receipt:_})},h=await this.provider.getTransactionReceipt(this.hash);if(n===0)return f(h);if(h){if(n===1||await h.confirmations()>=n)return f(h)}else if(await c(),n===0)return null;return await new Promise((_,A)=>{const O=[],E=()=>{O.forEach(L=>L())};if(O.push(()=>{a=!0}),s>0){const L=setTimeout(()=>{E(),A(Zt("wait for transaction timeout","TIMEOUT"))},s);O.push(()=>{clearTimeout(L)})}const v=async L=>{if(await L.confirmations()>=n){E();try{_(f(L))}catch(K){A(K)}}};if(O.push(()=>{this.provider.off(this.hash,v)}),this.provider.on(this.hash,v),i>=0){const L=async()=>{try{await c()}catch(K){if(ze(K,"TRANSACTION_REPLACED")){E(),A(K);return}}a||this.provider.once("block",L)};O.push(()=>{this.provider.off("block",L)}),this.provider.once("block",L)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return it(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),wm(this)}reorderedEvent(t){return it(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),it(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ym(this,t)}replaceableTransaction(t){$(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new _h(this,this.provider);return k(e,fs,t),e}};fs=new WeakMap;let ka=_h;function $I(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function ym(r,t){return{orphan:"reorder-transaction",tx:r,other:t}}function wm(r){return{orphan:"drop-transaction",tx:r}}function qI(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class gh extends ec{constructor(e,n,s){super(e,e.provider);W(this,"interface");W(this,"fragment");W(this,"args");const i=n.decodeEventLog(s,e.data,e.topics);At(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Am extends ec{constructor(e,n){super(e,e.provider);W(this,"error");At(this,{error:n})}}var vo;class WI extends mm{constructor(e,n,s){super(s,n);X(this,vo);k(this,vo,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?b(this,vo).getEvent(e.topics[0]):null;if(n)try{return new gh(e,b(this,vo),n)}catch(s){return new Am(e,s)}return e})}}vo=new WeakMap;var Ha;class mh extends ka{constructor(e,n,s){super(s,n);X(this,Ha);k(this,Ha,e)}async wait(e,n){const s=await super.wait(e,n);return s==null?null:new WI(b(this,Ha),this.provider,s)}}Ha=new WeakMap;class bm extends qp{constructor(e,n,s,i){super(e,n,s);W(this,"log");At(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class QI extends bm{constructor(t,e,n,s,i){super(t,e,n,new gh(i,t.interface,s));const o=t.interface.decodeEventLog(s,this.log.data,this.log.topics);At(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const E0=BigInt(0);function Em(r){return r&&typeof r.call=="function"}function _m(r){return r&&typeof r.estimateGas=="function"}function Uu(r){return r&&typeof r.resolveName=="function"}function Rm(r){return r&&typeof r.sendTransaction=="function"}function Sm(r){if(r!=null){if(Uu(r))return r;if(r.provider)return r.provider}}var za;class JI{constructor(t,e,n){X(this,za);W(this,"fragment");if(At(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const s=Ai(t.runner,"resolveName"),i=Uu(s)?s:null;k(this,za,async function(){const o=await Promise.all(e.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(h,y)=>h==="address"?Array.isArray(y)?Promise.all(y.map(_=>an(_,i))):an(y,i):y)));return t.interface.encodeFilterTopics(e,o)}())}getTopicFilter(){return b(this,za)}}za=new WeakMap;function Ai(r,t){return r==null?null:typeof r[t]=="function"?r:r.provider&&typeof r.provider[t]=="function"?r.provider:null}function qs(r){return r==null?null:r.provider||null}async function vm(r,t){const e=Xe.dereference(r,"overrides");$(typeof e=="object","invalid overrides parameter","overrides",r);const n=ru(e);return $(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),$(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function jI(r,t,e){const n=Ai(r,"resolveName"),s=Uu(n)?n:null;return await Promise.all(t.map((i,o)=>i.walkAsync(e[o],(a,c)=>(c=Xe.dereference(c,a),a==="address"?an(c,s):c))))}function ZI(r){const t=async function(o){const a=await vm(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await an(a.from,Sm(r.runner)));const c=r.interface,f=gt(a.value||E0,"overrides.value")===E0,h=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!h&&!f&&$(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),$(c.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data);const y=c.receive||c.fallback&&c.fallback.payable;return $(y||f,"cannot send value to non-payable fallback","overrides.value",a.value),$(c.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data),a},e=async function(o){const a=Ai(r.runner,"call");it(Em(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(o);try{return await a.call(c)}catch(f){throw eh(f)&&f.data?r.interface.makeError(f.data,c):f}},n=async function(o){const a=r.runner;it(Rm(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await t(o)),f=qs(r.runner);return new mh(r.interface,f,c)},s=async function(o){const a=Ai(r.runner,"estimateGas");return it(_m(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},i=async o=>await n(o);return At(i,{_contract:r,estimateGas:s,populateTransaction:t,send:n,staticCall:e}),i}function YI(r,t){const e=function(...f){const h=r.interface.getFunction(t,f);return it(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:f}}),h},n=async function(...f){const h=e(...f);let y={};if(h.inputs.length+1===f.length&&(y=await vm(f.pop()),y.from&&(y.from=await an(y.from,Sm(r.runner)))),h.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const _=await jI(r.runner,h.inputs,f);return Object.assign({},y,await rn({to:r.getAddress(),data:r.interface.encodeFunctionData(h,_)}))},s=async function(...f){const h=await a(...f);return h.length===1?h[0]:h},i=async function(...f){const h=r.runner;it(Rm(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const y=await h.sendTransaction(await n(...f)),_=qs(r.runner);return new mh(r.interface,_,y)},o=async function(...f){const h=Ai(r.runner,"estimateGas");return it(_m(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await n(...f))},a=async function(...f){const h=Ai(r.runner,"call");it(Em(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const y=await n(...f);let _="0x";try{_=await h.call(y)}catch(O){throw eh(O)&&O.data?r.interface.makeError(O.data,y):O}const A=e(...f);return r.interface.decodeFunctionResult(A,_)},c=async(...f)=>e(...f).constant?await s(...f):await i(...f);return At(c,{name:r.interface.getFunctionName(t),_contract:r,_key:t,getFragment:e,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=r.interface.getFunction(t);return it(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),f}}),c}function XI(r,t){const e=function(...s){const i=r.interface.getEvent(t,s);return it(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),i},n=function(...s){return new JI(r,e(...s),s)};return At(n,{name:r.interface.getEventName(t),_contract:r,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=r.interface.getEvent(t);return it(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),n}const su=Symbol.for("_ethersInternal_contract"),xm=new WeakMap;function tN(r,t){xm.set(r[su],t)}function An(r){return xm.get(r[su])}function eN(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function yh(r,t){let e,n=null;if(Array.isArray(t)){const i=function(o){if(Kt(o,32))return o;const a=r.interface.getEvent(o);return $(a,"unknown fragment","name",o),a.topicHash};e=t.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else t==="*"?e=[null]:typeof t=="string"?Kt(t,32)?e=[t]:(n=r.interface.getEvent(t),$(n,"unknown fragment","event",t),e=[n.topicHash]):eN(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):$(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:e}}async function da(r,t){const{subs:e}=An(r);return e.get((await yh(r,t)).tag)||null}async function _0(r,t,e){const n=qs(r.runner);it(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:o}=await yh(r,e),{addr:a,subs:c}=An(r);let f=c.get(i);if(!f){const y={address:a||r,topics:o},_=v=>{let L=s;if(L==null)try{L=r.interface.getEvent(v.topics[0])}catch{}if(L){const K=L,z=s?r.interface.decodeEventLog(s,v.data,v.topics):[];If(r,e,z,rt=>new QI(r,rt,e,K,v))}else If(r,e,[],K=>new bm(r,K,e,v))};let A=[];f={tag:i,listeners:[],start:()=>{A.length||A.push(n.on(y,_))},stop:async()=>{if(A.length==0)return;let v=A;A=[],await Promise.all(v),n.off(y,_)}},c.set(i,f)}return f}let xf=Promise.resolve();async function nN(r,t,e,n){await xf;const s=await da(r,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(e);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),An(r).subs.delete(s.tag)),i>0}async function If(r,t,e,n){try{await xf}catch{}const s=nN(r,t,e,n);return xf=s,await s}const Ec=["then"];var k0;k0=su;const Ea=class Ea{constructor(t,e,n,s){W(this,"target");W(this,"interface");W(this,"runner");W(this,"filters");W(this,k0);W(this,"fallback");$(typeof t=="string"||Bg(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=vf.from(e);At(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,su,{value:{}});let o,a=null,c=null;if(s){const y=qs(n);c=new mh(this.interface,y,s)}let f=new Map;if(typeof t=="string")if(Kt(t))a=t,o=Promise.resolve(t);else{const y=Ai(n,"resolveName");if(!Uu(y))throw Zt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=y.resolveName(t).then(_=>{if(_==null)throw Zt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return An(this).addr=_,_})}else o=t.getAddress().then(y=>{if(y==null)throw new Error("TODO");return An(this).addr=y,y});tN(this,{addrPromise:o,addr:a,deployTx:c,subs:f});const h=new Proxy({},{get:(y,_,A)=>{if(typeof _=="symbol"||Ec.indexOf(_)>=0)return Reflect.get(y,_,A);try{return this.getEvent(_)}catch(O){if(!ze(O,"INVALID_ARGUMENT")||O.argument!=="key")throw O}},has:(y,_)=>Ec.indexOf(_)>=0?Reflect.has(y,_):Reflect.has(y,_)||this.interface.hasEvent(String(_))});return At(this,{filters:h}),At(this,{fallback:i.receive||i.fallback?ZI(this):null}),new Proxy(this,{get:(y,_,A)=>{if(typeof _=="symbol"||_ in y||Ec.indexOf(_)>=0)return Reflect.get(y,_,A);try{return y.getFunction(_)}catch(O){if(!ze(O,"INVALID_ARGUMENT")||O.argument!=="key")throw O}},has:(y,_)=>typeof _=="symbol"||_ in y||Ec.indexOf(_)>=0?Reflect.has(y,_):y.interface.hasFunction(_)})}connect(t){return new Ea(this.target,this.interface,t)}attach(t){return new Ea(t,this.interface,this.runner)}async getAddress(){return await An(this).addrPromise}async getDeployedCode(){const t=qs(this.runner);it(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=qs(this.runner);return it(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return An(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),YI(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),XI(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=An(this),o=s||await i,{fragment:a,topics:c}=await yh(this,t),f={address:o,topics:c,fromBlock:e,toBlock:n},h=qs(this.runner);return it(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(f)).map(y=>{let _=a;if(_==null)try{_=this.interface.getEvent(y.topics[0])}catch{}if(_)try{return new gh(y,this.interface,_)}catch(A){return new Am(y,A)}return new ec(y,h)})}async on(t,e){const n=await _0(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await _0(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await If(this,t,e,null)}async listenerCount(t){if(t){const s=await da(this,t);return s?s.listeners.length:0}const{subs:e}=An(this);let n=0;for(const{listeners:s}of e.values())n+=s.length;return n}async listeners(t){if(t){const s=await da(this,t);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:e}=An(this);let n=[];for(const{listeners:s}of e.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(t,e){const n=await da(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(e==null||n.listeners.length===0)&&(n.stop(),An(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await da(this,t);if(!e)return this;e.stop(),An(this).subs.delete(e.tag)}else{const{subs:e}=An(this);for(const{tag:n,stop:s}of e.values())s(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends Ea{constructor(s,i=null){super(s,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};let Nf=Ea;function rN(){return Nf}class ba extends rN(){}function Vl(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):$(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class sN{constructor(t){W(this,"name");At(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Im=new RegExp("^(ipfs)://(.*)$","i"),R0=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Im,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var hs,ii,ds,Ui,lu,Nm;const Ki=class Ki{constructor(t,e,n){X(this,ds);W(this,"provider");W(this,"address");W(this,"name");X(this,hs);X(this,ii);At(this,{provider:t,address:e,name:n}),k(this,hs,null),k(this,ii,new ba(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return b(this,hs)==null&&k(this,hs,(async()=>{try{return await b(this,ii).supportsInterface("0x9061b923")}catch(t){if(ze(t,"CALL_EXCEPTION"))return!1;throw k(this,hs,null),t}})()),await b(this,hs)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await at(this,ds,Ui).call(this,"addr(bytes32)");return i==null||i===va?null:i}catch(i){if(ze(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const o=await at(this,ds,Ui).call(this,"addr(bytes32,uint)",[i]);if(Kt(o,20))return Ft(o)}let e=null;for(const i of this.provider.plugins)if(i instanceof sN&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const n=await at(this,ds,Ui).call(this,"addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const s=await e.decodeAddress(t,n);if(s!=null)return s;it(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await at(this,ds,Ui).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await at(this,ds,Ui).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const s=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${s}://${cS("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;it(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<R0.length;n++){const s=e.match(R0[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const o=Vl(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(s[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:t};const f=c[1],h=new ba(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const E=await h.ownerOf(f);if(a!==E)return t.push({type:"!owner",value:E}),{url:null,linkage:t};t.push({type:"owner",value:E})}else if(i==="erc1155"){const E=await h.balanceOf(a,f);if(!E)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:E.toString()})}let y=await h[o](f);if(y==null||y==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:y}),i==="erc1155"&&(y=y.replace("{id}",xs(f,32).substring(2)),t.push({type:"metadata-url-expanded",value:y})),y.match(/^ipfs:/i)&&(y=Vl(y)),t.push({type:"metadata-url",value:y});let _={};const A=await new Is(y).send();A.assertOk();try{_=A.bodyJson}catch{try{t.push({type:"!metadata",value:A.bodyText})}catch{const L=A.body;return L&&t.push({type:"!metadata",value:dt(L)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!_)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(_)});let O=_.image;if(typeof O!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!O.match(/^(https:\/\/|data:)/i)){if(O.match(Im)==null)return t.push({type:"!imageUrl-ipfs",value:O}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:O}),O=Vl(O)}return t.push({type:"url",value:O}),{linkage:t,url:O}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return it(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async fromName(t,e){var s;let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const i=await at(s=Ki,lu,Nm).call(s,t,n);if(i!=null){const o=new Ki(t,i,e);return n!==e&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};hs=new WeakMap,ii=new WeakMap,ds=new WeakSet,Ui=async function(t,e){e=(e||[]).slice();const n=b(this,ii).interface;e.unshift(Rf(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(t),it(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[AI(this.name,255),n.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await b(this,ii)[t](...e);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!ze(i,"CALL_EXCEPTION"))throw i}return null},lu=new WeakSet,Nm=async function(t,e){const n=await Ki.getEnsAddress(t);try{const i=await new ba(n,["function resolver(bytes32) view returns (address)"],t).resolver(Rf(e),{enableCcipRead:!0});return i===va?null:i}catch(s){throw s}return null},X(Ki,lu);let iu=Ki;const S0=BigInt(0);function kt(r,t){return function(e){return e==null?t:r(e)}}function La(r,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(n=>r(n))}}function nc(r,t){return e=>{const n={};for(const s in r){let i=s;if(t&&s in t&&!(i in e)){for(const o of t[s])if(o in e){i=o;break}}try{const o=r[s](e[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";it(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:e})}}return n}}function iN(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}$(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function Yo(r){return $(Kt(r,!0),"invalid data","value",r),r}function He(r){return $(Kt(r,32),"invalid hash","value",r),r}const oN=nc({address:Ft,blockHash:He,blockNumber:Ot,data:Yo,index:Ot,removed:kt(iN,!1),topics:La(He),transactionHash:He,transactionIndex:Ot},{index:["logIndex"]});function aN(r){return oN(r)}const cN=nc({hash:kt(He),parentHash:He,parentBeaconBlockRoot:kt(He,null),number:Ot,timestamp:Ot,nonce:kt(Yo),difficulty:gt,gasLimit:gt,gasUsed:gt,stateRoot:kt(He,null),receiptsRoot:kt(He,null),blobGasUsed:kt(gt,null),excessBlobGas:kt(gt,null),miner:kt(Ft),prevRandao:kt(He,null),extraData:Yo,baseFeePerGas:kt(gt)},{prevRandao:["mixHash"]});function uN(r){const t=cN(r);return t.transactions=r.transactions.map(e=>typeof e=="string"?e:Om(e)),t}const lN=nc({transactionIndex:Ot,blockNumber:Ot,transactionHash:He,address:Ft,topics:La(He),data:Yo,index:Ot,blockHash:He},{index:["logIndex"]});function fN(r){return lN(r)}const hN=nc({to:kt(Ft,null),from:kt(Ft,null),contractAddress:kt(Ft,null),index:Ot,root:kt(dt),gasUsed:gt,blobGasUsed:kt(gt,null),logsBloom:kt(Yo),blockHash:He,hash:He,logs:La(fN),blockNumber:Ot,cumulativeGasUsed:gt,effectiveGasPrice:kt(gt),blobGasPrice:kt(gt,null),status:kt(Ot),type:kt(Ot,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function dN(r){return hN(r)}function Om(r){r.to&&gt(r.to)===S0&&(r.to="0x0000000000000000000000000000000000000000");const t=nc({hash:He,index:kt(Ot,void 0),type:e=>e==="0x"||e==null?0:Ot(e),accessList:kt(Si,null),blobVersionedHashes:kt(La(He,!0),null),authorizationList:kt(La(e=>{let n;if(e.signature)n=e.signature;else{let s=e.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),n=Object.assign({},e,{yParity:s})}return{address:Ft(e.address),chainId:gt(e.chainId),nonce:gt(e.nonce),signature:gn.from(n)}},!1),null),blockHash:kt(He,null),blockNumber:kt(Ot,null),transactionIndex:kt(Ot,null),from:Ft,gasPrice:kt(gt),maxPriorityFeePerGas:kt(gt),maxFeePerGas:kt(gt),maxFeePerBlobGas:kt(gt,null),gasLimit:gt,to:kt(Ft,null),value:gt,nonce:Ot,data:Yo,creates:kt(Ft,null),chainId:kt(gt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(t.to==null&&t.creates==null&&(t.creates=ex(t)),(r.type===1||r.type===2)&&r.accessList==null&&(t.accessList=[]),r.signature?t.signature=gn.from(r.signature):t.signature=gn.from(r),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&gt(t.blockHash)===S0&&(t.blockHash=null),t}const pN="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class rc{constructor(t){W(this,"name");At(this,{name:t})}clone(){return new rc(this.name)}}class Du extends rc{constructor(e,n){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);W(this,"effectiveBlock");W(this,"txBase");W(this,"txCreate");W(this,"txDataZero");W(this,"txDataNonzero");W(this,"txAccessListStorageKey");W(this,"txAccessListAddress");const s={effectiveBlock:e};function i(o,a){let c=(n||{})[o];c==null&&(c=a),$(typeof c=="number",`invalud value for ${o}`,"costs",n),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),At(this,s)}clone(){return new Du(this.effectiveBlock,this)}}class Fu extends rc{constructor(e,n){super("org.ethers.plugins.network.Ens");W(this,"address");W(this,"targetNetwork");At(this,{address:e||pN,targetNetwork:n??1})}clone(){return new Fu(this.address,this.targetNetwork)}}var Va,Ka;class gN extends rc{constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");X(this,Va);X(this,Ka);k(this,Va,e),k(this,Ka,n)}get url(){return b(this,Va)}get processFunc(){return b(this,Ka)}clone(){return this}}Va=new WeakMap,Ka=new WeakMap;const Kl=new Map;var xo,Io,ps;const $i=class $i{constructor(t,e){X(this,xo);X(this,Io);X(this,ps);k(this,xo,t),k(this,Io,gt(e)),k(this,ps,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return b(this,xo)}set name(t){k(this,xo,t)}get chainId(){return b(this,Io)}set chainId(t){k(this,Io,gt(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===gt(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===gt(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===gt(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(b(this,ps).values())}attachPlugin(t){if(b(this,ps).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return b(this,ps).set(t.name,t.clone()),this}getPlugin(t){return b(this,ps).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new $i(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Du;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let s=2;s<t.data.length;s+=2)t.data.substring(s,s+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const s=Si(t.accessList);for(const i in s)n+=e.txAccessListAddress+e.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(t){if(mN(),t==null)return $i.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=Kl.get(t);if(e)return e();if(typeof t=="bigint")return new $i("unknown",t);$(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){$(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new $i(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new Fu(t.ensAddress,t.ensNetwork)),e}$(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=Kl.get(t);n&&$(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),Kl.set(t,e)}};xo=new WeakMap,Io=new WeakMap,ps=new WeakMap;let pr=$i;function v0(r,t){const e=String(r);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=e.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function x0(r){return new gN(r,async(t,e,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),t()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:v0(a.maxFee,9),maxPriorityFeePerGas:v0(a.maxPriorityFee,9)}}catch(i){it(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let I0=!1;function mN(){if(I0)return;I0=!0;function r(t,e,n){const s=function(){const i=new pr(t,e);return n.ensNetwork!=null&&i.attachPlugin(new Fu(null,n.ensNetwork)),i.attachPlugin(new Du),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};pr.register(t,s),pr.register(e,s),n.altNames&&n.altNames.forEach(i=>{pr.register(i,s)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[x0("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[x0("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function Of(r){return JSON.parse(JSON.stringify(r))}var kr,On,gs,ur,No,Bc;class yN{constructor(t){X(this,No);X(this,kr);X(this,On);X(this,gs);X(this,ur);k(this,kr,t),k(this,On,null),k(this,gs,4e3),k(this,ur,-2)}get pollingInterval(){return b(this,gs)}set pollingInterval(t){k(this,gs,t)}start(){b(this,On)||(k(this,On,b(this,kr)._setTimeout(at(this,No,Bc).bind(this),b(this,gs))),at(this,No,Bc).call(this))}stop(){b(this,On)&&(b(this,kr)._clearTimeout(b(this,On)),k(this,On,null))}pause(t){this.stop(),t&&k(this,ur,-2)}resume(){this.start()}}kr=new WeakMap,On=new WeakMap,gs=new WeakMap,ur=new WeakMap,No=new WeakSet,Bc=async function(){try{const t=await b(this,kr).getBlockNumber();if(b(this,ur)===-2){k(this,ur,t);return}if(t!==b(this,ur)){for(let e=b(this,ur)+1;e<=t;e++){if(b(this,On)==null)return;await b(this,kr).emit("block",e)}k(this,ur,t)}}catch{}b(this,On)!=null&&k(this,On,b(this,kr)._setTimeout(at(this,No,Bc).bind(this),b(this,gs)))};var oi,ai,ms;class wh{constructor(t){X(this,oi);X(this,ai);X(this,ms);k(this,oi,t),k(this,ms,!1),k(this,ai,e=>{this._poll(e,b(this,oi))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){b(this,ms)||(k(this,ms,!0),b(this,ai).call(this,-2),b(this,oi).on("block",b(this,ai)))}stop(){b(this,ms)&&(k(this,ms,!1),b(this,oi).off("block",b(this,ai)))}pause(t){this.stop()}resume(){this.start()}}oi=new WeakMap,ai=new WeakMap,ms=new WeakMap;var Oo,Lr;class wN extends wh{constructor(e,n){super(e);X(this,Oo);X(this,Lr);k(this,Oo,n),k(this,Lr,-2)}pause(e){e&&k(this,Lr,-2),super.pause(e)}async _poll(e,n){const s=await n.getBlock(b(this,Oo));s!=null&&(b(this,Lr)===-2?k(this,Lr,s.number):s.number>b(this,Lr)&&(n.emit(b(this,Oo),s.number),k(this,Lr,s.number)))}}Oo=new WeakMap,Lr=new WeakMap;var fu;class AN extends wh{constructor(e,n){super(e);X(this,fu);k(this,fu,Of(n))}async _poll(e,n){throw new Error("@TODO")}}fu=new WeakMap;var To;class bN extends wh{constructor(e,n){super(e);X(this,To);k(this,To,n)}async _poll(e,n){const s=await n.getTransactionReceipt(b(this,To));s&&n.emit(b(this,To),s)}}To=new WeakMap;var Pr,Bo,Co,ys,Tn,hu,Tm;class Ah{constructor(t,e){X(this,hu);X(this,Pr);X(this,Bo);X(this,Co);X(this,ys);X(this,Tn);k(this,Pr,t),k(this,Bo,Of(e)),k(this,Co,at(this,hu,Tm).bind(this)),k(this,ys,!1),k(this,Tn,-2)}start(){b(this,ys)||(k(this,ys,!0),b(this,Tn)===-2&&b(this,Pr).getBlockNumber().then(t=>{k(this,Tn,t)}),b(this,Pr).on("block",b(this,Co)))}stop(){b(this,ys)&&(k(this,ys,!1),b(this,Pr).off("block",b(this,Co)))}pause(t){this.stop(),t&&k(this,Tn,-2)}resume(){this.start()}}Pr=new WeakMap,Bo=new WeakMap,Co=new WeakMap,ys=new WeakMap,Tn=new WeakMap,hu=new WeakSet,Tm=async function(t){if(b(this,Tn)===-2)return;const e=Of(b(this,Bo));e.fromBlock=b(this,Tn)+1,e.toBlock=t;const n=await b(this,Pr).getLogs(e);if(n.length===0){b(this,Tn)<t-60&&k(this,Tn,t-60);return}for(const s of n)b(this,Pr).emit(b(this,Bo),s),k(this,Tn,s.blockNumber)};const EN=BigInt(2),_N=10;function _c(r){return r&&typeof r.then=="function"}function Cc(r,t){return r+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class Bm{constructor(t){W(this,"name");At(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function RN(r){return JSON.parse(JSON.stringify(r))}function Tf(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function $l(r,t){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(Kt(r,32)){const e=r.toLowerCase();return{type:"transaction",tag:Cc("tx",{hash:e}),hash:e}}if(r.orphan){const e=r;return{type:"orphan",tag:Cc("orphan",e),filter:RN(e)}}if(r.address||r.topics){const e=r,n={topics:(e.topics||[]).map(s=>s==null?null:Array.isArray(s)?Tf(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(e.address){const s=[],i=[],o=a=>{Kt(a)?s.push(a):i.push((async()=>{s.push(await an(a,t))})())};Array.isArray(e.address)?e.address.forEach(o):o(e.address),i.length&&await Promise.all(i),n.address=Tf(s.map(a=>a.toLowerCase()))}return{filter:n,tag:Cc("event",n),type:"event"}}$(!1,"unknown ProviderEvent","event",r)}function ql(){return new Date().getTime()}const SN={cacheTimeout:250,pollingInterval:4e3};var Ze,ws,Ye,ko,Rn,ci,As,Mr,$a,Bn,Lo,Po,Tt,wn,Bf,Cf,pa,kf,ga,kc;class vN{constructor(t,e){X(this,Tt);X(this,Ze);X(this,ws);X(this,Ye);X(this,ko);X(this,Rn);X(this,ci);X(this,As);X(this,Mr);X(this,$a);X(this,Bn);X(this,Lo);X(this,Po);if(k(this,Po,Object.assign({},SN,e||{})),t==="any")k(this,ci,!0),k(this,Rn,null);else if(t){const n=pr.from(t);k(this,ci,!1),k(this,Rn,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else k(this,ci,!1),k(this,Rn,null);k(this,Mr,-1),k(this,As,new Map),k(this,Ze,new Map),k(this,ws,new Map),k(this,Ye,null),k(this,ko,!1),k(this,$a,1),k(this,Bn,new Map),k(this,Lo,!1)}get pollingInterval(){return b(this,Po).pollingInterval}get provider(){return this}get plugins(){return Array.from(b(this,ws).values())}attachPlugin(t){if(b(this,ws).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return b(this,ws).set(t.name,t.connect(this)),this}getPlugin(t){return b(this,ws).get(t)||null}get disableCcipRead(){return b(this,Lo)}set disableCcipRead(t){k(this,Lo,!!t)}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const s=t.to.toLowerCase(),i=e.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],f=c.replace("{sender}",s).replace("{data}",i),h=new Is(f);c.indexOf("{data}")===-1&&(h.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:a,urls:n});let y="unknown error",_;try{_=await h.send()}catch(A){o.push(A.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:{error:A}});continue}try{const A=_.bodyJson;if(A.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:A}),A.data;A.message&&(y=A.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:A})}catch{}it(_.statusCode<400||_.statusCode>=500,`response not found during CCIP fetch: ${y}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:y}}),o.push(y)}it(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:o}})}_wrapBlock(t,e){return new KI(uN(t),this)}_wrapLog(t,e){return new ec(aN(t),this)}_wrapTransactionReceipt(t,e){return new mm(dN(t),this)}_wrapTransactionResponse(t,e){return new ka(Om(t),this)}_detectNetwork(){it(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){it(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=Ot(await at(this,Tt,wn).call(this,{method:"getBlockNumber"}),"%response");return b(this,Mr)>=0&&k(this,Mr,t),t}_getAddress(t){return an(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(Kt(t))return Kt(t,32)?t:Qn(t);if(typeof t=="bigint"&&(t=Ot(t,"blockTag")),typeof t=="number")return t>=0?Qn(t):b(this,Mr)>=0?Qn(b(this,Mr)+t):this.getBlockNumber().then(e=>Qn(e+t));$(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?Tf(c.map(f=>f.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,s=(c,f,h)=>{let y;switch(c.length){case 0:break;case 1:y=c[0];break;default:c.sort(),y=c}if(n&&(f!=null||h!=null))throw new Error("invalid filter");const _={};return y&&(_.address=y),e.length&&(_.topics=e),f&&(_.fromBlock=f),h&&(_.toBlock=h),n&&(_.blockHash=n),_};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(t){const e=ru(t),n=[];if(["to","from"].forEach(s=>{if(e[s]==null)return;const i=an(e[s],this);_c(i)?n.push(async function(){e[s]=await i}()):e[s]=i}),e.blockTag!=null){const s=this._getBlockTag(e.blockTag);_c(s)?n.push(async function(){e.blockTag=await s}()):e.blockTag=s}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(b(this,Rn)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw b(this,Rn)===s&&k(this,Rn,null),i}})();return k(this,Rn,s),(await s).clone()}const t=b(this,Rn),[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(b(this,ci)?(this.emit("network",n,e),b(this,Rn)===t&&k(this,Rn,Promise.resolve(n))):it(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await rn({_block:at(this,Tt,kf).call(this,"latest",!1),gasPrice:(async()=>{try{const h=await at(this,Tt,wn).call(this,{method:"getGasPrice"});return gt(h,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const h=await at(this,Tt,wn).call(this,{method:"getPriorityFee"});return gt(h,"%response")}catch{}return null})()});let a=null,c=null;const f=this._wrapBlock(s,t);return f&&f.baseFeePerGas&&(c=o??BigInt("1000000000"),a=f.baseFeePerGas*EN+c),new b0(i,a,c)},n=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new Is(n.url),i=await n.processFunc(e,this,s);return new b0(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return _c(e)&&(e=await e),gt(await at(this,Tt,wn).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:n}=await rn({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await at(this,Tt,Cf).call(this,at(this,Tt,Bf).call(this,e,n,t.enableCcipRead?0:-1))}async getBalance(t,e){return gt(await at(this,Tt,pa).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return Ot(await at(this,Tt,pa).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return dt(await at(this,Tt,pa).call(this,{method:"getCode"},t,e))}async getStorage(t,e,n){const s=gt(e,"position");return dt(await at(this,Tt,pa).call(this,{method:"getStorage",position:s},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:s}=await rn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=jc.from(t);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(e)}async getBlock(t,e){const{network:n,params:s}=await rn({network:this.getNetwork(),params:at(this,Tt,kf).call(this,t,!!e)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(t){const{network:e,params:n}=await rn({network:this.getNetwork(),params:at(this,Tt,wn).call(this,{method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await rn({network:this.getNetwork(),params:at(this,Tt,wn).call(this,{method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await at(this,Tt,wn).call(this,{method:"getTransaction",hash:t});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await rn({network:this.getNetwork(),result:at(this,Tt,wn).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:dt(e)}async getLogs(t){let e=this._getFilter(t);_c(e)&&(e=await e);const{network:n,params:s}=await rn({network:this.getNetwork(),params:at(this,Tt,wn).call(this,{method:"getLogs",filter:e})});return s.map(i=>this._wrapLog(i,n))}_getProvider(t){it(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await iu.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=Ft(t);const e=Rf(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await iu.getEnsAddress(this),i=await new ba(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===va)return null;const a=await new ba(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(a)!==t?null:a}catch(n){if(ze(n,"BAD_DATA")&&n.value==="0x"||ze(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const s=e??1;return s===0?this.getTransactionReceipt(t):new Promise(async(i,o)=>{let a=null;const c=async f=>{try{const h=await this.getTransactionReceipt(t);if(h!=null&&f-h.blockNumber+1>=s){i(h),a&&(clearTimeout(a),a=null);return}}catch(h){console.log("EEE",h)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Zt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){it(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=b(this,Bn).get(t);e&&(e.timer&&clearTimeout(e.timer),b(this,Bn).delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=sa(this,$a)._++,s=()=>{b(this,Bn).delete(n),t()};if(this.paused)b(this,Bn).set(n,{timer:null,func:s,time:e});else{const i=setTimeout(s,e);b(this,Bn).set(n,{timer:i,func:s,time:ql()})}return n}_forEachSubscriber(t){for(const e of b(this,Ze).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Bm(t.type);case"block":{const e=new yN(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new wN(this,t.type);case"event":return new Ah(this,t.filter);case"transaction":return new bN(this,t.hash);case"orphan":return new AN(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of b(this,Ze).values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),b(this,Ye)!=null&&e.pause(b(this,Ye));break}}async on(t,e){const n=await at(this,Tt,kc).call(this,t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,b(this,Ye)!=null&&n.subscriber.pause(b(this,Ye))),this}async once(t,e){const n=await at(this,Tt,kc).call(this,t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,b(this,Ye)!=null&&n.subscriber.pause(b(this,Ye))),this}async emit(t,...e){const n=await at(this,Tt,ga).call(this,t,e);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new qp(this,o?null:i,t);try{i.call(this,...e,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),b(this,Ze).delete(n.tag)),s>0}async listenerCount(t){if(t){const n=await at(this,Tt,ga).call(this,t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of b(this,Ze).values())e+=n.length;return e}async listeners(t){if(t){const n=await at(this,Tt,ga).call(this,t);return n?n.listeners.map(({listener:s})=>s):[]}let e=[];for(const{listeners:n}of b(this,Ze).values())e=e.concat(n.map(({listener:s})=>s));return e}async off(t,e){const n=await at(this,Tt,ga).call(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),b(this,Ze).delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:s}=await at(this,Tt,kc).call(this,t);n&&s.stop(),b(this,Ze).delete(e)}else for(const[e,{started:n,subscriber:s}]of b(this,Ze))n&&s.stop(),b(this,Ze).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return b(this,ko)}destroy(){this.removeAllListeners();for(const t of b(this,Bn).keys())this._clearTimeout(t);k(this,ko,!0)}get paused(){return b(this,Ye)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(k(this,Mr,-1),b(this,Ye)!=null){if(b(this,Ye)==!!t)return;it(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),k(this,Ye,!!t);for(const e of b(this,Bn).values())e.timer&&clearTimeout(e.timer),e.time=ql()-e.time}resume(){if(b(this,Ye)!=null){this._forEachSubscriber(t=>t.resume()),k(this,Ye,null);for(const t of b(this,Bn).values()){let e=t.time;e<0&&(e=0),t.time=ql(),setTimeout(t.func,e)}}}}Ze=new WeakMap,ws=new WeakMap,Ye=new WeakMap,ko=new WeakMap,Rn=new WeakMap,ci=new WeakMap,As=new WeakMap,Mr=new WeakMap,$a=new WeakMap,Bn=new WeakMap,Lo=new WeakMap,Po=new WeakMap,Tt=new WeakSet,wn=async function(t){const e=b(this,Po).cacheTimeout;if(e<0)return await this._perform(t);const n=Cc(t.method,t);let s=b(this,As).get(n);return s||(s=this._perform(t),b(this,As).set(n,s),setTimeout(()=>{b(this,As).get(n)===s&&b(this,As).delete(n)},e)),await s},Bf=async function(t,e,n){it(n<_N,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const s=ru(t);try{return dt(await this._perform({method:"call",transaction:s,blockTag:e}))}catch(i){if(!this.disableCcipRead&&eh(i)&&i.data&&n>=0&&e==="latest"&&s.to!=null&&oe(i.data,0,4)==="0x556f1830"){const o=i.data,a=await an(s.to,this);let c;try{c=TN(oe(i.data,4))}catch(y){it(!1,y.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}it(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const f=await this.ccipReadFetch(s,c.calldata,c.urls);it(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const h={to:a,data:ae([c.selector,ON([f,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const y=await at(this,Tt,Bf).call(this,h,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:y}),y}catch(y){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:y}),y}}throw i}},Cf=async function(t){const{value:e}=await rn({network:this.getNetwork(),value:t});return e},pa=async function(t,e,n){let s=this._getAddress(e),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await at(this,Tt,Cf).call(this,at(this,Tt,wn).call(this,Object.assign(t,{address:s,blockTag:i})))},kf=async function(t,e){if(Kt(t,32))return await at(this,Tt,wn).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await at(this,Tt,wn).call(this,{method:"getBlock",blockTag:n,includeTransactions:e})},ga=async function(t,e){let n=await $l(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await $l({orphan:"drop-log",log:e[0]},this)),b(this,Ze).get(n.tag)||null},kc=async function(t){const e=await $l(t,this),n=e.tag;let s=b(this,Ze).get(n);return s||(s={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},b(this,Ze).set(n,s)),s};function xN(r,t){try{const e=Lf(r,t);if(e)return Qc(e)}catch{}return null}function Lf(r,t){if(r==="0x")return null;try{const e=Ot(oe(r,t,t+32)),n=Ot(oe(r,e,e+32));return oe(r,e+32,e+32+n)}catch{}return null}function N0(r){const t=ke(r);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function IN(r){if(r.length%32===0)return r;const t=new Uint8Array(Math.ceil(r.length/32)*32);return t.set(r),t}const NN=new Uint8Array([]);function ON(r){const t=[];let e=0;for(let n=0;n<r.length;n++)t.push(NN),e+=32;for(let n=0;n<r.length;n++){const s=Nt(r[n]);t[n]=N0(e),t.push(N0(s.length)),t.push(IN(s)),e+=32+Math.ceil(s.length/32)*32}return ae(t)}const O0="0x0000000000000000000000000000000000000000000000000000000000000000";function TN(r){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};it(Qi(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=oe(r,0,32);it(oe(e,0,12)===oe(O0,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=oe(e,12);try{const n=[],s=Ot(oe(r,32,64)),i=Ot(oe(r,s,s+32)),o=oe(r,s+32);for(let a=0;a<i;a++){const c=xN(o,a*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{it(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Lf(r,64);if(n==null)throw new Error("abort");t.calldata=n}catch{it(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}it(oe(r,100,128)===oe(O0,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=oe(r,96,100);try{const n=Lf(r,128);if(n==null)throw new Error("abort");t.extraData=n}catch{it(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function ks(r,t){if(r.provider)return r.provider;it(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function T0(r,t){let e=ru(t);if(e.to!=null&&(e.to=an(e.to,r)),e.from!=null){const n=e.from;e.from=Promise.all([r.getAddress(),an(n,r)]).then(([s,i])=>($(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else e.from=r.getAddress();return await rn(e)}class BN{constructor(t){W(this,"provider");At(this,{provider:t||null})}async getNonce(t){return ks(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await T0(this,t)}async populateTransaction(t){const e=ks(this,"populateTransaction"),n=await T0(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=gt(n.chainId);$(o===s.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?$(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&i&&$(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await e.getFeeData();it(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await e.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(it(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):it(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await rn(n)}async populateAuthorization(t){const e=Object.assign({},t);return e.chainId==null&&(e.chainId=(await ks(this,"getNetwork").getNetwork()).chainId),e.nonce==null&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return ks(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return ks(this,"call").call(await this.populateCall(t))}async resolveName(t){return await ks(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=ks(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const s=jc.from(n);return await e.broadcastTransaction(await this.signTransaction(s))}authorize(t){it(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function CN(r){return JSON.parse(JSON.stringify(r))}var nn,lr,ui,bs,li,Mo,Os,Pf,Mf;class Cm{constructor(t){X(this,Os);X(this,nn);X(this,lr);X(this,ui);X(this,bs);X(this,li);X(this,Mo);k(this,nn,t),k(this,lr,null),k(this,ui,at(this,Os,Pf).bind(this)),k(this,bs,!1),k(this,li,null),k(this,Mo,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){b(this,bs)||(k(this,bs,!0),at(this,Os,Pf).call(this,-2))}stop(){b(this,bs)&&(k(this,bs,!1),k(this,Mo,!0),at(this,Os,Mf).call(this),b(this,nn).off("block",b(this,ui)))}pause(t){t&&at(this,Os,Mf).call(this),b(this,nn).off("block",b(this,ui))}resume(){this.start()}}nn=new WeakMap,lr=new WeakMap,ui=new WeakMap,bs=new WeakMap,li=new WeakMap,Mo=new WeakMap,Os=new WeakSet,Pf=async function(t){try{b(this,lr)==null&&k(this,lr,this._subscribe(b(this,nn)));let e=null;try{e=await b(this,lr)}catch(i){if(!ze(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){k(this,lr,null),b(this,nn)._recoverSubscriber(this,this._recover(b(this,nn)));return}const n=await b(this,nn).getNetwork();if(b(this,li)||k(this,li,n),b(this,li).chainId!==n.chainId)throw new Error("chaid changed");if(b(this,Mo))return;const s=await b(this,nn).send("eth_getFilterChanges",[e]);await this._emitResults(b(this,nn),s)}catch(e){console.log("@TODO",e)}b(this,nn).once("block",b(this,ui))},Mf=function(){const t=b(this,lr);t&&(k(this,lr,null),t.then(e=>{b(this,nn).destroyed||b(this,nn).send("eth_uninstallFilter",[e])}))};var fi;class kN extends Cm{constructor(e,n){super(e);X(this,fi);k(this,fi,CN(n))}_recover(e){return new Ah(e,b(this,fi))}async _subscribe(e){return await e.send("eth_newFilter",[b(this,fi)])}async _emitResults(e,n){for(const s of n)e.emit(b(this,fi),e._wrapLog(s,e._network))}}fi=new WeakMap;class LN extends Cm{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const PN="bigint,boolean,function,number,string,symbol".split(/,/g);function Lc(r){if(r==null||PN.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(Lc);if(typeof r=="object")return Object.keys(r).reduce((t,e)=>(t[e]=r[e],t),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function MN(r){return new Promise(t=>{setTimeout(t,r)})}function Ci(r){return r&&r.toLowerCase()}function B0(r){return r&&typeof r.pollingInterval=="number"}const km={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Wl extends BN{constructor(e,n){super(e);W(this,"address");n=Ft(n),At(this,{address:n})}connect(e){it(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=Lc(e),s=[];if(n.from){const o=n.from;s.push((async()=>{const a=await an(o,this.provider);$(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;s.push((async()=>{n.to=await an(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const f=async()=>{try{const h=await this.provider.getTransaction(s);if(h!=null){i(h.replaceableTransaction(n));return}}catch(h){if(ze(h,"CANCELLED")||ze(h,"BAD_DATA")||ze(h,"NETWORK_ERROR")||ze(h,"UNSUPPORTED_OPERATION")){h.info==null&&(h.info={}),h.info.sendTransactionHash=s,o(h);return}if(ze(h,"INVALID_ARGUMENT")&&(c++,h.info==null&&(h.info={}),h.info.sendTransactionHash=s,c>10)){o(h);return}this.provider.emit("error",Zt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:h}))}this.provider._setTimeout(()=>{f()},a.pop()||4e3)};f()})}async signTransaction(e){const n=Lc(e);if(n.from){const i=await an(n.from,this.provider);$(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const n=typeof e=="string"?Vr(e):e;return await this.provider.send("personal_sign",[dt(n),this.address.toLowerCase()])}async signTypedData(e,n,s){const i=Lc(s),o=await nu.resolveNames(e,n,i,async a=>{const c=await an(a);return $(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(nu.getPayload(o.domain,n,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?Vr(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),dt(n)])}}var hi,Uo,Ur,fr,Wn,Cn,fn,qa,Uf;class UN extends vN{constructor(e,n){super(e,n);X(this,qa);X(this,hi);X(this,Uo);X(this,Ur);X(this,fr);X(this,Wn);X(this,Cn);X(this,fn);k(this,Uo,1),k(this,hi,Object.assign({},km,n||{})),k(this,Ur,[]),k(this,fr,null),k(this,Cn,null),k(this,fn,null);{let i=null;const o=new Promise(a=>{i=a});k(this,Wn,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?($(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&e!=null&&k(this,Cn,pr.from(e))):s&&($(e==null||s.matches(e),"staticNetwork MUST match network object","options",n),k(this,Cn,s))}_getOption(e){return b(this,hi)[e]}get _network(){return it(b(this,Cn),"network is not available yet","NETWORK_ERROR"),b(this,Cn)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&gt(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(b(this,Cn))return b(this,Cn)}else return e;return b(this,fn)?await b(this,fn):this.ready?(k(this,fn,(async()=>{try{const n=pr.from(gt(await this.send("eth_chainId",[])));return k(this,fn,null),n}catch(n){throw k(this,fn,null),n}})()),await b(this,fn)):(k(this,fn,(async()=>{const n={id:sa(this,Uo)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],k(this,fn,null)}catch(i){throw k(this,fn,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return pr.from(gt(s.result));throw this.getRpcError(n,s)})()),await b(this,fn))}_start(){b(this,Wn)==null||b(this,Wn).resolve==null||(b(this,Wn).resolve(),k(this,Wn,null),(async()=>{for(;b(this,Cn)==null&&!this.destroyed;)try{k(this,Cn,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Zt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await MN(1e3)}at(this,qa,Uf).call(this)})())}async _waitUntilReady(){if(b(this,Wn)!=null)return await b(this,Wn).promise}_getSubscriber(e){return e.type==="pending"?new LN(this):e.type==="event"?this._getOption("polling")?new Ah(this,e.filter):new kN(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Bm("orphan"):super._getSubscriber(e)}get ready(){return b(this,Wn)==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=Qn(gt(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(n[s]=dt(e[s]))}),e.accessList&&(n.accessList=Si(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(n.authorizationList=e.authorizationList.map(s=>{const i=Pg(s);return{address:i.address,nonce:Qn(i.nonce),chainId:Qn(i.chainId),yParity:Qn(i.signature.yParity),r:Qn(i.signature.r),s:Qn(i.signature.s)}})),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ci(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ci(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ci(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ci(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Ci):e.filter.address=Ci(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:s}=e,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Zt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return Zt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=Df(i),f=Ca.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],c?c.data:null);return f.info={error:i,payload:e},f}const o=JSON.stringify(FN(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Zt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Zt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Zt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Zt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Zt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Zt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):Zt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(Zt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=sa(this,Uo)._++,i=new Promise((o,a)=>{b(this,Ur).push({resolve:o,reject:a,payload:{method:e,params:n,id:s,jsonrpc:"2.0"}})});return at(this,qa,Uf).call(this),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new Wl(this,i[e])}const{accounts:s}=await rn({network:this.getNetwork(),accounts:n});e=Ft(e);for(const i of s)if(Ft(i)===e)return new Wl(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Wl(this,n))}destroy(){b(this,fr)&&(clearTimeout(b(this,fr)),k(this,fr,null));for(const{payload:e,reject:n}of b(this,Ur))n(Zt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));k(this,Ur,[]),super.destroy()}}hi=new WeakMap,Uo=new WeakMap,Ur=new WeakMap,fr=new WeakMap,Wn=new WeakMap,Cn=new WeakMap,fn=new WeakMap,qa=new WeakSet,Uf=function(){if(b(this,fr))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");k(this,fr,setTimeout(()=>{k(this,fr,null);const n=b(this,Ur);for(k(this,Ur,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==b(this,hi).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(o=>o.payload)).length>b(this,hi).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:f}of s){if(this.destroyed){c(Zt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const h=o.filter(y=>y.id===f.id)[0];if(h==null){const y=Zt("missing response for request","BAD_DATA",{value:o,info:{payload:f}});this.emit("error",y),c(y);continue}if("error"in h){c(this.getRpcError(f,h));continue}a(h.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},e))};var Es;class DN extends UN{constructor(e,n){super(e,n);X(this,Es);let s=this._getOption("pollingInterval");s==null&&(s=km.pollingInterval),k(this,Es,s)}_getSubscriber(e){const n=super._getSubscriber(e);return B0(n)&&(n.pollingInterval=b(this,Es)),n}get pollingInterval(){return b(this,Es)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");k(this,Es,e),this._forEachSubscriber(n=>{B0(n)&&(n.pollingInterval=b(this,Es))})}}Es=new WeakMap;function Df(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&Kt(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const t in r){const e=Df(r[t]);if(e)return e}return null}if(typeof r=="string")try{return Df(JSON.parse(r))}catch{}return null}function Ff(r,t){if(r!=null){if(typeof r.message=="string"&&t.push(r.message),typeof r=="object")for(const e in r)Ff(r[e],t);if(typeof r=="string")try{return Ff(JSON.parse(r),t)}catch{}}}function FN(r){const t=[];return Ff(r,t),t}var Do,Fo;const Gs=class Gs extends DN{constructor(e,n,s){const i=Object.assign({},s??{},{batchMaxCount:1});$(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(n,i);X(this,Do);X(this,Fo);k(this,Fo,null),s&&s.providerInfo&&k(this,Fo,s.providerInfo),k(this,Do,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const f=await e.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:f}),f}catch(f){const h=new Error(f.message);throw h.code=f.code,h.data=f.data,h.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:h}),h}})}get providerInfo(){return b(this,Fo)}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){$(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await b(this,Do).call(this,e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await b(this,Do).call(this,"eth_requestAccounts",[])}catch(n){const s=n.payload;throw this.getRpcError(s,{id:s.id,error:n})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Gs(e.provider);const n=e.window?e.window:typeof window<"u"?window:null;if(n==null)return null;const s=e.anyProvider;if(s&&n.ethereum)return new Gs(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const f=_=>{c.push(_.detail),s&&h()},h=()=>{if(clearTimeout(y),c.length)if(e&&e.filter){const _=e.filter(c.map(A=>Object.assign({},A.info)));if(_==null)o(null);else if(_ instanceof Gs)o(_);else{let A=null;if(_.uuid&&(A=c.filter(E=>_.uuid===E.info.uuid)[0]),A){const{provider:O,info:E}=A;o(new Gs(O,void 0,{providerInfo:E}))}else a(Zt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:_}))}}else{const{provider:_,info:A}=c[0];o(new Gs(_,void 0,{providerInfo:A}))}else o(null);n.removeEventListener("eip6963:announceProvider",f)},y=setTimeout(()=>{h()},i);n.addEventListener("eip6963:announceProvider",f),n.dispatchEvent(new Event("eip6963:requestProvider"))})}};Do=new WeakMap,Fo=new WeakMap;let C0=Gs;export{C0 as B,JN as C,jN as L,Et as P,$c as S,ki as T,ZN as p,Fy as r};
